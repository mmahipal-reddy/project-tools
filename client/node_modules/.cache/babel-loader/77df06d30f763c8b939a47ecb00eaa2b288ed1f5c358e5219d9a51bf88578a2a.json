{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import apiClient from'../config/api';import toast from'react-hot-toast';import{saveDraftQualificationStep,loadDraftQualificationStep,deleteDraftQualificationStep}from'../utils/draftStorage';import{getErrorMessage,handleError}from'../utils/errorHandler';import{sanitizeObject}from'../utils/security';import{Search,Info,Menu,Send,Save,LogOut,BookOpen,CheckCircle,XCircle,X}from'lucide-react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/Sidebar';import useSidebarWidth from'../hooks/useSidebarWidth';import'../styles/ProjectSetup.css';import'../styles/Sidebar.css';import'../styles/GlobalHeader.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectQualificationStepSetup=()=>{const navigate=useNavigate();const{user,hasPermission,logout}=useAuth();const{register,handleSubmit,setValue,watch,formState:{errors},trigger,setError,clearErrors,reset}=useForm();const[loading,setLoading]=useState(false);const[fieldErrors,setFieldErrors]=useState({});const[submitting,setSubmitting]=useState(false);const[saving,setSaving]=useState(false);const[showPublishResultsModal,setShowPublishResultsModal]=useState(false);const[publishResults,setPublishResults]=useState(null);const[projects,setProjects]=useState([]);const[loadingProjects,setLoadingProjects]=useState(false);const[projectSearchTerm,setProjectSearchTerm]=useState('');const[projectObjectives,setProjectObjectives]=useState([]);const[loadingProjectObjectives,setLoadingProjectObjectives]=useState(false);const[qualificationSteps,setQualificationSteps]=useState([]);const[loadingQualificationSteps,setLoadingQualificationSteps]=useState(false);const[qualificationStepSearchTerm,setQualificationStepSearchTerm]=useState('');const[sidebarOpen,setSidebarOpen]=useState(true);const sidebarWidth=useSidebarWidth(sidebarOpen);const[selectedProject,setSelectedProject]=useState(null);const[showProjectDropdown,setShowProjectDropdown]=useState(false);const[showQualificationStepDropdown,setShowQualificationStepDropdown]=useState(false);const dataLoadedRef=useRef(false);useEffect(()=>{// Load existing qualification step data from server storage (for editing)\nconst loadExistingData=async()=>{// Prevent duplicate loading in React StrictMode\nif(dataLoadedRef.current)return;try{const data=await loadDraftQualificationStep();if(data){dataLoadedRef.current=true;// Populate form with existing data\nObject.keys(data).forEach(key=>{if(data[key]!==null&&data[key]!==undefined){setValue(key,data[key]);}});if(data.project){setSelectedProject(data.project);setProjectSearchTerm(data.project);fetchProjectObjectives(data.project);}if(data.qualificationStep){setQualificationStepSearchTerm(data.qualificationStep);}toast.success('Qualification step data loaded for editing');}else{// Clear form and set default values for new qualification step\nreset();setDefaultValues();}}catch(error){const errorMessage=handleError(error,'ProjectQualificationStepSetup - loadQualificationStepData');toast.error(errorMessage);// Reset form to defaults\nreset();setDefaultValues();}};loadExistingData();},[setValue,reset]);// Search projects in Salesforce when search term changes\nuseEffect(()=>{const searchProjects=async()=>{if(!projectSearchTerm||projectSearchTerm.trim()===''){setProjects([]);return;}setLoadingProjects(true);try{const response=await apiClient.get(\"/salesforce/search-projects?search=\".concat(encodeURIComponent(projectSearchTerm)));if(response.data.success){setProjects(response.data.projects||[]);setShowProjectDropdown(true);}}catch(error){handleError(error,'ProjectQualificationStepSetup - searchProjects');setProjects([]);}finally{setLoadingProjects(false);}};// Debounce search - wait 300ms after user stops typing\nconst timeoutId=setTimeout(()=>{searchProjects();},300);return()=>clearTimeout(timeoutId);},[projectSearchTerm]);const setDefaultValues=()=>{// Set default values for dropdowns and other fields\nsetValue('projectQualificationStepStatus','Draft');setValue('numberOfAttempts','1');setValue('funnel','');};const fetchProjectObjectives=async projectName=>{if(!projectName){setProjectObjectives([]);return;}setLoadingProjectObjectives(true);try{const response=await apiClient.get(\"/salesforce/project-objectives?project=\".concat(encodeURIComponent(projectName)));if(response.data.success){setProjectObjectives(response.data.projectObjectives||[]);}}catch(error){handleError(error,'ProjectQualificationStepSetup - fetchProjectObjectives');setProjectObjectives([]);}finally{setLoadingProjectObjectives(false);}};// Fetch qualification steps from Salesforce when search term changes - filter by selected project\nuseEffect(()=>{// Don't search if search term is empty\nif(!qualificationStepSearchTerm||qualificationStepSearchTerm.trim()===''){setQualificationSteps([]);return;}// Get the selected project name for filtering - check multiple sources including form field\nconst watchedProjectValue=watch('project');const selectedProjectName=selectedProject||projectSearchTerm||watchedProjectValue;// Don't search if no project is selected (qualification steps must be filtered by project)\nif(!selectedProjectName||selectedProjectName.trim()===''){setQualificationSteps([]);return;}const fetchQualificationSteps=async()=>{setLoadingQualificationSteps(true);try{// Build query parameters - always include search term and project\nconst params=new URLSearchParams();params.append('search',qualificationStepSearchTerm);// Re-check project name inside async function\nconst currentWatchedProject=watch('project');const currentProjectName=selectedProject||projectSearchTerm||currentWatchedProject;if(currentProjectName&&currentProjectName.trim()!==''){params.append('project',currentProjectName);}console.log('[ProjectQualificationStepSetup] Searching qualification steps:',{searchTerm:qualificationStepSearchTerm,project:currentProjectName,url:\"/salesforce/qualification-steps?\".concat(params.toString())});const response=await apiClient.get(\"/salesforce/qualification-steps?\".concat(params.toString()));if(response.data.success){var _response$data$qualif;console.log('[ProjectQualificationStepSetup] Qualification steps found:',((_response$data$qualif=response.data.qualificationSteps)===null||_response$data$qualif===void 0?void 0:_response$data$qualif.length)||0);setQualificationSteps(response.data.qualificationSteps||[]);setShowQualificationStepDropdown(true);}else{console.warn('[ProjectQualificationStepSetup] API returned success=false');setQualificationSteps([]);}}catch(error){console.error('[ProjectQualificationStepSetup] Error fetching qualification steps:',error);handleError(error,'ProjectQualificationStepSetup - fetchQualificationSteps');setQualificationSteps([]);}finally{setLoadingQualificationSteps(false);}};// Debounce search - wait 300ms after user stops typing\nconst timeoutId=setTimeout(()=>{fetchQualificationSteps();},300);return()=>clearTimeout(timeoutId);},[qualificationStepSearchTerm,selectedProject,projectSearchTerm,watch]);const handleProjectSelect=projectName=>{setSelectedProject(projectName);setValue('project',projectName);setProjectSearchTerm(projectName);setShowProjectDropdown(false);// Clear project objective when project changes\nsetValue('projectObjective','');setProjectObjectives([]);// Clear qualification step when project changes (since it should be filtered by project)\nsetValue('qualificationStep','');setQualificationStepSearchTerm('');setQualificationSteps([]);// Fetch project objectives for the selected project\nif(projectName&&projectName.trim()!==''){fetchProjectObjectives(projectName);}};// Watch for project field changes and fetch project objectives when project is finalized\nconst watchedProject=watch('project');useEffect(()=>{// Debounce fetching project objectives when user types\nconst timeoutId=setTimeout(()=>{if(watchedProject&&watchedProject.trim()!==''){// Only fetch if the project is different from the currently selected one\nif(watchedProject!==selectedProject){setSelectedProject(watchedProject);setValue('projectObjective','');setProjectObjectives([]);// Clear qualification step when project changes (since it should be filtered by project)\nsetValue('qualificationStep','');setQualificationStepSearchTerm('');setQualificationSteps([]);fetchProjectObjectives(watchedProject);}}else if(!watchedProject||watchedProject.trim()===''){// Project cleared - clear objectives and qualification steps\nif(selectedProject!==null){setSelectedProject(null);setProjectObjectives([]);setValue('projectObjective','');setValue('qualificationStep','');setQualificationStepSearchTerm('');setQualificationSteps([]);}}},500);// Wait 500ms after user stops typing\nreturn()=>clearTimeout(timeoutId);},[watchedProject,selectedProject]);const handleQualificationStepSelect=stepName=>{setValue('qualificationStep',stepName);setQualificationStepSearchTerm(stepName);setShowQualificationStepDropdown(false);};const handleSave=async data=>{if(!hasPermission('create_project')){toast.error('You do not have permission to save qualification steps');return;}setSaving(true);try{const allFormData=watch();const completeData=_objectSpread(_objectSpread({},allFormData),data);// Save to backend API\nconst response=await apiClient.post('/qualification-steps',completeData);// Also save to localStorage for editing\nawait saveDraftQualificationStep(completeData);toast.success('Qualification step saved successfully!');}catch(error){const errorMessage=handleError(error,'ProjectQualificationStepSetup - saveQualificationStep');toast.error(errorMessage);}finally{setSaving(false);}};const handlePublish=async()=>{if(!hasPermission('create_project')){toast.error('You do not have permission to publish qualification steps');return;}setSubmitting(true);try{// Get all form values\nconst allFormData=watch();// Include ALL form data - only skip undefined values\nconst cleanedData={};Object.keys(allFormData).forEach(key=>{const value=allFormData[key];// Include all values except undefined (keep null, empty strings, etc.)\nif(value!==undefined){if(typeof value==='string'){cleanedData[key]=value.trim();}else{cleanedData[key]=value;}}});console.log('Publishing qualification step - All fields:',{totalFields:Object.keys(cleanedData).length,fields:Object.keys(cleanedData)});console.log('Publishing qualification step to Salesforce with data:',{totalFields:Object.keys(cleanedData).length,fields:Object.keys(cleanedData),sampleData:{projectQualificationStepName:cleanedData.projectQualificationStepName,project:cleanedData.project,qualificationStep:cleanedData.qualificationStep}});// Sanitize data before sending to server\nconst sanitizedData=sanitizeObject(cleanedData);// Call Salesforce qualification step creation API\nconst response=await apiClient.post('/salesforce/create-qualification-step',sanitizedData,{timeout:300000// 5 minutes timeout\n});// Check if Salesforce creation was successful\nif(response.data.success){const stepName=response.data.objectName||cleanedData.projectQualificationStepName||cleanedData.name||'Qualification Step';setPublishResults({published:[{type:'Qualification Step',name:stepName,id:response.data.salesforceId}],failed:[]});setShowPublishResultsModal(true);console.log('Salesforce qualification step created:',{salesforceId:response.data.salesforceId,objectType:response.data.objectType});// Clear localStorage after successful publish\nawait deleteDraftQualificationStep();}else{setPublishResults({published:[],failed:[{type:'Qualification Step',name:cleanedData.projectQualificationStepName||cleanedData.name||'Qualification Step',error:getErrorMessage(response.data)}]});setShowPublishResultsModal(true);}}catch(error){const errorMessage=handleError(error,'ProjectQualificationStepSetup - publishQualificationStep');toast.error(errorMessage);}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{className:\"project-setup\",style:{marginLeft:\"\".concat(sidebarWidth,\"px\"),width:\"calc(100% - \".concat(sidebarWidth,\"px)\"),transition:'margin-left 0.2s ease, width 0.2s ease'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"setup-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"setup-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-menu-toggle\",onClick:()=>setSidebarOpen(!sidebarOpen),\"aria-label\":\"Toggle sidebar\",children:/*#__PURE__*/_jsx(Menu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"New Project Qualification Step\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Create a new project qualification step by entering information in the form below\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-user-profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:((user===null||user===void 0?void 0:user.email)||'U').charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{size:18})})]})})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handleSave),className:\"setup-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid compact-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Project Qualification Step Name\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('projectQualificationStepName')),{},{style:{fontSize:'12px',padding:'6px 10px',height:'32px'}}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"* Project\",/*#__PURE__*/_jsx(Info,{size:14,className:\"info-icon\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('project',{required:true})),{},{className:fieldErrors.project?'error-field':'',placeholder:\"Search or enter project name...\",style:{fontSize:'12px',padding:'6px 10px',paddingRight:'36px',width:'100%',height:'32px'},value:projectSearchTerm,onChange:e=>{setProjectSearchTerm(e.target.value);setValue('project',e.target.value);setShowProjectDropdown(true);},onFocus:()=>{if(projectSearchTerm&&projects.length>0){setShowProjectDropdown(true);}},onBlur:()=>{// Delay hiding dropdown to allow click on option\nsetTimeout(()=>setShowProjectDropdown(false),200);}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666',pointerEvents:'none'}}),showProjectDropdown&&projects.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,backgroundColor:'white',border:'1px solid #ddd',borderRadius:'4px',maxHeight:'200px',overflowY:'auto',zIndex:1000,boxShadow:'0 2px 8px rgba(0,0,0,0.1)',marginTop:'4px'},children:loadingProjects?/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px',fontSize:'12px',color:'#666',textAlign:'center'},children:\"Searching...\"}):projects.map(project=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleProjectSelect(project.name),style:{padding:'6px 10px',cursor:'pointer',fontSize:'12px',borderBottom:'1px solid #f0f0f0'},onMouseEnter:e=>e.target.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.target.style.backgroundColor='white',children:[project.name,\" \",project.status&&\"(\".concat(project.status,\")\")]},project.id))})]}),errors.project&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Project Objective\"}),loadingProjectObjectives?/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px',fontSize:'12px',color:'#666'},children:\"Loading project objectives...\"}):projectObjectives.length>0?/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('projectObjective')),{},{style:{fontSize:'12px',padding:'6px 10px',width:'100%',height:'32px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--Select Project Objective--\"}),projectObjectives.map(obj=>/*#__PURE__*/_jsx(\"option\",{value:obj.contributorFacingProjectName||obj.name,children:obj.contributorFacingProjectName||obj.name},obj.id))]})):selectedProject?/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('projectObjective')),{},{placeholder:\"No project objectives found. Enter manually...\",style:{paddingRight:'36px',fontSize:'12px',padding:'6px 10px',height:'32px'}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666'}})]}):/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('projectObjective')),{},{placeholder:\"Select a project first...\",disabled:true,style:{paddingRight:'36px',fontSize:'12px',padding:'6px 10px',height:'32px',opacity:0.5}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Passing Score\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontStyle:'italic',fontSize:'10px',color:'#666',marginTop:'3px'},children:\"This field is calculated upon save\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Project Qualification Step Status\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('projectQualificationStepStatus')),{},{style:{fontSize:'12px',padding:'6px 10px',height:'32px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--None--\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Draft\",children:\"Draft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Deactivated\",children:\"Deactivated\"})]}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"* Qualification Step\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('qualificationStep',{required:true})),{},{placeholder:\"Search qualification steps from Salesforce...\",className:fieldErrors.qualificationStep?'error-field':'',style:{paddingRight:'36px',fontSize:'12px',padding:'6px 10px',width:'100%',height:'32px'},value:qualificationStepSearchTerm,onChange:e=>{setQualificationStepSearchTerm(e.target.value);setValue('qualificationStep',e.target.value);setShowQualificationStepDropdown(true);},onFocus:()=>{if(qualificationStepSearchTerm&&qualificationSteps.length>0){setShowQualificationStepDropdown(true);}},onBlur:()=>{// Delay hiding dropdown to allow click on option\nsetTimeout(()=>setShowQualificationStepDropdown(false),200);}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666',pointerEvents:'none'}}),showQualificationStepDropdown&&qualificationSteps.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,backgroundColor:'white',border:'1px solid #ddd',borderRadius:'4px',maxHeight:'200px',overflowY:'auto',zIndex:1000,boxShadow:'0 2px 8px rgba(0,0,0,0.1)',marginTop:'4px'},children:loadingQualificationSteps?/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px',fontSize:'12px',color:'#666',textAlign:'center'},children:\"Searching...\"}):qualificationSteps.map(step=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleQualificationStepSelect(step.name),style:{padding:'6px 10px',cursor:'pointer',fontSize:'12px',borderBottom:'1px solid #f0f0f0'},onMouseEnter:e=>e.target.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.target.style.backgroundColor='white',children:step.name},step.id))})]}),errors.qualificationStep&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"* Funnel\",/*#__PURE__*/_jsx(Info,{size:14,className:\"info-icon\"})]}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('funnel',{required:true})),{},{className:fieldErrors.funnel?'error-field':'',style:{fontSize:'12px',padding:'6px 10px',height:'32px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--None--\"}),/*#__PURE__*/_jsx(\"option\",{value:\"A\",children:\"A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B\",children:\"B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"C\",children:\"C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"D\",children:\"D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"E\",children:\"E\"})]})),errors.funnel&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"* Step Number\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"number\"},register('stepNumber',{required:true})),{},{className:fieldErrors.stepNumber?'error-field':'',style:{fontSize:'12px',padding:'6px 10px',height:'32px'}})),errors.stepNumber&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"* Number of Attempts\",/*#__PURE__*/_jsx(Info,{size:14,className:\"info-icon\"})]}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"number\"},register('numberOfAttempts',{required:true})),{},{className:fieldErrors.numberOfAttempts?'error-field':'',style:{fontSize:'12px',padding:'6px 10px',height:'32px'},defaultValue:\"1\"})),errors.numberOfAttempts&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Estimated Time to Complete (mins)\",/*#__PURE__*/_jsx(Info,{size:14,className:\"info-icon\"})]}),/*#__PURE__*/_jsx(\"p\",{style:{fontStyle:'italic',fontSize:'10px',color:'#666',marginTop:'3px'},children:\"This field is calculated upon save\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"System Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid compact-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Created By\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register('createdBy')),{},{rows:\"1\",readOnly:true,style:{fontSize:'12px',padding:'6px 10px',minHeight:'32px'}}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Modified By\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register('lastModifiedBy')),{},{rows:\"1\",readOnly:true,style:{fontSize:'12px',padding:'6px 10px',minHeight:'32px'}}))]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',alignItems:'center',width:'100%'},children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn-secondary\",disabled:saving,onClick:e=>{e.preventDefault();handleSave(watch());},children:[/*#__PURE__*/_jsx(Save,{size:20,style:{marginRight:'8px'}}),saving?'Saving...':'Save']}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn-primary\",onClick:handlePublish,disabled:submitting,style:{marginLeft:'auto'},children:[/*#__PURE__*/_jsx(Send,{size:16,style:{marginRight:'8px'}}),submitting?'Publishing...':'Publish']})]})})]})]})}),showPublishResultsModal&&publishResults&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000,padding:'12px',boxSizing:'border-box'},onClick:()=>setShowPublishResultsModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#ffffff',borderRadius:'8px',width:'90%',maxWidth:'700px',maxHeight:'90vh',display:'flex',flexDirection:'column',boxShadow:'0 4px 20px rgba(0, 0, 0, 0.15)',boxSizing:'border-box',color:'#002329',fontFamily:'Poppins',fontSize:'14px'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'12px 24px',borderBottom:'1px solid #e2e8f0',flexShrink:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[publishResults.failed.length>0?/*#__PURE__*/_jsx(XCircle,{size:24,color:\"#ef4444\"}):/*#__PURE__*/_jsx(CheckCircle,{size:24,color:\"#10b981\"}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'20px',fontWeight:600,color:'#002329',fontFamily:'Poppins'},children:\"Publish Results\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPublishResultsModal(false),style:{background:'none',border:'none',cursor:'pointer',padding:'4px',display:'flex',alignItems:'center',justifyContent:'center',borderRadius:'4px',transition:'background-color 0.2s'},onMouseEnter:e=>e.target.style.backgroundColor='#f1f5f9',onMouseLeave:e=>e.target.style.backgroundColor='transparent',children:/*#__PURE__*/_jsx(X,{size:20,color:\"#64748b\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',overflowY:'auto',flex:1},children:[publishResults.published.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 16px 0',fontSize:'14px',fontWeight:600,color:'#10b981',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(CheckCircle,{size:18}),\"Published Successfully (\",publishResults.published.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'12px'},children:publishResults.published.map((obj,index)=>/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px',backgroundColor:'#f0fdf4',border:'1px solid #bbf7d0',borderRadius:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#002329',marginBottom:'8px'},children:[obj.type,\": \\\"\",obj.name,\"\\\"\"]})},index))})]}),publishResults.failed.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 16px 0',fontSize:'14px',fontWeight:600,color:'#ef4444',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(XCircle,{size:18}),\"Failed to Publish (\",publishResults.failed.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'12px'},children:publishResults.failed.map((obj,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px',backgroundColor:'#fef2f2',border:'1px solid #fecaca',borderRadius:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#002329',marginBottom:'8px'},children:[obj.type,\": \\\"\",obj.name,\"\\\"\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#ef4444',marginTop:'8px'},children:[\"Error: \",obj.error]})]},index))})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px 24px',borderTop:'1px solid #e2e8f0',display:'flex',justifyContent:'flex-end',gap:'12px',flexShrink:0},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPublishResultsModal(false);if(publishResults.failed.length===0){setTimeout(()=>{navigate('/projects');},500);}},style:{padding:'6px 12px',backgroundColor:'#08979C',color:'#ffffff',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:600,cursor:'pointer',fontFamily:'Poppins',transition:'background-color 0.2s'},onMouseEnter:e=>e.target.style.backgroundColor='#067a7f',onMouseLeave:e=>e.target.style.backgroundColor='#08979C',children:publishResults.failed.length===0?'Continue':'Close'})})]})})]});};export default ProjectQualificationStepSetup;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useForm","apiClient","toast","saveDraftQualificationStep","loadDraftQualificationStep","deleteDraftQualificationStep","getErrorMessage","handleError","sanitizeObject","Search","Info","Menu","Send","Save","LogOut","BookOpen","CheckCircle","XCircle","X","useAuth","Sidebar","useSidebarWidth","jsx","_jsx","jsxs","_jsxs","ProjectQualificationStepSetup","navigate","user","hasPermission","logout","register","handleSubmit","setValue","watch","formState","errors","trigger","setError","clearErrors","reset","loading","setLoading","fieldErrors","setFieldErrors","submitting","setSubmitting","saving","setSaving","showPublishResultsModal","setShowPublishResultsModal","publishResults","setPublishResults","projects","setProjects","loadingProjects","setLoadingProjects","projectSearchTerm","setProjectSearchTerm","projectObjectives","setProjectObjectives","loadingProjectObjectives","setLoadingProjectObjectives","qualificationSteps","setQualificationSteps","loadingQualificationSteps","setLoadingQualificationSteps","qualificationStepSearchTerm","setQualificationStepSearchTerm","sidebarOpen","setSidebarOpen","sidebarWidth","selectedProject","setSelectedProject","showProjectDropdown","setShowProjectDropdown","showQualificationStepDropdown","setShowQualificationStepDropdown","dataLoadedRef","loadExistingData","current","data","Object","keys","forEach","key","undefined","project","fetchProjectObjectives","qualificationStep","success","setDefaultValues","error","errorMessage","searchProjects","trim","response","get","concat","encodeURIComponent","timeoutId","setTimeout","clearTimeout","projectName","watchedProjectValue","selectedProjectName","fetchQualificationSteps","params","URLSearchParams","append","currentWatchedProject","currentProjectName","console","log","searchTerm","url","toString","_response$data$qualif","length","warn","handleProjectSelect","watchedProject","handleQualificationStepSelect","stepName","handleSave","allFormData","completeData","_objectSpread","post","handlePublish","cleanedData","value","totalFields","fields","sampleData","projectQualificationStepName","sanitizedData","timeout","objectName","name","published","type","id","salesforceId","failed","objectType","className","children","isOpen","toggleSidebar","style","marginLeft","width","transition","onClick","size","email","charAt","toUpperCase","title","onSubmit","fontSize","padding","height","position","required","placeholder","paddingRight","onChange","e","target","onFocus","onBlur","right","top","transform","color","pointerEvents","left","backgroundColor","border","borderRadius","maxHeight","overflowY","zIndex","boxShadow","marginTop","textAlign","map","cursor","borderBottom","onMouseEnter","onMouseLeave","status","obj","contributorFacingProjectName","disabled","opacity","fontStyle","step","funnel","stepNumber","numberOfAttempts","defaultValue","rows","readOnly","minHeight","display","gap","alignItems","preventDefault","marginRight","bottom","justifyContent","boxSizing","maxWidth","flexDirection","fontFamily","stopPropagation","flexShrink","margin","fontWeight","background","flex","marginBottom","index","borderTop"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/ProjectQualificationStepSetup.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport { saveDraftQualificationStep, loadDraftQualificationStep, deleteDraftQualificationStep } from '../utils/draftStorage';\nimport { getErrorMessage, handleError } from '../utils/errorHandler';\nimport { sanitizeObject } from '../utils/security';\nimport { Search, Info, Menu, Send, Save, LogOut, BookOpen, CheckCircle, XCircle, X } from 'lucide-react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport useSidebarWidth from '../hooks/useSidebarWidth';\nimport '../styles/ProjectSetup.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\nconst ProjectQualificationStepSetup = () => {\n  const navigate = useNavigate();\n  const { user, hasPermission, logout } = useAuth();\n  const { register, handleSubmit, setValue, watch, formState: { errors }, trigger, setError, clearErrors, reset } = useForm();\n  const [loading, setLoading] = useState(false);\n  const [fieldErrors, setFieldErrors] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showPublishResultsModal, setShowPublishResultsModal] = useState(false);\n  const [publishResults, setPublishResults] = useState(null);\n  const [projects, setProjects] = useState([]);\n  const [loadingProjects, setLoadingProjects] = useState(false);\n  const [projectSearchTerm, setProjectSearchTerm] = useState('');\n  const [projectObjectives, setProjectObjectives] = useState([]);\n  const [loadingProjectObjectives, setLoadingProjectObjectives] = useState(false);\n  const [qualificationSteps, setQualificationSteps] = useState([]);\n  const [loadingQualificationSteps, setLoadingQualificationSteps] = useState(false);\n  const [qualificationStepSearchTerm, setQualificationStepSearchTerm] = useState('');\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const sidebarWidth = useSidebarWidth(sidebarOpen);\n  const [selectedProject, setSelectedProject] = useState(null);\n  const [showProjectDropdown, setShowProjectDropdown] = useState(false);\n  const [showQualificationStepDropdown, setShowQualificationStepDropdown] = useState(false);\n  const dataLoadedRef = useRef(false);\n\n  useEffect(() => {\n    // Load existing qualification step data from server storage (for editing)\n    const loadExistingData = async () => {\n      // Prevent duplicate loading in React StrictMode\n      if (dataLoadedRef.current) return;\n      \n      try {\n        const data = await loadDraftQualificationStep();\n        if (data) {\n          dataLoadedRef.current = true;\n          // Populate form with existing data\n          Object.keys(data).forEach(key => {\n            if (data[key] !== null && data[key] !== undefined) {\n              setValue(key, data[key]);\n            }\n          });\n          if (data.project) {\n            setSelectedProject(data.project);\n            setProjectSearchTerm(data.project);\n            fetchProjectObjectives(data.project);\n          }\n          if (data.qualificationStep) {\n            setQualificationStepSearchTerm(data.qualificationStep);\n          }\n          toast.success('Qualification step data loaded for editing');\n        } else {\n          // Clear form and set default values for new qualification step\n          reset();\n          setDefaultValues();\n        }\n      } catch (error) {\n        const errorMessage = handleError(error, 'ProjectQualificationStepSetup - loadQualificationStepData');\n        toast.error(errorMessage);\n        // Reset form to defaults\n        reset();\n        setDefaultValues();\n      }\n    };\n    \n    loadExistingData();\n  }, [setValue, reset]);\n\n  // Search projects in Salesforce when search term changes\n  useEffect(() => {\n    const searchProjects = async () => {\n      if (!projectSearchTerm || projectSearchTerm.trim() === '') {\n        setProjects([]);\n        return;\n      }\n\n      setLoadingProjects(true);\n      try {\n        const response = await apiClient.get(`/salesforce/search-projects?search=${encodeURIComponent(projectSearchTerm)}`);\n        if (response.data.success) {\n          setProjects(response.data.projects || []);\n          setShowProjectDropdown(true);\n        }\n      } catch (error) {\n        handleError(error, 'ProjectQualificationStepSetup - searchProjects');\n        setProjects([]);\n      } finally {\n        setLoadingProjects(false);\n      }\n    };\n\n    // Debounce search - wait 300ms after user stops typing\n    const timeoutId = setTimeout(() => {\n      searchProjects();\n    }, 300);\n\n    return () => clearTimeout(timeoutId);\n  }, [projectSearchTerm]);\n\n  const setDefaultValues = () => {\n    // Set default values for dropdowns and other fields\n    setValue('projectQualificationStepStatus', 'Draft');\n    setValue('numberOfAttempts', '1');\n    setValue('funnel', '');\n  };\n\n  const fetchProjectObjectives = async (projectName) => {\n    if (!projectName) {\n      setProjectObjectives([]);\n      return;\n    }\n    \n    setLoadingProjectObjectives(true);\n    try {\n      const response = await apiClient.get(`/salesforce/project-objectives?project=${encodeURIComponent(projectName)}`);\n      if (response.data.success) {\n        setProjectObjectives(response.data.projectObjectives || []);\n      }\n    } catch (error) {\n      handleError(error, 'ProjectQualificationStepSetup - fetchProjectObjectives');\n      setProjectObjectives([]);\n    } finally {\n      setLoadingProjectObjectives(false);\n    }\n  };\n\n  // Fetch qualification steps from Salesforce when search term changes - filter by selected project\n  useEffect(() => {\n    // Don't search if search term is empty\n    if (!qualificationStepSearchTerm || qualificationStepSearchTerm.trim() === '') {\n      setQualificationSteps([]);\n      return;\n    }\n\n    // Get the selected project name for filtering - check multiple sources including form field\n    const watchedProjectValue = watch('project');\n    const selectedProjectName = selectedProject || projectSearchTerm || watchedProjectValue;\n    \n    // Don't search if no project is selected (qualification steps must be filtered by project)\n    if (!selectedProjectName || selectedProjectName.trim() === '') {\n      setQualificationSteps([]);\n      return;\n    }\n\n    const fetchQualificationSteps = async () => {\n      setLoadingQualificationSteps(true);\n      try {\n        // Build query parameters - always include search term and project\n        const params = new URLSearchParams();\n        params.append('search', qualificationStepSearchTerm);\n        // Re-check project name inside async function\n        const currentWatchedProject = watch('project');\n        const currentProjectName = selectedProject || projectSearchTerm || currentWatchedProject;\n        if (currentProjectName && currentProjectName.trim() !== '') {\n          params.append('project', currentProjectName);\n        }\n        \n        console.log('[ProjectQualificationStepSetup] Searching qualification steps:', {\n          searchTerm: qualificationStepSearchTerm,\n          project: currentProjectName,\n          url: `/salesforce/qualification-steps?${params.toString()}`\n        });\n        \n        const response = await apiClient.get(`/salesforce/qualification-steps?${params.toString()}`);\n        if (response.data.success) {\n          console.log('[ProjectQualificationStepSetup] Qualification steps found:', response.data.qualificationSteps?.length || 0);\n          setQualificationSteps(response.data.qualificationSteps || []);\n          setShowQualificationStepDropdown(true);\n        } else {\n          console.warn('[ProjectQualificationStepSetup] API returned success=false');\n          setQualificationSteps([]);\n        }\n      } catch (error) {\n        console.error('[ProjectQualificationStepSetup] Error fetching qualification steps:', error);\n        handleError(error, 'ProjectQualificationStepSetup - fetchQualificationSteps');\n        setQualificationSteps([]);\n      } finally {\n        setLoadingQualificationSteps(false);\n      }\n    };\n\n    // Debounce search - wait 300ms after user stops typing\n    const timeoutId = setTimeout(() => {\n      fetchQualificationSteps();\n    }, 300);\n\n    return () => clearTimeout(timeoutId);\n  }, [qualificationStepSearchTerm, selectedProject, projectSearchTerm, watch]);\n\n  const handleProjectSelect = (projectName) => {\n    setSelectedProject(projectName);\n    setValue('project', projectName);\n    setProjectSearchTerm(projectName);\n    setShowProjectDropdown(false);\n    // Clear project objective when project changes\n    setValue('projectObjective', '');\n    setProjectObjectives([]);\n    // Clear qualification step when project changes (since it should be filtered by project)\n    setValue('qualificationStep', '');\n    setQualificationStepSearchTerm('');\n    setQualificationSteps([]);\n    // Fetch project objectives for the selected project\n    if (projectName && projectName.trim() !== '') {\n      fetchProjectObjectives(projectName);\n    }\n  };\n\n  // Watch for project field changes and fetch project objectives when project is finalized\n  const watchedProject = watch('project');\n  useEffect(() => {\n    // Debounce fetching project objectives when user types\n    const timeoutId = setTimeout(() => {\n      if (watchedProject && watchedProject.trim() !== '') {\n        // Only fetch if the project is different from the currently selected one\n        if (watchedProject !== selectedProject) {\n          setSelectedProject(watchedProject);\n          setValue('projectObjective', '');\n          setProjectObjectives([]);\n          // Clear qualification step when project changes (since it should be filtered by project)\n          setValue('qualificationStep', '');\n          setQualificationStepSearchTerm('');\n          setQualificationSteps([]);\n          fetchProjectObjectives(watchedProject);\n        }\n      } else if (!watchedProject || watchedProject.trim() === '') {\n        // Project cleared - clear objectives and qualification steps\n        if (selectedProject !== null) {\n          setSelectedProject(null);\n          setProjectObjectives([]);\n          setValue('projectObjective', '');\n          setValue('qualificationStep', '');\n          setQualificationStepSearchTerm('');\n          setQualificationSteps([]);\n        }\n      }\n    }, 500); // Wait 500ms after user stops typing\n\n    return () => clearTimeout(timeoutId);\n  }, [watchedProject, selectedProject]);\n\n  const handleQualificationStepSelect = (stepName) => {\n    setValue('qualificationStep', stepName);\n    setQualificationStepSearchTerm(stepName);\n    setShowQualificationStepDropdown(false);\n  };\n\n  const handleSave = async (data) => {\n    if (!hasPermission('create_project')) {\n      toast.error('You do not have permission to save qualification steps');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const allFormData = watch();\n      const completeData = { ...allFormData, ...data };\n      \n      // Save to backend API\n      const response = await apiClient.post('/qualification-steps', completeData);\n      \n      // Also save to localStorage for editing\n      await saveDraftQualificationStep(completeData);\n      toast.success('Qualification step saved successfully!');\n    } catch (error) {\n      const errorMessage = handleError(error, 'ProjectQualificationStepSetup - saveQualificationStep');\n      toast.error(errorMessage);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handlePublish = async () => {\n    if (!hasPermission('create_project')) {\n      toast.error('You do not have permission to publish qualification steps');\n      return;\n    }\n\n    setSubmitting(true);\n    try {\n      // Get all form values\n      const allFormData = watch();\n      \n      // Include ALL form data - only skip undefined values\n      const cleanedData = {};\n      \n      Object.keys(allFormData).forEach(key => {\n        const value = allFormData[key];\n        // Include all values except undefined (keep null, empty strings, etc.)\n        if (value !== undefined) {\n          if (typeof value === 'string') {\n            cleanedData[key] = value.trim();\n          } else {\n            cleanedData[key] = value;\n          }\n        }\n      });\n      \n      console.log('Publishing qualification step - All fields:', {\n        totalFields: Object.keys(cleanedData).length,\n        fields: Object.keys(cleanedData)\n      });\n\n      console.log('Publishing qualification step to Salesforce with data:', {\n        totalFields: Object.keys(cleanedData).length,\n        fields: Object.keys(cleanedData),\n        sampleData: {\n          projectQualificationStepName: cleanedData.projectQualificationStepName,\n          project: cleanedData.project,\n          qualificationStep: cleanedData.qualificationStep\n        }\n      });\n\n      // Sanitize data before sending to server\n      const sanitizedData = sanitizeObject(cleanedData);\n      \n      // Call Salesforce qualification step creation API\n      const response = await apiClient.post('/salesforce/create-qualification-step', sanitizedData, {\n        timeout: 300000 // 5 minutes timeout\n      });\n\n      // Check if Salesforce creation was successful\n      if (response.data.success) {\n        const stepName = response.data.objectName || cleanedData.projectQualificationStepName || cleanedData.name || 'Qualification Step';\n        setPublishResults({\n          published: [{\n            type: 'Qualification Step',\n            name: stepName,\n            id: response.data.salesforceId\n          }],\n          failed: []\n        });\n        setShowPublishResultsModal(true);\n        console.log('Salesforce qualification step created:', {\n          salesforceId: response.data.salesforceId,\n          objectType: response.data.objectType\n        });\n        \n        // Clear localStorage after successful publish\n        await deleteDraftQualificationStep();\n      } else {\n        setPublishResults({\n          published: [],\n          failed: [{\n            type: 'Qualification Step',\n            name: cleanedData.projectQualificationStepName || cleanedData.name || 'Qualification Step',\n            error: getErrorMessage(response.data)\n          }]\n        });\n        setShowPublishResultsModal(true);\n      }\n    } catch (error) {\n      const errorMessage = handleError(error, 'ProjectQualificationStepSetup - publishQualificationStep');\n      toast.error(errorMessage);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      <div className=\"project-setup\" style={{ marginLeft: `${sidebarWidth}px`, width: `calc(100% - ${sidebarWidth}px)`, transition: 'margin-left 0.2s ease, width 0.2s ease' }}>\n        <div className=\"setup-container\">\n          <div className=\"setup-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">New Project Qualification Step</h1>\n                  <p className=\"page-subtitle\">Create a new project qualification step by entering information in the form below</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit(handleSave)} className=\"setup-form\">\n            <div className=\"form-section fade-in\">\n              <div className=\"section-content\">\n                <h2>Information</h2>\n                <div className=\"form-grid compact-grid\">\n                  <div className=\"form-group\">\n                    <label>\n                      Project Qualification Step Name\n                    </label>\n                    <input \n                      type=\"text\" \n                      {...register('projectQualificationStepName')} \n                      style={{ fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                    />\n                  </div>\n                  <div className=\"form-group\" style={{ position: 'relative' }}>\n                    <label>\n                      * Project\n                      <Info size={14} className=\"info-icon\" />\n                    </label>\n                    <div style={{ position: 'relative' }}>\n                      <input \n                        type=\"text\" \n                        {...register('project', { required: true })} \n                        className={fieldErrors.project ? 'error-field' : ''} \n                        placeholder=\"Search or enter project name...\"\n                        style={{ fontSize: '12px', padding: '6px 10px', paddingRight: '36px', width: '100%', height: '32px' }}\n                        value={projectSearchTerm}\n                        onChange={(e) => {\n                          setProjectSearchTerm(e.target.value);\n                          setValue('project', e.target.value);\n                          setShowProjectDropdown(true);\n                        }}\n                        onFocus={() => {\n                          if (projectSearchTerm && projects.length > 0) {\n                            setShowProjectDropdown(true);\n                          }\n                        }}\n                        onBlur={() => {\n                          // Delay hiding dropdown to allow click on option\n                          setTimeout(() => setShowProjectDropdown(false), 200);\n                        }}\n                      />\n                      <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666', pointerEvents: 'none' }} />\n                      {showProjectDropdown && projects.length > 0 && (\n                        <div style={{\n                          position: 'absolute',\n                          top: '100%',\n                          left: 0,\n                          right: 0,\n                          backgroundColor: 'white',\n                          border: '1px solid #ddd',\n                          borderRadius: '4px',\n                          maxHeight: '200px',\n                          overflowY: 'auto',\n                          zIndex: 1000,\n                          boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                          marginTop: '4px'\n                        }}>\n                          {loadingProjects ? (\n                            <div style={{ padding: '6px', fontSize: '12px', color: '#666', textAlign: 'center' }}>Searching...</div>\n                          ) : (\n                            projects.map(project => (\n                              <div\n                                key={project.id}\n                                onClick={() => handleProjectSelect(project.name)}\n                                style={{\n                                  padding: '6px 10px',\n                                  cursor: 'pointer',\n                                  fontSize: '12px',\n                                  borderBottom: '1px solid #f0f0f0'\n                                }}\n                                onMouseEnter={(e) => e.target.style.backgroundColor = '#f5f5f5'}\n                                onMouseLeave={(e) => e.target.style.backgroundColor = 'white'}\n                              >\n                                {project.name} {project.status && `(${project.status})`}\n                              </div>\n                            ))\n                          )}\n                        </div>\n                      )}\n                    </div>\n                    {errors.project && <span className=\"error\">Required</span>}\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      Project Objective\n                    </label>\n                    {loadingProjectObjectives ? (\n                      <div style={{ padding: '6px', fontSize: '12px', color: '#666' }}>Loading project objectives...</div>\n                    ) : projectObjectives.length > 0 ? (\n                      <select \n                        {...register('projectObjective')} \n                        style={{ fontSize: '12px', padding: '6px 10px', width: '100%', height: '32px' }}\n                      >\n                        <option value=\"\">--Select Project Objective--</option>\n                        {projectObjectives.map(obj => (\n                          <option key={obj.id} value={obj.contributorFacingProjectName || obj.name}>\n                            {obj.contributorFacingProjectName || obj.name}\n                          </option>\n                        ))}\n                      </select>\n                    ) : selectedProject ? (\n                      <div style={{ position: 'relative' }}>\n                        <input \n                          type=\"text\" \n                          {...register('projectObjective')} \n                          placeholder=\"No project objectives found. Enter manually...\"\n                          style={{ paddingRight: '36px', fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                        />\n                        <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666' }} />\n                      </div>\n                    ) : (\n                      <div style={{ position: 'relative' }}>\n                        <input \n                          type=\"text\" \n                          {...register('projectObjective')} \n                          placeholder=\"Select a project first...\"\n                          disabled\n                          style={{ paddingRight: '36px', fontSize: '12px', padding: '6px 10px', height: '32px', opacity: 0.5 }}\n                        />\n                        <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666' }} />\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      Passing Score\n                    </label>\n                    <p style={{ fontStyle: 'italic', fontSize: '10px', color: '#666', marginTop: '3px' }}>\n                      This field is calculated upon save\n                    </p>\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      Project Qualification Step Status\n                    </label>\n                    <select \n                      {...register('projectQualificationStepStatus')} \n                      style={{ fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                    >\n                      <option value=\"\">--None--</option>\n                      <option value=\"Draft\">Draft</option>\n                      <option value=\"Active\">Active</option>\n                      <option value=\"Deactivated\">Deactivated</option>\n                    </select>\n                  </div>\n                  <div className=\"form-group\" style={{ position: 'relative' }}>\n                    <label>\n                      * Qualification Step\n                    </label>\n                    <div style={{ position: 'relative' }}>\n                      <input \n                        type=\"text\" \n                        {...register('qualificationStep', { required: true })} \n                        placeholder=\"Search qualification steps from Salesforce...\"\n                        className={fieldErrors.qualificationStep ? 'error-field' : ''}\n                        style={{ paddingRight: '36px', fontSize: '12px', padding: '6px 10px', width: '100%', height: '32px' }}\n                        value={qualificationStepSearchTerm}\n                        onChange={(e) => {\n                          setQualificationStepSearchTerm(e.target.value);\n                          setValue('qualificationStep', e.target.value);\n                          setShowQualificationStepDropdown(true);\n                        }}\n                        onFocus={() => {\n                          if (qualificationStepSearchTerm && qualificationSteps.length > 0) {\n                            setShowQualificationStepDropdown(true);\n                          }\n                        }}\n                        onBlur={() => {\n                          // Delay hiding dropdown to allow click on option\n                          setTimeout(() => setShowQualificationStepDropdown(false), 200);\n                        }}\n                      />\n                      <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666', pointerEvents: 'none' }} />\n                      {showQualificationStepDropdown && qualificationSteps.length > 0 && (\n                        <div style={{\n                          position: 'absolute',\n                          top: '100%',\n                          left: 0,\n                          right: 0,\n                          backgroundColor: 'white',\n                          border: '1px solid #ddd',\n                          borderRadius: '4px',\n                          maxHeight: '200px',\n                          overflowY: 'auto',\n                          zIndex: 1000,\n                          boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                          marginTop: '4px'\n                        }}>\n                          {loadingQualificationSteps ? (\n                            <div style={{ padding: '6px', fontSize: '12px', color: '#666', textAlign: 'center' }}>Searching...</div>\n                          ) : (\n                            qualificationSteps.map(step => (\n                              <div\n                                key={step.id}\n                                onClick={() => handleQualificationStepSelect(step.name)}\n                                style={{\n                                  padding: '6px 10px',\n                                  cursor: 'pointer',\n                                  fontSize: '12px',\n                                  borderBottom: '1px solid #f0f0f0'\n                                }}\n                                onMouseEnter={(e) => e.target.style.backgroundColor = '#f5f5f5'}\n                                onMouseLeave={(e) => e.target.style.backgroundColor = 'white'}\n                              >\n                                {step.name}\n                              </div>\n                            ))\n                          )}\n                        </div>\n                      )}\n                    </div>\n                    {errors.qualificationStep && <span className=\"error\">Required</span>}\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      * Funnel\n                      <Info size={14} className=\"info-icon\" />\n                    </label>\n                    <select \n                      {...register('funnel', { required: true })} \n                      className={fieldErrors.funnel ? 'error-field' : ''}\n                      style={{ fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                    >\n                      <option value=\"\">--None--</option>\n                      <option value=\"A\">A</option>\n                      <option value=\"B\">B</option>\n                      <option value=\"C\">C</option>\n                      <option value=\"D\">D</option>\n                      <option value=\"E\">E</option>\n                    </select>\n                    {errors.funnel && <span className=\"error\">Required</span>}\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      * Step Number\n                    </label>\n                    <input \n                      type=\"number\" \n                      {...register('stepNumber', { required: true })} \n                      className={fieldErrors.stepNumber ? 'error-field' : ''}\n                      style={{ fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                    />\n                    {errors.stepNumber && <span className=\"error\">Required</span>}\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      * Number of Attempts\n                      <Info size={14} className=\"info-icon\" />\n                    </label>\n                    <input \n                      type=\"number\" \n                      {...register('numberOfAttempts', { required: true })} \n                      className={fieldErrors.numberOfAttempts ? 'error-field' : ''}\n                      style={{ fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                      defaultValue=\"1\"\n                    />\n                    {errors.numberOfAttempts && <span className=\"error\">Required</span>}\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      Estimated Time to Complete (mins)\n                      <Info size={14} className=\"info-icon\" />\n                    </label>\n                    <p style={{ fontStyle: 'italic', fontSize: '10px', color: '#666', marginTop: '3px' }}>\n                      This field is calculated upon save\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"section-content\" style={{ marginTop: '20px' }}>\n                <h2>System Information</h2>\n                <div className=\"form-grid compact-grid\">\n                  <div className=\"form-group\">\n                    <label>\n                      Created By\n                    </label>\n                    <textarea \n                      {...register('createdBy')} \n                      rows=\"1\" \n                      readOnly\n                      style={{ fontSize: '12px', padding: '6px 10px', minHeight: '32px' }}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>\n                      Last Modified By\n                    </label>\n                    <textarea \n                      {...register('lastModifiedBy')} \n                      rows=\"1\" \n                      readOnly\n                      style={{ fontSize: '12px', padding: '6px 10px', minHeight: '32px' }}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"form-actions\">\n              <div style={{ display: 'flex', gap: '12px', alignItems: 'center', width: '100%' }}>\n                <button \n                  type=\"submit\" \n                  className=\"btn-secondary\" \n                  disabled={saving}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    handleSave(watch());\n                  }}\n                >\n                  <Save size={20} style={{ marginRight: '8px' }} />\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n                <button \n                  type=\"button\" \n                  className=\"btn-primary\" \n                  onClick={handlePublish}\n                  disabled={submitting}\n                  style={{ marginLeft: 'auto' }}\n                >\n                  <Send size={16} style={{ marginRight: '8px' }} />\n                  {submitting ? 'Publishing...' : 'Publish'}\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      {/* Publish Results Modal */}\n      {showPublishResultsModal && publishResults && (\n        <div \n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1000,\n            padding: '12px',\n            boxSizing: 'border-box'\n          }}\n          onClick={() => setShowPublishResultsModal(false)}\n        >\n          <div \n            style={{\n              backgroundColor: '#ffffff',\n              borderRadius: '8px',\n              width: '90%',\n              maxWidth: '700px',\n              maxHeight: '90vh',\n              display: 'flex',\n              flexDirection: 'column',\n              boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)',\n              boxSizing: 'border-box',\n              color: '#002329',\n              fontFamily: 'Poppins',\n              fontSize: '14px'\n            }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Modal Header */}\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              padding: '12px 24px',\n              borderBottom: '1px solid #e2e8f0',\n              flexShrink: 0\n            }}>\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '12px'\n              }}>\n                {publishResults.failed.length > 0 ? (\n                  <XCircle size={24} color=\"#ef4444\" />\n                ) : (\n                  <CheckCircle size={24} color=\"#10b981\" />\n                )}\n                <h2 style={{\n                  margin: 0,\n                  fontSize: '20px',\n                  fontWeight: 600,\n                  color: '#002329',\n                  fontFamily: 'Poppins'\n                }}>\n                  Publish Results\n                </h2>\n              </div>\n              <button\n                onClick={() => setShowPublishResultsModal(false)}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  padding: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  borderRadius: '4px',\n                  transition: 'background-color 0.2s'\n                }}\n                onMouseEnter={(e) => e.target.style.backgroundColor = '#f1f5f9'}\n                onMouseLeave={(e) => e.target.style.backgroundColor = 'transparent'}\n              >\n                <X size={20} color=\"#64748b\" />\n              </button>\n            </div>\n\n            {/* Modal Content */}\n            <div style={{\n              padding: '24px',\n              overflowY: 'auto',\n              flex: 1\n            }}>\n              {/* Published Objects */}\n              {publishResults.published.length > 0 && (\n                <div style={{ marginBottom: '24px' }}>\n                  <h3 style={{\n                    margin: '0 0 16px 0',\n                    fontSize: '14px',\n                    fontWeight: 600,\n                    color: '#10b981',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px'\n                  }}>\n                    <CheckCircle size={18} />\n                    Published Successfully ({publishResults.published.length})\n                  </h3>\n                  <div style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: '12px'\n                  }}>\n                    {publishResults.published.map((obj, index) => (\n                      <div key={index} style={{\n                        padding: '16px',\n                        backgroundColor: '#f0fdf4',\n                        border: '1px solid #bbf7d0',\n                        borderRadius: '8px'\n                      }}>\n                        <div style={{\n                          fontWeight: 600,\n                          color: '#002329',\n                          marginBottom: '8px'\n                        }}>\n                          {obj.type}: \"{obj.name}\"\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Failed Objects */}\n              {publishResults.failed.length > 0 && (\n                <div>\n                  <h3 style={{\n                    margin: '0 0 16px 0',\n                    fontSize: '14px',\n                    fontWeight: 600,\n                    color: '#ef4444',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px'\n                  }}>\n                    <XCircle size={18} />\n                    Failed to Publish ({publishResults.failed.length})\n                  </h3>\n                  <div style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: '12px'\n                  }}>\n                    {publishResults.failed.map((obj, index) => (\n                      <div key={index} style={{\n                        padding: '16px',\n                        backgroundColor: '#fef2f2',\n                        border: '1px solid #fecaca',\n                        borderRadius: '8px'\n                      }}>\n                        <div style={{\n                          fontWeight: 600,\n                          color: '#002329',\n                          marginBottom: '8px'\n                        }}>\n                          {obj.type}: \"{obj.name}\"\n                        </div>\n                        <div style={{\n                          fontSize: '13px',\n                          color: '#ef4444',\n                          marginTop: '8px'\n                        }}>\n                          Error: {obj.error}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Modal Footer */}\n            <div style={{\n              padding: '16px 24px',\n              borderTop: '1px solid #e2e8f0',\n              display: 'flex',\n              justifyContent: 'flex-end',\n              gap: '12px',\n              flexShrink: 0\n            }}>\n              <button\n                onClick={() => {\n                  setShowPublishResultsModal(false);\n                  if (publishResults.failed.length === 0) {\n                    setTimeout(() => {\n                      navigate('/projects');\n                    }, 500);\n                  }\n                }}\n                style={{\n                  padding: '6px 12px',\n                  backgroundColor: '#08979C',\n                  color: '#ffffff',\n                  border: 'none',\n                  borderRadius: '6px',\n                  fontSize: '14px',\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  fontFamily: 'Poppins',\n                  transition: 'background-color 0.2s'\n                }}\n                onMouseEnter={(e) => e.target.style.backgroundColor = '#067a7f'}\n                onMouseLeave={(e) => e.target.style.backgroundColor = '#08979C'}\n              >\n                {publishResults.failed.length === 0 ? 'Continue' : 'Close'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProjectQualificationStepSetup;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}