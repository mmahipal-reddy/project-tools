{"ast":null,"code":"// Custom hook for reference field search functionality\nimport{useState,useRef,useCallback}from'react';import{searchReference}from'../services/apiService';export const useReferenceSearch=()=>{const[referenceSearchTerm,setReferenceSearchTerm]=useState('');const[referenceSearchResults,setReferenceSearchResults]=useState([]);const[searchingReference,setSearchingReference]=useState(false);const[showReferenceDropdown,setShowReferenceDropdown]=useState(false);const referenceSearchRef=useRef(null);const searchTimeoutRef=useRef(null);const performSearch=useCallback(async(referenceObject,searchTerm)=>{if(!referenceObject||!searchTerm||searchTerm.trim()===''){setReferenceSearchResults([]);setShowReferenceDropdown(false);return;}setSearchingReference(true);setShowReferenceDropdown(true);try{const results=await searchReference(referenceObject,searchTerm);setReferenceSearchResults(results);}catch(error){console.error('Error searching reference:',error);setReferenceSearchResults([]);}finally{setSearchingReference(false);}},[]);const handleSearch=useCallback((referenceObject,value)=>{setReferenceSearchTerm(value);if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}if(!value||value.trim()===''){setReferenceSearchResults([]);setShowReferenceDropdown(false);return;}searchTimeoutRef.current=setTimeout(()=>{performSearch(referenceObject,value);},300);},[performSearch]);return{referenceSearchTerm,setReferenceSearchTerm,referenceSearchResults,setReferenceSearchResults,searchingReference,showReferenceDropdown,setShowReferenceDropdown,referenceSearchRef,handleSearch,performSearch};};","map":{"version":3,"names":["useState","useRef","useCallback","searchReference","useReferenceSearch","referenceSearchTerm","setReferenceSearchTerm","referenceSearchResults","setReferenceSearchResults","searchingReference","setSearchingReference","showReferenceDropdown","setShowReferenceDropdown","referenceSearchRef","searchTimeoutRef","performSearch","referenceObject","searchTerm","trim","results","error","console","handleSearch","value","current","clearTimeout","setTimeout"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/UpdateObjectFields/hooks/useReferenceSearch.js"],"sourcesContent":["// Custom hook for reference field search functionality\n\nimport { useState, useRef, useCallback } from 'react';\nimport { searchReference } from '../services/apiService';\n\nexport const useReferenceSearch = () => {\n  const [referenceSearchTerm, setReferenceSearchTerm] = useState('');\n  const [referenceSearchResults, setReferenceSearchResults] = useState([]);\n  const [searchingReference, setSearchingReference] = useState(false);\n  const [showReferenceDropdown, setShowReferenceDropdown] = useState(false);\n  const referenceSearchRef = useRef(null);\n  const searchTimeoutRef = useRef(null);\n\n  const performSearch = useCallback(async (referenceObject, searchTerm) => {\n    if (!referenceObject || !searchTerm || searchTerm.trim() === '') {\n      setReferenceSearchResults([]);\n      setShowReferenceDropdown(false);\n      return;\n    }\n\n    setSearchingReference(true);\n    setShowReferenceDropdown(true);\n\n    try {\n      const results = await searchReference(referenceObject, searchTerm);\n      setReferenceSearchResults(results);\n    } catch (error) {\n      console.error('Error searching reference:', error);\n      setReferenceSearchResults([]);\n    } finally {\n      setSearchingReference(false);\n    }\n  }, []);\n\n  const handleSearch = useCallback((referenceObject, value) => {\n    setReferenceSearchTerm(value);\n    \n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    if (!value || value.trim() === '') {\n      setReferenceSearchResults([]);\n      setShowReferenceDropdown(false);\n      return;\n    }\n\n    searchTimeoutRef.current = setTimeout(() => {\n      performSearch(referenceObject, value);\n    }, 300);\n  }, [performSearch]);\n\n  return {\n    referenceSearchTerm,\n    setReferenceSearchTerm,\n    referenceSearchResults,\n    setReferenceSearchResults,\n    searchingReference,\n    showReferenceDropdown,\n    setShowReferenceDropdown,\n    referenceSearchRef,\n    handleSearch,\n    performSearch\n  };\n};\n\n"],"mappings":"AAAA;AAEA,OAASA,QAAQ,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CACrD,OAASC,eAAe,KAAQ,wBAAwB,CAExD,MAAO,MAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CACtC,KAAM,CAACC,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGN,QAAQ,CAAC,EAAE,CAAC,CAClE,KAAM,CAACO,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CACxE,KAAM,CAACS,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACW,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAAAa,kBAAkB,CAAGZ,MAAM,CAAC,IAAI,CAAC,CACvC,KAAM,CAAAa,gBAAgB,CAAGb,MAAM,CAAC,IAAI,CAAC,CAErC,KAAM,CAAAc,aAAa,CAAGb,WAAW,CAAC,MAAOc,eAAe,CAAEC,UAAU,GAAK,CACvE,GAAI,CAACD,eAAe,EAAI,CAACC,UAAU,EAAIA,UAAU,CAACC,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CAC/DV,yBAAyB,CAAC,EAAE,CAAC,CAC7BI,wBAAwB,CAAC,KAAK,CAAC,CAC/B,OACF,CAEAF,qBAAqB,CAAC,IAAI,CAAC,CAC3BE,wBAAwB,CAAC,IAAI,CAAC,CAE9B,GAAI,CACF,KAAM,CAAAO,OAAO,CAAG,KAAM,CAAAhB,eAAe,CAACa,eAAe,CAAEC,UAAU,CAAC,CAClET,yBAAyB,CAACW,OAAO,CAAC,CACpC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDZ,yBAAyB,CAAC,EAAE,CAAC,CAC/B,CAAC,OAAS,CACRE,qBAAqB,CAAC,KAAK,CAAC,CAC9B,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAY,YAAY,CAAGpB,WAAW,CAAC,CAACc,eAAe,CAAEO,KAAK,GAAK,CAC3DjB,sBAAsB,CAACiB,KAAK,CAAC,CAE7B,GAAIT,gBAAgB,CAACU,OAAO,CAAE,CAC5BC,YAAY,CAACX,gBAAgB,CAACU,OAAO,CAAC,CACxC,CAEA,GAAI,CAACD,KAAK,EAAIA,KAAK,CAACL,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CACjCV,yBAAyB,CAAC,EAAE,CAAC,CAC7BI,wBAAwB,CAAC,KAAK,CAAC,CAC/B,OACF,CAEAE,gBAAgB,CAACU,OAAO,CAAGE,UAAU,CAAC,IAAM,CAC1CX,aAAa,CAACC,eAAe,CAAEO,KAAK,CAAC,CACvC,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,CAAE,CAACR,aAAa,CAAC,CAAC,CAEnB,MAAO,CACLV,mBAAmB,CACnBC,sBAAsB,CACtBC,sBAAsB,CACtBC,yBAAyB,CACzBC,kBAAkB,CAClBE,qBAAqB,CACrBC,wBAAwB,CACxBC,kBAAkB,CAClBS,YAAY,CACZP,aACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}