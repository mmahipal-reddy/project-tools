{"ast":null,"code":"import axios from 'axios';\n\n// In development, use relative URL to go through proxy (avoids CORS)\n// In production, use full URL from environment variable\nconst API_BASE_URL = process.env.REACT_APP_API_URL || (process.env.NODE_ENV === 'production' ? '/api' : '/api');\n\n// Backend health check with retry logic\nlet backendHealthCheckPromise = null;\nlet lastHealthCheck = null;\nconst HEALTH_CHECK_CACHE_MS = 5000; // Cache health check for 5 seconds\n\nconst checkBackendHealthWithCache = async () => {\n  const now = Date.now();\n\n  // Return cached result if available and recent\n  if (lastHealthCheck && now - lastHealthCheck.timestamp < HEALTH_CHECK_CACHE_MS) {\n    return lastHealthCheck.isHealthy;\n  }\n\n  // If a health check is already in progress, wait for it\n  if (backendHealthCheckPromise) {\n    return backendHealthCheckPromise;\n  }\n\n  // Start new health check\n  backendHealthCheckPromise = (async () => {\n    try {\n      const response = await axios.get('/health', {\n        baseURL: API_BASE_URL,\n        timeout: 3000,\n        validateStatus: status => status === 200\n      });\n      lastHealthCheck = {\n        isHealthy: true,\n        timestamp: now\n      };\n      return true;\n    } catch (error) {\n      lastHealthCheck = {\n        isHealthy: false,\n        timestamp: now\n      };\n      return false;\n    } finally {\n      backendHealthCheckPromise = null;\n    }\n  })();\n  return backendHealthCheckPromise;\n};\n\n// CSRF token management\nlet csrfToken = null;\nlet csrfTokenPromise = null;\nconst getCsrfToken = async () => {\n  // Return cached token if available\n  if (csrfToken) {\n    return csrfToken;\n  }\n\n  // If a token fetch is already in progress, wait for it\n  if (csrfTokenPromise) {\n    return csrfTokenPromise;\n  }\n\n  // Fetch new CSRF token\n  csrfTokenPromise = (async () => {\n    try {\n      const response = await axios.get('/csrf-token', {\n        baseURL: API_BASE_URL,\n        timeout: 5000\n      });\n      csrfToken = response.data.csrfToken;\n      return csrfToken;\n    } catch (error) {\n      console.warn('Failed to fetch CSRF token:', error);\n      // Return null if token fetch fails (will retry on next request)\n      return null;\n    } finally {\n      csrfTokenPromise = null;\n    }\n  })();\n  return csrfTokenPromise;\n};\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  // Remove withCredentials to avoid CORS issues - server CORS is configured correctly\n  // withCredentials: true,\n  timeout: 120000 // 120 second timeout (increased for Salesforce API calls, especially KPIs)\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Always log request details in development for debugging\n  if (process.env.NODE_ENV === 'development') {\n    console.log('API Request:', {\n      url: config.url,\n      method: config.method,\n      baseURL: config.baseURL,\n      fullURL: `${config.baseURL}${config.url}`,\n      hasToken: !!token,\n      tokenLength: token ? token.length : 0,\n      headers: {\n        'Content-Type': config.headers['Content-Type'],\n        'Authorization': config.headers.Authorization ? 'Bearer ***' : 'None',\n        'Origin': window.location.origin\n      },\n      withCredentials: config.withCredentials\n    });\n  } else if (!token) {\n    console.warn('API Request without token:', {\n      url: config.url,\n      method: config.method\n    });\n  }\n  return config;\n}, error => {\n  console.error('Request interceptor error:', error);\n  return Promise.reject(error);\n});\n\n// Use the cached health check function\nconst checkBackendHealth = checkBackendHealthWithCache;\n\n// Export health check function for use in other modules\nexport { checkBackendHealth };\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(response => response, async error => {\n  var _error$response, _error$response3, _error$response4;\n  // Handle 504 Gateway Timeout errors\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 504 || error.code === 'ECONNREFUSED' || error.code === 'ETIMEDOUT') {\n    var _error$config, _error$response2;\n    const url = ((_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url) || '';\n    console.error('Backend connection error:', {\n      status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status,\n      code: error.code,\n      message: error.message,\n      url: url\n    });\n    error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n    error.isBackendDown = true;\n    error.userMessage = 'Unable to connect to server. Please ensure the backend server is running on port 5000.';\n  }\n\n  // Handle 404 errors - check if backend is ready\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 404) {\n    var _error$config2;\n    const url = ((_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.url) || '';\n    const isAuthEndpoint = url.includes('/auth/');\n\n    // For auth endpoints, check if backend is ready\n    if (isAuthEndpoint) {\n      const isHealthy = await checkBackendHealth();\n      if (!isHealthy) {\n        console.error('Backend is not responding. Please ensure the server is running on port 5000.');\n        error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n        error.isBackendDown = true;\n      } else {\n        console.error('404 on auth endpoint - route may not be registered:', url);\n        error.message = `Route not found: ${url}. Please check that the backend server has restarted and routes are registered.`;\n      }\n    }\n  }\n\n  // Handle network errors (server not running, CORS blocked, etc.)\n  if (!error.response) {\n    var _error$config3, _error$config4;\n    const url = ((_error$config3 = error.config) === null || _error$config3 === void 0 ? void 0 : _error$config3.url) || '';\n    const baseURL = ((_error$config4 = error.config) === null || _error$config4 === void 0 ? void 0 : _error$config4.baseURL) || API_BASE_URL;\n    const fullURL = `${baseURL}${url}`;\n    console.error('Network error - request did not reach server:', {\n      url: url,\n      fullURL: fullURL,\n      baseURL: baseURL,\n      message: error.message,\n      code: error.code,\n      name: error.name\n    });\n\n    // Check if it's a CORS error\n    if (error.message && (error.message.includes('CORS') || error.message.includes('Network Error') || error.code === 'ERR_NETWORK' || error.code === 'ERR_BLOCKED_BY_CLIENT')) {\n      console.error('CORS or network blocking detected. Check:');\n      console.error('1. Server is running on port 5000');\n      console.error('2. CORS is configured correctly on server');\n      console.error('3. Browser is not blocking the request');\n      console.error('4. Request URL:', fullURL);\n    }\n    const isAuthEndpoint = url.includes('/auth/');\n\n    // For login/verify endpoints, provide helpful error message\n    if (isAuthEndpoint && (url.includes('/login') || url.includes('/verify'))) {\n      // Don't show error toast for network errors on login - let the component handle it\n      // The error will be caught in the login function and shown there\n    }\n    return Promise.reject(error);\n  }\n  if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401) {\n    var _error$config5;\n    // Check if this is a Salesforce endpoint error (invalid Salesforce credentials)\n    // vs an auth endpoint error (invalid user token)\n    const url = ((_error$config5 = error.config) === null || _error$config5 === void 0 ? void 0 : _error$config5.url) || '';\n    const isSalesforceEndpoint = url.includes('/salesforce/');\n    const isAuthEndpoint = url.includes('/auth/');\n\n    // Only redirect to login if it's an auth endpoint error (user token invalid)\n    // Salesforce 401 errors should not redirect - they're just invalid Salesforce credentials\n    if (isAuthEndpoint && !isSalesforceEndpoint) {\n      // Token expired or invalid - redirect to login\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    // For Salesforce endpoints, just return the error without redirecting\n  }\n  return Promise.reject(error);\n});\nexport default apiClient;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","NODE_ENV","backendHealthCheckPromise","lastHealthCheck","HEALTH_CHECK_CACHE_MS","checkBackendHealthWithCache","now","Date","timestamp","isHealthy","response","get","baseURL","timeout","validateStatus","status","error","csrfToken","csrfTokenPromise","getCsrfToken","data","console","warn","apiClient","create","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","log","url","method","fullURL","hasToken","tokenLength","length","window","location","origin","withCredentials","Promise","reject","checkBackendHealth","_error$response","_error$response3","_error$response4","code","_error$config","_error$response2","message","isBackendDown","userMessage","_error$config2","isAuthEndpoint","includes","_error$config3","_error$config4","name","_error$config5","isSalesforceEndpoint","removeItem","href"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/config/api.js"],"sourcesContent":["import axios from 'axios';\n\n// In development, use relative URL to go through proxy (avoids CORS)\n// In production, use full URL from environment variable\nconst API_BASE_URL = process.env.REACT_APP_API_URL || (process.env.NODE_ENV === 'production' ? '/api' : '/api');\n\n// Backend health check with retry logic\nlet backendHealthCheckPromise = null;\nlet lastHealthCheck = null;\nconst HEALTH_CHECK_CACHE_MS = 5000; // Cache health check for 5 seconds\n\nconst checkBackendHealthWithCache = async () => {\n  const now = Date.now();\n  \n  // Return cached result if available and recent\n  if (lastHealthCheck && (now - lastHealthCheck.timestamp) < HEALTH_CHECK_CACHE_MS) {\n    return lastHealthCheck.isHealthy;\n  }\n  \n  // If a health check is already in progress, wait for it\n  if (backendHealthCheckPromise) {\n    return backendHealthCheckPromise;\n  }\n  \n  // Start new health check\n  backendHealthCheckPromise = (async () => {\n    try {\n      const response = await axios.get('/health', {\n        baseURL: API_BASE_URL,\n        timeout: 3000,\n        validateStatus: (status) => status === 200\n      });\n      lastHealthCheck = { isHealthy: true, timestamp: now };\n      return true;\n    } catch (error) {\n      lastHealthCheck = { isHealthy: false, timestamp: now };\n      return false;\n    } finally {\n      backendHealthCheckPromise = null;\n    }\n  })();\n  \n  return backendHealthCheckPromise;\n};\n\n// CSRF token management\nlet csrfToken = null;\nlet csrfTokenPromise = null;\n\nconst getCsrfToken = async () => {\n  // Return cached token if available\n  if (csrfToken) {\n    return csrfToken;\n  }\n  \n  // If a token fetch is already in progress, wait for it\n  if (csrfTokenPromise) {\n    return csrfTokenPromise;\n  }\n  \n  // Fetch new CSRF token\n  csrfTokenPromise = (async () => {\n    try {\n      const response = await axios.get('/csrf-token', {\n        baseURL: API_BASE_URL,\n        timeout: 5000\n      });\n      csrfToken = response.data.csrfToken;\n      return csrfToken;\n    } catch (error) {\n      console.warn('Failed to fetch CSRF token:', error);\n      // Return null if token fetch fails (will retry on next request)\n      return null;\n    } finally {\n      csrfTokenPromise = null;\n    }\n  })();\n  \n  return csrfTokenPromise;\n};\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  // Remove withCredentials to avoid CORS issues - server CORS is configured correctly\n  // withCredentials: true,\n  timeout: 120000, // 120 second timeout (increased for Salesforce API calls, especially KPIs)\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    \n    // Always log request details in development for debugging\n    if (process.env.NODE_ENV === 'development') {\n      console.log('API Request:', {\n        url: config.url,\n        method: config.method,\n        baseURL: config.baseURL,\n        fullURL: `${config.baseURL}${config.url}`,\n        hasToken: !!token,\n        tokenLength: token ? token.length : 0,\n        headers: {\n          'Content-Type': config.headers['Content-Type'],\n          'Authorization': config.headers.Authorization ? 'Bearer ***' : 'None',\n          'Origin': window.location.origin\n        },\n        withCredentials: config.withCredentials\n      });\n    } else if (!token) {\n      console.warn('API Request without token:', {\n        url: config.url,\n        method: config.method\n      });\n    }\n    \n    return config;\n  },\n  (error) => {\n    console.error('Request interceptor error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Use the cached health check function\nconst checkBackendHealth = checkBackendHealthWithCache;\n\n// Export health check function for use in other modules\nexport { checkBackendHealth };\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    // Handle 504 Gateway Timeout errors\n    if (error.response?.status === 504 || error.code === 'ECONNREFUSED' || error.code === 'ETIMEDOUT') {\n      const url = error.config?.url || '';\n      console.error('Backend connection error:', {\n        status: error.response?.status,\n        code: error.code,\n        message: error.message,\n        url: url\n      });\n      \n      error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n      error.isBackendDown = true;\n      error.userMessage = 'Unable to connect to server. Please ensure the backend server is running on port 5000.';\n    }\n    \n    // Handle 404 errors - check if backend is ready\n    if (error.response?.status === 404) {\n      const url = error.config?.url || '';\n      const isAuthEndpoint = url.includes('/auth/');\n      \n      // For auth endpoints, check if backend is ready\n      if (isAuthEndpoint) {\n        const isHealthy = await checkBackendHealth();\n        if (!isHealthy) {\n          console.error('Backend is not responding. Please ensure the server is running on port 5000.');\n          error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n          error.isBackendDown = true;\n        } else {\n          console.error('404 on auth endpoint - route may not be registered:', url);\n          error.message = `Route not found: ${url}. Please check that the backend server has restarted and routes are registered.`;\n        }\n      }\n    }\n    \n    // Handle network errors (server not running, CORS blocked, etc.)\n    if (!error.response) {\n      const url = error.config?.url || '';\n      const baseURL = error.config?.baseURL || API_BASE_URL;\n      const fullURL = `${baseURL}${url}`;\n      \n      console.error('Network error - request did not reach server:', {\n        url: url,\n        fullURL: fullURL,\n        baseURL: baseURL,\n        message: error.message,\n        code: error.code,\n        name: error.name\n      });\n      \n      // Check if it's a CORS error\n      if (error.message && (\n        error.message.includes('CORS') || \n        error.message.includes('Network Error') ||\n        error.code === 'ERR_NETWORK' ||\n        error.code === 'ERR_BLOCKED_BY_CLIENT'\n      )) {\n        console.error('CORS or network blocking detected. Check:');\n        console.error('1. Server is running on port 5000');\n        console.error('2. CORS is configured correctly on server');\n        console.error('3. Browser is not blocking the request');\n        console.error('4. Request URL:', fullURL);\n      }\n      \n      const isAuthEndpoint = url.includes('/auth/');\n      \n      // For login/verify endpoints, provide helpful error message\n      if (isAuthEndpoint && (url.includes('/login') || url.includes('/verify'))) {\n        // Don't show error toast for network errors on login - let the component handle it\n        // The error will be caught in the login function and shown there\n      }\n      \n      return Promise.reject(error);\n    }\n    \n    if (error.response?.status === 401) {\n      // Check if this is a Salesforce endpoint error (invalid Salesforce credentials)\n      // vs an auth endpoint error (invalid user token)\n      const url = error.config?.url || '';\n      const isSalesforceEndpoint = url.includes('/salesforce/');\n      const isAuthEndpoint = url.includes('/auth/');\n      \n      // Only redirect to login if it's an auth endpoint error (user token invalid)\n      // Salesforce 401 errors should not redirect - they're just invalid Salesforce credentials\n      if (isAuthEndpoint && !isSalesforceEndpoint) {\n        // Token expired or invalid - redirect to login\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      }\n      // For Salesforce endpoints, just return the error without redirecting\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default apiClient;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}