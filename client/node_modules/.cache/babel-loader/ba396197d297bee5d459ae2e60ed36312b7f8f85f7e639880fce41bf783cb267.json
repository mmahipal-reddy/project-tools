{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{ChevronRight,ChevronDown,Search,Folder,FolderOpen}from'lucide-react';import apiClient from'../../../config/api';import'./RelationshipBrowser.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RelationshipBrowser=_ref=>{let{objectType,selectedFields,onFieldToggle,availableFields=[]}=_ref;const[relationships,setRelationships]=useState([]);const[loading,setLoading]=useState(false);const[expandedPaths,setExpandedPaths]=useState(new Set());const[relatedObjectFields,setRelatedObjectFields]=useState({});const[searchTerm,setSearchTerm]=useState('');const[loadingRef,setLoadingRef]=useState(false);// Prevent multiple simultaneous calls\nuseEffect(()=>{if(objectType&&!loadingRef){loadRelationships();}// Reset relationships when objectType changes\nreturn()=>{setRelationships([]);setExpandedPaths(new Set());setRelatedObjectFields({});};},[objectType]);const loadRelationships=async()=>{if(loadingRef){console.log('[RelationshipBrowser] Already loading, skipping...');return;}setLoadingRef(true);setLoading(true);try{console.log(\"[RelationshipBrowser] Loading relationships for \".concat(objectType,\"...\"));const response=await apiClient.get(\"/update-object-fields/relationships/\".concat(encodeURIComponent(objectType)),{timeout:60000// 60 second timeout\n});if(response.data.success){var _response$data$relati;setRelationships(response.data.relationships||[]);console.log(\"[RelationshipBrowser] Loaded \".concat(((_response$data$relati=response.data.relationships)===null||_response$data$relati===void 0?void 0:_response$data$relati.length)||0,\" relationships\"));}else{console.error('[RelationshipBrowser] Failed to load relationships:',response.data.error);}}catch(error){console.error('Error loading relationships:',error);if(error.code==='ECONNABORTED'){console.error('[RelationshipBrowser] Request timed out - relationship discovery may be taking too long');}}finally{setLoading(false);setLoadingRef(false);}};const loadRelatedObjectFields=async(targetObject,relationshipPath)=>{// Check if we already have fields for this object\nif(relatedObjectFields[targetObject]){return;}try{// First try to use the object type map for known objects\nconst objectTypeMap={'Contact':'contributor','Case':'cases','Project__c':'project','Project_Objective__c':'project objective','Contributor_Project__c':'contributor project'};const objectTypeKey=objectTypeMap[targetObject];if(objectTypeKey){const response=await apiClient.get(\"/update-object-fields/fields/\".concat(encodeURIComponent(objectTypeKey),\"?forReporting=true\"));if(response.data.success){setRelatedObjectFields(prev=>_objectSpread(_objectSpread({},prev),{},{[targetObject]:response.data.fields||[]}));return;}}// For objects not in our map (like Account, custom objects, etc.), use the describe endpoint\ntry{const response=await apiClient.get(\"/update-object-fields/describe-object/\".concat(encodeURIComponent(targetObject),\"?forReporting=true\"));if(response.data.success){setRelatedObjectFields(prev=>_objectSpread(_objectSpread({},prev),{},{[targetObject]:response.data.fields||[]}));}}catch(describeError){console.error(\"Error describing object \".concat(targetObject,\":\"),describeError);}}catch(error){console.error(\"Error loading fields for \".concat(targetObject,\":\"),error);}};const togglePath=path=>{const newExpanded=new Set(expandedPaths);if(newExpanded.has(path)){newExpanded.delete(path);}else{newExpanded.add(path);// Load fields when expanding\nconst pathParts=path.split('.');if(pathParts.length>0){const relationship=findRelationshipByPath(pathParts);if(relationship){loadRelatedObjectFields(relationship.targetObject,relationship.relationshipPath);}}}setExpandedPaths(newExpanded);};const findRelationshipByPath=pathParts=>{let currentRelationships=relationships;let currentRelationship=null;for(const part of pathParts){currentRelationship=currentRelationships.find(r=>r.relationshipName===part||r.fieldName===part);if(!currentRelationship)break;currentRelationships=currentRelationship.nestedRelationships||[];}return currentRelationship;};const getFieldPath=(relationshipPath,fieldName)=>{return\"\".concat(relationshipPath,\".\").concat(fieldName);};const isFieldSelected=fieldPath=>{return selectedFields.includes(fieldPath);};const handleFieldToggle=fieldPath=>{onFieldToggle(fieldPath);};const renderRelationshipTree=function(rels){let parentPath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';let depth=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(depth>4)return null;// Max depth 5\nreturn rels.map((rel,index)=>{const currentPath=parentPath?\"\".concat(parentPath,\".\").concat(rel.relationshipName):rel.relationshipName;const isExpanded=expandedPaths.has(currentPath);const fields=relatedObjectFields[rel.targetObject]||[];const filteredFields=searchTerm?fields.filter(f=>{var _f$label,_f$name;return((_f$label=f.label)===null||_f$label===void 0?void 0:_f$label.toLowerCase().includes(searchTerm.toLowerCase()))||((_f$name=f.name)===null||_f$name===void 0?void 0:_f$name.toLowerCase().includes(searchTerm.toLowerCase()));}):fields;return/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-node\",style:{marginLeft:\"\".concat(depth*20,\"px\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-header\",onClick:()=>togglePath(currentPath),children:[isExpanded?/*#__PURE__*/_jsx(ChevronDown,{size:16,className:\"relationship-icon\"}):/*#__PURE__*/_jsx(ChevronRight,{size:16,className:\"relationship-icon\"}),isExpanded?/*#__PURE__*/_jsx(FolderOpen,{size:16,className:\"relationship-folder-icon\"}):/*#__PURE__*/_jsx(Folder,{size:16,className:\"relationship-folder-icon\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"relationship-label\",children:[rel.isSubquery?'ðŸ“‹ ':'',rel.fieldLabel||rel.fieldName,\" \\u2192 \",rel.targetObject,rel.isSubquery&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'11px',color:'#6b7280',marginLeft:'4px'},children:\"(Child Records)\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"relationship-type-badge \".concat(rel.isSubquery?'subquery-badge':''),children:rel.isSubquery?'Subquery':rel.relationshipType})]}),isExpanded&&/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-fields\",children:[filteredFields.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"relationship-loading\",children:\"Loading fields...\"}):filteredFields.filter(field=>field.type!=='base64'&&!field.name.startsWith('System')&&field.name!=='Id'// Exclude Id as it's the lookup field\n).map(field=>{// For subqueries, the path format is: relationshipName.fieldName (e.g., Cases.Subject)\n// For parent relationships, it's: relationshipName.fieldName (e.g., Account__r.Name)\nconst fieldPath=rel.isSubquery?\"SUBQUERY:\".concat(rel.relationshipName,\".\").concat(field.name):getFieldPath(rel.relationshipName,field.name);const isSelected=isFieldSelected(fieldPath)||isFieldSelected(\"SUBQUERY:\".concat(rel.relationshipName,\".\").concat(field.name));return/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-field-item \".concat(isSelected?'selected':'',\" \").concat(rel.isSubquery?'subquery-field':''),onClick:()=>handleFieldToggle(fieldPath),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isSelected,onChange:()=>handleFieldToggle(fieldPath),onClick:e=>e.stopPropagation()}),/*#__PURE__*/_jsx(\"span\",{className:\"field-label\",children:field.label||field.name}),/*#__PURE__*/_jsx(\"span\",{className:\"field-path\",children:rel.isSubquery?\"\".concat(rel.relationshipName,\".\").concat(field.name):fieldPath})]},field.name);}),rel.nestedRelationships&&rel.nestedRelationships.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"nested-relationships\",children:renderRelationshipTree(rel.nestedRelationships,currentPath,depth+1)})]})]},\"\".concat(currentPath,\"-\").concat(index));});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"relationship-browser-loading\",children:\"Loading relationships...\"});}if(relationships.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-browser-empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No relationships found for this object.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hint\",children:\"You can still select fields from the primary object.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-browser\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-browser-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Related Objects\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relationship-search\",children:[/*#__PURE__*/_jsx(Search,{size:16}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search related fields...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relationship-tree\",children:renderRelationshipTree(relationships)})]});};export default RelationshipBrowser;","map":{"version":3,"names":["React","useState","useEffect","ChevronRight","ChevronDown","Search","Folder","FolderOpen","apiClient","jsx","_jsx","jsxs","_jsxs","RelationshipBrowser","_ref","objectType","selectedFields","onFieldToggle","availableFields","relationships","setRelationships","loading","setLoading","expandedPaths","setExpandedPaths","Set","relatedObjectFields","setRelatedObjectFields","searchTerm","setSearchTerm","loadingRef","setLoadingRef","loadRelationships","console","log","concat","response","get","encodeURIComponent","timeout","data","success","_response$data$relati","length","error","code","loadRelatedObjectFields","targetObject","relationshipPath","objectTypeMap","objectTypeKey","prev","_objectSpread","fields","describeError","togglePath","path","newExpanded","has","delete","add","pathParts","split","relationship","findRelationshipByPath","currentRelationships","currentRelationship","part","find","r","relationshipName","fieldName","nestedRelationships","getFieldPath","isFieldSelected","fieldPath","includes","handleFieldToggle","renderRelationshipTree","rels","parentPath","arguments","undefined","depth","map","rel","index","currentPath","isExpanded","filteredFields","filter","f","_f$label","_f$name","label","toLowerCase","name","className","style","marginLeft","children","onClick","size","isSubquery","fieldLabel","fontSize","color","relationshipType","field","type","startsWith","isSelected","checked","onChange","e","stopPropagation","placeholder","value","target"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/components/ReportBuilder/RelationshipBrowser/RelationshipBrowser.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ChevronRight, ChevronDown, Search, Folder, FolderOpen } from 'lucide-react';\nimport apiClient from '../../../config/api';\nimport './RelationshipBrowser.css';\n\nconst RelationshipBrowser = ({ \n  objectType, \n  selectedFields, \n  onFieldToggle,\n  availableFields = []\n}) => {\n  const [relationships, setRelationships] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [expandedPaths, setExpandedPaths] = useState(new Set());\n  const [relatedObjectFields, setRelatedObjectFields] = useState({});\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loadingRef, setLoadingRef] = useState(false); // Prevent multiple simultaneous calls\n\n  useEffect(() => {\n    if (objectType && !loadingRef) {\n      loadRelationships();\n    }\n    // Reset relationships when objectType changes\n    return () => {\n      setRelationships([]);\n      setExpandedPaths(new Set());\n      setRelatedObjectFields({});\n    };\n  }, [objectType]);\n\n  const loadRelationships = async () => {\n    if (loadingRef) {\n      console.log('[RelationshipBrowser] Already loading, skipping...');\n      return;\n    }\n    \n    setLoadingRef(true);\n    setLoading(true);\n    try {\n      console.log(`[RelationshipBrowser] Loading relationships for ${objectType}...`);\n      const response = await apiClient.get(`/update-object-fields/relationships/${encodeURIComponent(objectType)}`, {\n        timeout: 60000 // 60 second timeout\n      });\n      if (response.data.success) {\n        setRelationships(response.data.relationships || []);\n        console.log(`[RelationshipBrowser] Loaded ${response.data.relationships?.length || 0} relationships`);\n      } else {\n        console.error('[RelationshipBrowser] Failed to load relationships:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error loading relationships:', error);\n      if (error.code === 'ECONNABORTED') {\n        console.error('[RelationshipBrowser] Request timed out - relationship discovery may be taking too long');\n      }\n    } finally {\n      setLoading(false);\n      setLoadingRef(false);\n    }\n  };\n\n  const loadRelatedObjectFields = async (targetObject, relationshipPath) => {\n    // Check if we already have fields for this object\n    if (relatedObjectFields[targetObject]) {\n      return;\n    }\n\n    try {\n      // First try to use the object type map for known objects\n      const objectTypeMap = {\n        'Contact': 'contributor',\n        'Case': 'cases',\n        'Project__c': 'project',\n        'Project_Objective__c': 'project objective',\n        'Contributor_Project__c': 'contributor project'\n      };\n      \n      const objectTypeKey = objectTypeMap[targetObject];\n      \n      if (objectTypeKey) {\n        const response = await apiClient.get(`/update-object-fields/fields/${encodeURIComponent(objectTypeKey)}?forReporting=true`);\n        if (response.data.success) {\n          setRelatedObjectFields(prev => ({\n            ...prev,\n            [targetObject]: response.data.fields || []\n          }));\n          return;\n        }\n      }\n      \n      // For objects not in our map (like Account, custom objects, etc.), use the describe endpoint\n      try {\n        const response = await apiClient.get(`/update-object-fields/describe-object/${encodeURIComponent(targetObject)}?forReporting=true`);\n        if (response.data.success) {\n          setRelatedObjectFields(prev => ({\n            ...prev,\n            [targetObject]: response.data.fields || []\n          }));\n        }\n      } catch (describeError) {\n        console.error(`Error describing object ${targetObject}:`, describeError);\n      }\n    } catch (error) {\n      console.error(`Error loading fields for ${targetObject}:`, error);\n    }\n  };\n\n  const togglePath = (path) => {\n    const newExpanded = new Set(expandedPaths);\n    if (newExpanded.has(path)) {\n      newExpanded.delete(path);\n    } else {\n      newExpanded.add(path);\n      // Load fields when expanding\n      const pathParts = path.split('.');\n      if (pathParts.length > 0) {\n        const relationship = findRelationshipByPath(pathParts);\n        if (relationship) {\n          loadRelatedObjectFields(relationship.targetObject, relationship.relationshipPath);\n        }\n      }\n    }\n    setExpandedPaths(newExpanded);\n  };\n\n  const findRelationshipByPath = (pathParts) => {\n    let currentRelationships = relationships;\n    let currentRelationship = null;\n\n    for (const part of pathParts) {\n      currentRelationship = currentRelationships.find(r => \n        r.relationshipName === part || r.fieldName === part\n      );\n      if (!currentRelationship) break;\n      currentRelationships = currentRelationship.nestedRelationships || [];\n    }\n\n    return currentRelationship;\n  };\n\n  const getFieldPath = (relationshipPath, fieldName) => {\n    return `${relationshipPath}.${fieldName}`;\n  };\n\n  const isFieldSelected = (fieldPath) => {\n    return selectedFields.includes(fieldPath);\n  };\n\n  const handleFieldToggle = (fieldPath) => {\n    onFieldToggle(fieldPath);\n  };\n\n  const renderRelationshipTree = (rels, parentPath = '', depth = 0) => {\n    if (depth > 4) return null; // Max depth 5\n\n    return rels.map((rel, index) => {\n      const currentPath = parentPath ? `${parentPath}.${rel.relationshipName}` : rel.relationshipName;\n      const isExpanded = expandedPaths.has(currentPath);\n      const fields = relatedObjectFields[rel.targetObject] || [];\n      const filteredFields = searchTerm \n        ? fields.filter(f => \n            f.label?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            f.name?.toLowerCase().includes(searchTerm.toLowerCase())\n          )\n        : fields;\n\n      return (\n        <div key={`${currentPath}-${index}`} className=\"relationship-node\" style={{ marginLeft: `${depth * 20}px` }}>\n          <div \n            className=\"relationship-header\"\n            onClick={() => togglePath(currentPath)}\n          >\n            {isExpanded ? (\n              <ChevronDown size={16} className=\"relationship-icon\" />\n            ) : (\n              <ChevronRight size={16} className=\"relationship-icon\" />\n            )}\n            {isExpanded ? (\n              <FolderOpen size={16} className=\"relationship-folder-icon\" />\n            ) : (\n              <Folder size={16} className=\"relationship-folder-icon\" />\n            )}\n            <span className=\"relationship-label\">\n              {rel.isSubquery ? 'ðŸ“‹ ' : ''}{rel.fieldLabel || rel.fieldName} â†’ {rel.targetObject}\n              {rel.isSubquery && <span style={{ fontSize: '11px', color: '#6b7280', marginLeft: '4px' }}>(Child Records)</span>}\n            </span>\n            <span className={`relationship-type-badge ${rel.isSubquery ? 'subquery-badge' : ''}`}>\n              {rel.isSubquery ? 'Subquery' : rel.relationshipType}\n            </span>\n          </div>\n\n          {isExpanded && (\n            <div className=\"relationship-fields\">\n              {filteredFields.length === 0 ? (\n                <div className=\"relationship-loading\">Loading fields...</div>\n              ) : (\n                filteredFields\n                  .filter(field => \n                    field.type !== 'base64' && \n                    !field.name.startsWith('System') &&\n                    field.name !== 'Id' // Exclude Id as it's the lookup field\n                  )\n                  .map(field => {\n                    // For subqueries, the path format is: relationshipName.fieldName (e.g., Cases.Subject)\n                    // For parent relationships, it's: relationshipName.fieldName (e.g., Account__r.Name)\n                    const fieldPath = rel.isSubquery \n                      ? `SUBQUERY:${rel.relationshipName}.${field.name}`\n                      : getFieldPath(rel.relationshipName, field.name);\n                    const isSelected = isFieldSelected(fieldPath) || isFieldSelected(`SUBQUERY:${rel.relationshipName}.${field.name}`);\n                    \n                    return (\n                      <div \n                        key={field.name}\n                        className={`relationship-field-item ${isSelected ? 'selected' : ''} ${rel.isSubquery ? 'subquery-field' : ''}`}\n                        onClick={() => handleFieldToggle(fieldPath)}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={isSelected}\n                          onChange={() => handleFieldToggle(fieldPath)}\n                          onClick={(e) => e.stopPropagation()}\n                        />\n                        <span className=\"field-label\">{field.label || field.name}</span>\n                        <span className=\"field-path\">{rel.isSubquery ? `${rel.relationshipName}.${field.name}` : fieldPath}</span>\n                      </div>\n                    );\n                  })\n              )}\n              \n              {/* Render nested relationships */}\n              {rel.nestedRelationships && rel.nestedRelationships.length > 0 && (\n                <div className=\"nested-relationships\">\n                  {renderRelationshipTree(rel.nestedRelationships, currentPath, depth + 1)}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      );\n    });\n  };\n\n  if (loading) {\n    return <div className=\"relationship-browser-loading\">Loading relationships...</div>;\n  }\n\n  if (relationships.length === 0) {\n    return (\n      <div className=\"relationship-browser-empty\">\n        <p>No relationships found for this object.</p>\n        <p className=\"hint\">You can still select fields from the primary object.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relationship-browser\">\n      <div className=\"relationship-browser-header\">\n        <h3>Related Objects</h3>\n        <div className=\"relationship-search\">\n          <Search size={16} />\n          <input\n            type=\"text\"\n            placeholder=\"Search related fields...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n      <div className=\"relationship-tree\">\n        {renderRelationshipTree(relationships)}\n      </div>\n    </div>\n  );\n};\n\nexport default RelationshipBrowser;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}