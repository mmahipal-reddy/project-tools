{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Cursor/ProjectSetup/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Widget helper render functions\nimport React from'react';import{RefreshCw,Download,Filter,TrendingUp}from'lucide-react';import{exportToExcel}from'../utils';/**\n * Render widget refresh button\n */import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export const renderWidgetRefresh=(widgetKey,widgetStates,handleWidgetRefresh)=>{const state=widgetStates[widgetKey];return/*#__PURE__*/_jsx(\"button\",{className:\"widget-refresh-btn\",onClick:()=>handleWidgetRefresh(widgetKey),disabled:state===null||state===void 0?void 0:state.loading,title:state!==null&&state!==void 0&&state.loading?'Refreshing...':state!==null&&state!==void 0&&state.error?'Retry':'Refresh this widget',children:/*#__PURE__*/_jsx(RefreshCw,{size:14,className:state!==null&&state!==void 0&&state.loading?'spinning':''})});};/**\n * Render widget action buttons (export, filter, trend)\n */export const renderWidgetActions=(widgetKey,widgetName,widgetStates,handleWidgetRefresh,setShowFilters,showFilters,setShowTrendChart,showTrendChart,historicalData,metrics,kycStatus,byProject,byCountryLanguage,bySource)=>{const hasData=true;// Can be enhanced to check actual data\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"widget-actions\",children:[hasData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"widget-action-btn\",onClick:()=>exportToExcel(widgetKey,null,widgetName,metrics,kycStatus,byProject,byCountryLanguage,bySource),title:\"Export \".concat(widgetName,\" to Excel\"),children:/*#__PURE__*/_jsx(Download,{size:14})}),/*#__PURE__*/_jsx(\"button\",{className:\"widget-action-btn\",onClick:()=>setShowFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:!prev[widgetKey]})),title:\"Filter \".concat(widgetName),children:/*#__PURE__*/_jsx(Filter,{size:14})}),historicalData.length>0&&/*#__PURE__*/_jsx(\"button\",{className:\"widget-action-btn\",onClick:()=>setShowTrendChart(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:!prev[widgetKey]})),title:\"Show trend for \".concat(widgetName),children:/*#__PURE__*/_jsx(TrendingUp,{size:14})})]}),renderWidgetRefresh(widgetKey,widgetStates,handleWidgetRefresh)]});};/**\n * Render widget loading/error status\n */export const renderWidgetStatus=(widgetKey,widgetStates,handleWidgetRefresh)=>{const state=widgetStates[widgetKey];if(state!==null&&state!==void 0&&state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"widget-loading\",children:\"Loading...\"});}if(state!==null&&state!==void 0&&state.error){return/*#__PURE__*/_jsxs(\"div\",{className:\"widget-error\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Error: \",state.error]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleWidgetRefresh(widgetKey),className:\"retry-btn\",children:\"Retry\"})]});}return null;};/**\n * Render filter UI for a widget\n */export const renderFilterUI=(widgetKey,showFilters,filters,setFilters,setShowFilters)=>{if(!showFilters[widgetKey])return null;const handleFilterChange=value=>{if(widgetKey==='kycStatus'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{status:value}));}else if(widgetKey==='byProject'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{project:value}));}else if(widgetKey==='byCountryLanguage'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{country:value}));}};const handleClear=()=>{if(widgetKey==='kycStatus'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{status:null}));}else if(widgetKey==='byProject'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{project:null}));}else if(widgetKey==='byCountryLanguage'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{country:null}));}setShowFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:false}));};const getFilterValue=()=>{if(widgetKey==='kycStatus')return filters.status||'';if(widgetKey==='byProject')return filters.project||'';if(widgetKey==='byCountryLanguage')return filters.country||'';return'';};const getPlaceholder=()=>{if(widgetKey==='kycStatus')return'Filter by status...';if(widgetKey==='byProject')return'Filter by project name...';if(widgetKey==='byCountryLanguage')return'Filter by country...';return'Filter...';};return/*#__PURE__*/_jsxs(\"div\",{className:\"widget-filter-panel\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:getPlaceholder(),value:getFilterValue(),onChange:e=>handleFilterChange(e.target.value),className:\"filter-input\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-clear-btn\",onClick:handleClear,children:\"Clear\"})]});};","map":{"version":3,"names":["React","RefreshCw","Download","Filter","TrendingUp","exportToExcel","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","renderWidgetRefresh","widgetKey","widgetStates","handleWidgetRefresh","state","className","onClick","disabled","loading","title","error","children","size","renderWidgetActions","widgetName","setShowFilters","showFilters","setShowTrendChart","showTrendChart","historicalData","metrics","kycStatus","byProject","byCountryLanguage","bySource","hasData","concat","prev","_objectSpread","length","renderWidgetStatus","renderFilterUI","filters","setFilters","handleFilterChange","value","status","project","country","handleClear","getFilterValue","getPlaceholder","type","placeholder","onChange","e","target","autoFocus"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/CrowdDashboard/components/WidgetHelpers.js"],"sourcesContent":["// Widget helper render functions\n\nimport React from 'react';\nimport { RefreshCw, Download, Filter, TrendingUp } from 'lucide-react';\nimport { exportToExcel } from '../utils';\n\n/**\n * Render widget refresh button\n */\nexport const renderWidgetRefresh = (widgetKey, widgetStates, handleWidgetRefresh) => {\n  const state = widgetStates[widgetKey];\n  return (\n    <button\n      className=\"widget-refresh-btn\"\n      onClick={() => handleWidgetRefresh(widgetKey)}\n      disabled={state?.loading}\n      title={state?.loading ? 'Refreshing...' : state?.error ? 'Retry' : 'Refresh this widget'}\n    >\n      <RefreshCw size={14} className={state?.loading ? 'spinning' : ''} />\n    </button>\n  );\n};\n\n/**\n * Render widget action buttons (export, filter, trend)\n */\nexport const renderWidgetActions = (\n  widgetKey,\n  widgetName,\n  widgetStates,\n  handleWidgetRefresh,\n  setShowFilters,\n  showFilters,\n  setShowTrendChart,\n  showTrendChart,\n  historicalData,\n  metrics,\n  kycStatus,\n  byProject,\n  byCountryLanguage,\n  bySource\n) => {\n  const hasData = true; // Can be enhanced to check actual data\n  return (\n    <div className=\"widget-actions\">\n      {hasData && (\n        <>\n          <button\n            className=\"widget-action-btn\"\n            onClick={() => exportToExcel(widgetKey, null, widgetName, metrics, kycStatus, byProject, byCountryLanguage, bySource)}\n            title={`Export ${widgetName} to Excel`}\n          >\n            <Download size={14} />\n          </button>\n          <button\n            className=\"widget-action-btn\"\n            onClick={() => setShowFilters(prev => ({ ...prev, [widgetKey]: !prev[widgetKey] }))}\n            title={`Filter ${widgetName}`}\n          >\n            <Filter size={14} />\n          </button>\n          {historicalData.length > 0 && (\n            <button\n              className=\"widget-action-btn\"\n              onClick={() => setShowTrendChart(prev => ({ ...prev, [widgetKey]: !prev[widgetKey] }))}\n              title={`Show trend for ${widgetName}`}\n            >\n              <TrendingUp size={14} />\n            </button>\n          )}\n        </>\n      )}\n      {renderWidgetRefresh(widgetKey, widgetStates, handleWidgetRefresh)}\n    </div>\n  );\n};\n\n/**\n * Render widget loading/error status\n */\nexport const renderWidgetStatus = (widgetKey, widgetStates, handleWidgetRefresh) => {\n  const state = widgetStates[widgetKey];\n  if (state?.loading) {\n    return <div className=\"widget-loading\">Loading...</div>;\n  }\n  if (state?.error) {\n    return (\n      <div className=\"widget-error\">\n        <span>Error: {state.error}</span>\n        <button onClick={() => handleWidgetRefresh(widgetKey)} className=\"retry-btn\">Retry</button>\n      </div>\n    );\n  }\n  return null;\n};\n\n/**\n * Render filter UI for a widget\n */\nexport const renderFilterUI = (widgetKey, showFilters, filters, setFilters, setShowFilters) => {\n  if (!showFilters[widgetKey]) return null;\n  \n  const handleFilterChange = (value) => {\n    if (widgetKey === 'kycStatus') {\n      setFilters(prev => ({ ...prev, status: value }));\n    } else if (widgetKey === 'byProject') {\n      setFilters(prev => ({ ...prev, project: value }));\n    } else if (widgetKey === 'byCountryLanguage') {\n      setFilters(prev => ({ ...prev, country: value }));\n    }\n  };\n  \n  const handleClear = () => {\n    if (widgetKey === 'kycStatus') {\n      setFilters(prev => ({ ...prev, status: null }));\n    } else if (widgetKey === 'byProject') {\n      setFilters(prev => ({ ...prev, project: null }));\n    } else if (widgetKey === 'byCountryLanguage') {\n      setFilters(prev => ({ ...prev, country: null }));\n    }\n    setShowFilters(prev => ({ ...prev, [widgetKey]: false }));\n  };\n  \n  const getFilterValue = () => {\n    if (widgetKey === 'kycStatus') return filters.status || '';\n    if (widgetKey === 'byProject') return filters.project || '';\n    if (widgetKey === 'byCountryLanguage') return filters.country || '';\n    return '';\n  };\n  \n  const getPlaceholder = () => {\n    if (widgetKey === 'kycStatus') return 'Filter by status...';\n    if (widgetKey === 'byProject') return 'Filter by project name...';\n    if (widgetKey === 'byCountryLanguage') return 'Filter by country...';\n    return 'Filter...';\n  };\n  \n  return (\n    <div className=\"widget-filter-panel\">\n      <input\n        type=\"text\"\n        placeholder={getPlaceholder()}\n        value={getFilterValue()}\n        onChange={(e) => handleFilterChange(e.target.value)}\n        className=\"filter-input\"\n        autoFocus\n      />\n      <button\n        className=\"filter-clear-btn\"\n        onClick={handleClear}\n      >\n        Clear\n      </button>\n    </div>\n  );\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}