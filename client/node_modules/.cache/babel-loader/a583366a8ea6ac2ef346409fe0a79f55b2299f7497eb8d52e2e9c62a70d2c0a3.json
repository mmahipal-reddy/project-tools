{"ast":null,"code":"var _jsxFileName = \"/Users/mmoola/Cursor/ProjectSetup/client/src/pages/ReportBuilder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport { Menu, LogOut } from 'lucide-react';\nimport apiClient from '../config/api';\nimport axios from 'axios';\nimport { exportData } from '../utils/crossFeature/exportService';\nimport toast from 'react-hot-toast';\nimport SavedReportsPanel from '../components/ReportBuilder/SavedReportsPanel';\nimport ReportConfiguration from '../components/ReportBuilder/ReportConfiguration';\nimport ReportViewPanel from '../components/ReportBuilder/ReportViewPanel';\nimport ReportsList from '../components/ReportBuilder/ReportsList';\nimport PreviewModal from '../components/ReportBuilder/PreviewModal';\nimport DeleteConfirmModal from '../components/ReportBuilder/DeleteConfirmModal';\nimport ScheduleModal from '../components/ReportBuilder/ScheduleModal';\nimport { hasPermission, PERMISSIONS, ROLES } from '../utils/rbac';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\n// Custom axios instance for report generation with longer timeout\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst reportApiClient = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || '/api',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 600000 // 10 minutes for report generation\n});\n\n// Add auth token to report API client\nreportApiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\nconst ReportBuilder = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n\n  // Check if user is Reports Viewer (view-only access)\n  const isReportsViewer = (user === null || user === void 0 ? void 0 : user.role) === ROLES.REPORTS_VIEWER;\n  const canEditReports = hasPermission(user === null || user === void 0 ? void 0 : user.role, PERMISSIONS.EDIT_REPORTS);\n  const canDeleteReports = hasPermission(user === null || user === void 0 ? void 0 : user.role, PERMISSIONS.DELETE_REPORTS);\n  const canCreateReports = hasPermission(user === null || user === void 0 ? void 0 : user.role, PERMISSIONS.CREATE_REPORTS);\n\n  // Reports Viewer should default to Reports tab, others to Configuration\n  const [activeTab, setActiveTab] = useState(isReportsViewer ? 'reports' : 'configuration');\n  const [viewMode, setViewMode] = useState(false);\n  const [selectedReportId, setSelectedReportId] = useState(null);\n  const [reportConfig, setReportConfig] = useState({\n    name: '',\n    objectType: '',\n    fields: [],\n    filters: {},\n    groupBy: null,\n    sortBy: null,\n    sortOrder: 'ASC',\n    limit: 10000,\n    category: 'Uncategorized'\n  });\n  const [availableObjects, setAvailableObjects] = useState([]);\n  const [availableFields, setAvailableFields] = useState([]);\n  const [filterOptions, setFilterOptions] = useState({});\n  const [previewData, setPreviewData] = useState(null);\n  const [fieldLabelMap, setFieldLabelMap] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [loadingFields, setLoadingFields] = useState(false);\n  const [isPreviewing, setIsPreviewing] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [savedReports, setSavedReports] = useState([]);\n  const [showPreview, setShowPreview] = useState(false);\n  const [reportsHistory, setReportsHistory] = useState([]);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [scheduleFormData, setScheduleFormData] = useState({\n    schedule: 'daily',\n    format: 'excel',\n    recipients: []\n  });\n  const [selectedCategory, setSelectedCategory] = useState('All');\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [reportToDelete, setReportToDelete] = useState(null);\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n  const [previewModalData, setPreviewModalData] = useState(null);\n\n  // Use refs to track if operations are in progress (refs don't cause re-renders)\n  const previewInProgressRef = useRef(false);\n  const generateInProgressRef = useRef(false);\n  useEffect(() => {\n    // Redirect Reports Viewer to Reports tab if they try to access Configuration\n    if (isReportsViewer && activeTab === 'configuration') {\n      setActiveTab('reports');\n      loadReportsHistory();\n      return;\n    }\n    loadAvailableObjects();\n    loadSavedReports();\n    if (activeTab === 'reports') {\n      loadReportsHistory();\n    }\n  }, [activeTab, isReportsViewer]);\n  useEffect(() => {\n    if (reportConfig.objectType) {\n      loadFieldsForObject(reportConfig.objectType);\n      loadFilterOptions(reportConfig.objectType);\n    } else {\n      setAvailableFields([]);\n      setFilterOptions({});\n    }\n  }, [reportConfig.objectType]);\n  useEffect(() => {\n    const labelMap = {};\n    availableFields.forEach(field => {\n      labelMap[field.name] = field.label || field.name;\n    });\n    // Add common field labels that might not be in availableFields (handle both naming conventions)\n    if (!labelMap['Active_Contributors__c']) {\n      labelMap['Active_Contributors__c'] = 'Active Contributors';\n    }\n    if (!labelMap['Active_Contributors_c__c']) {\n      labelMap['Active_Contributors_c__c'] = 'Active Contributors';\n    }\n    if (!labelMap['Applied_Contributors__c']) {\n      labelMap['Applied_Contributors__c'] = 'Applied Contributors';\n    }\n    if (!labelMap['Applied_Contributors_c__c']) {\n      labelMap['Applied_Contributors_c__c'] = 'Applied Contributors';\n    }\n    if (!labelMap['Qualified_Contributors__c']) {\n      labelMap['Qualified_Contributors__c'] = 'Qualified Contributors';\n    }\n    if (!labelMap['Qualified_Contributors_c__c']) {\n      labelMap['Qualified_Contributors_c__c'] = 'Qualified Contributors';\n    }\n    if (!labelMap['Removed__c']) {\n      labelMap['Removed__c'] = 'Removed';\n    }\n    if (!labelMap['Removed_c__c']) {\n      labelMap['Removed_c__c'] = 'Removed';\n    }\n    if (!labelMap['Total_Applied__c']) {\n      labelMap['Total_Applied__c'] = 'Total Applied';\n    }\n    if (!labelMap['Total_Qualified__c']) {\n      labelMap['Total_Qualified__c'] = 'Total Qualified';\n    }\n    setFieldLabelMap(labelMap);\n  }, [availableFields]);\n  const loadAvailableObjects = async () => {\n    try {\n      const response = await apiClient.get('/update-object-fields/objects');\n      if (response.data.success) {\n        setAvailableObjects(response.data.objects || []);\n      }\n    } catch (error) {\n      console.error('Error loading objects:', error);\n      toast.error('Failed to load available objects');\n    }\n  };\n  const loadFieldsForObject = async objectType => {\n    setLoadingFields(true);\n    try {\n      // Add forReporting=true query parameter to include read-only fields (like Total_Applied__c)\n      const response = await apiClient.get(`/update-object-fields/fields/${encodeURIComponent(objectType)}?forReporting=true`);\n      if (response.data.success) {\n        setAvailableFields(response.data.fields || []);\n      } else {\n        toast.error(response.data.error || 'Failed to load fields');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error loading fields:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to load fields');\n      setAvailableFields([]);\n    } finally {\n      setLoadingFields(false);\n    }\n  };\n  const loadFilterOptions = async objectType => {\n    try {\n      const response = await apiClient.get(`/update-object-fields/filter-options/${encodeURIComponent(objectType)}`);\n      if (response.data.success) {\n        setFilterOptions(response.data.filterOptions || {});\n      }\n    } catch (error) {\n      console.error('Error loading filter options:', error);\n    }\n  };\n  const loadSavedReports = () => {\n    try {\n      const saved = localStorage.getItem('saved_reports');\n      if (saved) {\n        setSavedReports(JSON.parse(saved));\n      }\n    } catch (error) {\n      console.error('Error loading saved reports:', error);\n    }\n  };\n  const loadReportsHistory = async () => {\n    setLoadingHistory(true);\n    try {\n      const [historyResponse, scheduledResponse] = await Promise.all([apiClient.get('/reports/history').catch(() => ({\n        data: {\n          success: true,\n          reports: []\n        }\n      })), apiClient.get('/scheduled-reports').catch(() => ({\n        data: {\n          success: true,\n          reports: []\n        }\n      }))]);\n      const manualReports = historyResponse.data.success ? historyResponse.data.reports || [] : [];\n      const scheduledReports = scheduledResponse.data.success ? (scheduledResponse.data.reports || []).map(r => ({\n        ...r,\n        type: 'scheduled',\n        generatedAt: r.lastRunAt || r.createdAt\n      })) : [];\n      const allReports = [...manualReports, ...scheduledReports].sort((a, b) => {\n        const dateA = new Date(a.generatedAt || a.createdAt || 0);\n        const dateB = new Date(b.generatedAt || b.createdAt || 0);\n        return dateB - dateA;\n      });\n      setReportsHistory(allReports);\n    } catch (error) {\n      console.error('Error loading reports history:', error);\n      toast.error('Failed to load reports history');\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n  const getCategories = () => {\n    const categories = new Set();\n    reportsHistory.forEach(report => {\n      categories.add(report.category || 'Uncategorized');\n    });\n    return Array.from(categories).sort();\n  };\n  const saveReport = () => {\n    if (!reportConfig.name) {\n      toast.error('Please enter a report name');\n      return;\n    }\n    if (!reportConfig.objectType) {\n      toast.error('Please select an object type');\n      return;\n    }\n    if (reportConfig.fields.length === 0) {\n      toast.error('Please select at least one field');\n      return;\n    }\n    try {\n      const reportToSave = {\n        ...reportConfig,\n        id: selectedReportId || `report_${Date.now()}`,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        fieldLabels: fieldLabelMap // Save field labels with the report\n      };\n\n      // Ensure filters are included (even if empty)\n      if (!reportToSave.filters) {\n        reportToSave.filters = {};\n      }\n      let reports;\n      if (selectedReportId) {\n        reports = savedReports.map(r => r.id === selectedReportId ? reportToSave : r);\n      } else {\n        reports = [...savedReports, reportToSave];\n      }\n      localStorage.setItem('saved_reports', JSON.stringify(reports));\n      setSavedReports(reports);\n      setSelectedReportId(null);\n      toast.success('Report saved successfully');\n    } catch (error) {\n      console.error('[ReportBuilder] Error saving report:', error);\n      toast.error('Failed to save report');\n    }\n  };\n  const previewReport = useCallback(async event => {\n    // Prevent any default behavior\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    // Early return if already in progress\n    if (previewInProgressRef.current || generateInProgressRef.current) {\n      return;\n    }\n    if (!reportConfig.objectType || reportConfig.fields.length === 0) {\n      toast.error('Please select an object type and at least one field');\n      return;\n    }\n    previewInProgressRef.current = true;\n    setIsPreviewing(true);\n    // Don't set shared loading state - use isPreviewing instead\n    try {\n      const response = await reportApiClient.post('/reports/preview', {\n        objectType: reportConfig.objectType,\n        fields: reportConfig.fields,\n        filters: reportConfig.filters,\n        sortBy: reportConfig.sortBy,\n        sortOrder: reportConfig.sortOrder,\n        groupBy: reportConfig.groupBy,\n        limit: reportConfig.limit,\n        fieldLabels: fieldLabelMap\n      });\n      if (response.data.success) {\n        const data = response.data.records || [];\n\n        // Merge backend field labels with frontend fieldLabelMap\n        const mergedFieldLabels = {\n          ...fieldLabelMap,\n          ...(response.data.fieldLabels || {})\n        };\n\n        // Update fieldLabelMap with backend labels\n        if (response.data.fieldLabels) {\n          setFieldLabelMap(prev => ({\n            ...prev,\n            ...response.data.fieldLabels\n          }));\n        }\n        setPreviewModalData({\n          data,\n          fieldLabels: mergedFieldLabels,\n          count: data.length,\n          totalCount: response.data.count || data.length,\n          hasMore: response.data.hasMore || false\n        });\n        setShowPreviewModal(true);\n        toast.success(`Preview: ${response.data.count || data.length} records`);\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Error previewing report:', error);\n      toast.error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Failed to preview report');\n    } finally {\n      previewInProgressRef.current = false;\n      setIsPreviewing(false);\n    }\n  }, [reportConfig.objectType, reportConfig.fields, reportConfig.filters, reportConfig.sortBy, reportConfig.sortOrder, reportConfig.groupBy, reportConfig.limit, reportConfig.name, reportConfig.category, fieldLabelMap]);\n  const generateReport = useCallback(async event => {\n    // Prevent any default behavior\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    // Early return if already in progress\n    if (previewInProgressRef.current || generateInProgressRef.current) {\n      return;\n    }\n    if (!reportConfig.objectType || reportConfig.fields.length === 0) {\n      toast.error('Please select an object type and at least one field');\n      return;\n    }\n    generateInProgressRef.current = true;\n    setIsGenerating(true);\n    // Don't set shared loading state - use isGenerating instead\n    try {\n      const response = await reportApiClient.post('/reports/generate', {\n        objectType: reportConfig.objectType,\n        fields: reportConfig.fields,\n        filters: reportConfig.filters,\n        sortBy: reportConfig.sortBy,\n        sortOrder: reportConfig.sortOrder,\n        groupBy: reportConfig.groupBy,\n        limit: reportConfig.limit,\n        reportName: reportConfig.name || `Report ${new Date().toLocaleString()}`,\n        category: reportConfig.category || 'Uncategorized',\n        fieldLabels: fieldLabelMap\n      });\n      if (response.data.success) {\n        const data = response.data.records || [];\n        setPreviewData(data);\n        setFieldLabelMap(response.data.fieldLabels || fieldLabelMap);\n        setShowPreview(true);\n        setViewMode(true); // Switch to report view to show the generated report\n        toast.success(`Generated and saved ${response.data.count || data.length} records`);\n        if (activeTab === 'reports') {\n          loadReportsHistory();\n        }\n        setActiveTab('configuration'); // Keep on configuration tab but show report view\n      }\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Error generating report:', error);\n      toast.error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Failed to generate report');\n    } finally {\n      generateInProgressRef.current = false;\n      setIsGenerating(false);\n    }\n  }, [reportConfig.objectType, reportConfig.fields, reportConfig.filters, reportConfig.sortBy, reportConfig.sortOrder, reportConfig.limit, reportConfig.name, reportConfig.category, fieldLabelMap, activeTab]);\n  const exportReport = () => {\n    if (!previewData || previewData.length === 0) {\n      toast.error('No data to export. Please generate a report first.');\n      return;\n    }\n    const exportDataWithLabels = previewData.map(row => {\n      const mappedRow = {};\n      Object.keys(row).forEach(key => {\n        const label = fieldLabelMap[key] || key;\n        mappedRow[label] = row[key];\n      });\n      return mappedRow;\n    });\n    const result = exportData(exportDataWithLabels, reportConfig.name || 'report', reportConfig.format);\n    if (result.success) {\n      toast.success(`Exported to ${result.filename}`);\n    } else {\n      toast.error(result.error || 'Export failed');\n    }\n  };\n  const addField = fieldName => {\n    if (!reportConfig.fields.includes(fieldName)) {\n      setReportConfig({\n        ...reportConfig,\n        fields: [...reportConfig.fields, fieldName]\n      });\n    }\n  };\n  const removeField = fieldName => {\n    setReportConfig({\n      ...reportConfig,\n      fields: reportConfig.fields.filter(f => f !== fieldName)\n    });\n  };\n  const handleFieldToggle = fieldName => {\n    if (reportConfig.fields.includes(fieldName)) {\n      removeField(fieldName);\n    } else {\n      addField(fieldName);\n    }\n  };\n  const updateFilter = (field, value) => {\n    setReportConfig({\n      ...reportConfig,\n      filters: {\n        ...reportConfig.filters,\n        [field]: value\n      }\n    });\n  };\n  const loadSavedReport = report => {\n    console.log('[ReportBuilder] Loading saved report:', report.name, 'Filters:', JSON.stringify(report.filters, null, 2));\n    setReportConfig({\n      name: report.name || '',\n      objectType: report.objectType || '',\n      fields: report.fields || [],\n      filters: report.filters || {},\n      groupBy: report.groupBy || null,\n      sortBy: report.sortBy || null,\n      sortOrder: report.sortOrder || 'ASC',\n      format: report.format || 'excel',\n      limit: report.limit || 10000,\n      category: report.category || 'Uncategorized'\n    });\n    // Load field labels if available\n    if (report.fieldLabels) {\n      setFieldLabelMap(report.fieldLabels);\n    }\n    setSelectedReportId(report.id);\n    setShowPreview(false);\n    setPreviewData(null);\n    setViewMode(false);\n    setActiveTab('configuration');\n  };\n  const createNewReport = () => {\n    setReportConfig({\n      name: '',\n      objectType: '',\n      fields: [],\n      filters: {},\n      groupBy: null,\n      sortBy: null,\n      sortOrder: 'ASC',\n      format: 'excel',\n      limit: 10000,\n      category: 'Uncategorized'\n    });\n    setSelectedReportId(null);\n    setShowPreview(false);\n    setPreviewData(null);\n    setViewMode(false);\n  };\n  const handleScheduleReport = () => {\n    if (!reportConfig.name || !reportConfig.objectType || reportConfig.fields.length === 0) {\n      toast.error('Please complete the report configuration first');\n      return;\n    }\n    setScheduleFormData({\n      scheduleType: 'recurring',\n      schedule: 'daily',\n      format: 'excel',\n      runTime: '09:00',\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      enabled: true,\n      emailConfig: {\n        recipients: [],\n        subject: `Report: ${reportConfig.name || 'Untitled'}`,\n        body: '',\n        attachFile: true,\n        includeLink: false,\n        embedData: false,\n        deliveryMethod: 'email',\n        cloudStorage: 'none'\n      }\n    });\n    setShowScheduleModal(true);\n  };\n  const handleCreateScheduledReport = async finalScheduleData => {\n    try {\n      const scheduleData = finalScheduleData || scheduleFormData;\n      const response = await apiClient.post('/scheduled-reports', {\n        name: reportConfig.name,\n        objectType: reportConfig.objectType,\n        fields: reportConfig.fields,\n        filters: reportConfig.filters,\n        scheduleType: scheduleData.scheduleType || 'recurring',\n        schedule: scheduleData.schedule || 'daily',\n        runTime: scheduleData.runTime || '09:00',\n        timezone: scheduleData.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone,\n        dayOfWeek: scheduleData.dayOfWeek,\n        dayOfMonth: scheduleData.dayOfMonth,\n        cronExpression: scheduleData.cronExpression,\n        runDate: scheduleData.runDate,\n        format: scheduleData.format || reportConfig.format || 'excel',\n        emailConfig: scheduleData.emailConfig,\n        enabled: scheduleData.enabled !== false,\n        limit: reportConfig.limit\n      });\n      if (response.data.success) {\n        toast.success('Scheduled report created successfully');\n        setShowScheduleModal(false);\n        if (activeTab === 'reports') {\n          loadReportsHistory();\n        }\n      }\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      toast.error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || 'Failed to create scheduled report');\n    }\n  };\n  const handleDeleteReport = reportId => {\n    setReportToDelete(reportId);\n    setShowDeleteConfirm(true);\n  };\n  const handleDeleteSavedReport = reportId => {\n    setReportToDelete(reportId);\n    setShowDeleteConfirm(true);\n  };\n  const confirmDeleteReport = async () => {\n    if (!reportToDelete) return;\n\n    // Check if it's a saved report (starts with \"report_\") or a history report\n    const isSavedReport = savedReports.some(r => r.id === reportToDelete);\n    if (isSavedReport) {\n      // Delete from saved reports\n      try {\n        const updatedReports = savedReports.filter(r => r.id !== reportToDelete);\n        localStorage.setItem('saved_reports', JSON.stringify(updatedReports));\n        setSavedReports(updatedReports);\n        if (selectedReportId === reportToDelete) {\n          setSelectedReportId(null);\n          createNewReport();\n        }\n        toast.success('Saved report deleted');\n      } catch (error) {\n        toast.error('Failed to delete saved report');\n      }\n    } else {\n      // Delete from history\n      try {\n        const response = await apiClient.delete(`/reports/history/${reportToDelete}`);\n        if (response.data.success) {\n          toast.success('Report deleted');\n          loadReportsHistory();\n        }\n      } catch (error) {\n        toast.error('Failed to delete report');\n      }\n    }\n    setShowDeleteConfirm(false);\n    setReportToDelete(null);\n  };\n  const handleViewReport = async reportId => {\n    try {\n      const response = await apiClient.get(`/reports/history/${reportId}`);\n      if (response.data.success) {\n        const report = response.data.report;\n        setPreviewData(report.data || []);\n        setFieldLabelMap(report.fieldLabels || {});\n        setReportConfig({\n          name: report.name || '',\n          objectType: report.objectType || '',\n          fields: report.fields || [],\n          filters: report.filters || {},\n          category: report.category || 'Uncategorized'\n        });\n        setShowPreview(true);\n        setViewMode(true);\n        setSelectedReportId(reportId);\n        // For Reports Viewer, stay on reports tab; for others, switch to configuration\n        if (!isReportsViewer) {\n          setActiveTab('configuration');\n        }\n      }\n    } catch (error) {\n      toast.error('Failed to load report');\n    }\n  };\n  const handleEditReport = async reportId => {\n    try {\n      const response = await apiClient.get(`/reports/history/${reportId}`);\n      if (response.data.success) {\n        const report = response.data.report;\n        setReportConfig({\n          name: report.name || '',\n          objectType: report.objectType || '',\n          fields: report.fields || [],\n          filters: report.filters || {},\n          sortBy: report.sortBy || null,\n          sortOrder: report.sortOrder || 'ASC',\n          format: report.format || 'excel',\n          limit: report.limit || 10000,\n          category: report.category || 'Uncategorized'\n        });\n        setSelectedReportId(report.id);\n        setShowPreview(false);\n        setPreviewData(null);\n        setViewMode(false);\n        setActiveTab('configuration');\n      }\n    } catch (error) {\n      toast.error('Failed to load report');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-layout\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      isOpen: sidebarOpen,\n      toggleSidebar: () => setSidebarOpen(!sidebarOpen)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: sidebarOpen ? '320px' : '80px',\n        transition: 'margin-left 0.3s ease',\n        width: sidebarOpen ? 'calc(100% - 320px)' : 'calc(100% - 80px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"dashboard-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"header-menu-toggle\",\n              onClick: () => setSidebarOpen(!sidebarOpen),\n              \"aria-label\": \"Toggle sidebar\",\n              children: /*#__PURE__*/_jsxDEV(Menu, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"page-title\",\n                children: \"Report Builder\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"page-subtitle\",\n                children: \"Create custom reports from Salesforce data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-user-profile\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-profile\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-avatar\",\n                children: ((user === null || user === void 0 ? void 0 : user.email) || 'U').charAt(0).toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"user-name\",\n                children: (user === null || user === void 0 ? void 0 : user.email) || 'User'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 701,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"logout-btn\",\n                onClick: logout,\n                title: \"Logout\",\n                children: /*#__PURE__*/_jsxDEV(LogOut, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        style: {\n          padding: '24px',\n          background: '#f5f5f5',\n          minHeight: 'calc(100vh - 80px)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '24px',\n            borderBottom: '2px solid #e5e7eb'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '0'\n            },\n            children: [!isReportsViewer && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setActiveTab('configuration');\n                setViewMode(false);\n              },\n              style: {\n                padding: '12px 24px',\n                background: 'transparent',\n                border: 'none',\n                borderBottom: activeTab === 'configuration' ? '2px solid #08979C' : '2px solid transparent',\n                color: activeTab === 'configuration' ? '#08979C' : '#666',\n                fontWeight: activeTab === 'configuration' ? '600' : '400',\n                cursor: 'pointer',\n                fontSize: '14px',\n                marginBottom: '-2px'\n              },\n              children: \"Report Configuration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setActiveTab('reports');\n                loadReportsHistory();\n              },\n              style: {\n                padding: '12px 24px',\n                background: 'transparent',\n                border: 'none',\n                borderBottom: activeTab === 'reports' ? '2px solid #08979C' : '2px solid transparent',\n                color: activeTab === 'reports' ? '#08979C' : '#666',\n                fontWeight: activeTab === 'reports' ? '600' : '400',\n                cursor: 'pointer',\n                fontSize: '14px',\n                marginBottom: '-2px'\n              },\n              children: \"Reports\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 735,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 11\n        }, this), activeTab === 'configuration' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#fff',\n            borderRadius: '8px',\n            padding: '24px',\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n          },\n          children: showPreview && previewData && viewMode ?\n          /*#__PURE__*/\n          // Full width Report View\n          _jsxDEV(ReportViewPanel, {\n            previewData: previewData,\n            fieldLabelMap: fieldLabelMap,\n            reportName: reportConfig.name,\n            totalCount: previewData.length,\n            hasMore: false,\n            onEdit: canEditReports ? () => {\n              setViewMode(false);\n              handleEditReport(selectedReportId);\n            } : null,\n            canEdit: canEditReports,\n            onClose: () => {\n              setShowPreview(false);\n              setViewMode(false);\n              setPreviewData(null);\n              setActiveTab('reports');\n              loadReportsHistory();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 17\n          }, this) :\n          /*#__PURE__*/\n          // Normal configuration view with left panel\n          _jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '24px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(SavedReportsPanel, {\n              savedReports: savedReports,\n              selectedReportId: selectedReportId,\n              onSelectReport: loadSavedReport,\n              onCreateNew: createNewReport,\n              onDeleteReport: handleDeleteSavedReport\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: /*#__PURE__*/_jsxDEV(ReportConfiguration, {\n                reportConfig: reportConfig,\n                setReportConfig: setReportConfig,\n                availableObjects: availableObjects,\n                availableFields: availableFields,\n                filterOptions: filterOptions,\n                loadingFields: loadingFields,\n                loading: loading,\n                isPreviewing: isPreviewing,\n                isGenerating: isGenerating,\n                previewData: previewData,\n                viewMode: viewMode,\n                onSave: saveReport,\n                onPreview: previewReport,\n                onGenerate: generateReport,\n                onSchedule: handleScheduleReport,\n                onFieldToggle: handleFieldToggle,\n                onFilterChange: updateFilter\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 782,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: showPreview && previewData && viewMode ?\n          /*#__PURE__*/\n          // Show report view in Reports tab for Reports Viewer\n          _jsxDEV(\"div\", {\n            style: {\n              background: '#fff',\n              borderRadius: '8px',\n              padding: '24px',\n              boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n            },\n            children: /*#__PURE__*/_jsxDEV(ReportViewPanel, {\n              previewData: previewData,\n              fieldLabelMap: fieldLabelMap,\n              reportName: reportConfig.name,\n              totalCount: previewData.length,\n              hasMore: false,\n              onEdit: canEditReports ? () => {\n                setViewMode(false);\n                handleEditReport(selectedReportId);\n              } : null,\n              canEdit: canEditReports,\n              onClose: () => {\n                setShowPreview(false);\n                setViewMode(false);\n                setPreviewData(null);\n                setSelectedReportId(null);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 819,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 818,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(ReportsList, {\n            reportsHistory: reportsHistory,\n            loadingHistory: loadingHistory,\n            selectedCategory: selectedCategory,\n            categories: getCategories(),\n            onCategoryChange: setSelectedCategory,\n            onRefresh: loadReportsHistory,\n            onView: handleViewReport,\n            onEdit: canEditReports ? handleEditReport : null,\n            onDelete: canDeleteReports ? handleDeleteReport : null,\n            canEdit: canEditReports,\n            canDelete: canDeleteReports\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 17\n          }, this)\n        }, void 0, false), /*#__PURE__*/_jsxDEV(PreviewModal, {\n          show: showPreviewModal,\n          data: previewModalData === null || previewModalData === void 0 ? void 0 : previewModalData.data,\n          fieldLabels: (previewModalData === null || previewModalData === void 0 ? void 0 : previewModalData.fieldLabels) || fieldLabelMap || {},\n          totalCount: previewModalData === null || previewModalData === void 0 ? void 0 : previewModalData.totalCount,\n          hasMore: previewModalData === null || previewModalData === void 0 ? void 0 : previewModalData.hasMore,\n          onClose: () => setShowPreviewModal(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DeleteConfirmModal, {\n          show: showDeleteConfirm,\n          onConfirm: confirmDeleteReport,\n          onCancel: () => {\n            setShowDeleteConfirm(false);\n            setReportToDelete(null);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ScheduleModal, {\n          show: showScheduleModal,\n          formData: scheduleFormData,\n          onClose: () => setShowScheduleModal(false),\n          onSave: handleCreateScheduledReport,\n          onChange: setScheduleFormData,\n          reportName: reportConfig.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 677,\n    columnNumber: 5\n  }, this);\n};\n_s(ReportBuilder, \"wBeqz136Jn6IY6uJAdpyc1LvOJ0=\", false, function () {\n  return [useAuth];\n});\n_c = ReportBuilder;\nexport default ReportBuilder;\nvar _c;\n$RefreshReg$(_c, \"ReportBuilder\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useAuth","Sidebar","Menu","LogOut","apiClient","axios","exportData","toast","SavedReportsPanel","ReportConfiguration","ReportViewPanel","ReportsList","PreviewModal","DeleteConfirmModal","ScheduleModal","hasPermission","PERMISSIONS","ROLES","jsxDEV","_jsxDEV","Fragment","_Fragment","reportApiClient","create","baseURL","process","env","REACT_APP_API_URL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","ReportBuilder","_s","user","logout","sidebarOpen","setSidebarOpen","isReportsViewer","role","REPORTS_VIEWER","canEditReports","EDIT_REPORTS","canDeleteReports","DELETE_REPORTS","canCreateReports","CREATE_REPORTS","activeTab","setActiveTab","viewMode","setViewMode","selectedReportId","setSelectedReportId","reportConfig","setReportConfig","name","objectType","fields","filters","groupBy","sortBy","sortOrder","limit","category","availableObjects","setAvailableObjects","availableFields","setAvailableFields","filterOptions","setFilterOptions","previewData","setPreviewData","fieldLabelMap","setFieldLabelMap","loading","setLoading","loadingFields","setLoadingFields","isPreviewing","setIsPreviewing","isGenerating","setIsGenerating","savedReports","setSavedReports","showPreview","setShowPreview","reportsHistory","setReportsHistory","loadingHistory","setLoadingHistory","showScheduleModal","setShowScheduleModal","scheduleFormData","setScheduleFormData","schedule","format","recipients","selectedCategory","setSelectedCategory","showDeleteConfirm","setShowDeleteConfirm","reportToDelete","setReportToDelete","showPreviewModal","setShowPreviewModal","previewModalData","setPreviewModalData","previewInProgressRef","generateInProgressRef","loadReportsHistory","loadAvailableObjects","loadSavedReports","loadFieldsForObject","loadFilterOptions","labelMap","forEach","field","label","response","get","data","success","objects","error","console","encodeURIComponent","_error$response","_error$response$data","saved","JSON","parse","historyResponse","scheduledResponse","Promise","all","catch","reports","manualReports","scheduledReports","map","r","type","generatedAt","lastRunAt","createdAt","allReports","sort","a","b","dateA","Date","dateB","getCategories","categories","Set","report","add","Array","from","saveReport","length","reportToSave","id","now","toISOString","updatedAt","fieldLabels","setItem","stringify","previewReport","event","preventDefault","stopPropagation","current","post","records","mergedFieldLabels","prev","count","totalCount","hasMore","_error$response2","_error$response2$data","generateReport","reportName","toLocaleString","_error$response3","_error$response3$data","exportReport","exportDataWithLabels","row","mappedRow","Object","keys","key","result","filename","addField","fieldName","includes","removeField","filter","f","handleFieldToggle","updateFilter","value","loadSavedReport","log","createNewReport","handleScheduleReport","scheduleType","runTime","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","enabled","emailConfig","subject","body","attachFile","includeLink","embedData","deliveryMethod","cloudStorage","handleCreateScheduledReport","finalScheduleData","scheduleData","dayOfWeek","dayOfMonth","cronExpression","runDate","_error$response4","_error$response4$data","handleDeleteReport","reportId","handleDeleteSavedReport","confirmDeleteReport","isSavedReport","some","updatedReports","delete","handleViewReport","handleEditReport","className","children","isOpen","toggleSidebar","fileName","_jsxFileName","lineNumber","columnNumber","style","marginLeft","transition","width","onClick","size","email","charAt","toUpperCase","title","padding","background","minHeight","marginBottom","borderBottom","display","gap","border","color","fontWeight","cursor","fontSize","borderRadius","boxShadow","onEdit","canEdit","onClose","onSelectReport","onCreateNew","onDeleteReport","flex","onSave","onPreview","onGenerate","onSchedule","onFieldToggle","onFilterChange","onCategoryChange","onRefresh","onView","onDelete","canDelete","show","onConfirm","onCancel","formData","onChange","_c","$RefreshReg$"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/ReportBuilder.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport { Menu, LogOut } from 'lucide-react';\nimport apiClient from '../config/api';\nimport axios from 'axios';\nimport { exportData } from '../utils/crossFeature/exportService';\nimport toast from 'react-hot-toast';\nimport SavedReportsPanel from '../components/ReportBuilder/SavedReportsPanel';\nimport ReportConfiguration from '../components/ReportBuilder/ReportConfiguration';\nimport ReportViewPanel from '../components/ReportBuilder/ReportViewPanel';\nimport ReportsList from '../components/ReportBuilder/ReportsList';\nimport PreviewModal from '../components/ReportBuilder/PreviewModal';\nimport DeleteConfirmModal from '../components/ReportBuilder/DeleteConfirmModal';\nimport ScheduleModal from '../components/ReportBuilder/ScheduleModal';\nimport { hasPermission, PERMISSIONS, ROLES } from '../utils/rbac';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\n// Custom axios instance for report generation with longer timeout\nconst reportApiClient = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || '/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 600000, // 10 minutes for report generation\n});\n\n// Add auth token to report API client\nreportApiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nconst ReportBuilder = () => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  \n  // Check if user is Reports Viewer (view-only access)\n  const isReportsViewer = user?.role === ROLES.REPORTS_VIEWER;\n  const canEditReports = hasPermission(user?.role, PERMISSIONS.EDIT_REPORTS);\n  const canDeleteReports = hasPermission(user?.role, PERMISSIONS.DELETE_REPORTS);\n  const canCreateReports = hasPermission(user?.role, PERMISSIONS.CREATE_REPORTS);\n  \n  // Reports Viewer should default to Reports tab, others to Configuration\n  const [activeTab, setActiveTab] = useState(isReportsViewer ? 'reports' : 'configuration');\n  const [viewMode, setViewMode] = useState(false);\n  const [selectedReportId, setSelectedReportId] = useState(null);\n  const [reportConfig, setReportConfig] = useState({\n    name: '',\n    objectType: '',\n    fields: [],\n    filters: {},\n    groupBy: null,\n    sortBy: null,\n    sortOrder: 'ASC',\n    limit: 10000,\n    category: 'Uncategorized'\n  });\n  const [availableObjects, setAvailableObjects] = useState([]);\n  const [availableFields, setAvailableFields] = useState([]);\n  const [filterOptions, setFilterOptions] = useState({});\n  const [previewData, setPreviewData] = useState(null);\n  const [fieldLabelMap, setFieldLabelMap] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [loadingFields, setLoadingFields] = useState(false);\n  const [isPreviewing, setIsPreviewing] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [savedReports, setSavedReports] = useState([]);\n  const [showPreview, setShowPreview] = useState(false);\n  const [reportsHistory, setReportsHistory] = useState([]);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [scheduleFormData, setScheduleFormData] = useState({\n    schedule: 'daily',\n    format: 'excel',\n    recipients: []\n  });\n  const [selectedCategory, setSelectedCategory] = useState('All');\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [reportToDelete, setReportToDelete] = useState(null);\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n  const [previewModalData, setPreviewModalData] = useState(null);\n\n  // Use refs to track if operations are in progress (refs don't cause re-renders)\n  const previewInProgressRef = useRef(false);\n  const generateInProgressRef = useRef(false);\n\n  useEffect(() => {\n    // Redirect Reports Viewer to Reports tab if they try to access Configuration\n    if (isReportsViewer && activeTab === 'configuration') {\n      setActiveTab('reports');\n      loadReportsHistory();\n      return;\n    }\n    \n    loadAvailableObjects();\n    loadSavedReports();\n    if (activeTab === 'reports') {\n      loadReportsHistory();\n    }\n  }, [activeTab, isReportsViewer]);\n\n  useEffect(() => {\n    if (reportConfig.objectType) {\n      loadFieldsForObject(reportConfig.objectType);\n      loadFilterOptions(reportConfig.objectType);\n    } else {\n      setAvailableFields([]);\n      setFilterOptions({});\n    }\n  }, [reportConfig.objectType]);\n\n  useEffect(() => {\n    const labelMap = {};\n    availableFields.forEach(field => {\n      labelMap[field.name] = field.label || field.name;\n    });\n    // Add common field labels that might not be in availableFields (handle both naming conventions)\n    if (!labelMap['Active_Contributors__c']) {\n      labelMap['Active_Contributors__c'] = 'Active Contributors';\n    }\n    if (!labelMap['Active_Contributors_c__c']) {\n      labelMap['Active_Contributors_c__c'] = 'Active Contributors';\n    }\n    if (!labelMap['Applied_Contributors__c']) {\n      labelMap['Applied_Contributors__c'] = 'Applied Contributors';\n    }\n    if (!labelMap['Applied_Contributors_c__c']) {\n      labelMap['Applied_Contributors_c__c'] = 'Applied Contributors';\n    }\n    if (!labelMap['Qualified_Contributors__c']) {\n      labelMap['Qualified_Contributors__c'] = 'Qualified Contributors';\n    }\n    if (!labelMap['Qualified_Contributors_c__c']) {\n      labelMap['Qualified_Contributors_c__c'] = 'Qualified Contributors';\n    }\n    if (!labelMap['Removed__c']) {\n      labelMap['Removed__c'] = 'Removed';\n    }\n    if (!labelMap['Removed_c__c']) {\n      labelMap['Removed_c__c'] = 'Removed';\n    }\n    if (!labelMap['Total_Applied__c']) {\n      labelMap['Total_Applied__c'] = 'Total Applied';\n    }\n    if (!labelMap['Total_Qualified__c']) {\n      labelMap['Total_Qualified__c'] = 'Total Qualified';\n    }\n    setFieldLabelMap(labelMap);\n  }, [availableFields]);\n\n  const loadAvailableObjects = async () => {\n    try {\n      const response = await apiClient.get('/update-object-fields/objects');\n      if (response.data.success) {\n        setAvailableObjects(response.data.objects || []);\n      }\n    } catch (error) {\n      console.error('Error loading objects:', error);\n      toast.error('Failed to load available objects');\n    }\n  };\n\n  const loadFieldsForObject = async (objectType) => {\n    setLoadingFields(true);\n    try {\n      // Add forReporting=true query parameter to include read-only fields (like Total_Applied__c)\n      const response = await apiClient.get(`/update-object-fields/fields/${encodeURIComponent(objectType)}?forReporting=true`);\n      if (response.data.success) {\n        setAvailableFields(response.data.fields || []);\n      } else {\n        toast.error(response.data.error || 'Failed to load fields');\n      }\n    } catch (error) {\n      console.error('Error loading fields:', error);\n      toast.error(error.response?.data?.error || 'Failed to load fields');\n      setAvailableFields([]);\n    } finally {\n      setLoadingFields(false);\n    }\n  };\n\n  const loadFilterOptions = async (objectType) => {\n    try {\n      const response = await apiClient.get(`/update-object-fields/filter-options/${encodeURIComponent(objectType)}`);\n      if (response.data.success) {\n        setFilterOptions(response.data.filterOptions || {});\n      }\n    } catch (error) {\n      console.error('Error loading filter options:', error);\n    }\n  };\n\n  const loadSavedReports = () => {\n    try {\n      const saved = localStorage.getItem('saved_reports');\n      if (saved) {\n        setSavedReports(JSON.parse(saved));\n      }\n    } catch (error) {\n      console.error('Error loading saved reports:', error);\n    }\n  };\n\n  const loadReportsHistory = async () => {\n    setLoadingHistory(true);\n    try {\n      const [historyResponse, scheduledResponse] = await Promise.all([\n        apiClient.get('/reports/history').catch(() => ({ data: { success: true, reports: [] } })),\n        apiClient.get('/scheduled-reports').catch(() => ({ data: { success: true, reports: [] } }))\n      ]);\n\n      const manualReports = historyResponse.data.success ? (historyResponse.data.reports || []) : [];\n      const scheduledReports = scheduledResponse.data.success ? (scheduledResponse.data.reports || []).map(r => ({\n        ...r,\n        type: 'scheduled',\n        generatedAt: r.lastRunAt || r.createdAt\n      })) : [];\n\n      const allReports = [...manualReports, ...scheduledReports].sort((a, b) => {\n        const dateA = new Date(a.generatedAt || a.createdAt || 0);\n        const dateB = new Date(b.generatedAt || b.createdAt || 0);\n        return dateB - dateA;\n      });\n\n      setReportsHistory(allReports);\n    } catch (error) {\n      console.error('Error loading reports history:', error);\n      toast.error('Failed to load reports history');\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  const getCategories = () => {\n    const categories = new Set();\n    reportsHistory.forEach(report => {\n      categories.add(report.category || 'Uncategorized');\n    });\n    return Array.from(categories).sort();\n  };\n\n  const saveReport = () => {\n    if (!reportConfig.name) {\n      toast.error('Please enter a report name');\n      return;\n    }\n    if (!reportConfig.objectType) {\n      toast.error('Please select an object type');\n      return;\n    }\n    if (reportConfig.fields.length === 0) {\n      toast.error('Please select at least one field');\n      return;\n    }\n\n    try {\n      const reportToSave = {\n        ...reportConfig,\n        id: selectedReportId || `report_${Date.now()}`,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        fieldLabels: fieldLabelMap // Save field labels with the report\n      };\n      \n      // Ensure filters are included (even if empty)\n      if (!reportToSave.filters) {\n        reportToSave.filters = {};\n      }\n      \n      \n      let reports;\n      if (selectedReportId) {\n        reports = savedReports.map(r => r.id === selectedReportId ? reportToSave : r);\n      } else {\n        reports = [...savedReports, reportToSave];\n      }\n      \n      localStorage.setItem('saved_reports', JSON.stringify(reports));\n      setSavedReports(reports);\n      setSelectedReportId(null);\n      toast.success('Report saved successfully');\n    } catch (error) {\n      console.error('[ReportBuilder] Error saving report:', error);\n      toast.error('Failed to save report');\n    }\n  };\n\n  const previewReport = useCallback(async (event) => {\n    // Prevent any default behavior\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    // Early return if already in progress\n    if (previewInProgressRef.current || generateInProgressRef.current) {\n      return;\n    }\n\n    if (!reportConfig.objectType || reportConfig.fields.length === 0) {\n      toast.error('Please select an object type and at least one field');\n      return;\n    }\n    previewInProgressRef.current = true;\n    setIsPreviewing(true);\n    // Don't set shared loading state - use isPreviewing instead\n    try {\n      const response = await reportApiClient.post('/reports/preview', {\n        objectType: reportConfig.objectType,\n        fields: reportConfig.fields,\n        filters: reportConfig.filters,\n        sortBy: reportConfig.sortBy,\n        sortOrder: reportConfig.sortOrder,\n        groupBy: reportConfig.groupBy,\n        limit: reportConfig.limit,\n        fieldLabels: fieldLabelMap\n      });\n\n      if (response.data.success) {\n        const data = response.data.records || [];\n        \n        // Merge backend field labels with frontend fieldLabelMap\n        const mergedFieldLabels = {\n          ...fieldLabelMap,\n          ...(response.data.fieldLabels || {})\n        };\n        \n        // Update fieldLabelMap with backend labels\n        if (response.data.fieldLabels) {\n          setFieldLabelMap(prev => ({\n            ...prev,\n            ...response.data.fieldLabels\n          }));\n        }\n        \n        setPreviewModalData({\n          data,\n          fieldLabels: mergedFieldLabels,\n          count: data.length,\n          totalCount: response.data.count || data.length,\n          hasMore: response.data.hasMore || false\n        });\n        setShowPreviewModal(true);\n        toast.success(`Preview: ${response.data.count || data.length} records`);\n      }\n    } catch (error) {\n      console.error('Error previewing report:', error);\n      toast.error(error.response?.data?.error || 'Failed to preview report');\n    } finally {\n      previewInProgressRef.current = false;\n      setIsPreviewing(false);\n    }\n  }, [reportConfig.objectType, reportConfig.fields, reportConfig.filters, reportConfig.sortBy, reportConfig.sortOrder, reportConfig.groupBy, reportConfig.limit, reportConfig.name, reportConfig.category, fieldLabelMap]);\n\n  const generateReport = useCallback(async (event) => {\n    // Prevent any default behavior\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    // Early return if already in progress\n    if (previewInProgressRef.current || generateInProgressRef.current) {\n      return;\n    }\n\n    if (!reportConfig.objectType || reportConfig.fields.length === 0) {\n      toast.error('Please select an object type and at least one field');\n      return;\n    }\n    generateInProgressRef.current = true;\n    setIsGenerating(true);\n    // Don't set shared loading state - use isGenerating instead\n    try {\n      const response = await reportApiClient.post('/reports/generate', {\n        objectType: reportConfig.objectType,\n        fields: reportConfig.fields,\n        filters: reportConfig.filters,\n        sortBy: reportConfig.sortBy,\n        sortOrder: reportConfig.sortOrder,\n        groupBy: reportConfig.groupBy,\n        limit: reportConfig.limit,\n        reportName: reportConfig.name || `Report ${new Date().toLocaleString()}`,\n        category: reportConfig.category || 'Uncategorized',\n        fieldLabels: fieldLabelMap\n      });\n\n      if (response.data.success) {\n        const data = response.data.records || [];\n        setPreviewData(data);\n        setFieldLabelMap(response.data.fieldLabels || fieldLabelMap);\n        setShowPreview(true);\n        setViewMode(true); // Switch to report view to show the generated report\n        toast.success(`Generated and saved ${response.data.count || data.length} records`);\n        if (activeTab === 'reports') {\n          loadReportsHistory();\n        }\n        setActiveTab('configuration'); // Keep on configuration tab but show report view\n      }\n    } catch (error) {\n      console.error('Error generating report:', error);\n      toast.error(error.response?.data?.error || 'Failed to generate report');\n    } finally {\n      generateInProgressRef.current = false;\n      setIsGenerating(false);\n    }\n  }, [reportConfig.objectType, reportConfig.fields, reportConfig.filters, reportConfig.sortBy, reportConfig.sortOrder, reportConfig.limit, reportConfig.name, reportConfig.category, fieldLabelMap, activeTab]);\n\n  const exportReport = () => {\n    if (!previewData || previewData.length === 0) {\n      toast.error('No data to export. Please generate a report first.');\n      return;\n    }\n\n    const exportDataWithLabels = previewData.map(row => {\n      const mappedRow = {};\n      Object.keys(row).forEach(key => {\n        const label = fieldLabelMap[key] || key;\n        mappedRow[label] = row[key];\n      });\n      return mappedRow;\n    });\n\n    const result = exportData(exportDataWithLabels, reportConfig.name || 'report', reportConfig.format);\n    if (result.success) {\n      toast.success(`Exported to ${result.filename}`);\n    } else {\n      toast.error(result.error || 'Export failed');\n    }\n  };\n\n  const addField = (fieldName) => {\n    if (!reportConfig.fields.includes(fieldName)) {\n      setReportConfig({\n        ...reportConfig,\n        fields: [...reportConfig.fields, fieldName]\n      });\n    }\n  };\n\n  const removeField = (fieldName) => {\n    setReportConfig({\n      ...reportConfig,\n      fields: reportConfig.fields.filter(f => f !== fieldName)\n    });\n  };\n\n  const handleFieldToggle = (fieldName) => {\n    if (reportConfig.fields.includes(fieldName)) {\n      removeField(fieldName);\n    } else {\n      addField(fieldName);\n    }\n  };\n\n  const updateFilter = (field, value) => {\n    setReportConfig({\n      ...reportConfig,\n      filters: {\n        ...reportConfig.filters,\n        [field]: value\n      }\n    });\n  };\n\n  const loadSavedReport = (report) => {\n    console.log('[ReportBuilder] Loading saved report:', report.name, 'Filters:', JSON.stringify(report.filters, null, 2));\n    setReportConfig({\n      name: report.name || '',\n      objectType: report.objectType || '',\n      fields: report.fields || [],\n      filters: report.filters || {},\n      groupBy: report.groupBy || null,\n      sortBy: report.sortBy || null,\n      sortOrder: report.sortOrder || 'ASC',\n      format: report.format || 'excel',\n      limit: report.limit || 10000,\n      category: report.category || 'Uncategorized'\n    });\n    // Load field labels if available\n    if (report.fieldLabels) {\n      setFieldLabelMap(report.fieldLabels);\n    }\n    setSelectedReportId(report.id);\n    setShowPreview(false);\n    setPreviewData(null);\n    setViewMode(false);\n    setActiveTab('configuration');\n  };\n\n  const createNewReport = () => {\n    setReportConfig({\n      name: '',\n      objectType: '',\n      fields: [],\n      filters: {},\n      groupBy: null,\n      sortBy: null,\n      sortOrder: 'ASC',\n      format: 'excel',\n      limit: 10000,\n      category: 'Uncategorized'\n    });\n    setSelectedReportId(null);\n    setShowPreview(false);\n    setPreviewData(null);\n    setViewMode(false);\n  };\n\n  const handleScheduleReport = () => {\n    if (!reportConfig.name || !reportConfig.objectType || reportConfig.fields.length === 0) {\n      toast.error('Please complete the report configuration first');\n      return;\n    }\n    setScheduleFormData({\n      scheduleType: 'recurring',\n      schedule: 'daily',\n      format: 'excel',\n      runTime: '09:00',\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      enabled: true,\n      emailConfig: {\n        recipients: [],\n        subject: `Report: ${reportConfig.name || 'Untitled'}`,\n        body: '',\n        attachFile: true,\n        includeLink: false,\n        embedData: false,\n        deliveryMethod: 'email',\n        cloudStorage: 'none'\n      }\n    });\n    setShowScheduleModal(true);\n  };\n\n  const handleCreateScheduledReport = async (finalScheduleData) => {\n    try {\n      const scheduleData = finalScheduleData || scheduleFormData;\n      const response = await apiClient.post('/scheduled-reports', {\n        name: reportConfig.name,\n        objectType: reportConfig.objectType,\n        fields: reportConfig.fields,\n        filters: reportConfig.filters,\n        scheduleType: scheduleData.scheduleType || 'recurring',\n        schedule: scheduleData.schedule || 'daily',\n        runTime: scheduleData.runTime || '09:00',\n        timezone: scheduleData.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone,\n        dayOfWeek: scheduleData.dayOfWeek,\n        dayOfMonth: scheduleData.dayOfMonth,\n        cronExpression: scheduleData.cronExpression,\n        runDate: scheduleData.runDate,\n        format: scheduleData.format || reportConfig.format || 'excel',\n        emailConfig: scheduleData.emailConfig,\n        enabled: scheduleData.enabled !== false,\n        limit: reportConfig.limit\n      });\n\n      if (response.data.success) {\n        toast.success('Scheduled report created successfully');\n        setShowScheduleModal(false);\n        if (activeTab === 'reports') {\n          loadReportsHistory();\n        }\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.error || 'Failed to create scheduled report');\n    }\n  };\n\n  const handleDeleteReport = (reportId) => {\n    setReportToDelete(reportId);\n    setShowDeleteConfirm(true);\n  };\n\n  const handleDeleteSavedReport = (reportId) => {\n    setReportToDelete(reportId);\n    setShowDeleteConfirm(true);\n  };\n\n  const confirmDeleteReport = async () => {\n    if (!reportToDelete) return;\n    \n    // Check if it's a saved report (starts with \"report_\") or a history report\n    const isSavedReport = savedReports.some(r => r.id === reportToDelete);\n    \n    if (isSavedReport) {\n      // Delete from saved reports\n      try {\n        const updatedReports = savedReports.filter(r => r.id !== reportToDelete);\n        localStorage.setItem('saved_reports', JSON.stringify(updatedReports));\n        setSavedReports(updatedReports);\n        if (selectedReportId === reportToDelete) {\n          setSelectedReportId(null);\n          createNewReport();\n        }\n        toast.success('Saved report deleted');\n      } catch (error) {\n        toast.error('Failed to delete saved report');\n      }\n    } else {\n      // Delete from history\n      try {\n        const response = await apiClient.delete(`/reports/history/${reportToDelete}`);\n        if (response.data.success) {\n          toast.success('Report deleted');\n          loadReportsHistory();\n        }\n      } catch (error) {\n        toast.error('Failed to delete report');\n      }\n    }\n    \n    setShowDeleteConfirm(false);\n    setReportToDelete(null);\n  };\n\n  const handleViewReport = async (reportId) => {\n    try {\n      const response = await apiClient.get(`/reports/history/${reportId}`);\n      if (response.data.success) {\n        const report = response.data.report;\n        setPreviewData(report.data || []);\n        setFieldLabelMap(report.fieldLabels || {});\n        setReportConfig({\n          name: report.name || '',\n          objectType: report.objectType || '',\n          fields: report.fields || [],\n          filters: report.filters || {},\n          category: report.category || 'Uncategorized'\n        });\n        setShowPreview(true);\n        setViewMode(true);\n        setSelectedReportId(reportId);\n        // For Reports Viewer, stay on reports tab; for others, switch to configuration\n        if (!isReportsViewer) {\n          setActiveTab('configuration');\n        }\n      }\n    } catch (error) {\n      toast.error('Failed to load report');\n    }\n  };\n\n  const handleEditReport = async (reportId) => {\n    try {\n      const response = await apiClient.get(`/reports/history/${reportId}`);\n      if (response.data.success) {\n        const report = response.data.report;\n        setReportConfig({\n          name: report.name || '',\n          objectType: report.objectType || '',\n          fields: report.fields || [],\n          filters: report.filters || {},\n          sortBy: report.sortBy || null,\n          sortOrder: report.sortOrder || 'ASC',\n          format: report.format || 'excel',\n          limit: report.limit || 10000,\n          category: report.category || 'Uncategorized'\n        });\n        setSelectedReportId(report.id);\n        setShowPreview(false);\n        setPreviewData(null);\n        setViewMode(false);\n        setActiveTab('configuration');\n      }\n    } catch (error) {\n      toast.error('Failed to load report');\n    }\n  };\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      \n      <div style={{ marginLeft: sidebarOpen ? '320px' : '80px', transition: 'margin-left 0.3s ease', width: sidebarOpen ? 'calc(100% - 320px)' : 'calc(100% - 80px)' }}>\n        <header className=\"dashboard-header\">\n          <div className=\"header-content\">\n            <div className=\"header-left\">\n              <button \n                className=\"header-menu-toggle\"\n                onClick={() => setSidebarOpen(!sidebarOpen)}\n                aria-label=\"Toggle sidebar\"\n              >\n                <Menu size={20} />\n              </button>\n              <div>\n                <h1 className=\"page-title\">Report Builder</h1>\n                <p className=\"page-subtitle\">Create custom reports from Salesforce data</p>\n              </div>\n            </div>\n            <div className=\"header-user-profile\">\n              <div className=\"user-profile\">\n                <div className=\"user-avatar\">\n                  {(user?.email || 'U').charAt(0).toUpperCase()}\n                </div>\n                <span className=\"user-name\">{user?.email || 'User'}</span>\n                <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                  <LogOut size={18} />\n                </button>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        <main style={{ padding: '24px', background: '#f5f5f5', minHeight: 'calc(100vh - 80px)' }}>\n          {/* Tabs */}\n          <div style={{ marginBottom: '24px', borderBottom: '2px solid #e5e7eb' }}>\n            <div style={{ display: 'flex', gap: '0' }}>\n              {!isReportsViewer && (\n                <button\n                  onClick={() => {\n                    setActiveTab('configuration');\n                    setViewMode(false);\n                  }}\n                  style={{\n                    padding: '12px 24px',\n                    background: 'transparent',\n                    border: 'none',\n                    borderBottom: activeTab === 'configuration' ? '2px solid #08979C' : '2px solid transparent',\n                    color: activeTab === 'configuration' ? '#08979C' : '#666',\n                    fontWeight: activeTab === 'configuration' ? '600' : '400',\n                    cursor: 'pointer',\n                    fontSize: '14px',\n                    marginBottom: '-2px'\n                  }}\n                >\n                  Report Configuration\n                </button>\n              )}\n              <button\n                onClick={() => {\n                  setActiveTab('reports');\n                  loadReportsHistory();\n                }}\n                style={{\n                  padding: '12px 24px',\n                  background: 'transparent',\n                  border: 'none',\n                  borderBottom: activeTab === 'reports' ? '2px solid #08979C' : '2px solid transparent',\n                  color: activeTab === 'reports' ? '#08979C' : '#666',\n                  fontWeight: activeTab === 'reports' ? '600' : '400',\n                  cursor: 'pointer',\n                  fontSize: '14px',\n                  marginBottom: '-2px'\n                }}\n              >\n                Reports\n              </button>\n            </div>\n          </div>\n\n          {activeTab === 'configuration' ? (\n            <div style={{ background: '#fff', borderRadius: '8px', padding: '24px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\n              {showPreview && previewData && viewMode ? (\n                // Full width Report View\n                <ReportViewPanel\n                  previewData={previewData}\n                  fieldLabelMap={fieldLabelMap}\n                  reportName={reportConfig.name}\n                  totalCount={previewData.length}\n                  hasMore={false}\n                  onEdit={canEditReports ? () => {\n                    setViewMode(false);\n                    handleEditReport(selectedReportId);\n                  } : null}\n                  canEdit={canEditReports}\n                  onClose={() => {\n                    setShowPreview(false);\n                    setViewMode(false);\n                    setPreviewData(null);\n                    setActiveTab('reports');\n                    loadReportsHistory();\n                  }}\n                />\n              ) : (\n                // Normal configuration view with left panel\n                <div style={{ display: 'flex', gap: '24px' }}>\n                  <SavedReportsPanel\n                    savedReports={savedReports}\n                    selectedReportId={selectedReportId}\n                    onSelectReport={loadSavedReport}\n                    onCreateNew={createNewReport}\n                    onDeleteReport={handleDeleteSavedReport}\n                  />\n                  <div style={{ flex: 1 }}>\n                    <ReportConfiguration\n                      reportConfig={reportConfig}\n                      setReportConfig={setReportConfig}\n                      availableObjects={availableObjects}\n                      availableFields={availableFields}\n                      filterOptions={filterOptions}\n                      loadingFields={loadingFields}\n                      loading={loading}\n                      isPreviewing={isPreviewing}\n                      isGenerating={isGenerating}\n                      previewData={previewData}\n                      viewMode={viewMode}\n                      onSave={saveReport}\n                      onPreview={previewReport}\n                      onGenerate={generateReport}\n                      onSchedule={handleScheduleReport}\n                      onFieldToggle={handleFieldToggle}\n                      onFilterChange={updateFilter}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              {showPreview && previewData && viewMode ? (\n                // Show report view in Reports tab for Reports Viewer\n                <div style={{ background: '#fff', borderRadius: '8px', padding: '24px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\n                  <ReportViewPanel\n                    previewData={previewData}\n                    fieldLabelMap={fieldLabelMap}\n                    reportName={reportConfig.name}\n                    totalCount={previewData.length}\n                    hasMore={false}\n                    onEdit={canEditReports ? () => {\n                      setViewMode(false);\n                      handleEditReport(selectedReportId);\n                    } : null}\n                    canEdit={canEditReports}\n                    onClose={() => {\n                      setShowPreview(false);\n                      setViewMode(false);\n                      setPreviewData(null);\n                      setSelectedReportId(null);\n                    }}\n                  />\n                </div>\n              ) : (\n                <ReportsList\n                  reportsHistory={reportsHistory}\n                  loadingHistory={loadingHistory}\n                  selectedCategory={selectedCategory}\n                  categories={getCategories()}\n                  onCategoryChange={setSelectedCategory}\n                  onRefresh={loadReportsHistory}\n                  onView={handleViewReport}\n                  onEdit={canEditReports ? handleEditReport : null}\n                  onDelete={canDeleteReports ? handleDeleteReport : null}\n                  canEdit={canEditReports}\n                  canDelete={canDeleteReports}\n                />\n              )}\n            </>\n          )}\n\n          {/* Modals */}\n          <PreviewModal\n            show={showPreviewModal}\n            data={previewModalData?.data}\n            fieldLabels={previewModalData?.fieldLabels || fieldLabelMap || {}}\n            totalCount={previewModalData?.totalCount}\n            hasMore={previewModalData?.hasMore}\n            onClose={() => setShowPreviewModal(false)}\n          />\n\n          <DeleteConfirmModal\n            show={showDeleteConfirm}\n            onConfirm={confirmDeleteReport}\n            onCancel={() => {\n              setShowDeleteConfirm(false);\n              setReportToDelete(null);\n            }}\n          />\n\n          <ScheduleModal\n            show={showScheduleModal}\n            formData={scheduleFormData}\n            onClose={() => setShowScheduleModal(false)}\n            onSave={handleCreateScheduledReport}\n            onChange={setScheduleFormData}\n            reportName={reportConfig.name}\n          />\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportBuilder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}