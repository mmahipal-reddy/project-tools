{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\nexport const useQueryBuilder = () => {\n  _s();\n  const [reportConfig, setReportConfig] = useState({\n    name: '',\n    objects: [],\n    // Array of { objectType, fields: [], filters: [], relationships: [], subqueries: [] }\n    // Legacy support - keep objectType for backward compatibility\n    objectType: '',\n    fields: [],\n    relationships: [],\n    subqueries: [],\n    filters: [],\n    sortBy: null,\n    sortOrder: 'ASC',\n    groupBy: null,\n    limit: 10000,\n    category: 'Uncategorized'\n  });\n  const updateConfig = useCallback(updates => {\n    setReportConfig(prev => ({\n      ...prev,\n      ...updates\n    }));\n  }, []);\n  const addField = useCallback(field => {\n    setReportConfig(prev => {\n      const fieldName = typeof field === 'string' ? field : field.name;\n      if (prev.fields.some(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return fName === fieldName;\n      })) {\n        return prev;\n      }\n      return {\n        ...prev,\n        fields: [...prev.fields, field]\n      };\n    });\n  }, []);\n  const removeField = useCallback(fieldName => {\n    setReportConfig(prev => ({\n      ...prev,\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return fName !== fieldName;\n      })\n    }));\n  }, []);\n  const addRelationship = useCallback(relationship => {\n    setReportConfig(prev => {\n      if (prev.relationships.some(r => r.relationshipName === relationship.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        relationships: [...prev.relationships, relationship]\n      };\n    });\n  }, []);\n  const removeRelationship = useCallback(relationshipName => {\n    setReportConfig(prev => ({\n      ...prev,\n      relationships: prev.relationships.filter(r => r.relationshipName !== relationshipName),\n      // Also remove fields from this relationship\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return !fName.startsWith(`${relationshipName}.`);\n      })\n    }));\n  }, []);\n  const addSubquery = useCallback(subquery => {\n    setReportConfig(prev => {\n      if (prev.subqueries.some(s => s.relationshipName === subquery.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        subqueries: [...prev.subqueries, subquery]\n      };\n    });\n  }, []);\n  const removeSubquery = useCallback(relationshipName => {\n    setReportConfig(prev => ({\n      ...prev,\n      subqueries: prev.subqueries.filter(s => s.relationshipName !== relationshipName),\n      // Also remove fields from this subquery\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return !fName.startsWith(`SUBQUERY:${relationshipName}.`);\n      })\n    }));\n  }, []);\n  const addFilter = useCallback(filter => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: [...prev.filters, filter]\n    }));\n  }, []);\n  const removeFilter = useCallback(filterIndex => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: prev.filters.filter((_, index) => index !== filterIndex)\n    }));\n  }, []);\n  const updateSort = useCallback((sortBy, sortOrder = 'ASC') => {\n    setReportConfig(prev => ({\n      ...prev,\n      sortBy,\n      sortOrder\n    }));\n  }, []);\n  const updateGroupBy = useCallback(groupBy => {\n    setReportConfig(prev => ({\n      ...prev,\n      groupBy\n    }));\n  }, []);\n  return {\n    reportConfig,\n    updateConfig,\n    addField,\n    removeField,\n    addRelationship,\n    removeRelationship,\n    addSubquery,\n    removeSubquery,\n    addFilter,\n    removeFilter,\n    updateSort,\n    updateGroupBy\n  };\n};\n_s(useQueryBuilder, \"sYoZ7IdddKY7CXSBGKPV6J4G9ZI=\");","map":{"version":3,"names":["useState","useCallback","useQueryBuilder","_s","reportConfig","setReportConfig","name","objects","objectType","fields","relationships","subqueries","filters","sortBy","sortOrder","groupBy","limit","category","updateConfig","updates","prev","addField","field","fieldName","some","f","fName","removeField","filter","addRelationship","relationship","r","relationshipName","removeRelationship","startsWith","addSubquery","subquery","s","removeSubquery","addFilter","removeFilter","filterIndex","_","index","updateSort","updateGroupBy"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/hooks/useQueryBuilder.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nexport const useQueryBuilder = () => {\n  const [reportConfig, setReportConfig] = useState({\n    name: '',\n    objects: [], // Array of { objectType, fields: [], filters: [], relationships: [], subqueries: [] }\n    // Legacy support - keep objectType for backward compatibility\n    objectType: '',\n    fields: [],\n    relationships: [],\n    subqueries: [],\n    filters: [],\n    sortBy: null,\n    sortOrder: 'ASC',\n    groupBy: null,\n    limit: 10000,\n    category: 'Uncategorized'\n  });\n\n  const updateConfig = useCallback((updates) => {\n    setReportConfig(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  const addField = useCallback((field) => {\n    setReportConfig(prev => {\n      const fieldName = typeof field === 'string' ? field : field.name;\n      if (prev.fields.some(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return fName === fieldName;\n      })) {\n        return prev;\n      }\n      return {\n        ...prev,\n        fields: [...prev.fields, field]\n      };\n    });\n  }, []);\n\n  const removeField = useCallback((fieldName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return fName !== fieldName;\n      })\n    }));\n  }, []);\n\n  const addRelationship = useCallback((relationship) => {\n    setReportConfig(prev => {\n      if (prev.relationships.some(r => r.relationshipName === relationship.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        relationships: [...prev.relationships, relationship]\n      };\n    });\n  }, []);\n\n  const removeRelationship = useCallback((relationshipName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      relationships: prev.relationships.filter(r => r.relationshipName !== relationshipName),\n      // Also remove fields from this relationship\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return !fName.startsWith(`${relationshipName}.`);\n      })\n    }));\n  }, []);\n\n  const addSubquery = useCallback((subquery) => {\n    setReportConfig(prev => {\n      if (prev.subqueries.some(s => s.relationshipName === subquery.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        subqueries: [...prev.subqueries, subquery]\n      };\n    });\n  }, []);\n\n  const removeSubquery = useCallback((relationshipName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      subqueries: prev.subqueries.filter(s => s.relationshipName !== relationshipName),\n      // Also remove fields from this subquery\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return !fName.startsWith(`SUBQUERY:${relationshipName}.`);\n      })\n    }));\n  }, []);\n\n  const addFilter = useCallback((filter) => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: [...prev.filters, filter]\n    }));\n  }, []);\n\n  const removeFilter = useCallback((filterIndex) => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: prev.filters.filter((_, index) => index !== filterIndex)\n    }));\n  }, []);\n\n  const updateSort = useCallback((sortBy, sortOrder = 'ASC') => {\n    setReportConfig(prev => ({\n      ...prev,\n      sortBy,\n      sortOrder\n    }));\n  }, []);\n\n  const updateGroupBy = useCallback((groupBy) => {\n    setReportConfig(prev => ({\n      ...prev,\n      groupBy\n    }));\n  }, []);\n\n  return {\n    reportConfig,\n    updateConfig,\n    addField,\n    removeField,\n    addRelationship,\n    removeRelationship,\n    addSubquery,\n    removeSubquery,\n    addFilter,\n    removeFilter,\n    updateSort,\n    updateGroupBy\n  };\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}