{"ast":null,"code":"import React,{useState}from'react';import{X,Plus,Package}from'lucide-react';import FieldChip from'../FieldChip';import InfoModal from'../../InfoModal';import'../../../../styles/ObjectCard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ObjectCard=_ref=>{let{objectType,fields,onFieldAdd,onFieldRemove}=_ref;const[showInfoModal,setShowInfoModal]=useState(false);const handleDrop=e=>{e.preventDefault();e.stopPropagation();try{const dataStr=e.dataTransfer.getData('application/json');if(!dataStr){return;// No data to process\n}const data=JSON.parse(dataStr);if(data.type==='field'){const fieldName=typeof data.field==='string'?data.field:data.field.name;if(!fieldName.includes('.')){onFieldAdd(data.field);}}}catch(error){console.error('Error handling drop:',error);// Silently fail - don't show browser alert\n}};const handleDragOver=e=>{e.preventDefault();e.stopPropagation();e.dataTransfer.dropEffect='move';};return/*#__PURE__*/_jsxs(\"div\",{className:\"query-card object-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(Package,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:objectType||'Select Object'})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",onDrop:handleDrop,onDragOver:handleDragOver,children:fields.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card-empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Drag fields here or click + Add Field\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"add-field-btn\",onClick:()=>{setShowInfoModal(true);},children:[/*#__PURE__*/_jsx(Plus,{size:14}),\" Add Field\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"card-fields\",children:[fields.map(field=>{const fieldName=typeof field==='string'?field:field.name;const fieldLabel=typeof field==='string'?field:field.label||field.name;return/*#__PURE__*/_jsx(FieldChip,{label:fieldLabel,name:fieldName,onRemove:()=>onFieldRemove(fieldName)},fieldName);}),/*#__PURE__*/_jsxs(\"button\",{className:\"add-field-btn-small\",onClick:()=>{setShowInfoModal(true);},children:[/*#__PURE__*/_jsx(Plus,{size:12}),\" Add Field\"]})]})}),/*#__PURE__*/_jsx(InfoModal,{show:showInfoModal,message:\"Use the left panel to drag fields here, or select fields from the object browser.\",onClose:()=>setShowInfoModal(false),title:\"How to Add Fields\"})]});};export default ObjectCard;","map":{"version":3,"names":["React","useState","X","Plus","Package","FieldChip","InfoModal","jsx","_jsx","jsxs","_jsxs","ObjectCard","_ref","objectType","fields","onFieldAdd","onFieldRemove","showInfoModal","setShowInfoModal","handleDrop","e","preventDefault","stopPropagation","dataStr","dataTransfer","getData","data","JSON","parse","type","fieldName","field","name","includes","error","console","handleDragOver","dropEffect","className","children","size","onDrop","onDragOver","length","onClick","map","fieldLabel","label","onRemove","show","message","onClose","title"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/QueryCanvas/cards/ObjectCard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { X, Plus, Package } from 'lucide-react';\nimport FieldChip from '../FieldChip';\nimport InfoModal from '../../InfoModal';\nimport '../../../../styles/ObjectCard.css';\n\nconst ObjectCard = ({ objectType, fields, onFieldAdd, onFieldRemove }) => {\n  const [showInfoModal, setShowInfoModal] = useState(false);\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    try {\n      const dataStr = e.dataTransfer.getData('application/json');\n      if (!dataStr) {\n        return; // No data to process\n      }\n      \n      const data = JSON.parse(dataStr);\n      if (data.type === 'field') {\n        const fieldName = typeof data.field === 'string' ? data.field : data.field.name;\n        if (!fieldName.includes('.')) {\n          onFieldAdd(data.field);\n        }\n      }\n    } catch (error) {\n      console.error('Error handling drop:', error);\n      // Silently fail - don't show browser alert\n    }\n  };\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  return (\n    <div className=\"query-card object-card\">\n      <div className=\"card-header\">\n        <div className=\"card-title\">\n          <Package size={18} />\n          <span>{objectType || 'Select Object'}</span>\n        </div>\n      </div>\n      \n      <div\n        className=\"card-content\"\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n      >\n        {fields.length === 0 ? (\n          <div className=\"card-empty\">\n            <p>Drag fields here or click + Add Field</p>\n            <button\n              className=\"add-field-btn\"\n              onClick={() => {\n                setShowInfoModal(true);\n              }}\n            >\n              <Plus size={14} /> Add Field\n            </button>\n          </div>\n        ) : (\n          <div className=\"card-fields\">\n            {fields.map(field => {\n              const fieldName = typeof field === 'string' ? field : field.name;\n              const fieldLabel = typeof field === 'string' ? field : (field.label || field.name);\n              return (\n                <FieldChip\n                  key={fieldName}\n                  label={fieldLabel}\n                  name={fieldName}\n                  onRemove={() => onFieldRemove(fieldName)}\n                />\n              );\n            })}\n            <button\n              className=\"add-field-btn-small\"\n              onClick={() => {\n                setShowInfoModal(true);\n              }}\n            >\n              <Plus size={12} /> Add Field\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Info Modal */}\n      <InfoModal\n        show={showInfoModal}\n        message=\"Use the left panel to drag fields here, or select fields from the object browser.\"\n        onClose={() => setShowInfoModal(false)}\n        title=\"How to Add Fields\"\n      />\n    </div>\n  );\n};\n\nexport default ObjectCard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}