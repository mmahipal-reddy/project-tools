{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{X,ChevronDown,Check}from'lucide-react';import{createPortal}from'react-dom';import'./FilterBuilder.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MultiSelectDropdown=_ref=>{let{options,value=[],onChange,placeholder='Select values'}=_ref;const[isOpen,setIsOpen]=useState(false);const[searchTerm,setSearchTerm]=useState('');const dropdownRef=useRef(null);const containerRef=useRef(null);useEffect(()=>{const handleClickOutside=event=>{if(containerRef.current&&!containerRef.current.contains(event.target)){setIsOpen(false);}};if(isOpen){document.addEventListener('mousedown',handleClickOutside);updateDropdownPosition();}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[isOpen]);const updateDropdownPosition=()=>{if(containerRef.current&&dropdownRef.current){const rect=containerRef.current.getBoundingClientRect();dropdownRef.current.style.top=\"\".concat(rect.bottom+window.scrollY,\"px\");dropdownRef.current.style.left=\"\".concat(rect.left+window.scrollX,\"px\");dropdownRef.current.style.width=\"\".concat(rect.width,\"px\");}};const filteredOptions=options.filter(opt=>opt.label.toLowerCase().includes(searchTerm.toLowerCase())||opt.value.toLowerCase().includes(searchTerm.toLowerCase()));const toggleOption=optionValue=>{const newValue=value.includes(optionValue)?value.filter(v=>v!==optionValue):[...value,optionValue];onChange(newValue);};const removeOption=(optionValue,e)=>{e.stopPropagation();onChange(value.filter(v=>v!==optionValue));};const selectedLabels=value.map(v=>{var _options$find;return((_options$find=options.find(o=>o.value===v))===null||_options$find===void 0?void 0:_options$find.label)||v;}).join(', ');return/*#__PURE__*/_jsxs(\"div\",{className:\"multi-select-dropdown-container\",ref:containerRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"multi-select-dropdown-trigger\",onClick:()=>setIsOpen(!isOpen),children:[/*#__PURE__*/_jsx(\"div\",{className:\"multi-select-dropdown-selected\",children:value.length===0?/*#__PURE__*/_jsx(\"span\",{className:\"multi-select-placeholder\",children:placeholder}):/*#__PURE__*/_jsxs(\"div\",{className:\"multi-select-tags\",children:[value.slice(0,2).map(v=>{const option=options.find(o=>o.value===v);return/*#__PURE__*/_jsxs(\"span\",{className:\"multi-select-tag\",children:[(option===null||option===void 0?void 0:option.label)||v,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>removeOption(v,e),className:\"multi-select-tag-remove\",children:/*#__PURE__*/_jsx(X,{size:12})})]},v);}),value.length>2&&/*#__PURE__*/_jsxs(\"span\",{className:\"multi-select-more\",children:[\"+\",value.length-2,\" more\"]})]})}),/*#__PURE__*/_jsx(ChevronDown,{size:16,className:isOpen?'rotate':''})]}),isOpen&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsxs(\"div\",{className:\"multi-select-dropdown-menu\",ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"div\",{className:\"multi-select-search\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"multi-select-search-input\",autoFocus:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"multi-select-options\",children:filteredOptions.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"multi-select-no-results\",children:\"No options found\"}):filteredOptions.map(option=>/*#__PURE__*/_jsxs(\"div\",{className:\"multi-select-option \".concat(value.includes(option.value)?'selected':''),onClick:()=>toggleOption(option.value),children:[/*#__PURE__*/_jsx(Check,{size:14,className:value.includes(option.value)?'visible':'hidden'}),/*#__PURE__*/_jsx(\"span\",{children:option.label})]},option.value))})]}),document.body)]});};export default MultiSelectDropdown;","map":{"version":3,"names":["React","useState","useRef","useEffect","X","ChevronDown","Check","createPortal","jsx","_jsx","jsxs","_jsxs","MultiSelectDropdown","_ref","options","value","onChange","placeholder","isOpen","setIsOpen","searchTerm","setSearchTerm","dropdownRef","containerRef","handleClickOutside","event","current","contains","target","document","addEventListener","updateDropdownPosition","removeEventListener","rect","getBoundingClientRect","style","top","concat","bottom","window","scrollY","left","scrollX","width","filteredOptions","filter","opt","label","toLowerCase","includes","toggleOption","optionValue","newValue","v","removeOption","e","stopPropagation","selectedLabels","map","_options$find","find","o","join","className","ref","children","onClick","length","slice","option","type","size","autoFocus","body"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/ReportBuilder/FilterBuilder/MultiSelectDropdown.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { X, ChevronDown, Check } from 'lucide-react';\nimport { createPortal } from 'react-dom';\nimport './FilterBuilder.css';\n\nconst MultiSelectDropdown = ({ options, value = [], onChange, placeholder = 'Select values' }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const dropdownRef = useRef(null);\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (containerRef.current && !containerRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      updateDropdownPosition();\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  const updateDropdownPosition = () => {\n    if (containerRef.current && dropdownRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      dropdownRef.current.style.top = `${rect.bottom + window.scrollY}px`;\n      dropdownRef.current.style.left = `${rect.left + window.scrollX}px`;\n      dropdownRef.current.style.width = `${rect.width}px`;\n    }\n  };\n\n  const filteredOptions = options.filter(opt =>\n    opt.label.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    opt.value.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const toggleOption = (optionValue) => {\n    const newValue = value.includes(optionValue)\n      ? value.filter(v => v !== optionValue)\n      : [...value, optionValue];\n    onChange(newValue);\n  };\n\n  const removeOption = (optionValue, e) => {\n    e.stopPropagation();\n    onChange(value.filter(v => v !== optionValue));\n  };\n\n  const selectedLabels = value\n    .map(v => options.find(o => o.value === v)?.label || v)\n    .join(', ');\n\n  return (\n    <div className=\"multi-select-dropdown-container\" ref={containerRef}>\n      <div\n        className=\"multi-select-dropdown-trigger\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        <div className=\"multi-select-dropdown-selected\">\n          {value.length === 0 ? (\n            <span className=\"multi-select-placeholder\">{placeholder}</span>\n          ) : (\n            <div className=\"multi-select-tags\">\n              {value.slice(0, 2).map(v => {\n                const option = options.find(o => o.value === v);\n                return (\n                  <span key={v} className=\"multi-select-tag\">\n                    {option?.label || v}\n                    <button\n                      type=\"button\"\n                      onClick={(e) => removeOption(v, e)}\n                      className=\"multi-select-tag-remove\"\n                    >\n                      <X size={12} />\n                    </button>\n                  </span>\n                );\n              })}\n              {value.length > 2 && (\n                <span className=\"multi-select-more\">+{value.length - 2} more</span>\n              )}\n            </div>\n          )}\n        </div>\n        <ChevronDown size={16} className={isOpen ? 'rotate' : ''} />\n      </div>\n\n      {isOpen && createPortal(\n        <div className=\"multi-select-dropdown-menu\" ref={dropdownRef}>\n          <div className=\"multi-select-search\">\n            <input\n              type=\"text\"\n              placeholder=\"Search...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"multi-select-search-input\"\n              autoFocus\n            />\n          </div>\n          <div className=\"multi-select-options\">\n            {filteredOptions.length === 0 ? (\n              <div className=\"multi-select-no-results\">No options found</div>\n            ) : (\n              filteredOptions.map(option => (\n                <div\n                  key={option.value}\n                  className={`multi-select-option ${value.includes(option.value) ? 'selected' : ''}`}\n                  onClick={() => toggleOption(option.value)}\n                >\n                  <Check\n                    size={14}\n                    className={value.includes(option.value) ? 'visible' : 'hidden'}\n                  />\n                  <span>{option.label}</span>\n                </div>\n              ))\n            )}\n          </div>\n        </div>,\n        document.body\n      )}\n    </div>\n  );\n};\n\nexport default MultiSelectDropdown;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,CAAC,CAAEC,WAAW,CAAEC,KAAK,KAAQ,cAAc,CACpD,OAASC,YAAY,KAAQ,WAAW,CACxC,MAAO,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7B,KAAM,CAAAC,mBAAmB,CAAGC,IAAA,EAAsE,IAArE,CAAEC,OAAO,CAAEC,KAAK,CAAG,EAAE,CAAEC,QAAQ,CAAEC,WAAW,CAAG,eAAgB,CAAC,CAAAJ,IAAA,CAC3F,KAAM,CAACK,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACmB,UAAU,CAAEC,aAAa,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAAqB,WAAW,CAAGpB,MAAM,CAAC,IAAI,CAAC,CAChC,KAAM,CAAAqB,YAAY,CAAGrB,MAAM,CAAC,IAAI,CAAC,CAEjCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIF,YAAY,CAACG,OAAO,EAAI,CAACH,YAAY,CAACG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CACxET,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAED,GAAID,MAAM,CAAE,CACVW,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1DO,sBAAsB,CAAC,CAAC,CAC1B,CAEA,MAAO,IAAM,CACXF,QAAQ,CAACG,mBAAmB,CAAC,WAAW,CAAER,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,CAACN,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAa,sBAAsB,CAAGA,CAAA,GAAM,CACnC,GAAIR,YAAY,CAACG,OAAO,EAAIJ,WAAW,CAACI,OAAO,CAAE,CAC/C,KAAM,CAAAO,IAAI,CAAGV,YAAY,CAACG,OAAO,CAACQ,qBAAqB,CAAC,CAAC,CACzDZ,WAAW,CAACI,OAAO,CAACS,KAAK,CAACC,GAAG,IAAAC,MAAA,CAAMJ,IAAI,CAACK,MAAM,CAAGC,MAAM,CAACC,OAAO,MAAI,CACnElB,WAAW,CAACI,OAAO,CAACS,KAAK,CAACM,IAAI,IAAAJ,MAAA,CAAMJ,IAAI,CAACQ,IAAI,CAAGF,MAAM,CAACG,OAAO,MAAI,CAClEpB,WAAW,CAACI,OAAO,CAACS,KAAK,CAACQ,KAAK,IAAAN,MAAA,CAAMJ,IAAI,CAACU,KAAK,MAAI,CACrD,CACF,CAAC,CAED,KAAM,CAAAC,eAAe,CAAG9B,OAAO,CAAC+B,MAAM,CAACC,GAAG,EACxCA,GAAG,CAACC,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC7B,UAAU,CAAC4B,WAAW,CAAC,CAAC,CAAC,EAC1DF,GAAG,CAAC/B,KAAK,CAACiC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC7B,UAAU,CAAC4B,WAAW,CAAC,CAAC,CAC3D,CAAC,CAED,KAAM,CAAAE,YAAY,CAAIC,WAAW,EAAK,CACpC,KAAM,CAAAC,QAAQ,CAAGrC,KAAK,CAACkC,QAAQ,CAACE,WAAW,CAAC,CACxCpC,KAAK,CAAC8B,MAAM,CAACQ,CAAC,EAAIA,CAAC,GAAKF,WAAW,CAAC,CACpC,CAAC,GAAGpC,KAAK,CAAEoC,WAAW,CAAC,CAC3BnC,QAAQ,CAACoC,QAAQ,CAAC,CACpB,CAAC,CAED,KAAM,CAAAE,YAAY,CAAGA,CAACH,WAAW,CAAEI,CAAC,GAAK,CACvCA,CAAC,CAACC,eAAe,CAAC,CAAC,CACnBxC,QAAQ,CAACD,KAAK,CAAC8B,MAAM,CAACQ,CAAC,EAAIA,CAAC,GAAKF,WAAW,CAAC,CAAC,CAChD,CAAC,CAED,KAAM,CAAAM,cAAc,CAAG1C,KAAK,CACzB2C,GAAG,CAACL,CAAC,OAAAM,aAAA,OAAI,EAAAA,aAAA,CAAA7C,OAAO,CAAC8C,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAC9C,KAAK,GAAKsC,CAAC,CAAC,UAAAM,aAAA,iBAAhCA,aAAA,CAAkCZ,KAAK,GAAIM,CAAC,GAAC,CACtDS,IAAI,CAAC,IAAI,CAAC,CAEb,mBACEnD,KAAA,QAAKoD,SAAS,CAAC,iCAAiC,CAACC,GAAG,CAAEzC,YAAa,CAAA0C,QAAA,eACjEtD,KAAA,QACEoD,SAAS,CAAC,+BAA+B,CACzCG,OAAO,CAAEA,CAAA,GAAM/C,SAAS,CAAC,CAACD,MAAM,CAAE,CAAA+C,QAAA,eAElCxD,IAAA,QAAKsD,SAAS,CAAC,gCAAgC,CAAAE,QAAA,CAC5ClD,KAAK,CAACoD,MAAM,GAAK,CAAC,cACjB1D,IAAA,SAAMsD,SAAS,CAAC,0BAA0B,CAAAE,QAAA,CAAEhD,WAAW,CAAO,CAAC,cAE/DN,KAAA,QAAKoD,SAAS,CAAC,mBAAmB,CAAAE,QAAA,EAC/BlD,KAAK,CAACqD,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACV,GAAG,CAACL,CAAC,EAAI,CAC1B,KAAM,CAAAgB,MAAM,CAAGvD,OAAO,CAAC8C,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAC9C,KAAK,GAAKsC,CAAC,CAAC,CAC/C,mBACE1C,KAAA,SAAcoD,SAAS,CAAC,kBAAkB,CAAAE,QAAA,EACvC,CAAAI,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEtB,KAAK,GAAIM,CAAC,cACnB5C,IAAA,WACE6D,IAAI,CAAC,QAAQ,CACbJ,OAAO,CAAGX,CAAC,EAAKD,YAAY,CAACD,CAAC,CAAEE,CAAC,CAAE,CACnCQ,SAAS,CAAC,yBAAyB,CAAAE,QAAA,cAEnCxD,IAAA,CAACL,CAAC,EAACmE,IAAI,CAAE,EAAG,CAAE,CAAC,CACT,CAAC,GARAlB,CASL,CAAC,CAEX,CAAC,CAAC,CACDtC,KAAK,CAACoD,MAAM,CAAG,CAAC,eACfxD,KAAA,SAAMoD,SAAS,CAAC,mBAAmB,CAAAE,QAAA,EAAC,GAAC,CAAClD,KAAK,CAACoD,MAAM,CAAG,CAAC,CAAC,OAAK,EAAM,CACnE,EACE,CACN,CACE,CAAC,cACN1D,IAAA,CAACJ,WAAW,EAACkE,IAAI,CAAE,EAAG,CAACR,SAAS,CAAE7C,MAAM,CAAG,QAAQ,CAAG,EAAG,CAAE,CAAC,EACzD,CAAC,CAELA,MAAM,eAAIX,YAAY,cACrBI,KAAA,QAAKoD,SAAS,CAAC,4BAA4B,CAACC,GAAG,CAAE1C,WAAY,CAAA2C,QAAA,eAC3DxD,IAAA,QAAKsD,SAAS,CAAC,qBAAqB,CAAAE,QAAA,cAClCxD,IAAA,UACE6D,IAAI,CAAC,MAAM,CACXrD,WAAW,CAAC,WAAW,CACvBF,KAAK,CAAEK,UAAW,CAClBJ,QAAQ,CAAGuC,CAAC,EAAKlC,aAAa,CAACkC,CAAC,CAAC3B,MAAM,CAACb,KAAK,CAAE,CAC/CgD,SAAS,CAAC,2BAA2B,CACrCS,SAAS,MACV,CAAC,CACC,CAAC,cACN/D,IAAA,QAAKsD,SAAS,CAAC,sBAAsB,CAAAE,QAAA,CAClCrB,eAAe,CAACuB,MAAM,GAAK,CAAC,cAC3B1D,IAAA,QAAKsD,SAAS,CAAC,yBAAyB,CAAAE,QAAA,CAAC,kBAAgB,CAAK,CAAC,CAE/DrB,eAAe,CAACc,GAAG,CAACW,MAAM,eACxB1D,KAAA,QAEEoD,SAAS,wBAAA1B,MAAA,CAAyBtB,KAAK,CAACkC,QAAQ,CAACoB,MAAM,CAACtD,KAAK,CAAC,CAAG,UAAU,CAAG,EAAE,CAAG,CACnFmD,OAAO,CAAEA,CAAA,GAAMhB,YAAY,CAACmB,MAAM,CAACtD,KAAK,CAAE,CAAAkD,QAAA,eAE1CxD,IAAA,CAACH,KAAK,EACJiE,IAAI,CAAE,EAAG,CACTR,SAAS,CAAEhD,KAAK,CAACkC,QAAQ,CAACoB,MAAM,CAACtD,KAAK,CAAC,CAAG,SAAS,CAAG,QAAS,CAChE,CAAC,cACFN,IAAA,SAAAwD,QAAA,CAAOI,MAAM,CAACtB,KAAK,CAAO,CAAC,GARtBsB,MAAM,CAACtD,KAST,CACN,CACF,CACE,CAAC,EACH,CAAC,CACNc,QAAQ,CAAC4C,IACX,CAAC,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7D,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}