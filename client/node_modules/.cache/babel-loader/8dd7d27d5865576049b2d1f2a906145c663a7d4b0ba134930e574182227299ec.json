{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Cursor/ProjectSetup/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useCallback}from'react';export const useQueryBuilder=()=>{const[reportConfig,setReportConfig]=useState({name:'',objectType:'',fields:[],relationships:[],subqueries:[],filters:[],sortBy:null,sortOrder:'ASC',groupBy:null,limit:10000,category:'Uncategorized'});const updateConfig=useCallback(updates=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),updates));},[]);const addField=useCallback(field=>{setReportConfig(prev=>{const fieldName=typeof field==='string'?field:field.name;if(prev.fields.some(f=>{const fName=typeof f==='string'?f:f.name;return fName===fieldName;})){return prev;}return _objectSpread(_objectSpread({},prev),{},{fields:[...prev.fields,field]});});},[]);const removeField=useCallback(fieldName=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{fields:prev.fields.filter(f=>{const fName=typeof f==='string'?f:f.name;return fName!==fieldName;})}));},[]);const addRelationship=useCallback(relationship=>{setReportConfig(prev=>{if(prev.relationships.some(r=>r.relationshipName===relationship.relationshipName)){return prev;}return _objectSpread(_objectSpread({},prev),{},{relationships:[...prev.relationships,relationship]});});},[]);const removeRelationship=useCallback(relationshipName=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{relationships:prev.relationships.filter(r=>r.relationshipName!==relationshipName),// Also remove fields from this relationship\nfields:prev.fields.filter(f=>{const fName=typeof f==='string'?f:f.name;return!fName.startsWith(\"\".concat(relationshipName,\".\"));})}));},[]);const addSubquery=useCallback(subquery=>{setReportConfig(prev=>{if(prev.subqueries.some(s=>s.relationshipName===subquery.relationshipName)){return prev;}return _objectSpread(_objectSpread({},prev),{},{subqueries:[...prev.subqueries,subquery]});});},[]);const removeSubquery=useCallback(relationshipName=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{subqueries:prev.subqueries.filter(s=>s.relationshipName!==relationshipName),// Also remove fields from this subquery\nfields:prev.fields.filter(f=>{const fName=typeof f==='string'?f:f.name;return!fName.startsWith(\"SUBQUERY:\".concat(relationshipName,\".\"));})}));},[]);const addFilter=useCallback(filter=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{filters:[...prev.filters,filter]}));},[]);const removeFilter=useCallback(filterIndex=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{filters:prev.filters.filter((_,index)=>index!==filterIndex)}));},[]);const updateSort=useCallback(function(sortBy){let sortOrder=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'ASC';setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{sortBy,sortOrder}));},[]);const updateGroupBy=useCallback(groupBy=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{groupBy}));},[]);return{reportConfig,updateConfig,addField,removeField,addRelationship,removeRelationship,addSubquery,removeSubquery,addFilter,removeFilter,updateSort,updateGroupBy};};","map":{"version":3,"names":["useState","useCallback","useQueryBuilder","reportConfig","setReportConfig","name","objectType","fields","relationships","subqueries","filters","sortBy","sortOrder","groupBy","limit","category","updateConfig","updates","prev","_objectSpread","addField","field","fieldName","some","f","fName","removeField","filter","addRelationship","relationship","r","relationshipName","removeRelationship","startsWith","concat","addSubquery","subquery","s","removeSubquery","addFilter","removeFilter","filterIndex","_","index","updateSort","arguments","length","undefined","updateGroupBy"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/hooks/useQueryBuilder.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nexport const useQueryBuilder = () => {\n  const [reportConfig, setReportConfig] = useState({\n    name: '',\n    objectType: '',\n    fields: [],\n    relationships: [],\n    subqueries: [],\n    filters: [],\n    sortBy: null,\n    sortOrder: 'ASC',\n    groupBy: null,\n    limit: 10000,\n    category: 'Uncategorized'\n  });\n\n  const updateConfig = useCallback((updates) => {\n    setReportConfig(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  const addField = useCallback((field) => {\n    setReportConfig(prev => {\n      const fieldName = typeof field === 'string' ? field : field.name;\n      if (prev.fields.some(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return fName === fieldName;\n      })) {\n        return prev;\n      }\n      return {\n        ...prev,\n        fields: [...prev.fields, field]\n      };\n    });\n  }, []);\n\n  const removeField = useCallback((fieldName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return fName !== fieldName;\n      })\n    }));\n  }, []);\n\n  const addRelationship = useCallback((relationship) => {\n    setReportConfig(prev => {\n      if (prev.relationships.some(r => r.relationshipName === relationship.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        relationships: [...prev.relationships, relationship]\n      };\n    });\n  }, []);\n\n  const removeRelationship = useCallback((relationshipName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      relationships: prev.relationships.filter(r => r.relationshipName !== relationshipName),\n      // Also remove fields from this relationship\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return !fName.startsWith(`${relationshipName}.`);\n      })\n    }));\n  }, []);\n\n  const addSubquery = useCallback((subquery) => {\n    setReportConfig(prev => {\n      if (prev.subqueries.some(s => s.relationshipName === subquery.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        subqueries: [...prev.subqueries, subquery]\n      };\n    });\n  }, []);\n\n  const removeSubquery = useCallback((relationshipName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      subqueries: prev.subqueries.filter(s => s.relationshipName !== relationshipName),\n      // Also remove fields from this subquery\n      fields: prev.fields.filter(f => {\n        const fName = typeof f === 'string' ? f : f.name;\n        return !fName.startsWith(`SUBQUERY:${relationshipName}.`);\n      })\n    }));\n  }, []);\n\n  const addFilter = useCallback((filter) => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: [...prev.filters, filter]\n    }));\n  }, []);\n\n  const removeFilter = useCallback((filterIndex) => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: prev.filters.filter((_, index) => index !== filterIndex)\n    }));\n  }, []);\n\n  const updateSort = useCallback((sortBy, sortOrder = 'ASC') => {\n    setReportConfig(prev => ({\n      ...prev,\n      sortBy,\n      sortOrder\n    }));\n  }, []);\n\n  const updateGroupBy = useCallback((groupBy) => {\n    setReportConfig(prev => ({\n      ...prev,\n      groupBy\n    }));\n  }, []);\n\n  return {\n    reportConfig,\n    updateConfig,\n    addField,\n    removeField,\n    addRelationship,\n    removeRelationship,\n    addSubquery,\n    removeSubquery,\n    addFilter,\n    removeFilter,\n    updateSort,\n    updateGroupBy\n  };\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}