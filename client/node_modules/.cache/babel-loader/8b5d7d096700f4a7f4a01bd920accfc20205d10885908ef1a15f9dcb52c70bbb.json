{"ast":null,"code":"import React from'react';import{AlertTriangle,TrendingUp}from'lucide-react';import'../../../styles/ContributorTimeStatus/BottleneckAnalysis.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const BottleneckAnalysis=_ref=>{let{data,error}=_ref;if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"bottleneck-error\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Error loading bottleneck data: \",error]})});}// Check if we have any data at all\nif(!data){return/*#__PURE__*/_jsx(\"div\",{className:\"bottleneck-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No bottleneck data available\"})});}const topBottlenecks=(data.topBottlenecks||[]).slice(0,10);const maxDays=topBottlenecks.length>0?Math.max(...topBottlenecks.map(b=>b.averageDays),1):1;// Check if we have heatmap data even if no bottlenecks\nconst hasHeatmapData=data.heatmapData&&Object.keys(data.heatmapData).length>0;// If no bottlenecks and no heatmap, show empty message\nif(topBottlenecks.length===0&&!hasHeatmapData){return/*#__PURE__*/_jsx(\"div\",{className:\"bottleneck-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No bottleneck data available\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bottleneck-analysis\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bottleneck-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-icon\",children:/*#__PURE__*/_jsx(AlertTriangle,{size:24,color:\"#ef4444\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"bottleneck-title\",children:\"Bottleneck Analysis\"}),/*#__PURE__*/_jsx(\"p\",{className:\"bottleneck-subtitle\",children:\"Statuses where contributors spend the most time\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottleneck-content\",children:[topBottlenecks.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bottleneck-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"bottleneck-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Average Days\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Contributors Affected\"}),/*#__PURE__*/_jsx(\"th\",{children:\"% of Total Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Visual\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:topBottlenecks.map((bottleneck,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"rank-cell\",children:[\"#\",index+1]}),/*#__PURE__*/_jsx(\"td\",{className:\"status-cell\",children:/*#__PURE__*/_jsx(\"strong\",{children:bottleneck.status})}),/*#__PURE__*/_jsxs(\"td\",{className:\"days-cell\",children:[/*#__PURE__*/_jsx(TrendingUp,{size:16,color:\"#f59e0b\"}),bottleneck.averageDays.toFixed(1),\" days\"]}),/*#__PURE__*/_jsx(\"td\",{children:bottleneck.contributorsAffected.toLocaleString()}),/*#__PURE__*/_jsxs(\"td\",{children:[bottleneck.percentOfTotalTime.toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",style:{width:\"\".concat(bottleneck.averageDays/maxDays*100,\"%\"),background:'#ef4444'}})})})]},bottleneck.status))})]})}),data.heatmapData&&Object.keys(data.heatmapData).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"heatmap-section\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"heatmap-title\",children:\"Time by Project/Objective (Heatmap)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-grid\",children:Object.keys(data.heatmapData).filter(key=>key.trim()!=='').slice(0,20).map(key=>/*#__PURE__*/_jsxs(\"div\",{className:\"heatmap-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-label\",children:key}),/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-bars\",children:Object.keys(data.heatmapData[key]).map(status=>{const value=data.heatmapData[key][status];const maxValue=Math.max(...Object.values(data.heatmapData[key]),1);return/*#__PURE__*/_jsxs(\"div\",{className:\"heatmap-bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-bar-label\",children:status}),/*#__PURE__*/_jsxs(\"div\",{className:\"heatmap-bar-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-bar\",style:{width:\"\".concat(value/maxValue*100,\"%\"),background:value>10?'#ef4444':value>5?'#f59e0b':'#10b981'},title:\"\".concat(status,\": \").concat(value.toFixed(1),\" days\")}),/*#__PURE__*/_jsxs(\"span\",{className:\"heatmap-bar-value\",children:[value.toFixed(1),\"d\"]})]})]},status);})})]},key))})})]})]})]});};export default BottleneckAnalysis;","map":{"version":3,"names":["React","AlertTriangle","TrendingUp","jsxs","_jsxs","jsx","_jsx","BottleneckAnalysis","_ref","data","error","className","children","topBottlenecks","slice","maxDays","length","Math","max","map","b","averageDays","hasHeatmapData","heatmapData","Object","keys","size","color","bottleneck","index","status","toFixed","contributorsAffected","toLocaleString","percentOfTotalTime","style","width","concat","background","filter","key","trim","value","maxValue","values","title"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/ContributorTimeStatus/components/BottleneckAnalysis.js"],"sourcesContent":["import React from 'react';\nimport { AlertTriangle, TrendingUp } from 'lucide-react';\nimport '../../../styles/ContributorTimeStatus/BottleneckAnalysis.css';\n\nconst BottleneckAnalysis = ({ data, error }) => {\n  if (error) {\n    return (\n      <div className=\"bottleneck-error\">\n        <p>Error loading bottleneck data: {error}</p>\n      </div>\n    );\n  }\n  \n  // Check if we have any data at all\n  if (!data) {\n    return (\n      <div className=\"bottleneck-empty\">\n        <p>No bottleneck data available</p>\n      </div>\n    );\n  }\n  \n  const topBottlenecks = (data.topBottlenecks || []).slice(0, 10);\n  const maxDays = topBottlenecks.length > 0 ? Math.max(...topBottlenecks.map(b => b.averageDays), 1) : 1;\n  \n  // Check if we have heatmap data even if no bottlenecks\n  const hasHeatmapData = data.heatmapData && Object.keys(data.heatmapData).length > 0;\n  \n  // If no bottlenecks and no heatmap, show empty message\n  if (topBottlenecks.length === 0 && !hasHeatmapData) {\n    return (\n      <div className=\"bottleneck-empty\">\n        <p>No bottleneck data available</p>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"bottleneck-analysis\">\n      <div className=\"bottleneck-header\">\n        <div className=\"header-icon\">\n          <AlertTriangle size={24} color=\"#ef4444\" />\n        </div>\n        <div>\n          <h3 className=\"bottleneck-title\">Bottleneck Analysis</h3>\n          <p className=\"bottleneck-subtitle\">Statuses where contributors spend the most time</p>\n        </div>\n      </div>\n      \n      <div className=\"bottleneck-content\">\n        {topBottlenecks.length > 0 && (\n          <div className=\"bottleneck-table-container\">\n            <table className=\"bottleneck-table\">\n              <thead>\n                <tr>\n                  <th>Rank</th>\n                  <th>Status</th>\n                  <th>Average Days</th>\n                  <th>Contributors Affected</th>\n                  <th>% of Total Time</th>\n                  <th>Visual</th>\n                </tr>\n              </thead>\n              <tbody>\n                {topBottlenecks.map((bottleneck, index) => (\n                  <tr key={bottleneck.status}>\n                    <td className=\"rank-cell\">#{index + 1}</td>\n                    <td className=\"status-cell\">\n                      <strong>{bottleneck.status}</strong>\n                    </td>\n                    <td className=\"days-cell\">\n                      <TrendingUp size={16} color=\"#f59e0b\" />\n                      {bottleneck.averageDays.toFixed(1)} days\n                    </td>\n                    <td>{bottleneck.contributorsAffected.toLocaleString()}</td>\n                    <td>{bottleneck.percentOfTotalTime.toFixed(1)}%</td>\n                    <td>\n                      <div className=\"progress-bar-container\">\n                        <div \n                          className=\"progress-bar\"\n                          style={{ \n                            width: `${(bottleneck.averageDays / maxDays) * 100}%`,\n                            background: '#ef4444'\n                          }}\n                        />\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n        \n        {data.heatmapData && Object.keys(data.heatmapData).length > 0 && (\n          <div className=\"heatmap-section\">\n            <h4 className=\"heatmap-title\">Time by Project/Objective (Heatmap)</h4>\n            <div className=\"heatmap-container\">\n              <div className=\"heatmap-grid\">\n                {Object.keys(data.heatmapData)\n                  .filter(key => key.trim() !== '')\n                  .slice(0, 20)\n                  .map(key => (\n                  <div key={key} className=\"heatmap-item\">\n                    <div className=\"heatmap-label\">{key}</div>\n                    <div className=\"heatmap-bars\">\n                      {Object.keys(data.heatmapData[key]).map(status => {\n                        const value = data.heatmapData[key][status];\n                        const maxValue = Math.max(...Object.values(data.heatmapData[key]), 1);\n                        return (\n                          <div key={status} className=\"heatmap-bar-item\">\n                            <div className=\"heatmap-bar-label\">{status}</div>\n                            <div className=\"heatmap-bar-container\">\n                              <div \n                                className=\"heatmap-bar\"\n                                style={{ \n                                  width: `${(value / maxValue) * 100}%`,\n                                  background: value > 10 ? '#ef4444' : value > 5 ? '#f59e0b' : '#10b981'\n                                }}\n                                title={`${status}: ${value.toFixed(1)} days`}\n                              />\n                              <span className=\"heatmap-bar-value\">{value.toFixed(1)}d</span>\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default BottleneckAnalysis;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}