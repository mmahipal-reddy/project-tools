{"ast":null,"code":"var _jsxFileName = \"/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/AdvancedBuilderCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useImperativeHandle, forwardRef } from 'react';\nimport ObjectPanel from './ObjectPanel/ObjectPanel';\nimport QueryCanvas from './QueryCanvas/QueryCanvas';\nimport PreviewPanel from './PreviewPanel/PreviewPanel';\nimport { useQueryBuilder } from './hooks/useQueryBuilder';\nimport { usePreview } from './hooks/usePreview';\nimport '../../styles/AdvancedBuilderCanvas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdvancedBuilderCanvas = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n  const {\n    reportConfig,\n    updateConfig,\n    addField,\n    removeField,\n    addRelationship,\n    removeRelationship,\n    addSubquery,\n    removeSubquery,\n    addFilter,\n    removeFilter,\n    updateSort,\n    updateGroupBy\n  } = useQueryBuilder();\n  const {\n    previewData,\n    loading,\n    error,\n    generatePreview\n  } = usePreview();\n  const [previewExpanded, setPreviewExpanded] = useState(true);\n\n  // Auto-preview when config changes (debounced)\n  useEffect(() => {\n    if (reportConfig.objectType && reportConfig.fields.length > 0) {\n      const timer = setTimeout(() => {\n        generatePreview(reportConfig);\n      }, 500);\n      return () => clearTimeout(timer);\n    }\n  }, [reportConfig, generatePreview]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"advanced-builder-canvas\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas-left-panel\",\n        children: /*#__PURE__*/_jsxDEV(ObjectPanel, {\n          selectedObject: reportConfig.objectType,\n          onObjectSelect: objectType => updateConfig({\n            objectType\n          }),\n          onFieldDrag: field => addField(field),\n          onRelationshipDrag: relationship => addRelationship(relationship),\n          onSubqueryDrag: subquery => addSubquery(subquery)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas-center-panel\",\n        children: /*#__PURE__*/_jsxDEV(QueryCanvas, {\n          reportConfig: reportConfig,\n          onFieldAdd: addField,\n          onFieldRemove: removeField,\n          onRelationshipAdd: addRelationship,\n          onRelationshipRemove: removeRelationship,\n          onSubqueryAdd: addSubquery,\n          onSubqueryRemove: removeSubquery,\n          onFilterAdd: addFilter,\n          onFilterRemove: removeFilter,\n          onSortUpdate: updateSort,\n          onGroupByUpdate: updateGroupBy,\n          onConfigUpdate: updateConfig\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PreviewPanel, {\n      data: previewData,\n      loading: loading,\n      error: error,\n      expanded: previewExpanded,\n      onToggle: () => setPreviewExpanded(!previewExpanded),\n      reportName: reportConfig.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}, \"Bf6nvO59Zpd24CAUEx9FGgfEq2g=\", false, function () {\n  return [useQueryBuilder, usePreview];\n})), \"Bf6nvO59Zpd24CAUEx9FGgfEq2g=\", false, function () {\n  return [useQueryBuilder, usePreview];\n});\n_c2 = AdvancedBuilderCanvas;\nAdvancedBuilderCanvas.displayName = 'AdvancedBuilderCanvas';\n\n// Expose getReportConfig method via ref\nAdvancedBuilderCanvas.getReportConfig = () => {\n  // This will be set by useImperativeHandle\n};\nexport default AdvancedBuilderCanvas;\nvar _c, _c2;\n$RefreshReg$(_c, \"AdvancedBuilderCanvas$forwardRef\");\n$RefreshReg$(_c2, \"AdvancedBuilderCanvas\");","map":{"version":3,"names":["React","useState","useEffect","useImperativeHandle","forwardRef","ObjectPanel","QueryCanvas","PreviewPanel","useQueryBuilder","usePreview","jsxDEV","_jsxDEV","AdvancedBuilderCanvas","_s","_c","props","ref","reportConfig","updateConfig","addField","removeField","addRelationship","removeRelationship","addSubquery","removeSubquery","addFilter","removeFilter","updateSort","updateGroupBy","previewData","loading","error","generatePreview","previewExpanded","setPreviewExpanded","objectType","fields","length","timer","setTimeout","clearTimeout","className","children","selectedObject","onObjectSelect","onFieldDrag","field","onRelationshipDrag","relationship","onSubqueryDrag","subquery","fileName","_jsxFileName","lineNumber","columnNumber","onFieldAdd","onFieldRemove","onRelationshipAdd","onRelationshipRemove","onSubqueryAdd","onSubqueryRemove","onFilterAdd","onFilterRemove","onSortUpdate","onGroupByUpdate","onConfigUpdate","data","expanded","onToggle","reportName","name","_c2","displayName","getReportConfig","$RefreshReg$"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/AdvancedBuilderCanvas.js"],"sourcesContent":["import React, { useState, useEffect, useImperativeHandle, forwardRef } from 'react';\nimport ObjectPanel from './ObjectPanel/ObjectPanel';\nimport QueryCanvas from './QueryCanvas/QueryCanvas';\nimport PreviewPanel from './PreviewPanel/PreviewPanel';\nimport { useQueryBuilder } from './hooks/useQueryBuilder';\nimport { usePreview } from './hooks/usePreview';\nimport '../../styles/AdvancedBuilderCanvas.css';\n\nconst AdvancedBuilderCanvas = forwardRef((props, ref) => {\n  const {\n    reportConfig,\n    updateConfig,\n    addField,\n    removeField,\n    addRelationship,\n    removeRelationship,\n    addSubquery,\n    removeSubquery,\n    addFilter,\n    removeFilter,\n    updateSort,\n    updateGroupBy\n  } = useQueryBuilder();\n\n  const {\n    previewData,\n    loading,\n    error,\n    generatePreview\n  } = usePreview();\n\n  const [previewExpanded, setPreviewExpanded] = useState(true);\n\n  // Auto-preview when config changes (debounced)\n  useEffect(() => {\n    if (reportConfig.objectType && reportConfig.fields.length > 0) {\n      const timer = setTimeout(() => {\n        generatePreview(reportConfig);\n      }, 500);\n      return () => clearTimeout(timer);\n    }\n  }, [reportConfig, generatePreview]);\n\n  return (\n    <div className=\"advanced-builder-canvas\">\n      <div className=\"canvas-layout\">\n        {/* Left Panel - Object Browser */}\n        <div className=\"canvas-left-panel\">\n          <ObjectPanel\n            selectedObject={reportConfig.objectType}\n            onObjectSelect={(objectType) => updateConfig({ objectType })}\n            onFieldDrag={(field) => addField(field)}\n            onRelationshipDrag={(relationship) => addRelationship(relationship)}\n            onSubqueryDrag={(subquery) => addSubquery(subquery)}\n          />\n        </div>\n\n        {/* Center Panel - Visual Query Builder */}\n        <div className=\"canvas-center-panel\">\n          <QueryCanvas\n            reportConfig={reportConfig}\n            onFieldAdd={addField}\n            onFieldRemove={removeField}\n            onRelationshipAdd={addRelationship}\n            onRelationshipRemove={removeRelationship}\n            onSubqueryAdd={addSubquery}\n            onSubqueryRemove={removeSubquery}\n            onFilterAdd={addFilter}\n            onFilterRemove={removeFilter}\n            onSortUpdate={updateSort}\n            onGroupByUpdate={updateGroupBy}\n            onConfigUpdate={updateConfig}\n          />\n        </div>\n      </div>\n\n      {/* Bottom Panel - Preview */}\n      <PreviewPanel\n        data={previewData}\n        loading={loading}\n        error={error}\n        expanded={previewExpanded}\n        onToggle={() => setPreviewExpanded(!previewExpanded)}\n        reportName={reportConfig.name}\n      />\n    </div>\n  );\n});\n\nAdvancedBuilderCanvas.displayName = 'AdvancedBuilderCanvas';\n\n// Expose getReportConfig method via ref\nAdvancedBuilderCanvas.getReportConfig = () => {\n  // This will be set by useImperativeHandle\n};\n\nexport default AdvancedBuilderCanvas;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}