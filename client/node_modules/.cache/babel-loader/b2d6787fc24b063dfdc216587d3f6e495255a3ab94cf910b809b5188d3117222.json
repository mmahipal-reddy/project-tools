{"ast":null,"code":"var _s = $RefreshSig$();\n// Custom hook for transformation history (undo/redo)\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { MAX_HISTORY_STATES } from '../constants';\nexport const useTransformationHistory = fieldMappings => {\n  _s();\n  const [transformationHistory, setTransformationHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // Track history when mappings change\n  useEffect(() => {\n    if (fieldMappings.length > 0) {\n      const currentState = JSON.parse(JSON.stringify(fieldMappings));\n      setTransformationHistory(prev => {\n        const newHistory = prev.slice(0, historyIndex + 1);\n        newHistory.push(currentState);\n        if (newHistory.length > MAX_HISTORY_STATES) {\n          newHistory.shift();\n        }\n        return newHistory;\n      });\n      setHistoryIndex(prev => Math.min(prev + 1, MAX_HISTORY_STATES - 1));\n    }\n  }, [fieldMappings.length]); // Only track when mappings are added/removed\n\n  const undo = useCallback(setFieldMappings => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setFieldMappings(JSON.parse(JSON.stringify(transformationHistory[newIndex])));\n      return true;\n    }\n    return false;\n  }, [historyIndex, transformationHistory]);\n  const redo = useCallback(setFieldMappings => {\n    if (historyIndex < transformationHistory.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setFieldMappings(JSON.parse(JSON.stringify(transformationHistory[newIndex])));\n      return true;\n    }\n    return false;\n  }, [historyIndex, transformationHistory]);\n  const canUndo = historyIndex > 0;\n  const canRedo = historyIndex < transformationHistory.length - 1;\n  return {\n    undo,\n    redo,\n    canUndo,\n    canRedo\n  };\n};\n_s(useTransformationHistory, \"QuHJYcOb9/ZzVnSgNKonSG4qtrs=\");","map":{"version":3,"names":["useState","useEffect","useCallback","MAX_HISTORY_STATES","useTransformationHistory","fieldMappings","_s","transformationHistory","setTransformationHistory","historyIndex","setHistoryIndex","length","currentState","JSON","parse","stringify","prev","newHistory","slice","push","shift","Math","min","undo","setFieldMappings","newIndex","redo","canUndo","canRedo"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/UpdateObjectFields/hooks/useTransformationHistory.js"],"sourcesContent":["// Custom hook for transformation history (undo/redo)\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { MAX_HISTORY_STATES } from '../constants';\n\nexport const useTransformationHistory = (fieldMappings) => {\n  const [transformationHistory, setTransformationHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // Track history when mappings change\n  useEffect(() => {\n    if (fieldMappings.length > 0) {\n      const currentState = JSON.parse(JSON.stringify(fieldMappings));\n      setTransformationHistory(prev => {\n        const newHistory = prev.slice(0, historyIndex + 1);\n        newHistory.push(currentState);\n        if (newHistory.length > MAX_HISTORY_STATES) {\n          newHistory.shift();\n        }\n        return newHistory;\n      });\n      setHistoryIndex(prev => Math.min(prev + 1, MAX_HISTORY_STATES - 1));\n    }\n  }, [fieldMappings.length]); // Only track when mappings are added/removed\n\n  const undo = useCallback((setFieldMappings) => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setFieldMappings(JSON.parse(JSON.stringify(transformationHistory[newIndex])));\n      return true;\n    }\n    return false;\n  }, [historyIndex, transformationHistory]);\n\n  const redo = useCallback((setFieldMappings) => {\n    if (historyIndex < transformationHistory.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setFieldMappings(JSON.parse(JSON.stringify(transformationHistory[newIndex])));\n      return true;\n    }\n    return false;\n  }, [historyIndex, transformationHistory]);\n\n  const canUndo = historyIndex > 0;\n  const canRedo = historyIndex < transformationHistory.length - 1;\n\n  return {\n    undo,\n    redo,\n    canUndo,\n    canRedo\n  };\n};\n\n"],"mappings":";AAAA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,SAASC,kBAAkB,QAAQ,cAAc;AAEjD,OAAO,MAAMC,wBAAwB,GAAIC,aAAa,IAAK;EAAAC,EAAA;EACzD,MAAM,CAACC,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACtE,MAAM,CAACS,YAAY,EAAEC,eAAe,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAEpD;EACAC,SAAS,CAAC,MAAM;IACd,IAAII,aAAa,CAACM,MAAM,GAAG,CAAC,EAAE;MAC5B,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACV,aAAa,CAAC,CAAC;MAC9DG,wBAAwB,CAACQ,IAAI,IAAI;QAC/B,MAAMC,UAAU,GAAGD,IAAI,CAACE,KAAK,CAAC,CAAC,EAAET,YAAY,GAAG,CAAC,CAAC;QAClDQ,UAAU,CAACE,IAAI,CAACP,YAAY,CAAC;QAC7B,IAAIK,UAAU,CAACN,MAAM,GAAGR,kBAAkB,EAAE;UAC1Cc,UAAU,CAACG,KAAK,CAAC,CAAC;QACpB;QACA,OAAOH,UAAU;MACnB,CAAC,CAAC;MACFP,eAAe,CAACM,IAAI,IAAIK,IAAI,CAACC,GAAG,CAACN,IAAI,GAAG,CAAC,EAAEb,kBAAkB,GAAG,CAAC,CAAC,CAAC;IACrE;EACF,CAAC,EAAE,CAACE,aAAa,CAACM,MAAM,CAAC,CAAC,CAAC,CAAC;;EAE5B,MAAMY,IAAI,GAAGrB,WAAW,CAAEsB,gBAAgB,IAAK;IAC7C,IAAIf,YAAY,GAAG,CAAC,EAAE;MACpB,MAAMgB,QAAQ,GAAGhB,YAAY,GAAG,CAAC;MACjCC,eAAe,CAACe,QAAQ,CAAC;MACzBD,gBAAgB,CAACX,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACR,qBAAqB,CAACkB,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC7E,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC,EAAE,CAAChB,YAAY,EAAEF,qBAAqB,CAAC,CAAC;EAEzC,MAAMmB,IAAI,GAAGxB,WAAW,CAAEsB,gBAAgB,IAAK;IAC7C,IAAIf,YAAY,GAAGF,qBAAqB,CAACI,MAAM,GAAG,CAAC,EAAE;MACnD,MAAMc,QAAQ,GAAGhB,YAAY,GAAG,CAAC;MACjCC,eAAe,CAACe,QAAQ,CAAC;MACzBD,gBAAgB,CAACX,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACR,qBAAqB,CAACkB,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC7E,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC,EAAE,CAAChB,YAAY,EAAEF,qBAAqB,CAAC,CAAC;EAEzC,MAAMoB,OAAO,GAAGlB,YAAY,GAAG,CAAC;EAChC,MAAMmB,OAAO,GAAGnB,YAAY,GAAGF,qBAAqB,CAACI,MAAM,GAAG,CAAC;EAE/D,OAAO;IACLY,IAAI;IACJG,IAAI;IACJC,OAAO;IACPC;EACF,CAAC;AACH,CAAC;AAACtB,EAAA,CAjDWF,wBAAwB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}