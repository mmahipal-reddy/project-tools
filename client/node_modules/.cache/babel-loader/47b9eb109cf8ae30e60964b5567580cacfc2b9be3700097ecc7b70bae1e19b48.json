{"ast":null,"code":"import React from'react';import{Download,Loader}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MFALogTable=_ref=>{let{logs,loading,availableFields}=_ref;const getFieldLabel=fieldName=>{const labelMap={'Contact__c':'Contributor','Name':'MFA Verification Log Name','Flow__c':'Flow','Status__c':'Status','IP_Address__c':'IP Address'};if(labelMap[fieldName]){return labelMap[fieldName];}const field=availableFields.find(f=>f.name===fieldName);return field?field.label:fieldName;};const getFieldValue=(logItem,fieldName)=>{if(fieldName==='Contact__c'){return logItem['Contact__r.Name']||logItem[fieldName]||'';}// Handle field name variations\nif(fieldName==='IP_Address__c'&&!logItem[fieldName]){return logItem['IPAddress__c']||'';}return logItem[fieldName]||'';};const formatValue=value=>{if(value===null||value===undefined)return'';if(typeof value==='boolean')return value?'Yes':'No';return String(value);};const formatValueForCSV=value=>{if(value===null||value===undefined)return'';if(typeof value==='boolean')return value?'Yes':'No';return String(value);};const handleExportCSV=()=>{const headers=['Contributor','MFA Verification Log Name','Flow','Status','IP Address'];const fieldNames=['Contact__c','Name','Flow__c','Status__c','IP_Address__c'];const csvRows=[headers.join(',')];logs.forEach(log=>{const row=fieldNames.map(fieldName=>{const value=getFieldValue(log,fieldName);const formattedValue=formatValueForCSV(value);// Escape commas and quotes in CSV\nif(formattedValue.includes(',')||formattedValue.includes('\"')||formattedValue.includes('\\n')){return\"\\\"\".concat(formattedValue.replace(/\"/g,'\"\"'),\"\\\"\");}return formattedValue;});csvRows.push(row.join(','));});const csvContent=csvRows.join('\\n');const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',\"mfa_verification_logs_\".concat(new Date().toISOString().split('T')[0],\".csv\"));link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};const defaultColumns=['Contact__c','Name','Flow__c','Status__c','IP_Address__c'];if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-loading\",children:[/*#__PURE__*/_jsx(Loader,{className:\"spinning\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading MFA Verification Logs...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"MFA Verification Logs (\",logs.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-export-csv\",onClick:handleExportCSV,title:\"Export to CSV\",children:[/*#__PURE__*/_jsx(Download,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"Export CSV\"})]})]}),logs.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"case-table-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No MFA Verification Logs found\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"case-table-scroll-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"case-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:defaultColumns.map(column=>/*#__PURE__*/_jsx(\"th\",{children:getFieldLabel(column)},column))})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map(log=>/*#__PURE__*/_jsx(\"tr\",{className:\"case-table-row\",children:defaultColumns.map(column=>/*#__PURE__*/_jsx(\"td\",{children:formatValue(getFieldValue(log,column))},column))},log.Id))})]})})]});};export default MFALogTable;","map":{"version":3,"names":["React","Download","Loader","jsx","_jsx","jsxs","_jsxs","MFALogTable","_ref","logs","loading","availableFields","getFieldLabel","fieldName","labelMap","field","find","f","name","label","getFieldValue","logItem","formatValue","value","undefined","String","formatValueForCSV","handleExportCSV","headers","fieldNames","csvRows","join","forEach","log","row","map","formattedValue","includes","concat","replace","push","csvContent","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","Date","toISOString","split","style","visibility","body","appendChild","click","removeChild","defaultColumns","className","children","size","length","onClick","title","column","Id"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/MFAVerificationLogs/MFALogTable.js"],"sourcesContent":["import React from 'react';\nimport { Download, Loader } from 'lucide-react';\n\nconst MFALogTable = ({ logs, loading, availableFields }) => {\n  const getFieldLabel = (fieldName) => {\n    const labelMap = {\n      'Contact__c': 'Contributor',\n      'Name': 'MFA Verification Log Name',\n      'Flow__c': 'Flow',\n      'Status__c': 'Status',\n      'IP_Address__c': 'IP Address'\n    };\n    \n    if (labelMap[fieldName]) {\n      return labelMap[fieldName];\n    }\n    \n    const field = availableFields.find(f => f.name === fieldName);\n    return field ? field.label : fieldName;\n  };\n\n  const getFieldValue = (logItem, fieldName) => {\n    if (fieldName === 'Contact__c') {\n      return logItem['Contact__r.Name'] || logItem[fieldName] || '';\n    }\n    \n    // Handle field name variations\n    if (fieldName === 'IP_Address__c' && !logItem[fieldName]) {\n      return logItem['IPAddress__c'] || '';\n    }\n    \n    return logItem[fieldName] || '';\n  };\n\n  const formatValue = (value) => {\n    if (value === null || value === undefined) return '';\n    if (typeof value === 'boolean') return value ? 'Yes' : 'No';\n    return String(value);\n  };\n\n  const formatValueForCSV = (value) => {\n    if (value === null || value === undefined) return '';\n    if (typeof value === 'boolean') return value ? 'Yes' : 'No';\n    return String(value);\n  };\n\n  const handleExportCSV = () => {\n    const headers = [\n      'Contributor',\n      'MFA Verification Log Name',\n      'Flow',\n      'Status',\n      'IP Address'\n    ];\n    \n    const fieldNames = [\n      'Contact__c',\n      'Name',\n      'Flow__c',\n      'Status__c',\n      'IP_Address__c'\n    ];\n    \n    const csvRows = [headers.join(',')];\n    \n    logs.forEach(log => {\n      const row = fieldNames.map(fieldName => {\n        const value = getFieldValue(log, fieldName);\n        const formattedValue = formatValueForCSV(value);\n        // Escape commas and quotes in CSV\n        if (formattedValue.includes(',') || formattedValue.includes('\"') || formattedValue.includes('\\n')) {\n          return `\"${formattedValue.replace(/\"/g, '\"\"')}\"`;\n        }\n        return formattedValue;\n      });\n      csvRows.push(row.join(','));\n    });\n    \n    const csvContent = csvRows.join('\\n');\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `mfa_verification_logs_${new Date().toISOString().split('T')[0]}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const defaultColumns = [\n    'Contact__c',\n    'Name',\n    'Flow__c',\n    'Status__c',\n    'IP_Address__c'\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"case-table-loading\">\n        <Loader className=\"spinning\" size={24} />\n        <p>Loading MFA Verification Logs...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"case-table-container\">\n      <div className=\"case-table-header\">\n        <h3>MFA Verification Logs ({logs.length})</h3>\n        <button\n          className=\"btn-export-csv\"\n          onClick={handleExportCSV}\n          title=\"Export to CSV\"\n        >\n          <Download size={14} />\n          <span>Export CSV</span>\n        </button>\n      </div>\n\n      {logs.length === 0 ? (\n        <div className=\"case-table-empty\">\n          <p>No MFA Verification Logs found</p>\n        </div>\n      ) : (\n        <div className=\"case-table-scroll-wrapper\">\n          <table className=\"case-table\">\n            <thead>\n              <tr>\n                {defaultColumns.map(column => (\n                  <th key={column}>\n                    {getFieldLabel(column)}\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {logs.map((log) => (\n                <tr key={log.Id} className=\"case-table-row\">\n                  {defaultColumns.map(column => (\n                    <td key={column}>\n                      {formatValue(getFieldValue(log, column))}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MFALogTable;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}