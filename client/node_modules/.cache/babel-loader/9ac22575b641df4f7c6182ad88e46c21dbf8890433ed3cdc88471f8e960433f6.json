{"ast":null,"code":"// CrowdDashboard utilities\n\nimport { BASELINE_STORAGE_KEY, THRESHOLDS_STORAGE_KEY, HISTORICAL_DATA_KEY } from './constants';\nimport * as XLSX from 'xlsx';\nimport toast from 'react-hot-toast';\n\n/**\n * Load baseline data from localStorage\n */\nexport const loadBaselineData = () => {\n  try {\n    const saved = localStorage.getItem(BASELINE_STORAGE_KEY);\n    if (saved) {\n      return JSON.parse(saved);\n    }\n  } catch (error) {\n    // Silently fail baseline loading\n  }\n  return null;\n};\n\n/**\n * Save current dashboard state as baseline\n */\nexport const saveBaselineData = dashboardState => {\n  try {\n    const stateWithTimestamp = {\n      ...dashboardState,\n      savedAt: dashboardState.savedAt || new Date().toISOString()\n    };\n    localStorage.setItem(BASELINE_STORAGE_KEY, JSON.stringify(stateWithTimestamp));\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\n/**\n * Format number with K/M suffixes\n */\nexport const formatNumber = num => {\n  if (num === null || num === undefined || isNaN(num)) {\n    return '0';\n  }\n  const number = typeof num === 'number' ? num : parseFloat(num);\n  if (isNaN(number)) {\n    return '0';\n  }\n  if (number >= 1000000) {\n    return (number / 1000000).toFixed(1) + 'M';\n  } else if (number >= 1000) {\n    return (number / 1000).toFixed(1) + 'k';\n  }\n  return number.toString();\n};\n\n/**\n * Format date string\n */\nexport const formatDate = dateString => {\n  if (!dateString) return 'Never';\n  const date = new Date(dateString);\n  return date.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\n\n/**\n * Get metric color based on thresholds\n */\nexport const getMetricColor = (key, value, thresholds) => {\n  const threshold = thresholds[key];\n  if (!threshold) return 'green';\n  if (threshold.max !== undefined && value > threshold.max) return 'red';\n  if (threshold.min !== undefined && value < threshold.min) return 'red';\n  return threshold.color || 'green';\n};\n\n/**\n * Export widget data to Excel\n */\nexport const exportToExcel = (widgetKey, data, widgetName, metrics, kycStatus, byProject, byCountryLanguage, bySource) => {\n  try {\n    let worksheetData = [];\n    let fileName = '';\n    switch (widgetKey) {\n      case 'baseMetrics':\n        worksheetData = [['Metric', 'Value'], ['Target HC', metrics.targetHC], ['Total Applications', metrics.totalApplications], ['Total Qualified', metrics.totalQualified], ['Total Active on Projects', metrics.totalActiveOnProjects], ['Total Productive', metrics.totalProductive], ['Onboarding Contributors', metrics.onboardingContributors], ['Active Contributors', metrics.activeContributors], ['Avg App Received to Applied (days)', metrics.avgAppReceivedToApplied], ['Avg App Received to Active (days)', metrics.avgAppReceivedToActive], ['Last Refreshed', formatDate(metrics.lastRefreshed)]];\n        fileName = 'Crowd_Dashboard_Metrics';\n        break;\n      case 'kycStatus':\n        worksheetData = [['KYC Status', 'Count'], ...kycStatus.map(item => [item.status || 'Unknown', item.count || 0])];\n        fileName = 'KYC_Status';\n        break;\n      case 'byProject':\n        worksheetData = [['Project Name', 'Active Contributors'], ...byProject.map(item => [item.projectName || 'Unknown', item.count || 0])];\n        fileName = 'Active_Contributors_by_Project';\n        break;\n      case 'byCountryLanguage':\n        const countryLangData = [];\n        countryLangData.push(['Country', 'Language', 'Count']);\n        byCountryLanguage.forEach(item => {\n          Object.keys(item).forEach(key => {\n            if (key !== 'country' && item[key] > 0) {\n              countryLangData.push([item.country || 'Unknown', key, item[key]]);\n            }\n          });\n        });\n        worksheetData = countryLangData;\n        fileName = 'Active_Contributors_by_Country_Language';\n        break;\n      case 'bySource':\n        worksheetData = [['Source Details', 'Contributors'], ...bySource.map(item => [item.source || 'Unknown', item.count || 0])];\n        fileName = 'Contributors_by_Source_Details';\n        break;\n      default:\n        toast.error('Export not available for this widget');\n        return;\n    }\n    const ws = XLSX.utils.aoa_to_sheet(worksheetData);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, widgetName || 'Data');\n    const timestamp = new Date().toISOString().split('T')[0];\n    XLSX.writeFile(wb, `${fileName}_${timestamp}.xlsx`);\n    toast.success(`${widgetName || 'Data'} exported successfully`);\n  } catch (error) {\n    toast.error('Failed to export data');\n  }\n};\n\n/**\n * Get trend data for a metric\n */\nexport const getTrendData = (metricKey, historicalData) => {\n  if (!historicalData || historicalData.length === 0) return [];\n  return historicalData.map(snapshot => {\n    var _snapshot$metrics;\n    return {\n      date: new Date(snapshot.timestamp).toLocaleDateString(),\n      value: ((_snapshot$metrics = snapshot.metrics) === null || _snapshot$metrics === void 0 ? void 0 : _snapshot$metrics[metricKey]) || 0\n    };\n  }).slice(-30); // Last 30 data points\n};\n\n/**\n * Apply filters to data\n */\nexport const applyFilters = (data, widgetKey, debouncedFilters) => {\n  if (!data || data.length === 0) return [];\n  let filtered = data;\n\n  // Apply status filter\n  if (debouncedFilters.status && widgetKey === 'kycStatus') {\n    const searchTerm = debouncedFilters.status.toLowerCase().trim();\n    if (searchTerm) {\n      filtered = filtered.filter(item => {\n        var _item$status;\n        return (_item$status = item.status) === null || _item$status === void 0 ? void 0 : _item$status.toLowerCase().includes(searchTerm);\n      });\n    }\n  }\n\n  // Apply project filter\n  if (debouncedFilters.project && widgetKey === 'byProject') {\n    const searchTerm = debouncedFilters.project.toLowerCase().trim();\n    if (searchTerm) {\n      filtered = filtered.filter(item => {\n        var _item$projectName;\n        return (_item$projectName = item.projectName) === null || _item$projectName === void 0 ? void 0 : _item$projectName.toLowerCase().includes(searchTerm);\n      });\n    }\n  }\n\n  // Apply country filter\n  if (debouncedFilters.country && widgetKey === 'byCountryLanguage') {\n    const searchTerm = debouncedFilters.country.toLowerCase().trim();\n    if (searchTerm) {\n      filtered = filtered.filter(item => {\n        var _item$country;\n        return (_item$country = item.country) === null || _item$country === void 0 ? void 0 : _item$country.toLowerCase().includes(searchTerm);\n      });\n    }\n  }\n  return filtered;\n};\n\n/**\n * Load thresholds from localStorage\n */\nexport const loadThresholds = () => {\n  try {\n    const saved = localStorage.getItem(THRESHOLDS_STORAGE_KEY);\n    if (saved) {\n      return JSON.parse(saved);\n    }\n  } catch (error) {\n    // Silently fail threshold loading\n  }\n  return {\n    targetHC: {\n      min: 0,\n      max: 33,\n      color: 'red'\n    },\n    totalApplications: {\n      min: 67,\n      color: 'green'\n    },\n    avgAppReceivedToApplied: {\n      max: 15,\n      color: 'green'\n    },\n    avgAppReceivedToActive: {\n      max: 33,\n      color: 'green'\n    }\n  };\n};\n\n/**\n * Save thresholds to localStorage\n */\nexport const saveThresholds = thresholds => {\n  try {\n    localStorage.setItem(THRESHOLDS_STORAGE_KEY, JSON.stringify(thresholds));\n    return true;\n  } catch (error) {\n    return false;\n  }\n};","map":{"version":3,"names":["BASELINE_STORAGE_KEY","THRESHOLDS_STORAGE_KEY","HISTORICAL_DATA_KEY","XLSX","toast","loadBaselineData","saved","localStorage","getItem","JSON","parse","error","saveBaselineData","dashboardState","stateWithTimestamp","savedAt","Date","toISOString","setItem","stringify","formatNumber","num","undefined","isNaN","number","parseFloat","toFixed","toString","formatDate","dateString","date","toLocaleString","month","day","year","hour","minute","getMetricColor","key","value","thresholds","threshold","max","min","color","exportToExcel","widgetKey","data","widgetName","metrics","kycStatus","byProject","byCountryLanguage","bySource","worksheetData","fileName","targetHC","totalApplications","totalQualified","totalActiveOnProjects","totalProductive","onboardingContributors","activeContributors","avgAppReceivedToApplied","avgAppReceivedToActive","lastRefreshed","map","item","status","count","projectName","countryLangData","push","forEach","Object","keys","country","source","ws","utils","aoa_to_sheet","wb","book_new","book_append_sheet","timestamp","split","writeFile","success","getTrendData","metricKey","historicalData","length","snapshot","_snapshot$metrics","toLocaleDateString","slice","applyFilters","debouncedFilters","filtered","searchTerm","toLowerCase","trim","filter","_item$status","includes","project","_item$projectName","_item$country","loadThresholds","saveThresholds"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/CrowdDashboard/utils.js"],"sourcesContent":["// CrowdDashboard utilities\n\nimport { BASELINE_STORAGE_KEY, THRESHOLDS_STORAGE_KEY, HISTORICAL_DATA_KEY } from './constants';\nimport * as XLSX from 'xlsx';\nimport toast from 'react-hot-toast';\n\n/**\n * Load baseline data from localStorage\n */\nexport const loadBaselineData = () => {\n  try {\n    const saved = localStorage.getItem(BASELINE_STORAGE_KEY);\n    if (saved) {\n      return JSON.parse(saved);\n    }\n  } catch (error) {\n    // Silently fail baseline loading\n  }\n  return null;\n};\n\n/**\n * Save current dashboard state as baseline\n */\nexport const saveBaselineData = (dashboardState) => {\n  try {\n    const stateWithTimestamp = {\n      ...dashboardState,\n      savedAt: dashboardState.savedAt || new Date().toISOString()\n    };\n    localStorage.setItem(BASELINE_STORAGE_KEY, JSON.stringify(stateWithTimestamp));\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\n/**\n * Format number with K/M suffixes\n */\nexport const formatNumber = (num) => {\n  if (num === null || num === undefined || isNaN(num)) {\n    return '0';\n  }\n  const number = typeof num === 'number' ? num : parseFloat(num);\n  if (isNaN(number)) {\n    return '0';\n  }\n  if (number >= 1000000) {\n    return (number / 1000000).toFixed(1) + 'M';\n  } else if (number >= 1000) {\n    return (number / 1000).toFixed(1) + 'k';\n  }\n  return number.toString();\n};\n\n/**\n * Format date string\n */\nexport const formatDate = (dateString) => {\n  if (!dateString) return 'Never';\n  const date = new Date(dateString);\n  return date.toLocaleString('en-US', { \n    month: 'short', \n    day: 'numeric', \n    year: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\n\n/**\n * Get metric color based on thresholds\n */\nexport const getMetricColor = (key, value, thresholds) => {\n  const threshold = thresholds[key];\n  if (!threshold) return 'green';\n  \n  if (threshold.max !== undefined && value > threshold.max) return 'red';\n  if (threshold.min !== undefined && value < threshold.min) return 'red';\n  return threshold.color || 'green';\n};\n\n/**\n * Export widget data to Excel\n */\nexport const exportToExcel = (widgetKey, data, widgetName, metrics, kycStatus, byProject, byCountryLanguage, bySource) => {\n  try {\n    let worksheetData = [];\n    let fileName = '';\n\n    switch(widgetKey) {\n      case 'baseMetrics':\n        worksheetData = [\n          ['Metric', 'Value'],\n          ['Target HC', metrics.targetHC],\n          ['Total Applications', metrics.totalApplications],\n          ['Total Qualified', metrics.totalQualified],\n          ['Total Active on Projects', metrics.totalActiveOnProjects],\n          ['Total Productive', metrics.totalProductive],\n          ['Onboarding Contributors', metrics.onboardingContributors],\n          ['Active Contributors', metrics.activeContributors],\n          ['Avg App Received to Applied (days)', metrics.avgAppReceivedToApplied],\n          ['Avg App Received to Active (days)', metrics.avgAppReceivedToActive],\n          ['Last Refreshed', formatDate(metrics.lastRefreshed)]\n        ];\n        fileName = 'Crowd_Dashboard_Metrics';\n        break;\n      case 'kycStatus':\n        worksheetData = [\n          ['KYC Status', 'Count'],\n          ...kycStatus.map(item => [item.status || 'Unknown', item.count || 0])\n        ];\n        fileName = 'KYC_Status';\n        break;\n      case 'byProject':\n        worksheetData = [\n          ['Project Name', 'Active Contributors'],\n          ...byProject.map(item => [item.projectName || 'Unknown', item.count || 0])\n        ];\n        fileName = 'Active_Contributors_by_Project';\n        break;\n      case 'byCountryLanguage':\n        const countryLangData = [];\n        countryLangData.push(['Country', 'Language', 'Count']);\n        byCountryLanguage.forEach(item => {\n          Object.keys(item).forEach(key => {\n            if (key !== 'country' && item[key] > 0) {\n              countryLangData.push([item.country || 'Unknown', key, item[key]]);\n            }\n          });\n        });\n        worksheetData = countryLangData;\n        fileName = 'Active_Contributors_by_Country_Language';\n        break;\n      case 'bySource':\n        worksheetData = [\n          ['Source Details', 'Contributors'],\n          ...bySource.map(item => [item.source || 'Unknown', item.count || 0])\n        ];\n        fileName = 'Contributors_by_Source_Details';\n        break;\n      default:\n        toast.error('Export not available for this widget');\n        return;\n    }\n\n    const ws = XLSX.utils.aoa_to_sheet(worksheetData);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, widgetName || 'Data');\n    \n    const timestamp = new Date().toISOString().split('T')[0];\n    XLSX.writeFile(wb, `${fileName}_${timestamp}.xlsx`);\n    toast.success(`${widgetName || 'Data'} exported successfully`);\n  } catch (error) {\n    toast.error('Failed to export data');\n  }\n};\n\n/**\n * Get trend data for a metric\n */\nexport const getTrendData = (metricKey, historicalData) => {\n  if (!historicalData || historicalData.length === 0) return [];\n  \n  return historicalData.map(snapshot => ({\n    date: new Date(snapshot.timestamp).toLocaleDateString(),\n    value: snapshot.metrics?.[metricKey] || 0\n  })).slice(-30); // Last 30 data points\n};\n\n/**\n * Apply filters to data\n */\nexport const applyFilters = (data, widgetKey, debouncedFilters) => {\n  if (!data || data.length === 0) return [];\n  \n  let filtered = data;\n  \n  // Apply status filter\n  if (debouncedFilters.status && widgetKey === 'kycStatus') {\n    const searchTerm = debouncedFilters.status.toLowerCase().trim();\n    if (searchTerm) {\n      filtered = filtered.filter(item => \n        item.status?.toLowerCase().includes(searchTerm)\n      );\n    }\n  }\n  \n  // Apply project filter\n  if (debouncedFilters.project && widgetKey === 'byProject') {\n    const searchTerm = debouncedFilters.project.toLowerCase().trim();\n    if (searchTerm) {\n      filtered = filtered.filter(item => \n        item.projectName?.toLowerCase().includes(searchTerm)\n      );\n    }\n  }\n  \n  // Apply country filter\n  if (debouncedFilters.country && widgetKey === 'byCountryLanguage') {\n    const searchTerm = debouncedFilters.country.toLowerCase().trim();\n    if (searchTerm) {\n      filtered = filtered.filter(item => \n        item.country?.toLowerCase().includes(searchTerm)\n      );\n    }\n  }\n  \n  return filtered;\n};\n\n/**\n * Load thresholds from localStorage\n */\nexport const loadThresholds = () => {\n  try {\n    const saved = localStorage.getItem(THRESHOLDS_STORAGE_KEY);\n    if (saved) {\n      return JSON.parse(saved);\n    }\n  } catch (error) {\n    // Silently fail threshold loading\n  }\n  return {\n    targetHC: { min: 0, max: 33, color: 'red' },\n    totalApplications: { min: 67, color: 'green' },\n    avgAppReceivedToApplied: { max: 15, color: 'green' },\n    avgAppReceivedToActive: { max: 33, color: 'green' }\n  };\n};\n\n/**\n * Save thresholds to localStorage\n */\nexport const saveThresholds = (thresholds) => {\n  try {\n    localStorage.setItem(THRESHOLDS_STORAGE_KEY, JSON.stringify(thresholds));\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}