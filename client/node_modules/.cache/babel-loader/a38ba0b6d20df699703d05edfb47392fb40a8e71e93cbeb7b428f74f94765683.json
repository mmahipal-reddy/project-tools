{"ast":null,"code":"var _jsxFileName = \"/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/CreateWorkStream.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport useSidebarWidth from '../hooks/useSidebarWidth';\nimport { Menu, LogOut, Search, X, Info, Plus, ChevronDown, ChevronUp, Trash2, Loader, Save, Copy, FolderOpen, Download, Upload, FileText } from 'lucide-react';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport * as XLSX from 'xlsx';\nimport '../styles/CreateWorkStream.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CreateWorkStream = ({\n  hideHeader = false\n}) => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const sidebarWidth = useSidebarWidth(sidebarOpen);\n  const [submitting, setSubmitting] = useState(false);\n  const [showForm, setShowForm] = useState(false); // New state to control form visibility\n\n  // Project Objectives without workstreams\n  const [projectObjectives, setProjectObjectives] = useState([]);\n  const [allProjectObjectives, setAllProjectObjectives] = useState([]); // Store all fetched data for filtering\n  const [loadingPOs, setLoadingPOs] = useState(true);\n  const [poOffset, setPoOffset] = useState(0);\n  const [poHasMore, setPoHasMore] = useState(true);\n  const [loadingMorePOs, setLoadingMorePOs] = useState(false);\n  const infiniteScrollRef = useRef(null);\n  const [statusFilter, setStatusFilter] = useState(''); // Filter by status\n\n  // Workstreams array - each workstream has its own form data\n  const [workstreams, setWorkstreams] = useState([{\n    id: Date.now(),\n    projectWorkstreamName: '',\n    projectObjective: '',\n    projectObjectiveId: '',\n    refresh: false,\n    deliveryToolName: '',\n    clientWorkstreamIdentifier: '',\n    functionality: ''\n  }]);\n\n  // Track expanded/collapsed state for each workstream\n  const [expandedWorkstreams, setExpandedWorkstreams] = useState({\n    [Date.now()]: true\n  });\n\n  // Templates state\n  const [savedTemplates, setSavedTemplates] = useState([]);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [templateName, setTemplateName] = useState('');\n  const [showLoadTemplateModal, setShowLoadTemplateModal] = useState(false);\n  const [showImportPreview, setShowImportPreview] = useState(false);\n  const [importedWorkstreams, setImportedWorkstreams] = useState([]);\n  const [importing, setImporting] = useState(false);\n  const [resolvingObjectives, setResolvingObjectives] = useState(false);\n\n  // Project Objective search - per workstream\n  const [projectObjectiveSearchTerms, setProjectObjectiveSearchTerms] = useState({});\n  const [projectObjectiveSearchResults, setProjectObjectiveSearchResults] = useState({});\n  const [loadingProjectObjectiveSearch, setLoadingProjectObjectiveSearch] = useState({});\n  const [showProjectObjectiveDropdowns, setShowProjectObjectiveDropdowns] = useState({});\n  const projectObjectiveSearchTimeoutRefs = useRef({});\n  const recentSelectionsRef = useRef({}); // Track recent selections to prevent search loop\n\n  // Fetch project objectives without workstreams\n  const fetchProjectObjectives = useCallback(async (offset = 0, append = false) => {\n    try {\n      if (offset === 0) {\n        setLoadingPOs(true);\n      } else {\n        setLoadingMorePOs(true);\n      }\n      const response = await apiClient.get('/workstream/project-objectives-without-workstreams', {\n        params: {\n          limit: 1000,\n          offset\n        },\n        timeout: 120000 // 2 minutes to match backend timeout\n      });\n      if (response.data.success) {\n        const newPOs = response.data.projectObjectives;\n        if (append) {\n          setAllProjectObjectives(prev => [...prev, ...newPOs]);\n        } else {\n          setAllProjectObjectives(newPOs);\n          setPoOffset(0); // Reset offset when starting fresh\n        }\n\n        // Update offset and hasMore\n        const newOffset = append ? poOffset + newPOs.length : newPOs.length;\n        setPoOffset(newOffset);\n\n        // If we got exactly 1000 records, assume there might be more\n        // Also check the hasMore flag from backend\n        const hasMoreRecords = response.data.hasMore || newPOs.length === 1000;\n        setPoHasMore(hasMoreRecords);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to fetch project objectives');\n    } finally {\n      setLoadingPOs(false);\n      setLoadingMorePOs(false);\n    }\n  }, []);\n\n  // Load saved templates from localStorage\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem('workstreamTemplates');\n      if (saved) {\n        setSavedTemplates(JSON.parse(saved));\n      }\n    } catch (error) {\n      console.error('Error loading templates:', error);\n    }\n  }, []);\n\n  // Initial load\n  useEffect(() => {\n    if (!showForm) {\n      fetchProjectObjectives(0, false);\n    }\n  }, [showForm, fetchProjectObjectives]);\n\n  // Infinite scroll for project objectives\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && poHasMore && !loadingMorePOs && !showForm) {\n        fetchProjectObjectives(poOffset, true);\n      }\n    }, {\n      threshold: 0.1\n    });\n    if (infiniteScrollRef.current) {\n      observer.observe(infiniteScrollRef.current);\n    }\n    return () => {\n      if (infiniteScrollRef.current) {\n        observer.unobserve(infiniteScrollRef.current);\n      }\n    };\n  }, [poHasMore, loadingMorePOs, poOffset, showForm, fetchProjectObjectives]);\n\n  // Filter project objectives by status\n  useEffect(() => {\n    if (statusFilter === '') {\n      setProjectObjectives(allProjectObjectives);\n    } else {\n      setProjectObjectives(allProjectObjectives.filter(po => po.status === statusFilter));\n    }\n  }, [statusFilter, allProjectObjectives]);\n\n  // Get unique status values for filter dropdown (exclude '--' and empty values)\n  const uniqueStatuses = Array.from(new Set(allProjectObjectives.map(po => po.status).filter(s => s && s !== '--'))).sort();\n\n  // Delivery Tool Name picklist (excluding QF as per original requirement)\n  const deliveryToolNameOptions = ['--None--', 'A9', 'ADAP', 'Ampersand', 'Appen Collect', 'AppenLex', 'Baseline', 'EWOQ', 'Exotel', 'Other', 'Polyglot', 'SRT', 'TryRating', 'UHRS', 'Test', 'Test Tool'];\n\n  // Functionality picklist values\n  const functionalityOptions = ['--None--', 'System Access', 'System Access & Productivity', 'Productivity'];\n\n  // Close search results when clicking outside\n  useEffect(() => {\n    const handleClickOutside = event => {\n      Object.keys(showProjectObjectiveDropdowns).forEach(workstreamId => {\n        if (showProjectObjectiveDropdowns[workstreamId] && !event.target.closest(`.project-objective-search-container-${workstreamId}`)) {\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n        }\n      });\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showProjectObjectiveDropdowns]);\n\n  // Search Project Objectives when search term changes (per workstream)\n  useEffect(() => {\n    Object.keys(projectObjectiveSearchTerms).forEach(workstreamId => {\n      const searchTerm = projectObjectiveSearchTerms[workstreamId];\n      const workstream = workstreams.find(w => w.id === workstreamId);\n\n      // Clear any existing timeout\n      if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n        clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n        delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n      }\n\n      // IMPORTANT: Don't search if an objective is already selected\n      // This prevents the search loop when user selects an objective\n      if (workstream && workstream.projectObjectiveId) {\n        setProjectObjectiveSearchResults(prev => ({\n          ...prev,\n          [workstreamId]: []\n        }));\n        setShowProjectObjectiveDropdowns(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        setLoadingProjectObjectiveSearch(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        return;\n      }\n\n      // Don't search if search term is empty\n      if (!searchTerm || searchTerm.trim() === '') {\n        setProjectObjectiveSearchResults(prev => ({\n          ...prev,\n          [workstreamId]: []\n        }));\n        setShowProjectObjectiveDropdowns(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        setLoadingProjectObjectiveSearch(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        return;\n      }\n\n      // Check if this is a recent selection (within last 2 seconds)\n      const recentSelection = recentSelectionsRef.current[workstreamId];\n      if (recentSelection) {\n        const timeSinceSelection = Date.now() - recentSelection.timestamp;\n        if (timeSinceSelection < 2000) {\n          // This is a recent selection, don't search\n          setProjectObjectiveSearchResults(prev => ({\n            ...prev,\n            [workstreamId]: []\n          }));\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          setLoadingProjectObjectiveSearch(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          return;\n        }\n      }\n\n      // Only search if user is actively typing (not just matching selected value)\n      projectObjectiveSearchTimeoutRefs.current[workstreamId] = setTimeout(async () => {\n        // Get fresh search term and workstream\n        const currentSearchTerm = projectObjectiveSearchTerms[workstreamId];\n        if (!currentSearchTerm || currentSearchTerm.trim() === '') {\n          return;\n        }\n\n        // CRITICAL: Re-check if objective was selected during timeout - if so, abort search\n        const currentWorkstream = workstreams.find(w => w.id === workstreamId);\n        if (currentWorkstream && currentWorkstream.projectObjectiveId) {\n          // An objective was selected, don't search\n          setProjectObjectiveSearchResults(prev => ({\n            ...prev,\n            [workstreamId]: []\n          }));\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          setLoadingProjectObjectiveSearch(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          return;\n        }\n\n        // Check again if this is a recent selection\n        const currentRecentSelection = recentSelectionsRef.current[workstreamId];\n        if (currentRecentSelection) {\n          const timeSinceSelection = Date.now() - currentRecentSelection.timestamp;\n          if (timeSinceSelection < 2000) {\n            // This is a recent selection, don't search\n            setProjectObjectiveSearchResults(prev => ({\n              ...prev,\n              [workstreamId]: []\n            }));\n            setShowProjectObjectiveDropdowns(prev => ({\n              ...prev,\n              [workstreamId]: false\n            }));\n            setLoadingProjectObjectiveSearch(prev => ({\n              ...prev,\n              [workstreamId]: false\n            }));\n            return;\n          }\n        }\n        setLoadingProjectObjectiveSearch(prev => ({\n          ...prev,\n          [workstreamId]: true\n        }));\n        try {\n          const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(currentSearchTerm)}`);\n          if (response.data.success) {\n            // CRITICAL: Final check before showing results - make sure objective wasn't selected during API call\n            const finalWorkstream = workstreams.find(w => w.id === workstreamId);\n            if (finalWorkstream && finalWorkstream.projectObjectiveId) {\n              // An objective was selected during the API call, don't show results\n              setProjectObjectiveSearchResults(prev => ({\n                ...prev,\n                [workstreamId]: []\n              }));\n              setShowProjectObjectiveDropdowns(prev => ({\n                ...prev,\n                [workstreamId]: false\n              }));\n              setLoadingProjectObjectiveSearch(prev => ({\n                ...prev,\n                [workstreamId]: false\n              }));\n              return;\n            }\n\n            // Check for recent selection\n            const finalRecentSelection = recentSelectionsRef.current[workstreamId];\n            if (finalRecentSelection) {\n              const timeSinceSelection = Date.now() - finalRecentSelection.timestamp;\n              if (timeSinceSelection < 2000) {\n                // Objective was just selected, don't show results\n                setProjectObjectiveSearchResults(prev => ({\n                  ...prev,\n                  [workstreamId]: []\n                }));\n                setShowProjectObjectiveDropdowns(prev => ({\n                  ...prev,\n                  [workstreamId]: false\n                }));\n                setLoadingProjectObjectiveSearch(prev => ({\n                  ...prev,\n                  [workstreamId]: false\n                }));\n                return;\n              }\n            }\n\n            // All checks passed, show results\n            setProjectObjectiveSearchResults(prev => ({\n              ...prev,\n              [workstreamId]: response.data.projectObjectives || []\n            }));\n            setShowProjectObjectiveDropdowns(prev => ({\n              ...prev,\n              [workstreamId]: true\n            }));\n          }\n        } catch (error) {\n          setProjectObjectiveSearchResults(prev => ({\n            ...prev,\n            [workstreamId]: []\n          }));\n        } finally {\n          setLoadingProjectObjectiveSearch(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n        }\n      }, 300);\n    });\n    return () => {\n      Object.keys(projectObjectiveSearchTimeoutRefs.current).forEach(workstreamId => {\n        if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n          clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n          delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n        }\n      });\n    };\n  }, [projectObjectiveSearchTerms, workstreams]);\n  const handleProjectObjectiveSelect = (workstreamId, objective) => {\n    const selectedName = objective.contributorFacingProjectName || objective.name;\n\n    // Clear any pending search timeout immediately\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n\n    // Mark this as a recent selection to prevent search loop\n    recentSelectionsRef.current[workstreamId] = {\n      name: selectedName,\n      timestamp: Date.now()\n    };\n\n    // Update workstream with selected objective\n    setWorkstreams(prev => prev.map(ws => ws.id === workstreamId ? {\n      ...ws,\n      projectObjective: selectedName,\n      projectObjectiveId: objective.id\n    } : ws));\n\n    // Clear search term instead of setting it to selected name - this prevents re-triggering search\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: ''\n    }));\n\n    // Immediately close dropdown and clear results\n    setShowProjectObjectiveDropdowns(prev => ({\n      ...prev,\n      [workstreamId]: false\n    }));\n    setProjectObjectiveSearchResults(prev => ({\n      ...prev,\n      [workstreamId]: []\n    }));\n    setLoadingProjectObjectiveSearch(prev => ({\n      ...prev,\n      [workstreamId]: false\n    }));\n\n    // Clear the recent selection flag after a delay\n    setTimeout(() => {\n      if (recentSelectionsRef.current[workstreamId]) {\n        delete recentSelectionsRef.current[workstreamId];\n      }\n    }, 2000);\n  };\n  const handleClearProjectObjective = workstreamId => {\n    setWorkstreams(prev => prev.map(ws => ws.id === workstreamId ? {\n      ...ws,\n      projectObjective: '',\n      projectObjectiveId: ''\n    } : ws));\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: ''\n    }));\n    setProjectObjectiveSearchResults(prev => ({\n      ...prev,\n      [workstreamId]: []\n    }));\n    setShowProjectObjectiveDropdowns(prev => ({\n      ...prev,\n      [workstreamId]: false\n    }));\n  };\n  const handleInputChange = (workstreamId, field, value) => {\n    setWorkstreams(prev => prev.map(ws => ws.id === workstreamId ? {\n      ...ws,\n      [field]: value\n    } : ws));\n  };\n  const handleSearchTermChange = (workstreamId, value) => {\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: value\n    }));\n    if (value === '') {\n      handleClearProjectObjective(workstreamId);\n    }\n  };\n  const toggleWorkstreamExpanded = workstreamId => {\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [workstreamId]: !prev[workstreamId]\n    }));\n  };\n  const addWorkstream = () => {\n    const newId = Date.now();\n    setWorkstreams(prev => [...prev, {\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [newId]: true\n    }));\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [newId]: ''\n    }));\n  };\n  const removeWorkstream = workstreamId => {\n    if (workstreams.length === 1) {\n      toast.error('At least one workstream is required');\n      return;\n    }\n    setWorkstreams(prev => prev.filter(ws => ws.id !== workstreamId));\n    setExpandedWorkstreams(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchTerms(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchResults(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setShowProjectObjectiveDropdowns(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n  };\n  const validateWorkstream = workstream => {\n    // Project Objective is required (either ID or name)\n    if (!workstream.projectObjectiveId && (!workstream.projectObjective || workstream.projectObjective.trim() === '')) {\n      return 'Project Objective is required';\n    }\n    if (!workstream.deliveryToolName || workstream.deliveryToolName === '--None--' || workstream.deliveryToolName.trim() === '') {\n      return 'Delivery Tool Name is required';\n    }\n    if (!workstream.clientWorkstreamIdentifier || workstream.clientWorkstreamIdentifier.trim() === '') {\n      return 'Client Workstream Identifier is required';\n    }\n    if (!workstream.functionality || workstream.functionality === '--None--' || workstream.functionality.trim() === '') {\n      return 'Functionality is required';\n    }\n    return null;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Validate all workstreams\n    const validationErrors = [];\n    workstreams.forEach((workstream, index) => {\n      const error = validateWorkstream(workstream);\n      if (error) {\n        validationErrors.push(`Workstream ${index + 1}: ${error}`);\n      }\n    });\n    if (validationErrors.length > 0) {\n      toast.error(validationErrors[0]);\n      return;\n    }\n    setSubmitting(true);\n    try {\n      // Create all workstreams - each under its respective project objective\n      const createPromises = workstreams.map(workstream => apiClient.post('/workstream/create', {\n        projectWorkstreamName: workstream.projectWorkstreamName,\n        projectObjective: workstream.projectObjective,\n        projectObjectiveId: workstream.projectObjectiveId,\n        refresh: workstream.refresh,\n        deliveryToolName: workstream.deliveryToolName,\n        clientWorkstreamIdentifier: workstream.clientWorkstreamIdentifier,\n        functionality: workstream.functionality\n      }));\n      const results = await Promise.all(createPromises);\n      const successCount = results.filter(r => r.data.success).length;\n      if (successCount === workstreams.length) {\n        toast.success(`Successfully created ${successCount} workstream(s)`);\n        // Reset all workstreams and hide form\n        const newId = Date.now();\n        setWorkstreams([{\n          id: newId,\n          projectWorkstreamName: '',\n          projectObjective: '',\n          projectObjectiveId: '',\n          refresh: false,\n          deliveryToolName: '',\n          clientWorkstreamIdentifier: '',\n          functionality: ''\n        }]);\n        setExpandedWorkstreams({\n          [newId]: true\n        });\n        setProjectObjectiveSearchTerms({\n          [newId]: ''\n        });\n        setProjectObjectiveSearchResults({});\n        setShowProjectObjectiveDropdowns({});\n        setShowForm(false);\n        // Reload project objectives list\n        fetchProjectObjectives(0, false);\n      } else {\n        toast.error(`Created ${successCount} of ${workstreams.length} workstream(s)`);\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message || 'Failed to create workstream(s)';\n      toast.error(errorMessage);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const handleCancel = () => {\n    // Reset all workstreams and hide form\n    const newId = Date.now();\n    setWorkstreams([{\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams({\n      [newId]: true\n    });\n    setProjectObjectiveSearchTerms({\n      [newId]: ''\n    });\n    setProjectObjectiveSearchResults({});\n    setShowProjectObjectiveDropdowns({});\n    setShowForm(false);\n    // Reload project objectives list\n    fetchProjectObjectives(0, false);\n  };\n  const handleAddWorkstream = () => {\n    setShowForm(true);\n  };\n\n  // Save current workstreams as template\n  const handleSaveTemplate = () => {\n    if (workstreams.length === 0) {\n      toast.error('No workstreams to save as template');\n      return;\n    }\n    setShowTemplateModal(true);\n  };\n  const confirmSaveTemplate = () => {\n    if (!templateName.trim()) {\n      toast.error('Please enter a template name');\n      return;\n    }\n    try {\n      const template = {\n        id: Date.now(),\n        name: templateName.trim(),\n        createdAt: new Date().toISOString(),\n        workstreams: workstreams.map(ws => ({\n          projectWorkstreamName: ws.projectWorkstreamName,\n          projectObjective: ws.projectObjective,\n          projectObjectiveId: ws.projectObjectiveId,\n          refresh: ws.refresh,\n          deliveryToolName: ws.deliveryToolName,\n          clientWorkstreamIdentifier: ws.clientWorkstreamIdentifier,\n          functionality: ws.functionality\n        }))\n      };\n      const updatedTemplates = [...savedTemplates, template];\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template saved successfully');\n      setShowTemplateModal(false);\n      setTemplateName('');\n    } catch (error) {\n      console.error('Error saving template:', error);\n      toast.error('Failed to save template');\n    }\n  };\n\n  // Load template\n  const handleLoadTemplate = template => {\n    try {\n      const newWorkstreams = template.workstreams.map((ws, index) => ({\n        id: Date.now() + index,\n        ...ws\n      }));\n      setWorkstreams(newWorkstreams);\n      setExpandedWorkstreams(newWorkstreams.reduce((acc, ws) => {\n        acc[ws.id] = true;\n        return acc;\n      }, {}));\n      setShowLoadTemplateModal(false);\n      toast.success(`Template \"${template.name}\" loaded successfully`);\n    } catch (error) {\n      console.error('Error loading template:', error);\n      toast.error('Failed to load template');\n    }\n  };\n\n  // Delete template\n  const handleDeleteTemplate = templateId => {\n    try {\n      const updatedTemplates = savedTemplates.filter(t => t.id !== templateId);\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template deleted successfully');\n    } catch (error) {\n      console.error('Error deleting template:', error);\n      toast.error('Failed to delete template');\n    }\n  };\n\n  // Clone workstream\n  const handleCloneWorkstream = workstreamId => {\n    const workstreamToClone = workstreams.find(ws => ws.id === workstreamId);\n    if (!workstreamToClone) return;\n    const clonedWorkstream = {\n      ...workstreamToClone,\n      id: Date.now(),\n      projectWorkstreamName: `${workstreamToClone.projectWorkstreamName} (Copy)`,\n      projectObjective: '',\n      projectObjectiveId: ''\n    };\n    setWorkstreams(prev => [...prev, clonedWorkstream]);\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [clonedWorkstream.id]: true\n    }));\n    toast.success('Workstream cloned successfully');\n  };\n\n  // Download template for workstream creation\n  const handleDownloadTemplate = () => {\n    try {\n      const templateData = [{\n        'Project Workstream Name': 'Example Workstream 1',\n        'Project Objective Name': 'Example Project Objective',\n        'Project Objective ID': '',\n        'Delivery Tool Name': 'Tool1',\n        'Client Workstream Identifier': 'WS-001',\n        'Functionality': 'Functionality1',\n        'Refresh': false\n      }, {\n        'Project Workstream Name': 'Example Workstream 2',\n        'Project Objective Name': 'Example Project Objective 2',\n        'Project Objective ID': '',\n        'Delivery Tool Name': 'Tool2',\n        'Client Workstream Identifier': 'WS-002',\n        'Functionality': 'Functionality2',\n        'Refresh': false\n      }];\n      const ws = XLSX.utils.json_to_sheet(templateData);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'Workstream Template');\n      XLSX.writeFile(wb, `Workstream_Creation_Template_${new Date().toISOString().split('T')[0]}.xlsx`);\n      toast.success('Template downloaded successfully');\n    } catch (error) {\n      console.error('Error downloading template:', error);\n      toast.error('Failed to download template');\n    }\n  };\n\n  // Handle template file import\n  const handleImportTemplate = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = async e => {\n      try {\n        const data = new Uint8Array(e.target.result);\n        const workbook = XLSX.read(data, {\n          type: 'array'\n        });\n        const firstSheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[firstSheetName];\n        const jsonData = XLSX.utils.sheet_to_json(worksheet);\n        if (jsonData.length === 0) {\n          toast.error('Template file is empty');\n          return;\n        }\n\n        // Map imported data to workstream format\n        let imported = jsonData.map((row, index) => ({\n          id: Date.now() + index,\n          projectWorkstreamName: row['Project Workstream Name'] || row['projectWorkstreamName'] || '',\n          projectObjective: row['Project Objective Name'] || row['projectObjective'] || row['Project Objective'] || '',\n          projectObjectiveId: row['Project Objective ID'] || row['projectObjectiveId'] || '',\n          deliveryToolName: row['Delivery Tool Name'] || row['deliveryToolName'] || '',\n          clientWorkstreamIdentifier: row['Client Workstream Identifier'] || row['clientWorkstreamIdentifier'] || '',\n          functionality: row['Functionality'] || row['functionality'] || '',\n          refresh: row['Refresh'] || row['refresh'] || false\n        }));\n\n        // Resolve Project Objective names to IDs if ID is not provided\n        const unresolvedObjectives = imported.filter(ws => ws.projectObjective && !ws.projectObjectiveId);\n        if (unresolvedObjectives.length > 0) {\n          setResolvingObjectives(true);\n          toast('Resolving project objective names to IDs...', {\n            icon: '⏳',\n            duration: 2000\n          });\n\n          // Resolve each project objective name to ID\n          for (const ws of unresolvedObjectives) {\n            try {\n              const searchTerm = ws.projectObjective.trim();\n              if (searchTerm) {\n                const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(searchTerm)}`);\n                if (response.data.success && response.data.projectObjectives && response.data.projectObjectives.length > 0) {\n                  // Try to find exact match first\n                  let matched = response.data.projectObjectives.find(po => po.name === searchTerm || po.contributorFacingProjectName === searchTerm || po.name && po.name.toLowerCase() === searchTerm.toLowerCase() || po.contributorFacingProjectName && po.contributorFacingProjectName.toLowerCase() === searchTerm.toLowerCase());\n\n                  // If no exact match, use the first result\n                  if (!matched) {\n                    matched = response.data.projectObjectives[0];\n                  }\n                  if (matched) {\n                    ws.projectObjectiveId = matched.id;\n                    ws.projectObjective = matched.contributorFacingProjectName || matched.name || ws.projectObjective;\n                  }\n                }\n              }\n            } catch (error) {\n              console.error(`Error resolving project objective for \"${ws.projectObjective}\":`, error);\n              // Continue with other workstreams even if one fails\n            }\n          }\n          setResolvingObjectives(false);\n        }\n        setImportedWorkstreams(imported);\n        setShowImportPreview(true);\n        const resolvedCount = unresolvedObjectives.length > 0 ? unresolvedObjectives.filter(ws => ws.projectObjectiveId).length : 0;\n        if (unresolvedObjectives.length > 0) {\n          toast.success(`Imported ${imported.length} workstream(s). Resolved ${resolvedCount} of ${unresolvedObjectives.length} project objective(s).`);\n        } else {\n          toast.success(`Imported ${imported.length} workstream(s) from template`);\n        }\n      } catch (error) {\n        console.error('Error importing template:', error);\n        toast.error('Failed to import template. Please check the file format.');\n      }\n    };\n    reader.readAsArrayBuffer(file);\n    // Reset file input\n    event.target.value = '';\n  };\n\n  // Create workstreams from imported template\n  const handleCreateFromImport = async () => {\n    if (importedWorkstreams.length === 0) {\n      toast.error('No workstreams to create');\n      return;\n    }\n\n    // Resolve any remaining unresolved project objectives\n    const unresolved = importedWorkstreams.filter(ws => ws.projectObjective && !ws.projectObjectiveId);\n    if (unresolved.length > 0) {\n      toast('Resolving remaining project objectives...', {\n        icon: '⏳'\n      });\n      for (const ws of unresolved) {\n        try {\n          const searchTerm = ws.projectObjective.trim();\n          if (searchTerm) {\n            const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(searchTerm)}`);\n            if (response.data.success && response.data.projectObjectives && response.data.projectObjectives.length > 0) {\n              // Try to find exact match first\n              let matched = response.data.projectObjectives.find(po => po.name === searchTerm || po.contributorFacingProjectName === searchTerm || po.name && po.name.toLowerCase() === searchTerm.toLowerCase() || po.contributorFacingProjectName && po.contributorFacingProjectName.toLowerCase() === searchTerm.toLowerCase());\n\n              // If no exact match, use the first result\n              if (!matched) {\n                matched = response.data.projectObjectives[0];\n              }\n              if (matched) {\n                ws.projectObjectiveId = matched.id;\n                ws.projectObjective = matched.contributorFacingProjectName || matched.name || ws.projectObjective;\n              }\n            }\n          }\n        } catch (error) {\n          console.error(`Error resolving project objective for \"${ws.projectObjective}\":`, error);\n        }\n      }\n\n      // Update the imported workstreams state with resolved IDs\n      setImportedWorkstreams([...importedWorkstreams]);\n    }\n\n    // Validate all imported workstreams\n    const validationErrors = [];\n    importedWorkstreams.forEach((workstream, index) => {\n      const error = validateWorkstream(workstream);\n      if (error) {\n        validationErrors.push(`Row ${index + 1}: ${error}`);\n      }\n    });\n    if (validationErrors.length > 0) {\n      toast.error(validationErrors[0]);\n      return;\n    }\n    setImporting(true);\n    try {\n      // Create all workstreams\n      const createPromises = importedWorkstreams.map(workstream => apiClient.post('/workstream/create', {\n        projectWorkstreamName: workstream.projectWorkstreamName,\n        projectObjective: workstream.projectObjective,\n        projectObjectiveId: workstream.projectObjectiveId,\n        refresh: workstream.refresh,\n        deliveryToolName: workstream.deliveryToolName,\n        clientWorkstreamIdentifier: workstream.clientWorkstreamIdentifier,\n        functionality: workstream.functionality\n      }));\n      const results = await Promise.all(createPromises);\n      const successCount = results.filter(r => r.data.success).length;\n      if (successCount === importedWorkstreams.length) {\n        toast.success(`Successfully created ${successCount} workstream(s) from template`);\n        setShowImportPreview(false);\n        setImportedWorkstreams([]);\n        // Reload project objectives list\n        fetchProjectObjectives(0, false);\n      } else {\n        toast.error(`Created ${successCount} of ${importedWorkstreams.length} workstream(s)`);\n      }\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      const errorMessage = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || error.message || 'Failed to create workstream(s)';\n      toast.error(errorMessage);\n    } finally {\n      setImporting(false);\n    }\n  };\n  const renderWorkstreamForm = (workstream, index) => {\n    const isExpanded = expandedWorkstreams[workstream.id] !== false;\n    const searchTerm = projectObjectiveSearchTerms[workstream.id] || '';\n    const searchResults = projectObjectiveSearchResults[workstream.id] || [];\n    const loadingSearch = loadingProjectObjectiveSearch[workstream.id] || false;\n    const showDropdown = showProjectObjectiveDropdowns[workstream.id] || false;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"workstream-form-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create-workstream-header-section\",\n        onClick: () => toggleWorkstreamExpanded(workstream.id),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"create-workstream-toggle\",\n          onClick: e => {\n            e.stopPropagation();\n            toggleWorkstreamExpanded(workstream.id);\n          },\n          children: isExpanded ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 903,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 903,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 895,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"create-workstream-title-text\",\n          children: [\"WorkStream \", index + 1, workstream.projectObjective ? ` - ${workstream.projectObjective}` : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 905,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '8px',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"create-workstream-remove\",\n            onClick: e => {\n              e.stopPropagation();\n              handleCloneWorkstream(workstream.id);\n            },\n            title: \"Clone workstream\",\n            style: {\n              background: 'transparent',\n              border: 'none',\n              cursor: 'pointer',\n              padding: '4px',\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Copy, {\n              size: 16,\n              style: {\n                color: '#0176d3'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 919,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 909,\n            columnNumber: 13\n          }, this), workstreams.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"create-workstream-remove\",\n            onClick: e => {\n              e.stopPropagation();\n              removeWorkstream(workstream.id);\n            },\n            title: \"Remove workstream\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 931,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 922,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 908,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 891,\n        columnNumber: 9\n      }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workstream-form-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section-card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-grid-two-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Project Workstream Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 943,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: workstream.projectWorkstreamName,\n                  onChange: e => handleInputChange(workstream.id, 'projectWorkstreamName', e.target.value),\n                  className: \"form-input-compact\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 944,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 942,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Project Objective \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 954,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 953,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `project-objective-search-container project-objective-search-container-${workstream.id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"search-input-wrapper\",\n                    children: [/*#__PURE__*/_jsxDEV(Search, {\n                      size: 14,\n                      className: \"search-icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 958,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      placeholder: \"Search for project objective...\",\n                      value: workstream.projectObjectiveId ? workstream.projectObjective : searchTerm,\n                      readOnly: !!workstream.projectObjectiveId,\n                      onChange: e => {\n                        // Only allow changes if no objective is selected\n                        if (!workstream.projectObjectiveId) {\n                          handleSearchTermChange(workstream.id, e.target.value);\n                        }\n                      },\n                      onFocus: () => {\n                        // If there's a selection, allow clearing it\n                        if (workstream.projectObjectiveId) {\n                          // User can click X button to clear\n                        } else if (searchResults.length > 0) {\n                          setShowProjectObjectiveDropdowns(prev => ({\n                            ...prev,\n                            [workstream.id]: true\n                          }));\n                        }\n                      },\n                      onClick: () => {\n                        // If there's a selection and user clicks, don't clear automatically\n                        // They need to use the X button\n                        if (!workstream.projectObjectiveId && searchResults.length > 0) {\n                          setShowProjectObjectiveDropdowns(prev => ({\n                            ...prev,\n                            [workstream.id]: true\n                          }));\n                        }\n                      },\n                      className: \"form-input-compact search-input\",\n                      style: workstream.projectObjectiveId ? {\n                        cursor: 'default'\n                      } : {}\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 959,\n                      columnNumber: 25\n                    }, this), workstream.projectObjectiveId && /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      onClick: () => handleClearProjectObjective(workstream.id),\n                      className: \"clear-button\",\n                      title: \"Clear selection\",\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        size: 14\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 995,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 989,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 957,\n                    columnNumber: 23\n                  }, this), loadingSearch && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"searching-indicator\",\n                    children: \"Searching...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1000,\n                    columnNumber: 25\n                  }, this), showDropdown && searchResults.length > 0 && !workstream.projectObjectiveId && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"search-results-dropdown\",\n                    children: searchResults.map(objective => /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => handleProjectObjectiveSelect(workstream.id, objective),\n                      className: `search-result-item ${workstream.projectObjectiveId === objective.id ? 'selected' : ''}`,\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"search-result-name\",\n                        children: objective.contributorFacingProjectName || objective.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1010,\n                        columnNumber: 31\n                      }, this), objective.projectName && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"search-result-subtitle\",\n                        children: [\"Project: \", objective.projectName]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1014,\n                        columnNumber: 33\n                      }, this)]\n                    }, objective.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1005,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1003,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 956,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 952,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                style: {\n                  marginTop: '6px'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"checkbox-label\",\n                  style: {\n                    marginBottom: 0\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: workstream.refresh,\n                    onChange: e => handleInputChange(workstream.id, 'refresh', e.target.checked),\n                    className: \"checkbox-input\",\n                    style: {\n                      marginRight: '8px',\n                      marginTop: '0',\n                      verticalAlign: 'middle'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1027,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"checkbox-text\",\n                    style: {\n                      verticalAlign: 'middle'\n                    },\n                    children: \"Refresh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1034,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Info, {\n                    size: 12,\n                    className: \"info-icon\",\n                    style: {\n                      marginLeft: '6px',\n                      verticalAlign: 'middle'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1035,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1026,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1025,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 941,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Delivery Tool Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1043,\n                    columnNumber: 42\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1042,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: workstream.deliveryToolName,\n                  onChange: e => handleInputChange(workstream.id, 'deliveryToolName', e.target.value),\n                  className: \"form-input-compact\",\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"--None--\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1051,\n                    columnNumber: 23\n                  }, this), deliveryToolNameOptions.filter(opt => opt !== '--None--').map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option,\n                    children: option\n                  }, option, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1053,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1045,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1041,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Client Workstream Identifier \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1060,\n                    columnNumber: 52\n                  }, this), /*#__PURE__*/_jsxDEV(Info, {\n                    size: 12,\n                    className: \"info-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1061,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1059,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: workstream.clientWorkstreamIdentifier,\n                  onChange: e => handleInputChange(workstream.id, 'clientWorkstreamIdentifier', e.target.value),\n                  className: \"form-input-compact\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1063,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1058,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Functionality \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1074,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Info, {\n                    size: 12,\n                    className: \"info-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1075,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1073,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: workstream.functionality,\n                  onChange: e => handleInputChange(workstream.id, 'functionality', e.target.value),\n                  className: \"form-input-compact\",\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"--None--\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1083,\n                    columnNumber: 23\n                  }, this), functionalityOptions.filter(opt => opt !== '--None--').map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option,\n                    children: option\n                  }, option, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1085,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1077,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1072,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1040,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 940,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 939,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 938,\n        columnNumber: 11\n      }, this)]\n    }, workstream.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 890,\n      columnNumber: 7\n    }, this);\n  };\n  const content = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-workstream-content\",\n    children: [!showForm ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '12px',\n          marginTop: '8px',\n          paddingTop: '8px',\n          flexWrap: 'wrap',\n          gap: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: '0 0 8px 0',\n            fontSize: '18px',\n            fontWeight: 600,\n            color: '#002329'\n          },\n          children: \"Project Objectives Without Workstreams\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '8px',\n            alignItems: 'center',\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: handleDownloadTemplate,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '6px'\n            },\n            title: \"Download template for workstream creation\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1115,\n              columnNumber: 17\n            }, this), \"Download Template\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"btn-secondary\",\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '6px',\n              cursor: 'pointer',\n              margin: 0\n            },\n            title: \"Import template file\",\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1123,\n              columnNumber: 17\n            }, this), \"Import Template\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \".xlsx,.xls\",\n              onChange: handleImportTemplate,\n              style: {\n                display: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1125,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1118,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-primary\",\n            onClick: handleAddWorkstream,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1138,\n              columnNumber: 17\n            }, this), \"Add Workstream\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1132,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1107,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '12px',\n          alignItems: 'center',\n          marginBottom: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontSize: '14px',\n            fontWeight: 500,\n            color: '#002329'\n          },\n          children: \"Filter by Status:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: statusFilter,\n          onChange: e => setStatusFilter(e.target.value),\n          style: {\n            fontSize: '14px',\n            padding: '8px 12px',\n            border: '1px solid var(--border-color)',\n            borderRadius: 'var(--radius-md)',\n            background: 'var(--surface)',\n            color: 'var(--text-primary)',\n            minWidth: '180px',\n            cursor: 'pointer',\n            fontFamily: 'Poppins'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1164,\n            columnNumber: 15\n          }, this), uniqueStatuses.map(status => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: status,\n            children: status\n          }, status, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1166,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1149,\n          columnNumber: 13\n        }, this), statusFilter && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setStatusFilter(''),\n          style: {\n            fontSize: '13px',\n            padding: '6px 12px',\n            background: 'transparent',\n            border: '1px solid var(--border-color)',\n            borderRadius: 'var(--radius-md)',\n            color: 'var(--text-secondary)',\n            cursor: 'pointer',\n            fontFamily: 'Poppins'\n          },\n          children: \"Clear Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1170,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1145,\n        columnNumber: 11\n      }, this), loadingPOs && allProjectObjectives.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '40px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Loader, {\n          className: \"spinning\",\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1192,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading project objectives...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1193,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1191,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"project-objectives-table-container\",\n        style: {\n          maxHeight: '70vh',\n          overflowY: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"project-objectives-table\",\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Project Objective\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1200,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Associated Project\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1201,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Project Objective Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1202,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1199,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1198,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: projectObjectives.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"3\",\n                className: \"no-data\",\n                style: {\n                  textAlign: 'center',\n                  padding: '40px'\n                },\n                children: \"No project objectives without workstreams found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1208,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1207,\n              columnNumber: 21\n            }, this) : projectObjectives.map((po, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: po.name || '--'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1215,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: po.projectName || '--'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1216,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: po.status || '--'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1217,\n                columnNumber: 25\n              }, this)]\n            }, po.id || index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1214,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1205,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1197,\n          columnNumber: 15\n        }, this), (poHasMore || allProjectObjectives.length >= 1000) && !loadingMorePOs && allProjectObjectives.length > 0 && !loadingPOs && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '20px',\n            borderTop: '1px solid var(--border-color)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: () => fetchProjectObjectives(poOffset, true),\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '8px',\n              padding: '10px 24px',\n              fontSize: '14px',\n              fontWeight: 600\n            },\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1240,\n              columnNumber: 21\n            }, this), \"Show More (\", allProjectObjectives.length, \" loaded\", poHasMore ? ', more available' : '', \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1227,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '8px',\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: \"Click to load next 1000 project objectives\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1243,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1226,\n          columnNumber: 17\n        }, this), loadingMorePOs && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '20px',\n            borderTop: '1px solid var(--border-color)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Loader, {\n            className: \"spinning\",\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1251,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: '8px'\n            },\n            children: \"Loading more project objectives...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1252,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1250,\n          columnNumber: 17\n        }, this), poHasMore && !loadingMorePOs && /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: infiniteScrollRef,\n          style: {\n            height: '20px',\n            width: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1258,\n          columnNumber: 17\n        }, this), allProjectObjectives.length > 0 && !poHasMore && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '16px',\n            borderTop: '1px solid var(--border-color)',\n            color: '#666',\n            fontSize: '13px'\n          },\n          children: statusFilter ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Showing \", projectObjectives.length, \" of \", allProjectObjectives.length, \" project objectives (filtered by status: \", statusFilter, \")\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"All \", allProjectObjectives.length, \" project objectives loaded\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1265,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1196,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"create-workstream-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: 0,\n            fontSize: '18px',\n            fontWeight: 600,\n            color: '#002329'\n          },\n          children: \"Create Workstream\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: () => setShowForm(false),\n          children: \"Back to List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1278,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '16px',\n          display: 'flex',\n          gap: '12px',\n          alignItems: 'center',\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-primary\",\n          onClick: addWorkstream,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1298,\n            columnNumber: 15\n          }, this), \"Add WorkStream\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: handleSaveTemplate,\n          disabled: workstreams.length === 0,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          title: \"Save current workstreams as template\",\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1309,\n            columnNumber: 15\n          }, this), \"Save Template\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1301,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: () => setShowLoadTemplateModal(true),\n          disabled: savedTemplates.length === 0,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          title: \"Load a saved template\",\n          children: [/*#__PURE__*/_jsxDEV(FolderOpen, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1320,\n            columnNumber: 15\n          }, this), \"Load Template\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1312,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1291,\n        columnNumber: 11\n      }, this), workstreams.map((workstream, index) => renderWorkstreamForm(workstream, index)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: handleCancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1328,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn-primary\",\n          disabled: submitting,\n          children: submitting ? 'Creating...' : `Create ${workstreams.length} WorkStream${workstreams.length > 1 ? 's' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1327,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1277,\n      columnNumber: 9\n    }, this), showTemplateModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'white',\n          padding: '24px',\n          borderRadius: '8px',\n          minWidth: '400px',\n          maxWidth: '500px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 16px 0',\n            fontSize: '18px',\n            fontWeight: 600\n          },\n          children: \"Save Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1367,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '16px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '8px',\n              fontSize: '14px',\n              fontWeight: 500\n            },\n            children: \"Template Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1369,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: templateName,\n            onChange: e => setTemplateName(e.target.value),\n            placeholder: \"Enter template name\",\n            style: {\n              width: '100%',\n              padding: '8px 12px',\n              border: '1px solid var(--border-color)',\n              borderRadius: '4px',\n              fontSize: '14px'\n            },\n            autoFocus: true,\n            onKeyPress: e => {\n              if (e.key === 'Enter') {\n                confirmSaveTemplate();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1372,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1368,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '12px',\n            justifyContent: 'flex-end'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: () => {\n              setShowTemplateModal(false);\n              setTemplateName('');\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1393,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-primary\",\n            onClick: confirmSaveTemplate,\n            disabled: !templateName.trim(),\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1403,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1392,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1360,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1348,\n      columnNumber: 9\n    }, this), showLoadTemplateModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'white',\n          padding: '24px',\n          borderRadius: '8px',\n          minWidth: '500px',\n          maxWidth: '600px',\n          maxHeight: '80vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 16px 0',\n            fontSize: '18px',\n            fontWeight: 600\n          },\n          children: \"Load Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1439,\n          columnNumber: 13\n        }, this), savedTemplates.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#666',\n            fontSize: '14px'\n          },\n          children: \"No saved templates found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1441,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '12px'\n          },\n          children: savedTemplates.map(template => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '12px',\n              border: '1px solid var(--border-color)',\n              borderRadius: '4px',\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 500,\n                  fontSize: '14px',\n                  marginBottom: '4px'\n                },\n                children: template.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1457,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#666'\n                },\n                children: [template.workstreams.length, \" workstream(s) \\u2022 Created \", new Date(template.createdAt).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1460,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1456,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-primary\",\n                onClick: () => handleLoadTemplate(template),\n                style: {\n                  fontSize: '12px',\n                  padding: '6px 12px'\n                },\n                children: \"Load\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1465,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-secondary\",\n                onClick: () => handleDeleteTemplate(template.id),\n                style: {\n                  fontSize: '12px',\n                  padding: '6px 12px',\n                  color: '#d32f2f'\n                },\n                title: \"Delete template\",\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1480,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1473,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1464,\n              columnNumber: 21\n            }, this)]\n          }, template.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1445,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1443,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            marginTop: '16px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: () => setShowLoadTemplateModal(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1488,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1487,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1430,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1418,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1099,\n    columnNumber: 5\n  }, this);\n\n  // Import Preview Modal (shared between both render paths)\n  const importPreviewModal = showImportPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      background: 'rgba(0, 0, 0, 0.5)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 9999\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'white',\n        padding: '24px',\n        borderRadius: '8px',\n        minWidth: '800px',\n        maxWidth: '90vw',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0,\n            fontSize: '18px',\n            fontWeight: 600\n          },\n          children: \"Import Preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1527,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setShowImportPreview(false);\n            setImportedWorkstreams([]);\n            setResolvingObjectives(false);\n          },\n          style: {\n            background: 'none',\n            border: 'none',\n            cursor: 'pointer',\n            padding: '4px',\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1543,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1528,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1526,\n        columnNumber: 13\n      }, this), resolvingObjectives && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px',\n          background: '#f0f9ff',\n          borderRadius: '4px',\n          marginBottom: '16px',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Loader, {\n          className: \"spinning\",\n          size: 16,\n          style: {\n            color: '#08979C'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1549,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '13px',\n            color: '#0369a1'\n          },\n          children: \"Resolving project objectives...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1550,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1548,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflow: 'auto',\n          marginBottom: '16px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: '100%',\n            borderCollapse: 'collapse',\n            fontSize: '13px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Project Workstream Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1558,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Project Objective\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1559,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Delivery Tool Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1560,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Client Workstream Identifier\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1561,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Functionality\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1562,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1557,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1556,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: importedWorkstreams.map((ws, index) => {\n              const error = validateWorkstream(ws);\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: {\n                  background: error ? '#fee' : 'white'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    padding: '8px',\n                    border: '1px solid #e5e7eb'\n                  },\n                  children: ws.projectWorkstreamName || '--'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1570,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    padding: '8px',\n                    border: '1px solid #e5e7eb'\n                  },\n                  children: ws.projectObjective || '--'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1571,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    padding: '8px',\n                    border: '1px solid #e5e7eb'\n                  },\n                  children: ws.deliveryToolName || '--'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1572,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    padding: '8px',\n                    border: '1px solid #e5e7eb'\n                  },\n                  children: ws.clientWorkstreamIdentifier || '--'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1573,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    padding: '8px',\n                    border: '1px solid #e5e7eb'\n                  },\n                  children: [ws.functionality || '--', error && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '11px',\n                      color: '#c33',\n                      marginTop: '4px'\n                    },\n                    children: error\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1576,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1574,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1569,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1565,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1555,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1554,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'flex-end',\n          gap: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setShowImportPreview(false);\n            setImportedWorkstreams([]);\n          },\n          className: \"btn-secondary\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1586,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCreateFromImport,\n          disabled: importing || importedWorkstreams.some(ws => validateWorkstream(ws)),\n          className: \"btn-primary\",\n          children: importing ? 'Creating...' : `Create ${importedWorkstreams.length} Workstream(s)`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1595,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1585,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1516,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1504,\n    columnNumber: 9\n  }, this);\n  if (hideHeader) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create-workstream-content-wrapper\",\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1610,\n        columnNumber: 9\n      }, this), importPreviewModal]\n    }, void 0, true);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-layout\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      isOpen: sidebarOpen,\n      toggleSidebar: () => setSidebarOpen(!sidebarOpen)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1618,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-workstream\",\n      style: {\n        marginLeft: `${sidebarWidth}px`,\n        width: `calc(100% - ${sidebarWidth}px)`,\n        transition: 'margin-left 0.2s ease, width 0.2s ease'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create-workstream-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-workstream-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"header-menu-toggle\",\n                onClick: () => setSidebarOpen(!sidebarOpen),\n                \"aria-label\": \"Toggle sidebar\",\n                children: /*#__PURE__*/_jsxDEV(Menu, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1630,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1625,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"page-title\",\n                  children: \"New Project Workstream\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1633,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"page-subtitle\",\n                  children: \"Create a new project workstream\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1634,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1632,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1624,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-user-profile\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-profile\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"user-avatar\",\n                  children: ((user === null || user === void 0 ? void 0 : user.email) || 'U').charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1639,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"user-name\",\n                  children: (user === null || user === void 0 ? void 0 : user.email) || 'User'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1642,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"logout-btn\",\n                  onClick: logout,\n                  title: \"Logout\",\n                  children: /*#__PURE__*/_jsxDEV(LogOut, {\n                    size: 18\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1644,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1643,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1638,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1637,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1623,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1622,\n          columnNumber: 11\n        }, this), content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1621,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1620,\n      columnNumber: 7\n    }, this), importPreviewModal]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1617,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateWorkStream, \"7dcu0MSm1eSWi0KPlLWVmbj8hwc=\", false, function () {\n  return [useAuth, useSidebarWidth];\n});\n_c = CreateWorkStream;\nexport default CreateWorkStream;\nvar _c;\n$RefreshReg$(_c, \"CreateWorkStream\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","Sidebar","useSidebarWidth","Menu","LogOut","Search","X","Info","Plus","ChevronDown","ChevronUp","Trash2","Loader","Save","Copy","FolderOpen","Download","Upload","FileText","apiClient","toast","XLSX","jsxDEV","_jsxDEV","Fragment","_Fragment","CreateWorkStream","hideHeader","_s","user","logout","sidebarOpen","setSidebarOpen","sidebarWidth","submitting","setSubmitting","showForm","setShowForm","projectObjectives","setProjectObjectives","allProjectObjectives","setAllProjectObjectives","loadingPOs","setLoadingPOs","poOffset","setPoOffset","poHasMore","setPoHasMore","loadingMorePOs","setLoadingMorePOs","infiniteScrollRef","statusFilter","setStatusFilter","workstreams","setWorkstreams","id","Date","now","projectWorkstreamName","projectObjective","projectObjectiveId","refresh","deliveryToolName","clientWorkstreamIdentifier","functionality","expandedWorkstreams","setExpandedWorkstreams","savedTemplates","setSavedTemplates","showTemplateModal","setShowTemplateModal","templateName","setTemplateName","showLoadTemplateModal","setShowLoadTemplateModal","showImportPreview","setShowImportPreview","importedWorkstreams","setImportedWorkstreams","importing","setImporting","resolvingObjectives","setResolvingObjectives","projectObjectiveSearchTerms","setProjectObjectiveSearchTerms","projectObjectiveSearchResults","setProjectObjectiveSearchResults","loadingProjectObjectiveSearch","setLoadingProjectObjectiveSearch","showProjectObjectiveDropdowns","setShowProjectObjectiveDropdowns","projectObjectiveSearchTimeoutRefs","recentSelectionsRef","fetchProjectObjectives","offset","append","response","get","params","limit","timeout","data","success","newPOs","prev","newOffset","length","hasMoreRecords","hasMore","error","_error$response","_error$response$data","saved","localStorage","getItem","JSON","parse","console","observer","IntersectionObserver","entries","isIntersecting","threshold","current","observe","unobserve","filter","po","status","uniqueStatuses","Array","from","Set","map","s","sort","deliveryToolNameOptions","functionalityOptions","handleClickOutside","event","Object","keys","forEach","workstreamId","target","closest","document","addEventListener","removeEventListener","searchTerm","workstream","find","w","clearTimeout","trim","recentSelection","timeSinceSelection","timestamp","setTimeout","currentSearchTerm","currentWorkstream","currentRecentSelection","encodeURIComponent","finalWorkstream","finalRecentSelection","handleProjectObjectiveSelect","objective","selectedName","contributorFacingProjectName","name","ws","handleClearProjectObjective","handleInputChange","field","value","handleSearchTermChange","toggleWorkstreamExpanded","addWorkstream","newId","removeWorkstream","newState","validateWorkstream","handleSubmit","e","preventDefault","validationErrors","index","push","createPromises","post","results","Promise","all","successCount","r","_error$response2","_error$response2$data","errorMessage","message","handleCancel","handleAddWorkstream","handleSaveTemplate","confirmSaveTemplate","template","createdAt","toISOString","updatedTemplates","setItem","stringify","handleLoadTemplate","newWorkstreams","reduce","acc","handleDeleteTemplate","templateId","t","handleCloneWorkstream","workstreamToClone","clonedWorkstream","handleDownloadTemplate","templateData","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","split","handleImportTemplate","file","files","reader","FileReader","onload","Uint8Array","result","workbook","read","type","firstSheetName","SheetNames","worksheet","Sheets","jsonData","sheet_to_json","imported","row","unresolvedObjectives","icon","duration","matched","toLowerCase","resolvedCount","readAsArrayBuffer","handleCreateFromImport","unresolved","_error$response3","_error$response3$data","renderWorkstreamForm","isExpanded","searchResults","loadingSearch","showDropdown","className","children","onClick","stopPropagation","size","fileName","_jsxFileName","lineNumber","columnNumber","style","display","gap","alignItems","title","background","border","cursor","padding","color","onChange","placeholder","readOnly","onFocus","projectName","marginTop","marginBottom","checked","marginRight","verticalAlign","marginLeft","required","opt","option","content","justifyContent","paddingTop","flexWrap","margin","fontSize","fontWeight","accept","borderRadius","minWidth","fontFamily","textAlign","maxHeight","overflowY","width","colSpan","borderTop","ref","height","onSubmit","disabled","position","top","left","right","bottom","zIndex","maxWidth","autoFocus","onKeyPress","key","overflow","flexDirection","toLocaleDateString","importPreviewModal","flex","borderCollapse","some","isOpen","toggleSidebar","transition","email","charAt","toUpperCase","_c","$RefreshReg$"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/CreateWorkStream.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport useSidebarWidth from '../hooks/useSidebarWidth';\nimport { Menu, LogOut, Search, X, Info, Plus, ChevronDown, ChevronUp, Trash2, Loader, Save, Copy, FolderOpen, Download, Upload, FileText } from 'lucide-react';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport * as XLSX from 'xlsx';\nimport '../styles/CreateWorkStream.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\nconst CreateWorkStream = ({ hideHeader = false }) => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const sidebarWidth = useSidebarWidth(sidebarOpen);\n  const [submitting, setSubmitting] = useState(false);\n  const [showForm, setShowForm] = useState(false); // New state to control form visibility\n  \n  // Project Objectives without workstreams\n  const [projectObjectives, setProjectObjectives] = useState([]);\n  const [allProjectObjectives, setAllProjectObjectives] = useState([]); // Store all fetched data for filtering\n  const [loadingPOs, setLoadingPOs] = useState(true);\n  const [poOffset, setPoOffset] = useState(0);\n  const [poHasMore, setPoHasMore] = useState(true);\n  const [loadingMorePOs, setLoadingMorePOs] = useState(false);\n  const infiniteScrollRef = useRef(null);\n  const [statusFilter, setStatusFilter] = useState(''); // Filter by status\n  \n  // Workstreams array - each workstream has its own form data\n  const [workstreams, setWorkstreams] = useState([\n    {\n      id: Date.now(),\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }\n  ]);\n  \n  // Track expanded/collapsed state for each workstream\n  const [expandedWorkstreams, setExpandedWorkstreams] = useState({ [Date.now()]: true });\n  \n  // Templates state\n  const [savedTemplates, setSavedTemplates] = useState([]);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [templateName, setTemplateName] = useState('');\n  const [showLoadTemplateModal, setShowLoadTemplateModal] = useState(false);\n  const [showImportPreview, setShowImportPreview] = useState(false);\n  const [importedWorkstreams, setImportedWorkstreams] = useState([]);\n  const [importing, setImporting] = useState(false);\n  const [resolvingObjectives, setResolvingObjectives] = useState(false);\n\n  // Project Objective search - per workstream\n  const [projectObjectiveSearchTerms, setProjectObjectiveSearchTerms] = useState({});\n  const [projectObjectiveSearchResults, setProjectObjectiveSearchResults] = useState({});\n  const [loadingProjectObjectiveSearch, setLoadingProjectObjectiveSearch] = useState({});\n  const [showProjectObjectiveDropdowns, setShowProjectObjectiveDropdowns] = useState({});\n  const projectObjectiveSearchTimeoutRefs = useRef({});\n  const recentSelectionsRef = useRef({}); // Track recent selections to prevent search loop\n\n  // Fetch project objectives without workstreams\n  const fetchProjectObjectives = useCallback(async (offset = 0, append = false) => {\n    try {\n      if (offset === 0) {\n        setLoadingPOs(true);\n      } else {\n        setLoadingMorePOs(true);\n      }\n      \n      const response = await apiClient.get('/workstream/project-objectives-without-workstreams', {\n        params: { limit: 1000, offset },\n        timeout: 120000 // 2 minutes to match backend timeout\n      });\n      \n      if (response.data.success) {\n        const newPOs = response.data.projectObjectives;\n        if (append) {\n          setAllProjectObjectives(prev => [...prev, ...newPOs]);\n        } else {\n          setAllProjectObjectives(newPOs);\n          setPoOffset(0); // Reset offset when starting fresh\n        }\n        \n        // Update offset and hasMore\n        const newOffset = append ? poOffset + newPOs.length : newPOs.length;\n        setPoOffset(newOffset);\n        \n        // If we got exactly 1000 records, assume there might be more\n        // Also check the hasMore flag from backend\n        const hasMoreRecords = response.data.hasMore || newPOs.length === 1000;\n        setPoHasMore(hasMoreRecords);\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.error || 'Failed to fetch project objectives');\n    } finally {\n      setLoadingPOs(false);\n      setLoadingMorePOs(false);\n    }\n  }, []);\n\n  // Load saved templates from localStorage\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem('workstreamTemplates');\n      if (saved) {\n        setSavedTemplates(JSON.parse(saved));\n      }\n    } catch (error) {\n      console.error('Error loading templates:', error);\n    }\n  }, []);\n\n  // Initial load\n  useEffect(() => {\n    if (!showForm) {\n      fetchProjectObjectives(0, false);\n    }\n  }, [showForm, fetchProjectObjectives]);\n\n  // Infinite scroll for project objectives\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && poHasMore && !loadingMorePOs && !showForm) {\n          fetchProjectObjectives(poOffset, true);\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    if (infiniteScrollRef.current) {\n      observer.observe(infiniteScrollRef.current);\n    }\n\n    return () => {\n      if (infiniteScrollRef.current) {\n        observer.unobserve(infiniteScrollRef.current);\n      }\n    };\n  }, [poHasMore, loadingMorePOs, poOffset, showForm, fetchProjectObjectives]);\n\n  // Filter project objectives by status\n  useEffect(() => {\n    if (statusFilter === '') {\n      setProjectObjectives(allProjectObjectives);\n    } else {\n      setProjectObjectives(allProjectObjectives.filter(po => po.status === statusFilter));\n    }\n  }, [statusFilter, allProjectObjectives]);\n\n  // Get unique status values for filter dropdown (exclude '--' and empty values)\n  const uniqueStatuses = Array.from(new Set(allProjectObjectives.map(po => po.status).filter(s => s && s !== '--'))).sort();\n\n  // Delivery Tool Name picklist (excluding QF as per original requirement)\n  const deliveryToolNameOptions = [\n    '--None--',\n    'A9',\n    'ADAP',\n    'Ampersand',\n    'Appen Collect',\n    'AppenLex',\n    'Baseline',\n    'EWOQ',\n    'Exotel',\n    'Other',\n    'Polyglot',\n    'SRT',\n    'TryRating',\n    'UHRS',\n    'Test',\n    'Test Tool'\n  ];\n\n  // Functionality picklist values\n  const functionalityOptions = [\n    '--None--',\n    'System Access',\n    'System Access & Productivity',\n    'Productivity'\n  ];\n\n  // Close search results when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      Object.keys(showProjectObjectiveDropdowns).forEach(workstreamId => {\n        if (showProjectObjectiveDropdowns[workstreamId] && !event.target.closest(`.project-objective-search-container-${workstreamId}`)) {\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n        }\n      });\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showProjectObjectiveDropdowns]);\n\n  // Search Project Objectives when search term changes (per workstream)\n  useEffect(() => {\n    Object.keys(projectObjectiveSearchTerms).forEach(workstreamId => {\n      const searchTerm = projectObjectiveSearchTerms[workstreamId];\n      const workstream = workstreams.find(w => w.id === workstreamId);\n      \n      // Clear any existing timeout\n      if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n        clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n        delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n      }\n\n      // IMPORTANT: Don't search if an objective is already selected\n      // This prevents the search loop when user selects an objective\n      if (workstream && workstream.projectObjectiveId) {\n        setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n        setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n        setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n        return;\n      }\n\n      // Don't search if search term is empty\n      if (!searchTerm || searchTerm.trim() === '') {\n        setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n        setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n        setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n        return;\n      }\n\n      // Check if this is a recent selection (within last 2 seconds)\n      const recentSelection = recentSelectionsRef.current[workstreamId];\n      if (recentSelection) {\n        const timeSinceSelection = Date.now() - recentSelection.timestamp;\n        if (timeSinceSelection < 2000) {\n          // This is a recent selection, don't search\n          setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n          setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n          setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n          return;\n        }\n      }\n\n      // Only search if user is actively typing (not just matching selected value)\n      projectObjectiveSearchTimeoutRefs.current[workstreamId] = setTimeout(async () => {\n        // Get fresh search term and workstream\n        const currentSearchTerm = projectObjectiveSearchTerms[workstreamId];\n        if (!currentSearchTerm || currentSearchTerm.trim() === '') {\n          return;\n        }\n        \n        // CRITICAL: Re-check if objective was selected during timeout - if so, abort search\n        const currentWorkstream = workstreams.find(w => w.id === workstreamId);\n        if (currentWorkstream && currentWorkstream.projectObjectiveId) {\n          // An objective was selected, don't search\n          setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n          setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n          setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n          return;\n        }\n        \n        // Check again if this is a recent selection\n        const currentRecentSelection = recentSelectionsRef.current[workstreamId];\n        if (currentRecentSelection) {\n          const timeSinceSelection = Date.now() - currentRecentSelection.timestamp;\n          if (timeSinceSelection < 2000) {\n            // This is a recent selection, don't search\n            setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n            setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n            setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n            return;\n          }\n        }\n        \n        setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: true }));\n        try {\n          const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(currentSearchTerm)}`);\n          if (response.data.success) {\n            // CRITICAL: Final check before showing results - make sure objective wasn't selected during API call\n            const finalWorkstream = workstreams.find(w => w.id === workstreamId);\n            if (finalWorkstream && finalWorkstream.projectObjectiveId) {\n              // An objective was selected during the API call, don't show results\n              setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n              setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n              return;\n            }\n            \n            // Check for recent selection\n            const finalRecentSelection = recentSelectionsRef.current[workstreamId];\n            if (finalRecentSelection) {\n              const timeSinceSelection = Date.now() - finalRecentSelection.timestamp;\n              if (timeSinceSelection < 2000) {\n                // Objective was just selected, don't show results\n                setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n                setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n                setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n                return;\n              }\n            }\n            \n            // All checks passed, show results\n            setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: response.data.projectObjectives || [] }));\n            setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: true }));\n          }\n        } catch (error) {\n          setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n        } finally {\n          setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n        }\n      }, 300);\n    });\n\n    return () => {\n      Object.keys(projectObjectiveSearchTimeoutRefs.current).forEach(workstreamId => {\n        if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n          clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n          delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n        }\n      });\n    };\n  }, [projectObjectiveSearchTerms, workstreams]);\n\n  const handleProjectObjectiveSelect = (workstreamId, objective) => {\n    const selectedName = objective.contributorFacingProjectName || objective.name;\n    \n    // Clear any pending search timeout immediately\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n    \n    // Mark this as a recent selection to prevent search loop\n    recentSelectionsRef.current[workstreamId] = {\n      name: selectedName,\n      timestamp: Date.now()\n    };\n    \n    // Update workstream with selected objective\n    setWorkstreams(prev => prev.map(ws => \n      ws.id === workstreamId \n        ? {\n            ...ws,\n            projectObjective: selectedName,\n            projectObjectiveId: objective.id\n          }\n        : ws\n    ));\n    \n    // Clear search term instead of setting it to selected name - this prevents re-triggering search\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: ''\n    }));\n    \n    // Immediately close dropdown and clear results\n    setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n    setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n    setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n    \n    // Clear the recent selection flag after a delay\n    setTimeout(() => {\n      if (recentSelectionsRef.current[workstreamId]) {\n        delete recentSelectionsRef.current[workstreamId];\n      }\n    }, 2000);\n  };\n\n  const handleClearProjectObjective = (workstreamId) => {\n    setWorkstreams(prev => prev.map(ws => \n      ws.id === workstreamId \n        ? {\n            ...ws,\n            projectObjective: '',\n            projectObjectiveId: ''\n          }\n        : ws\n    ));\n    setProjectObjectiveSearchTerms(prev => ({ ...prev, [workstreamId]: '' }));\n    setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n    setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n  };\n\n  const handleInputChange = (workstreamId, field, value) => {\n    setWorkstreams(prev => prev.map(ws => \n      ws.id === workstreamId ? { ...ws, [field]: value } : ws\n    ));\n  };\n\n  const handleSearchTermChange = (workstreamId, value) => {\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: value\n    }));\n    if (value === '') {\n      handleClearProjectObjective(workstreamId);\n    }\n  };\n\n  const toggleWorkstreamExpanded = (workstreamId) => {\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [workstreamId]: !prev[workstreamId]\n    }));\n  };\n\n  const addWorkstream = () => {\n    const newId = Date.now();\n    setWorkstreams(prev => [...prev, {\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams(prev => ({ ...prev, [newId]: true }));\n    setProjectObjectiveSearchTerms(prev => ({ ...prev, [newId]: '' }));\n  };\n\n  const removeWorkstream = (workstreamId) => {\n    if (workstreams.length === 1) {\n      toast.error('At least one workstream is required');\n      return;\n    }\n    setWorkstreams(prev => prev.filter(ws => ws.id !== workstreamId));\n    setExpandedWorkstreams(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchTerms(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchResults(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setShowProjectObjectiveDropdowns(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n  };\n\n  const validateWorkstream = (workstream) => {\n    // Project Objective is required (either ID or name)\n    if (!workstream.projectObjectiveId && (!workstream.projectObjective || workstream.projectObjective.trim() === '')) {\n      return 'Project Objective is required';\n    }\n    if (!workstream.deliveryToolName || workstream.deliveryToolName === '--None--' || workstream.deliveryToolName.trim() === '') {\n      return 'Delivery Tool Name is required';\n    }\n    if (!workstream.clientWorkstreamIdentifier || workstream.clientWorkstreamIdentifier.trim() === '') {\n      return 'Client Workstream Identifier is required';\n    }\n    if (!workstream.functionality || workstream.functionality === '--None--' || workstream.functionality.trim() === '') {\n      return 'Functionality is required';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Validate all workstreams\n    const validationErrors = [];\n    workstreams.forEach((workstream, index) => {\n      const error = validateWorkstream(workstream);\n      if (error) {\n        validationErrors.push(`Workstream ${index + 1}: ${error}`);\n      }\n    });\n\n    if (validationErrors.length > 0) {\n      toast.error(validationErrors[0]);\n      return;\n    }\n\n    setSubmitting(true);\n    try {\n      // Create all workstreams - each under its respective project objective\n      const createPromises = workstreams.map(workstream => \n        apiClient.post('/workstream/create', {\n          projectWorkstreamName: workstream.projectWorkstreamName,\n          projectObjective: workstream.projectObjective,\n          projectObjectiveId: workstream.projectObjectiveId,\n          refresh: workstream.refresh,\n          deliveryToolName: workstream.deliveryToolName,\n          clientWorkstreamIdentifier: workstream.clientWorkstreamIdentifier,\n          functionality: workstream.functionality\n        })\n      );\n\n      const results = await Promise.all(createPromises);\n      const successCount = results.filter(r => r.data.success).length;\n      \n      if (successCount === workstreams.length) {\n        toast.success(`Successfully created ${successCount} workstream(s)`);\n        // Reset all workstreams and hide form\n        const newId = Date.now();\n        setWorkstreams([{\n          id: newId,\n          projectWorkstreamName: '',\n          projectObjective: '',\n          projectObjectiveId: '',\n          refresh: false,\n          deliveryToolName: '',\n          clientWorkstreamIdentifier: '',\n          functionality: ''\n        }]);\n        setExpandedWorkstreams({ [newId]: true });\n        setProjectObjectiveSearchTerms({ [newId]: '' });\n        setProjectObjectiveSearchResults({});\n        setShowProjectObjectiveDropdowns({});\n        setShowForm(false);\n        // Reload project objectives list\n        fetchProjectObjectives(0, false);\n      } else {\n        toast.error(`Created ${successCount} of ${workstreams.length} workstream(s)`);\n      }\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || error.message || 'Failed to create workstream(s)';\n      toast.error(errorMessage);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleCancel = () => {\n    // Reset all workstreams and hide form\n    const newId = Date.now();\n    setWorkstreams([{\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams({ [newId]: true });\n    setProjectObjectiveSearchTerms({ [newId]: '' });\n    setProjectObjectiveSearchResults({});\n    setShowProjectObjectiveDropdowns({});\n    setShowForm(false);\n    // Reload project objectives list\n    fetchProjectObjectives(0, false);\n  };\n\n  const handleAddWorkstream = () => {\n    setShowForm(true);\n  };\n\n  // Save current workstreams as template\n  const handleSaveTemplate = () => {\n    if (workstreams.length === 0) {\n      toast.error('No workstreams to save as template');\n      return;\n    }\n    setShowTemplateModal(true);\n  };\n\n  const confirmSaveTemplate = () => {\n    if (!templateName.trim()) {\n      toast.error('Please enter a template name');\n      return;\n    }\n\n    try {\n      const template = {\n        id: Date.now(),\n        name: templateName.trim(),\n        createdAt: new Date().toISOString(),\n        workstreams: workstreams.map(ws => ({\n          projectWorkstreamName: ws.projectWorkstreamName,\n          projectObjective: ws.projectObjective,\n          projectObjectiveId: ws.projectObjectiveId,\n          refresh: ws.refresh,\n          deliveryToolName: ws.deliveryToolName,\n          clientWorkstreamIdentifier: ws.clientWorkstreamIdentifier,\n          functionality: ws.functionality\n        }))\n      };\n\n      const updatedTemplates = [...savedTemplates, template];\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template saved successfully');\n      setShowTemplateModal(false);\n      setTemplateName('');\n    } catch (error) {\n      console.error('Error saving template:', error);\n      toast.error('Failed to save template');\n    }\n  };\n\n  // Load template\n  const handleLoadTemplate = (template) => {\n    try {\n      const newWorkstreams = template.workstreams.map((ws, index) => ({\n        id: Date.now() + index,\n        ...ws\n      }));\n      setWorkstreams(newWorkstreams);\n      setExpandedWorkstreams(newWorkstreams.reduce((acc, ws) => {\n        acc[ws.id] = true;\n        return acc;\n      }, {}));\n      setShowLoadTemplateModal(false);\n      toast.success(`Template \"${template.name}\" loaded successfully`);\n    } catch (error) {\n      console.error('Error loading template:', error);\n      toast.error('Failed to load template');\n    }\n  };\n\n  // Delete template\n  const handleDeleteTemplate = (templateId) => {\n    try {\n      const updatedTemplates = savedTemplates.filter(t => t.id !== templateId);\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template deleted successfully');\n    } catch (error) {\n      console.error('Error deleting template:', error);\n      toast.error('Failed to delete template');\n    }\n  };\n\n  // Clone workstream\n  const handleCloneWorkstream = (workstreamId) => {\n    const workstreamToClone = workstreams.find(ws => ws.id === workstreamId);\n    if (!workstreamToClone) return;\n\n    const clonedWorkstream = {\n      ...workstreamToClone,\n      id: Date.now(),\n      projectWorkstreamName: `${workstreamToClone.projectWorkstreamName} (Copy)`,\n      projectObjective: '',\n      projectObjectiveId: ''\n    };\n\n    setWorkstreams(prev => [...prev, clonedWorkstream]);\n    setExpandedWorkstreams(prev => ({ ...prev, [clonedWorkstream.id]: true }));\n    toast.success('Workstream cloned successfully');\n  };\n\n  // Download template for workstream creation\n  const handleDownloadTemplate = () => {\n    try {\n      const templateData = [\n        {\n          'Project Workstream Name': 'Example Workstream 1',\n          'Project Objective Name': 'Example Project Objective',\n          'Project Objective ID': '',\n          'Delivery Tool Name': 'Tool1',\n          'Client Workstream Identifier': 'WS-001',\n          'Functionality': 'Functionality1',\n          'Refresh': false\n        },\n        {\n          'Project Workstream Name': 'Example Workstream 2',\n          'Project Objective Name': 'Example Project Objective 2',\n          'Project Objective ID': '',\n          'Delivery Tool Name': 'Tool2',\n          'Client Workstream Identifier': 'WS-002',\n          'Functionality': 'Functionality2',\n          'Refresh': false\n        }\n      ];\n\n      const ws = XLSX.utils.json_to_sheet(templateData);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'Workstream Template');\n      XLSX.writeFile(wb, `Workstream_Creation_Template_${new Date().toISOString().split('T')[0]}.xlsx`);\n      toast.success('Template downloaded successfully');\n    } catch (error) {\n      console.error('Error downloading template:', error);\n      toast.error('Failed to download template');\n    }\n  };\n\n  // Handle template file import\n  const handleImportTemplate = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = async (e) => {\n      try {\n        const data = new Uint8Array(e.target.result);\n        const workbook = XLSX.read(data, { type: 'array' });\n        const firstSheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[firstSheetName];\n        const jsonData = XLSX.utils.sheet_to_json(worksheet);\n\n        if (jsonData.length === 0) {\n          toast.error('Template file is empty');\n          return;\n        }\n\n        // Map imported data to workstream format\n        let imported = jsonData.map((row, index) => ({\n          id: Date.now() + index,\n          projectWorkstreamName: row['Project Workstream Name'] || row['projectWorkstreamName'] || '',\n          projectObjective: row['Project Objective Name'] || row['projectObjective'] || row['Project Objective'] || '',\n          projectObjectiveId: row['Project Objective ID'] || row['projectObjectiveId'] || '',\n          deliveryToolName: row['Delivery Tool Name'] || row['deliveryToolName'] || '',\n          clientWorkstreamIdentifier: row['Client Workstream Identifier'] || row['clientWorkstreamIdentifier'] || '',\n          functionality: row['Functionality'] || row['functionality'] || '',\n          refresh: row['Refresh'] || row['refresh'] || false\n        }));\n\n        // Resolve Project Objective names to IDs if ID is not provided\n        const unresolvedObjectives = imported.filter(ws => ws.projectObjective && !ws.projectObjectiveId);\n        if (unresolvedObjectives.length > 0) {\n          setResolvingObjectives(true);\n          toast('Resolving project objective names to IDs...', { icon: '⏳', duration: 2000 });\n          \n          // Resolve each project objective name to ID\n          for (const ws of unresolvedObjectives) {\n            try {\n              const searchTerm = ws.projectObjective.trim();\n              if (searchTerm) {\n                const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(searchTerm)}`);\n                if (response.data.success && response.data.projectObjectives && response.data.projectObjectives.length > 0) {\n                  // Try to find exact match first\n                  let matched = response.data.projectObjectives.find(po => \n                    po.name === searchTerm || \n                    po.contributorFacingProjectName === searchTerm ||\n                    (po.name && po.name.toLowerCase() === searchTerm.toLowerCase()) ||\n                    (po.contributorFacingProjectName && po.contributorFacingProjectName.toLowerCase() === searchTerm.toLowerCase())\n                  );\n                  \n                  // If no exact match, use the first result\n                  if (!matched) {\n                    matched = response.data.projectObjectives[0];\n                  }\n                  \n                  if (matched) {\n                    ws.projectObjectiveId = matched.id;\n                    ws.projectObjective = matched.contributorFacingProjectName || matched.name || ws.projectObjective;\n                  }\n                }\n              }\n            } catch (error) {\n              console.error(`Error resolving project objective for \"${ws.projectObjective}\":`, error);\n              // Continue with other workstreams even if one fails\n            }\n          }\n          \n          setResolvingObjectives(false);\n        }\n\n        setImportedWorkstreams(imported);\n        setShowImportPreview(true);\n        const resolvedCount = unresolvedObjectives.length > 0 ? unresolvedObjectives.filter(ws => ws.projectObjectiveId).length : 0;\n        if (unresolvedObjectives.length > 0) {\n          toast.success(`Imported ${imported.length} workstream(s). Resolved ${resolvedCount} of ${unresolvedObjectives.length} project objective(s).`);\n        } else {\n          toast.success(`Imported ${imported.length} workstream(s) from template`);\n        }\n      } catch (error) {\n        console.error('Error importing template:', error);\n        toast.error('Failed to import template. Please check the file format.');\n      }\n    };\n    reader.readAsArrayBuffer(file);\n    // Reset file input\n    event.target.value = '';\n  };\n\n  // Create workstreams from imported template\n  const handleCreateFromImport = async () => {\n    if (importedWorkstreams.length === 0) {\n      toast.error('No workstreams to create');\n      return;\n    }\n\n    // Resolve any remaining unresolved project objectives\n    const unresolved = importedWorkstreams.filter(ws => ws.projectObjective && !ws.projectObjectiveId);\n    if (unresolved.length > 0) {\n      toast('Resolving remaining project objectives...', { icon: '⏳' });\n      \n      for (const ws of unresolved) {\n        try {\n          const searchTerm = ws.projectObjective.trim();\n          if (searchTerm) {\n            const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(searchTerm)}`);\n            if (response.data.success && response.data.projectObjectives && response.data.projectObjectives.length > 0) {\n              // Try to find exact match first\n              let matched = response.data.projectObjectives.find(po => \n                po.name === searchTerm || \n                po.contributorFacingProjectName === searchTerm ||\n                (po.name && po.name.toLowerCase() === searchTerm.toLowerCase()) ||\n                (po.contributorFacingProjectName && po.contributorFacingProjectName.toLowerCase() === searchTerm.toLowerCase())\n              );\n              \n              // If no exact match, use the first result\n              if (!matched) {\n                matched = response.data.projectObjectives[0];\n              }\n              \n              if (matched) {\n                ws.projectObjectiveId = matched.id;\n                ws.projectObjective = matched.contributorFacingProjectName || matched.name || ws.projectObjective;\n              }\n            }\n          }\n        } catch (error) {\n          console.error(`Error resolving project objective for \"${ws.projectObjective}\":`, error);\n        }\n      }\n      \n      // Update the imported workstreams state with resolved IDs\n      setImportedWorkstreams([...importedWorkstreams]);\n    }\n\n    // Validate all imported workstreams\n    const validationErrors = [];\n    importedWorkstreams.forEach((workstream, index) => {\n      const error = validateWorkstream(workstream);\n      if (error) {\n        validationErrors.push(`Row ${index + 1}: ${error}`);\n      }\n    });\n\n    if (validationErrors.length > 0) {\n      toast.error(validationErrors[0]);\n      return;\n    }\n\n    setImporting(true);\n    try {\n      // Create all workstreams\n      const createPromises = importedWorkstreams.map(workstream => \n        apiClient.post('/workstream/create', {\n          projectWorkstreamName: workstream.projectWorkstreamName,\n          projectObjective: workstream.projectObjective,\n          projectObjectiveId: workstream.projectObjectiveId,\n          refresh: workstream.refresh,\n          deliveryToolName: workstream.deliveryToolName,\n          clientWorkstreamIdentifier: workstream.clientWorkstreamIdentifier,\n          functionality: workstream.functionality\n        })\n      );\n\n      const results = await Promise.all(createPromises);\n      const successCount = results.filter(r => r.data.success).length;\n      \n      if (successCount === importedWorkstreams.length) {\n        toast.success(`Successfully created ${successCount} workstream(s) from template`);\n        setShowImportPreview(false);\n        setImportedWorkstreams([]);\n        // Reload project objectives list\n        fetchProjectObjectives(0, false);\n      } else {\n        toast.error(`Created ${successCount} of ${importedWorkstreams.length} workstream(s)`);\n      }\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || error.message || 'Failed to create workstream(s)';\n      toast.error(errorMessage);\n    } finally {\n      setImporting(false);\n    }\n  };\n\n  const renderWorkstreamForm = (workstream, index) => {\n    const isExpanded = expandedWorkstreams[workstream.id] !== false;\n    const searchTerm = projectObjectiveSearchTerms[workstream.id] || '';\n    const searchResults = projectObjectiveSearchResults[workstream.id] || [];\n    const loadingSearch = loadingProjectObjectiveSearch[workstream.id] || false;\n    const showDropdown = showProjectObjectiveDropdowns[workstream.id] || false;\n\n    return (\n      <div key={workstream.id} className=\"workstream-form-card\">\n        <div \n          className=\"create-workstream-header-section\"\n          onClick={() => toggleWorkstreamExpanded(workstream.id)}\n        >\n          <button\n            type=\"button\"\n            className=\"create-workstream-toggle\"\n            onClick={(e) => {\n              e.stopPropagation();\n              toggleWorkstreamExpanded(workstream.id);\n            }}\n          >\n            {isExpanded ? <ChevronUp size={18} /> : <ChevronDown size={18} />}\n          </button>\n          <span className=\"create-workstream-title-text\">\n            WorkStream {index + 1}{workstream.projectObjective ? ` - ${workstream.projectObjective}` : ''}\n          </span>\n          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n            <button\n              type=\"button\"\n              className=\"create-workstream-remove\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleCloneWorkstream(workstream.id);\n              }}\n              title=\"Clone workstream\"\n              style={{ background: 'transparent', border: 'none', cursor: 'pointer', padding: '4px', display: 'flex', alignItems: 'center' }}\n            >\n              <Copy size={16} style={{ color: '#0176d3' }} />\n            </button>\n            {workstreams.length > 1 && (\n              <button\n                type=\"button\"\n                className=\"create-workstream-remove\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  removeWorkstream(workstream.id);\n                }}\n                title=\"Remove workstream\"\n              >\n                <Trash2 size={16} />\n              </button>\n            )}\n          </div>\n        </div>\n\n        {isExpanded && (\n          <div className=\"workstream-form-content\">\n            <div className=\"form-section-card\">\n              <div className=\"form-grid-two-column\">\n                <div className=\"form-column\">\n                  <div className=\"form-group\">\n                    <label>Project Workstream Name</label>\n                    <input\n                      type=\"text\"\n                      value={workstream.projectWorkstreamName}\n                      onChange={(e) => handleInputChange(workstream.id, 'projectWorkstreamName', e.target.value)}\n                      className=\"form-input-compact\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>\n                      Project Objective <span className=\"required\">*</span>\n                    </label>\n                    <div className={`project-objective-search-container project-objective-search-container-${workstream.id}`}>\n                      <div className=\"search-input-wrapper\">\n                        <Search size={14} className=\"search-icon\" />\n                        <input\n                          type=\"text\"\n                          placeholder=\"Search for project objective...\"\n                          value={workstream.projectObjectiveId ? workstream.projectObjective : searchTerm}\n                          readOnly={!!workstream.projectObjectiveId}\n                          onChange={(e) => {\n                            // Only allow changes if no objective is selected\n                            if (!workstream.projectObjectiveId) {\n                              handleSearchTermChange(workstream.id, e.target.value);\n                            }\n                          }}\n                          onFocus={() => {\n                            // If there's a selection, allow clearing it\n                            if (workstream.projectObjectiveId) {\n                              // User can click X button to clear\n                            } else if (searchResults.length > 0) {\n                              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstream.id]: true }));\n                            }\n                          }}\n                          onClick={() => {\n                            // If there's a selection and user clicks, don't clear automatically\n                            // They need to use the X button\n                            if (!workstream.projectObjectiveId && searchResults.length > 0) {\n                              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstream.id]: true }));\n                            }\n                          }}\n                          className=\"form-input-compact search-input\"\n                          style={workstream.projectObjectiveId ? { cursor: 'default' } : {}}\n                        />\n                        {workstream.projectObjectiveId && (\n                          <button\n                            type=\"button\"\n                            onClick={() => handleClearProjectObjective(workstream.id)}\n                            className=\"clear-button\"\n                            title=\"Clear selection\"\n                          >\n                            <X size={14} />\n                          </button>\n                        )}\n                      </div>\n                      {loadingSearch && (\n                        <div className=\"searching-indicator\">Searching...</div>\n                      )}\n                      {showDropdown && searchResults.length > 0 && !workstream.projectObjectiveId && (\n                        <div className=\"search-results-dropdown\">\n                          {searchResults.map((objective) => (\n                            <div\n                              key={objective.id}\n                              onClick={() => handleProjectObjectiveSelect(workstream.id, objective)}\n                              className={`search-result-item ${workstream.projectObjectiveId === objective.id ? 'selected' : ''}`}\n                            >\n                              <div className=\"search-result-name\">\n                                {objective.contributorFacingProjectName || objective.name}\n                              </div>\n                              {objective.projectName && (\n                                <div className=\"search-result-subtitle\">\n                                  Project: {objective.projectName}\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"form-group\" style={{ marginTop: '6px' }}>\n                    <label className=\"checkbox-label\" style={{ marginBottom: 0 }}>\n                      <input\n                        type=\"checkbox\"\n                        checked={workstream.refresh}\n                        onChange={(e) => handleInputChange(workstream.id, 'refresh', e.target.checked)}\n                        className=\"checkbox-input\"\n                        style={{ marginRight: '8px', marginTop: '0', verticalAlign: 'middle' }}\n                      />\n                      <span className=\"checkbox-text\" style={{ verticalAlign: 'middle' }}>Refresh</span>\n                      <Info size={12} className=\"info-icon\" style={{ marginLeft: '6px', verticalAlign: 'middle' }} />\n                    </label>\n                  </div>\n                </div>\n\n                <div className=\"form-column\">\n                  <div className=\"form-group\">\n                    <label>\n                      Delivery Tool Name <span className=\"required\">*</span>\n                    </label>\n                    <select\n                      value={workstream.deliveryToolName}\n                      onChange={(e) => handleInputChange(workstream.id, 'deliveryToolName', e.target.value)}\n                      className=\"form-input-compact\"\n                      required\n                    >\n                      <option value=\"\">--None--</option>\n                      {deliveryToolNameOptions.filter(opt => opt !== '--None--').map((option) => (\n                        <option key={option} value={option}>{option}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>\n                      Client Workstream Identifier <span className=\"required\">*</span>\n                      <Info size={12} className=\"info-icon\" />\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={workstream.clientWorkstreamIdentifier}\n                      onChange={(e) => handleInputChange(workstream.id, 'clientWorkstreamIdentifier', e.target.value)}\n                      className=\"form-input-compact\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>\n                      Functionality <span className=\"required\">*</span>\n                      <Info size={12} className=\"info-icon\" />\n                    </label>\n                    <select\n                      value={workstream.functionality}\n                      onChange={(e) => handleInputChange(workstream.id, 'functionality', e.target.value)}\n                      className=\"form-input-compact\"\n                      required\n                    >\n                      <option value=\"\">--None--</option>\n                      {functionalityOptions.filter(opt => opt !== '--None--').map((option) => (\n                        <option key={option} value={option}>{option}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const content = (\n    <div className=\"create-workstream-content\">\n      {!showForm ? (\n        <>\n          {/* Header with Add Workstream button */}\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px', marginTop: '8px', paddingTop: '8px', flexWrap: 'wrap', gap: '12px' }}>\n            <h2 style={{ margin: '0 0 8px 0', fontSize: '18px', fontWeight: 600, color: '#002329' }}>\n              Project Objectives Without Workstreams\n            </h2>\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center', flexWrap: 'wrap' }}>\n              <button\n                type=\"button\"\n                className=\"btn-secondary\"\n                onClick={handleDownloadTemplate}\n                style={{ display: 'flex', alignItems: 'center', gap: '6px' }}\n                title=\"Download template for workstream creation\"\n              >\n                <FileText size={16} />\n                Download Template\n              </button>\n              <label\n                className=\"btn-secondary\"\n                style={{ display: 'flex', alignItems: 'center', gap: '6px', cursor: 'pointer', margin: 0 }}\n                title=\"Import template file\"\n              >\n                <Upload size={16} />\n                Import Template\n                <input\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  onChange={handleImportTemplate}\n                  style={{ display: 'none' }}\n                />\n              </label>\n              <button\n                type=\"button\"\n                className=\"btn-primary\"\n                onClick={handleAddWorkstream}\n                style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n              >\n                <Plus size={16} />\n                Add Workstream\n              </button>\n            </div>\n          </div>\n\n          {/* Filter Section */}\n          <div style={{ display: 'flex', gap: '12px', alignItems: 'center', marginBottom: '16px' }}>\n            <label style={{ fontSize: '14px', fontWeight: 500, color: '#002329' }}>\n              Filter by Status:\n            </label>\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              style={{\n                fontSize: '14px',\n                padding: '8px 12px',\n                border: '1px solid var(--border-color)',\n                borderRadius: 'var(--radius-md)',\n                background: 'var(--surface)',\n                color: 'var(--text-primary)',\n                minWidth: '180px',\n                cursor: 'pointer',\n                fontFamily: 'Poppins'\n              }}\n            >\n              <option value=\"\">All Status</option>\n              {uniqueStatuses.map(status => (\n                <option key={status} value={status}>{status}</option>\n              ))}\n            </select>\n            {statusFilter && (\n              <button\n                type=\"button\"\n                onClick={() => setStatusFilter('')}\n                style={{\n                  fontSize: '13px',\n                  padding: '6px 12px',\n                  background: 'transparent',\n                  border: '1px solid var(--border-color)',\n                  borderRadius: 'var(--radius-md)',\n                  color: 'var(--text-secondary)',\n                  cursor: 'pointer',\n                  fontFamily: 'Poppins'\n                }}\n              >\n                Clear Filter\n              </button>\n            )}\n          </div>\n\n          {/* Project Objectives Table */}\n          {loadingPOs && allProjectObjectives.length === 0 ? (\n            <div style={{ textAlign: 'center', padding: '40px' }}>\n              <Loader className=\"spinning\" size={24} />\n              <p>Loading project objectives...</p>\n            </div>\n          ) : (\n            <div className=\"project-objectives-table-container\" style={{ maxHeight: '70vh', overflowY: 'auto' }}>\n              <table className=\"project-objectives-table\" style={{ width: '100%' }}>\n                <thead>\n                  <tr>\n                    <th>Project Objective</th>\n                    <th>Associated Project</th>\n                    <th>Project Objective Status</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {projectObjectives.length === 0 ? (\n                    <tr>\n                      <td colSpan=\"3\" className=\"no-data\" style={{ textAlign: 'center', padding: '40px' }}>\n                        No project objectives without workstreams found\n                      </td>\n                    </tr>\n                  ) : (\n                    projectObjectives.map((po, index) => (\n                      <tr key={po.id || index}>\n                        <td>{po.name || '--'}</td>\n                        <td>{po.projectName || '--'}</td>\n                        <td>{po.status || '--'}</td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n              \n              {/* Show More Button and Loading States */}\n              {((poHasMore || allProjectObjectives.length >= 1000) && !loadingMorePOs && allProjectObjectives.length > 0 && !loadingPOs) && (\n                <div style={{ textAlign: 'center', padding: '20px', borderTop: '1px solid var(--border-color)' }}>\n                  <button\n                    type=\"button\"\n                    className=\"btn-secondary\"\n                    onClick={() => fetchProjectObjectives(poOffset, true)}\n                    style={{\n                      display: 'inline-flex',\n                      alignItems: 'center',\n                      gap: '8px',\n                      padding: '10px 24px',\n                      fontSize: '14px',\n                      fontWeight: 600\n                    }}\n                  >\n                    <Plus size={16} />\n                    Show More ({allProjectObjectives.length} loaded{poHasMore ? ', more available' : ''})\n                  </button>\n                  <div style={{ marginTop: '8px', fontSize: '12px', color: '#666' }}>\n                    Click to load next 1000 project objectives\n                  </div>\n                </div>\n              )}\n              \n              {loadingMorePOs && (\n                <div style={{ textAlign: 'center', padding: '20px', borderTop: '1px solid var(--border-color)' }}>\n                  <Loader className=\"spinning\" size={16} />\n                  <span style={{ marginLeft: '8px' }}>Loading more project objectives...</span>\n                </div>\n              )}\n              \n              {/* Infinite scroll trigger (backup - hidden but still functional) */}\n              {poHasMore && !loadingMorePOs && (\n                <div\n                  ref={infiniteScrollRef}\n                  style={{ height: '20px', width: '100%' }}\n                />\n              )}\n              \n              {allProjectObjectives.length > 0 && !poHasMore && (\n                <div style={{ textAlign: 'center', padding: '16px', borderTop: '1px solid var(--border-color)', color: '#666', fontSize: '13px' }}>\n                  {statusFilter ? (\n                    <>Showing {projectObjectives.length} of {allProjectObjectives.length} project objectives (filtered by status: {statusFilter})</>\n                  ) : (\n                    <>All {allProjectObjectives.length} project objectives loaded</>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n        </>\n      ) : (\n        <form onSubmit={handleSubmit} className=\"create-workstream-form\">\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n            <h2 style={{ margin: 0, fontSize: '18px', fontWeight: 600, color: '#002329' }}>\n              Create Workstream\n            </h2>\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={() => setShowForm(false)}\n            >\n              Back to List\n            </button>\n          </div>\n\n          <div style={{ marginBottom: '16px', display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n            <button\n              type=\"button\"\n              className=\"btn-primary\"\n              onClick={addWorkstream}\n              style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n            >\n              <Plus size={16} />\n              Add WorkStream\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={handleSaveTemplate}\n              disabled={workstreams.length === 0}\n              style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n              title=\"Save current workstreams as template\"\n            >\n              <Save size={16} />\n              Save Template\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={() => setShowLoadTemplateModal(true)}\n              disabled={savedTemplates.length === 0}\n              style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n              title=\"Load a saved template\"\n            >\n              <FolderOpen size={16} />\n              Load Template\n            </button>\n          </div>\n\n          {workstreams.map((workstream, index) => renderWorkstreamForm(workstream, index))}\n\n          <div className=\"form-actions\">\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={handleCancel}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"btn-primary\"\n              disabled={submitting}\n            >\n              {submitting ? 'Creating...' : `Create ${workstreams.length} WorkStream${workstreams.length > 1 ? 's' : ''}`}\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Save Template Modal */}\n      {showTemplateModal && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        }}>\n          <div style={{\n            background: 'white',\n            padding: '24px',\n            borderRadius: '8px',\n            minWidth: '400px',\n            maxWidth: '500px'\n          }}>\n            <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: 600 }}>Save Template</h3>\n            <div style={{ marginBottom: '16px' }}>\n              <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', fontWeight: 500 }}>\n                Template Name:\n              </label>\n              <input\n                type=\"text\"\n                value={templateName}\n                onChange={(e) => setTemplateName(e.target.value)}\n                placeholder=\"Enter template name\"\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  border: '1px solid var(--border-color)',\n                  borderRadius: '4px',\n                  fontSize: '14px'\n                }}\n                autoFocus\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter') {\n                    confirmSaveTemplate();\n                  }\n                }}\n              />\n            </div>\n            <div style={{ display: 'flex', gap: '12px', justifyContent: 'flex-end' }}>\n              <button\n                type=\"button\"\n                className=\"btn-secondary\"\n                onClick={() => {\n                  setShowTemplateModal(false);\n                  setTemplateName('');\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn-primary\"\n                onClick={confirmSaveTemplate}\n                disabled={!templateName.trim()}\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Load Template Modal */}\n      {showLoadTemplateModal && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        }}>\n          <div style={{\n            background: 'white',\n            padding: '24px',\n            borderRadius: '8px',\n            minWidth: '500px',\n            maxWidth: '600px',\n            maxHeight: '80vh',\n            overflow: 'auto'\n          }}>\n            <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: 600 }}>Load Template</h3>\n            {savedTemplates.length === 0 ? (\n              <p style={{ color: '#666', fontSize: '14px' }}>No saved templates found.</p>\n            ) : (\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n                {savedTemplates.map((template) => (\n                  <div\n                    key={template.id}\n                    style={{\n                      padding: '12px',\n                      border: '1px solid var(--border-color)',\n                      borderRadius: '4px',\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center'\n                    }}\n                  >\n                    <div>\n                      <div style={{ fontWeight: 500, fontSize: '14px', marginBottom: '4px' }}>\n                        {template.name}\n                      </div>\n                      <div style={{ fontSize: '12px', color: '#666' }}>\n                        {template.workstreams.length} workstream(s) • Created {new Date(template.createdAt).toLocaleDateString()}\n                      </div>\n                    </div>\n                    <div style={{ display: 'flex', gap: '8px' }}>\n                      <button\n                        type=\"button\"\n                        className=\"btn-primary\"\n                        onClick={() => handleLoadTemplate(template)}\n                        style={{ fontSize: '12px', padding: '6px 12px' }}\n                      >\n                        Load\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"btn-secondary\"\n                        onClick={() => handleDeleteTemplate(template.id)}\n                        style={{ fontSize: '12px', padding: '6px 12px', color: '#d32f2f' }}\n                        title=\"Delete template\"\n                      >\n                        <Trash2 size={14} />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n            <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '16px' }}>\n              <button\n                type=\"button\"\n                className=\"btn-secondary\"\n                onClick={() => setShowLoadTemplateModal(false)}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  // Import Preview Modal (shared between both render paths)\n  const importPreviewModal = showImportPreview && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 9999\n        }}>\n          <div style={{\n            background: 'white',\n            padding: '24px',\n            borderRadius: '8px',\n            minWidth: '800px',\n            maxWidth: '90vw',\n            maxHeight: '90vh',\n            display: 'flex',\n            flexDirection: 'column'\n          }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n              <h3 style={{ margin: 0, fontSize: '18px', fontWeight: 600 }}>Import Preview</h3>\n              <button\n                onClick={() => {\n                  setShowImportPreview(false);\n                  setImportedWorkstreams([]);\n                  setResolvingObjectives(false);\n                }}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  padding: '4px',\n                  display: 'flex',\n                  alignItems: 'center'\n                }}\n              >\n                <X size={20} />\n              </button>\n            </div>\n            \n            {resolvingObjectives && (\n              <div style={{ padding: '12px', background: '#f0f9ff', borderRadius: '4px', marginBottom: '16px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                <Loader className=\"spinning\" size={16} style={{ color: '#08979C' }} />\n                <span style={{ fontSize: '13px', color: '#0369a1' }}>Resolving project objectives...</span>\n              </div>\n            )}\n            \n            <div style={{ flex: 1, overflow: 'auto', marginBottom: '16px' }}>\n              <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '13px' }}>\n                <thead>\n                  <tr>\n                    <th>Project Workstream Name</th>\n                    <th>Project Objective</th>\n                    <th>Delivery Tool Name</th>\n                    <th>Client Workstream Identifier</th>\n                    <th>Functionality</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {importedWorkstreams.map((ws, index) => {\n                    const error = validateWorkstream(ws);\n                    return (\n                      <tr key={index} style={{ background: error ? '#fee' : 'white' }}>\n                        <td style={{ padding: '8px', border: '1px solid #e5e7eb' }}>{ws.projectWorkstreamName || '--'}</td>\n                        <td style={{ padding: '8px', border: '1px solid #e5e7eb' }}>{ws.projectObjective || '--'}</td>\n                        <td style={{ padding: '8px', border: '1px solid #e5e7eb' }}>{ws.deliveryToolName || '--'}</td>\n                        <td style={{ padding: '8px', border: '1px solid #e5e7eb' }}>{ws.clientWorkstreamIdentifier || '--'}</td>\n                        <td style={{ padding: '8px', border: '1px solid #e5e7eb' }}>\n                          {ws.functionality || '--'}\n                          {error && <div style={{ fontSize: '11px', color: '#c33', marginTop: '4px' }}>{error}</div>}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n            \n            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '8px' }}>\n              <button\n                onClick={() => {\n                  setShowImportPreview(false);\n                  setImportedWorkstreams([]);\n                }}\n                className=\"btn-secondary\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleCreateFromImport}\n                disabled={importing || importedWorkstreams.some(ws => validateWorkstream(ws))}\n                className=\"btn-primary\"\n              >\n                {importing ? 'Creating...' : `Create ${importedWorkstreams.length} Workstream(s)`}\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n\n  if (hideHeader) {\n    return (\n      <>\n        <div className=\"create-workstream-content-wrapper\">{content}</div>\n        {importPreviewModal}\n      </>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      \n      <div className=\"create-workstream\" style={{ marginLeft: `${sidebarWidth}px`, width: `calc(100% - ${sidebarWidth}px)`, transition: 'margin-left 0.2s ease, width 0.2s ease' }}>\n        <div className=\"create-workstream-container\">\n          <div className=\"create-workstream-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">New Project Workstream</h1>\n                  <p className=\"page-subtitle\">Create a new project workstream</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          {content}\n        </div>\n      </div>\n      {importPreviewModal}\n    </div>\n  );\n};\n\nexport default CreateWorkStream;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}