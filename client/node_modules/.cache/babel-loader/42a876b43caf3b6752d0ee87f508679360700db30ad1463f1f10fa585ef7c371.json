{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef}from'react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/Sidebar';import useSidebarWidth from'../hooks/useSidebarWidth';import{Menu,LogOut}from'lucide-react';import apiClient from'../config/api';import toast from'react-hot-toast';import BookmarkButton from'../components/BookmarkButton';import ActiveContributorsByQualStepTable from'../components/ActiveContributorsByQualStep/ActiveContributorsByQualStepTable';import'../styles/ActiveContributorsByQualStep.css';import'../styles/Sidebar.css';import'../styles/GlobalHeader.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ActiveContributorsByQualStep=()=>{const{user,logout}=useAuth();const[sidebarOpen,setSidebarOpen]=useState(true);const sidebarWidth=useSidebarWidth(sidebarOpen);const[loading,setLoading]=useState(true);const[data,setData]=useState([]);const[refreshing,setRefreshing]=useState(false);const[loadingMore,setLoadingMore]=useState(false);const[hasMore,setHasMore]=useState(true);const[offset,setOffset]=useState(0);const[totalCount,setTotalCount]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[debouncedSearchTerm,setDebouncedSearchTerm]=useState('');const infiniteScrollRef=useRef(null);const tableContainerRef=useRef(null);const loadingMoreRef=useRef(false);const hasMoreRef=useRef(true);const searchTimeoutRef=useRef(null);const LIMIT=1000;// Records per page\nuseEffect(()=>{fetchData(0,false,'');// Initial load\n},[]);// Debounced search - refetch from Salesforce when search term changes\nuseEffect(()=>{// Clear existing timeout\nif(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}// Set new timeout for debounced search\nsearchTimeoutRef.current=setTimeout(()=>{// Reset pagination when search changes\nsetOffset(0);setHasMore(true);hasMoreRef.current=true;setTotalCount(null);fetchData(0,false,searchTerm);},500);// 500ms debounce\nreturn()=>{if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}};},[searchTerm]);// Debounce search term\nuseEffect(()=>{const timer=setTimeout(()=>{setDebouncedSearchTerm(searchTerm);},500);// Wait 500ms after user stops typing\nreturn()=>clearTimeout(timer);},[searchTerm]);const fetchData=useCallback(async function(){let currentOffset=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let append=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let search=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';if(append){setLoadingMore(true);loadingMoreRef.current=true;}else{setLoading(true);}try{const params={limit:LIMIT,offset:currentOffset};// Add search parameter if provided\nif(search&&search.trim()){params.search=search.trim();}const response=await apiClient.get('/active-contributors-by-qual-step',{timeout:300000,// 5 minutes\nparams:params});if(response.data.success){const newData=response.data.data||[];console.log('[Active Contributors by Qual Step] Received data:',{count:newData.length,sample:newData[0],allHaveContributors:newData.every(item=>(item.activeContributorCount||0)>0)});if(append){setData(prev=>[...prev,...newData]);}else{setData(newData);}setHasMore(response.data.hasMore||false);hasMoreRef.current=response.data.hasMore||false;setOffset(currentOffset+newData.length);// Only update totalCount if it's provided (first page) or if we don't have one yet\nif(response.data.total!==null&&response.data.total!==undefined){setTotalCount(response.data.total);}if(response.data.totalProcessed){console.log(\"Loaded \".concat(response.data.totalProcessed,\" Qualification Steps (offset: \").concat(currentOffset,\", limit: \").concat(LIMIT,\", hasMore: \").concat(response.data.hasMore,\", search: \").concat(search,\")\"));}}else{toast.error(response.data.error||'Failed to fetch Active Contributors by Qual Step data');}}catch(error){var _error$message;if(error.code==='ECONNABORTED'||(_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes('timeout')){toast.error('Request timed out. The dataset is large. Try refreshing or contact support.');}else{var _error$response,_error$response$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message||'Failed to fetch Active Contributors by Qual Step data';toast.error(errorMessage);}}finally{setLoading(false);setLoadingMore(false);setRefreshing(false);loadingMoreRef.current=false;}},[LIMIT]);const loadMoreData=useCallback(()=>{if(loadingMoreRef.current||!hasMoreRef.current){return;}fetchData(offset,true,debouncedSearchTerm);},[offset,searchTerm,fetchData]);// Set up IntersectionObserver for infinite scroll\nuseEffect(()=>{const element=infiniteScrollRef.current;if(!element||!hasMore||loadingMore||loading){return;}const observer=new IntersectionObserver(entries=>{if(entries[0].isIntersecting&&hasMoreRef.current&&!loadingMoreRef.current){loadMoreData();}},{threshold:0.1,rootMargin:'200px'});observer.observe(element);return()=>{observer.disconnect();};},[hasMore,loadingMore,loading,loadMoreData]);const handleRefresh=useCallback(e=>{if(e){e.preventDefault();e.stopPropagation();}setRefreshing(true);setOffset(0);setHasMore(true);setTotalCount(null);hasMoreRef.current=true;fetchData(0,false,debouncedSearchTerm).finally(()=>{setRefreshing(false);});},[searchTerm,fetchData]);const handleSearchChange=useCallback(newSearchTerm=>{setSearchTerm(newSearchTerm);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"\".concat(sidebarWidth,\"px\"),width:\"calc(100% - \".concat(sidebarWidth,\"px)\"),transition:'margin-left 0.2s ease, width 0.2s ease',transition:'margin-left 0.3s ease',width:sidebarOpen?'calc(100% - 320px)':'calc(100% - 80px)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"active-contributors-by-qual-step-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"active-contributors-by-qual-step-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-menu-toggle\",onClick:()=>setSidebarOpen(!sidebarOpen),\"aria-label\":\"Toggle sidebar\",children:/*#__PURE__*/_jsx(Menu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Active Contributors by Qualification Step\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"View active contributors for each Qualification Step\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-user-profile\",children:[/*#__PURE__*/_jsx(BookmarkButton,{pageName:\"Active Contributors by Qualification Step\",pageType:\"page\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:((user===null||user===void 0?void 0:user.email)||'U').charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{size:18})})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"active-contributors-by-qual-step-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"active-contributors-by-qual-step-main-content\",children:/*#__PURE__*/_jsx(ActiveContributorsByQualStepTable,{data:data,loading:loading,onRefresh:handleRefresh,refreshing:refreshing,loadingMore:loadingMore,hasMore:hasMore,totalCount:totalCount,infiniteScrollRef:infiniteScrollRef,tableContainerRef:tableContainerRef,searchTerm:searchTerm,onSearchChange:handleSearchChange})})})]})})]});};export default ActiveContributorsByQualStep;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useAuth","Sidebar","useSidebarWidth","Menu","LogOut","apiClient","toast","BookmarkButton","ActiveContributorsByQualStepTable","jsx","_jsx","jsxs","_jsxs","ActiveContributorsByQualStep","user","logout","sidebarOpen","setSidebarOpen","sidebarWidth","loading","setLoading","data","setData","refreshing","setRefreshing","loadingMore","setLoadingMore","hasMore","setHasMore","offset","setOffset","totalCount","setTotalCount","searchTerm","setSearchTerm","debouncedSearchTerm","setDebouncedSearchTerm","infiniteScrollRef","tableContainerRef","loadingMoreRef","hasMoreRef","searchTimeoutRef","LIMIT","fetchData","current","clearTimeout","setTimeout","timer","currentOffset","arguments","length","undefined","append","search","params","limit","trim","response","get","timeout","success","newData","console","log","count","sample","allHaveContributors","every","item","activeContributorCount","prev","total","totalProcessed","concat","error","_error$message","code","message","includes","_error$response","_error$response$data","errorMessage","loadMoreData","element","observer","IntersectionObserver","entries","isIntersecting","threshold","rootMargin","observe","disconnect","handleRefresh","e","preventDefault","stopPropagation","finally","handleSearchChange","newSearchTerm","className","children","isOpen","toggleSidebar","style","marginLeft","width","transition","onClick","size","pageName","pageType","email","charAt","toUpperCase","title","onRefresh","onSearchChange"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/ActiveContributorsByQualStep.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport useSidebarWidth from '../hooks/useSidebarWidth';\nimport { Menu, LogOut } from 'lucide-react';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport BookmarkButton from '../components/BookmarkButton';\nimport ActiveContributorsByQualStepTable from '../components/ActiveContributorsByQualStep/ActiveContributorsByQualStepTable';\nimport '../styles/ActiveContributorsByQualStep.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\nconst ActiveContributorsByQualStep = () => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const sidebarWidth = useSidebarWidth(sidebarOpen);\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [offset, setOffset] = useState(0);\n  const [totalCount, setTotalCount] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\n  const infiniteScrollRef = useRef(null);\n  const tableContainerRef = useRef(null);\n  const loadingMoreRef = useRef(false);\n  const hasMoreRef = useRef(true);\n  const searchTimeoutRef = useRef(null);\n\n  const LIMIT = 1000; // Records per page\n\n  useEffect(() => {\n    fetchData(0, false, ''); // Initial load\n  }, []);\n\n  // Debounced search - refetch from Salesforce when search term changes\n  useEffect(() => {\n    // Clear existing timeout\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    // Set new timeout for debounced search\n    searchTimeoutRef.current = setTimeout(() => {\n      // Reset pagination when search changes\n      setOffset(0);\n      setHasMore(true);\n      hasMoreRef.current = true;\n      setTotalCount(null);\n      fetchData(0, false, searchTerm);\n    }, 500); // 500ms debounce\n\n    return () => {\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n    };\n  }, [searchTerm]);\n\n  // Debounce search term\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchTerm(searchTerm);\n    }, 500); // Wait 500ms after user stops typing\n\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n\n  const fetchData = useCallback(async (currentOffset = 0, append = false, search = '') => {\n    if (append) {\n      setLoadingMore(true);\n      loadingMoreRef.current = true;\n    } else {\n      setLoading(true);\n    }\n    \n    try {\n      const params = {\n        limit: LIMIT,\n        offset: currentOffset\n      };\n      \n      // Add search parameter if provided\n      if (search && search.trim()) {\n        params.search = search.trim();\n      }\n      \n      const response = await apiClient.get('/active-contributors-by-qual-step', {\n        timeout: 300000, // 5 minutes\n        params: params\n      });\n      if (response.data.success) {\n        const newData = response.data.data || [];\n        console.log('[Active Contributors by Qual Step] Received data:', {\n          count: newData.length,\n          sample: newData[0],\n          allHaveContributors: newData.every(item => (item.activeContributorCount || 0) > 0)\n        });\n        \n        if (append) {\n          setData(prev => [...prev, ...newData]);\n        } else {\n          setData(newData);\n        }\n        setHasMore(response.data.hasMore || false);\n        hasMoreRef.current = response.data.hasMore || false;\n        setOffset(currentOffset + newData.length);\n        // Only update totalCount if it's provided (first page) or if we don't have one yet\n        if (response.data.total !== null && response.data.total !== undefined) {\n          setTotalCount(response.data.total);\n        }\n        \n        if (response.data.totalProcessed) {\n          console.log(`Loaded ${response.data.totalProcessed} Qualification Steps (offset: ${currentOffset}, limit: ${LIMIT}, hasMore: ${response.data.hasMore}, search: ${search})`);\n        }\n      } else {\n        toast.error(response.data.error || 'Failed to fetch Active Contributors by Qual Step data');\n      }\n    } catch (error) {\n      if (error.code === 'ECONNABORTED' || error.message?.includes('timeout')) {\n        toast.error('Request timed out. The dataset is large. Try refreshing or contact support.');\n      } else {\n        const errorMessage = error.response?.data?.error || error.message || 'Failed to fetch Active Contributors by Qual Step data';\n        toast.error(errorMessage);\n      }\n    } finally {\n      setLoading(false);\n      setLoadingMore(false);\n      setRefreshing(false);\n      loadingMoreRef.current = false;\n    }\n  }, [LIMIT]);\n\n  const loadMoreData = useCallback(() => {\n    if (loadingMoreRef.current || !hasMoreRef.current) {\n      return;\n    }\n    fetchData(offset, true, debouncedSearchTerm);\n  }, [offset, searchTerm, fetchData]);\n\n  // Set up IntersectionObserver for infinite scroll\n  useEffect(() => {\n    const element = infiniteScrollRef.current;\n    if (!element || !hasMore || loadingMore || loading) {\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && hasMoreRef.current && !loadingMoreRef.current) {\n          loadMoreData();\n        }\n      },\n      { threshold: 0.1, rootMargin: '200px' }\n    );\n\n    observer.observe(element);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [hasMore, loadingMore, loading, loadMoreData]);\n\n  const handleRefresh = useCallback((e) => {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    setRefreshing(true);\n    setOffset(0);\n    setHasMore(true);\n    setTotalCount(null);\n    hasMoreRef.current = true;\n    fetchData(0, false, debouncedSearchTerm).finally(() => {\n      setRefreshing(false);\n    });\n  }, [searchTerm, fetchData]);\n\n  const handleSearchChange = useCallback((newSearchTerm) => {\n    setSearchTerm(newSearchTerm);\n  }, []);\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      <div style={{ marginLeft: `${sidebarWidth}px`, width: `calc(100% - ${sidebarWidth}px)`, transition: 'margin-left 0.2s ease, width 0.2s ease', transition: 'margin-left 0.3s ease', width: sidebarOpen ? 'calc(100% - 320px)' : 'calc(100% - 80px)' }}>\n        <div className=\"active-contributors-by-qual-step-container\">\n          <div className=\"active-contributors-by-qual-step-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">Active Contributors by Qualification Step</h1>\n                  <p className=\"page-subtitle\">View active contributors for each Qualification Step</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <BookmarkButton pageName=\"Active Contributors by Qualification Step\" pageType=\"page\" />\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"active-contributors-by-qual-step-content\">\n            <div className=\"active-contributors-by-qual-step-main-content\">\n              <ActiveContributorsByQualStepTable \n                data={data}\n                loading={loading}\n                onRefresh={handleRefresh}\n                refreshing={refreshing}\n                loadingMore={loadingMore}\n                hasMore={hasMore}\n                totalCount={totalCount}\n                infiniteScrollRef={infiniteScrollRef}\n                tableContainerRef={tableContainerRef}\n                searchTerm={searchTerm}\n                onSearchChange={handleSearchChange}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ActiveContributorsByQualStep;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}