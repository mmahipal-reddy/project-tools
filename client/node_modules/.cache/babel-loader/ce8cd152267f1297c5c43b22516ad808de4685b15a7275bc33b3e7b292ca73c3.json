{"ast":null,"code":"var _s = $RefreshSig$();\n// Custom hook for reference field search functionality\n\nimport { useState, useRef, useCallback } from 'react';\nimport { searchReference } from '../services/apiService';\nexport const useReferenceSearch = () => {\n  _s();\n  const [referenceSearchTerm, setReferenceSearchTerm] = useState('');\n  const [referenceSearchResults, setReferenceSearchResults] = useState([]);\n  const [searchingReference, setSearchingReference] = useState(false);\n  const [showReferenceDropdown, setShowReferenceDropdown] = useState(false);\n  const referenceSearchRef = useRef(null);\n  const searchTimeoutRef = useRef(null);\n  const performSearch = useCallback(async (referenceObject, searchTerm) => {\n    if (!referenceObject || !searchTerm || searchTerm.trim() === '') {\n      setReferenceSearchResults([]);\n      setShowReferenceDropdown(false);\n      return;\n    }\n    setSearchingReference(true);\n    setShowReferenceDropdown(true);\n    try {\n      const results = await searchReference(referenceObject, searchTerm);\n      setReferenceSearchResults(results);\n    } catch (error) {\n      console.error('Error searching reference:', error);\n      setReferenceSearchResults([]);\n    } finally {\n      setSearchingReference(false);\n    }\n  }, []);\n  const handleSearch = useCallback((referenceObject, value) => {\n    setReferenceSearchTerm(value);\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n    if (!value || value.trim() === '') {\n      setReferenceSearchResults([]);\n      setShowReferenceDropdown(false);\n      return;\n    }\n    searchTimeoutRef.current = setTimeout(() => {\n      performSearch(referenceObject, value);\n    }, 300);\n  }, [performSearch]);\n  return {\n    referenceSearchTerm,\n    setReferenceSearchTerm,\n    referenceSearchResults,\n    setReferenceSearchResults,\n    searchingReference,\n    showReferenceDropdown,\n    setShowReferenceDropdown,\n    referenceSearchRef,\n    handleSearch,\n    performSearch\n  };\n};\n_s(useReferenceSearch, \"rMmke/tdF786UbjN7nUPwlnBNA0=\");","map":{"version":3,"names":["useState","useRef","useCallback","searchReference","useReferenceSearch","_s","referenceSearchTerm","setReferenceSearchTerm","referenceSearchResults","setReferenceSearchResults","searchingReference","setSearchingReference","showReferenceDropdown","setShowReferenceDropdown","referenceSearchRef","searchTimeoutRef","performSearch","referenceObject","searchTerm","trim","results","error","console","handleSearch","value","current","clearTimeout","setTimeout"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/UpdateObjectFields/hooks/useReferenceSearch.js"],"sourcesContent":["// Custom hook for reference field search functionality\n\nimport { useState, useRef, useCallback } from 'react';\nimport { searchReference } from '../services/apiService';\n\nexport const useReferenceSearch = () => {\n  const [referenceSearchTerm, setReferenceSearchTerm] = useState('');\n  const [referenceSearchResults, setReferenceSearchResults] = useState([]);\n  const [searchingReference, setSearchingReference] = useState(false);\n  const [showReferenceDropdown, setShowReferenceDropdown] = useState(false);\n  const referenceSearchRef = useRef(null);\n  const searchTimeoutRef = useRef(null);\n\n  const performSearch = useCallback(async (referenceObject, searchTerm) => {\n    if (!referenceObject || !searchTerm || searchTerm.trim() === '') {\n      setReferenceSearchResults([]);\n      setShowReferenceDropdown(false);\n      return;\n    }\n\n    setSearchingReference(true);\n    setShowReferenceDropdown(true);\n\n    try {\n      const results = await searchReference(referenceObject, searchTerm);\n      setReferenceSearchResults(results);\n    } catch (error) {\n      console.error('Error searching reference:', error);\n      setReferenceSearchResults([]);\n    } finally {\n      setSearchingReference(false);\n    }\n  }, []);\n\n  const handleSearch = useCallback((referenceObject, value) => {\n    setReferenceSearchTerm(value);\n    \n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    if (!value || value.trim() === '') {\n      setReferenceSearchResults([]);\n      setShowReferenceDropdown(false);\n      return;\n    }\n\n    searchTimeoutRef.current = setTimeout(() => {\n      performSearch(referenceObject, value);\n    }, 300);\n  }, [performSearch]);\n\n  return {\n    referenceSearchTerm,\n    setReferenceSearchTerm,\n    referenceSearchResults,\n    setReferenceSearchResults,\n    searchingReference,\n    showReferenceDropdown,\n    setShowReferenceDropdown,\n    referenceSearchRef,\n    handleSearch,\n    performSearch\n  };\n};\n\n"],"mappings":";AAAA;;AAEA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACrD,SAASC,eAAe,QAAQ,wBAAwB;AAExD,OAAO,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtC,MAAM,CAACC,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAClE,MAAM,CAACQ,sBAAsB,EAAEC,yBAAyB,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACxE,MAAM,CAACU,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAACY,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACzE,MAAMc,kBAAkB,GAAGb,MAAM,CAAC,IAAI,CAAC;EACvC,MAAMc,gBAAgB,GAAGd,MAAM,CAAC,IAAI,CAAC;EAErC,MAAMe,aAAa,GAAGd,WAAW,CAAC,OAAOe,eAAe,EAAEC,UAAU,KAAK;IACvE,IAAI,CAACD,eAAe,IAAI,CAACC,UAAU,IAAIA,UAAU,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MAC/DV,yBAAyB,CAAC,EAAE,CAAC;MAC7BI,wBAAwB,CAAC,KAAK,CAAC;MAC/B;IACF;IAEAF,qBAAqB,CAAC,IAAI,CAAC;IAC3BE,wBAAwB,CAAC,IAAI,CAAC;IAE9B,IAAI;MACF,MAAMO,OAAO,GAAG,MAAMjB,eAAe,CAACc,eAAe,EAAEC,UAAU,CAAC;MAClET,yBAAyB,CAACW,OAAO,CAAC;IACpC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClDZ,yBAAyB,CAAC,EAAE,CAAC;IAC/B,CAAC,SAAS;MACRE,qBAAqB,CAAC,KAAK,CAAC;IAC9B;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,YAAY,GAAGrB,WAAW,CAAC,CAACe,eAAe,EAAEO,KAAK,KAAK;IAC3DjB,sBAAsB,CAACiB,KAAK,CAAC;IAE7B,IAAIT,gBAAgB,CAACU,OAAO,EAAE;MAC5BC,YAAY,CAACX,gBAAgB,CAACU,OAAO,CAAC;IACxC;IAEA,IAAI,CAACD,KAAK,IAAIA,KAAK,CAACL,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACjCV,yBAAyB,CAAC,EAAE,CAAC;MAC7BI,wBAAwB,CAAC,KAAK,CAAC;MAC/B;IACF;IAEAE,gBAAgB,CAACU,OAAO,GAAGE,UAAU,CAAC,MAAM;MAC1CX,aAAa,CAACC,eAAe,EAAEO,KAAK,CAAC;IACvC,CAAC,EAAE,GAAG,CAAC;EACT,CAAC,EAAE,CAACR,aAAa,CAAC,CAAC;EAEnB,OAAO;IACLV,mBAAmB;IACnBC,sBAAsB;IACtBC,sBAAsB;IACtBC,yBAAyB;IACzBC,kBAAkB;IAClBE,qBAAqB;IACrBC,wBAAwB;IACxBC,kBAAkB;IAClBS,YAAY;IACZP;EACF,CAAC;AACH,CAAC;AAACX,EAAA,CA3DWD,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}