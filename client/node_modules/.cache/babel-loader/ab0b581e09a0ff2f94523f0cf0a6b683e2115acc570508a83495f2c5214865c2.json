{"ast":null,"code":"import React from'react';import{ChevronUp,ChevronDown,Download}from'lucide-react';import{exportData}from'../../../utils/crossFeature/exportService';import PreviewTable from'./PreviewTable';import'../../../styles/PreviewPanel.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PreviewPanel=_ref=>{let{data,loading,error,expanded,onToggle,reportName,reportConfig}=_ref;// Always show the header so users can expand/collapse\n// Only hide completely if there's no data, no loading, and no error\nconst hasContent=data||loading||error;// If collapsed and no content, still show a minimal header to allow expansion\nif(!expanded&&!hasContent){return/*#__PURE__*/_jsx(\"div\",{className:\"preview-panel collapsed\",children:/*#__PURE__*/_jsx(\"div\",{className:\"preview-panel-header\",onClick:onToggle,children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-header-left\",children:[/*#__PURE__*/_jsx(ChevronUp,{size:18}),/*#__PURE__*/_jsx(\"h3\",{children:\"Preview\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-hint\",children:\"(Click to expand)\"})]})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"preview-panel \".concat(expanded?'expanded':'collapsed'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-panel-header\",onClick:onToggle,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-header-left\",children:[expanded?/*#__PURE__*/_jsx(ChevronDown,{size:18}):/*#__PURE__*/_jsx(ChevronUp,{size:18}),/*#__PURE__*/_jsx(\"h3\",{children:\"Preview\"}),data&&/*#__PURE__*/_jsxs(\"span\",{className:\"preview-count\",children:[\"(\",data.length,\" rows)\"]}),loading&&/*#__PURE__*/_jsx(\"span\",{className:\"preview-status\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"preview-status error\",children:\"Error\"})]}),expanded&&data&&data.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"preview-actions\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"preview-action-btn\",onClick:e=>{e.stopPropagation();exportData(data,reportName||'report','excel');},title:\"Export to Excel\",children:[/*#__PURE__*/_jsx(Download,{size:16}),\" Export\"]})})]}),expanded&&/*#__PURE__*/_jsx(\"div\",{className:\"preview-panel-content\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"preview-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading preview...\"})]}):error?/*#__PURE__*/_jsx(\"div\",{className:\"preview-error\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]})}):!data||data.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"preview-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No data to preview. Add fields and configure your report.\"})}):/*#__PURE__*/_jsx(PreviewTable,{data:data.slice(0,10)})})]});};export default PreviewPanel;","map":{"version":3,"names":["React","ChevronUp","ChevronDown","Download","exportData","PreviewTable","jsx","_jsx","jsxs","_jsxs","PreviewPanel","_ref","data","loading","error","expanded","onToggle","reportName","reportConfig","hasContent","className","children","onClick","size","concat","length","e","stopPropagation","title","slice"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/components/AdvancedReportBuilder/PreviewPanel/PreviewPanel.js"],"sourcesContent":["import React from 'react';\nimport { ChevronUp, ChevronDown, Download } from 'lucide-react';\nimport { exportData } from '../../../utils/crossFeature/exportService';\nimport PreviewTable from './PreviewTable';\nimport '../../../styles/PreviewPanel.css';\n\nconst PreviewPanel = ({ data, loading, error, expanded, onToggle, reportName, reportConfig }) => {\n  // Always show the header so users can expand/collapse\n  // Only hide completely if there's no data, no loading, and no error\n  const hasContent = data || loading || error;\n  \n  // If collapsed and no content, still show a minimal header to allow expansion\n  if (!expanded && !hasContent) {\n    return (\n      <div className=\"preview-panel collapsed\">\n        <div className=\"preview-panel-header\" onClick={onToggle}>\n          <div className=\"preview-header-left\">\n            <ChevronUp size={18} />\n            <h3>Preview</h3>\n            <span className=\"preview-hint\">(Click to expand)</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`preview-panel ${expanded ? 'expanded' : 'collapsed'}`}>\n      <div className=\"preview-panel-header\" onClick={onToggle}>\n        <div className=\"preview-header-left\">\n          {expanded ? <ChevronDown size={18} /> : <ChevronUp size={18} />}\n          <h3>Preview</h3>\n          {data && <span className=\"preview-count\">({data.length} rows)</span>}\n          {loading && <span className=\"preview-status\">Loading...</span>}\n          {error && <span className=\"preview-status error\">Error</span>}\n        </div>\n        {expanded && data && data.length > 0 && (\n          <div className=\"preview-actions\">\n            <button\n              className=\"preview-action-btn\"\n              onClick={(e) => {\n                e.stopPropagation();\n                exportData(data, reportName || 'report', 'excel');\n              }}\n              title=\"Export to Excel\"\n            >\n              <Download size={16} /> Export\n            </button>\n          </div>\n        )}\n      </div>\n\n      {expanded && (\n        <div className=\"preview-panel-content\">\n          {loading ? (\n            <div className=\"preview-loading\">\n              <div className=\"spinner\"></div>\n              <p>Loading preview...</p>\n            </div>\n          ) : error ? (\n            <div className=\"preview-error\">\n              <p>Error: {error}</p>\n            </div>\n          ) : !data || data.length === 0 ? (\n            <div className=\"preview-empty\">\n              <p>No data to preview. Add fields and configure your report.</p>\n            </div>\n          ) : (\n            <PreviewTable data={data.slice(0, 10)} />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PreviewPanel;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}