{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Eye,Edit,Trash2,FileText,Search}from'lucide-react';import apiClient from'../../config/api';import toast from'react-hot-toast';import AdvancedReportView from'./AdvancedReportView';import'../../styles/AdvancedReportsList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdvancedReportsList=_ref=>{let{onEditReport}=_ref;const[savedReports,setSavedReports]=useState([]);const[selectedReport,setSelectedReport]=useState(null);const[viewMode,setViewMode]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{loadSavedReports();},[]);const loadSavedReports=()=>{try{const saved=localStorage.getItem('advanced_saved_reports');if(saved){setSavedReports(JSON.parse(saved));}}catch(error){console.error('Error loading saved reports:',error);}};const handleView=report=>{setSelectedReport(report);setViewMode(true);};const handleEdit=report=>{if(onEditReport){onEditReport(report);}};const handleDelete=reportId=>{if(window.confirm('Are you sure you want to delete this report?')){try{const updated=savedReports.filter(r=>r.id!==reportId);localStorage.setItem('advanced_saved_reports',JSON.stringify(updated));setSavedReports(updated);toast.success('Report deleted successfully');if(selectedReport&&selectedReport.id===reportId){setSelectedReport(null);setViewMode(false);}}catch(error){console.error('Error deleting report:',error);toast.error('Failed to delete report');}}};const filteredReports=savedReports.filter(report=>{var _report$name,_report$category;return searchTerm===''||((_report$name=report.name)===null||_report$name===void 0?void 0:_report$name.toLowerCase().includes(searchTerm.toLowerCase()))||((_report$category=report.category)===null||_report$category===void 0?void 0:_report$category.toLowerCase().includes(searchTerm.toLowerCase()));});if(viewMode&&selectedReport){return/*#__PURE__*/_jsx(AdvancedReportView,{report:selectedReport,onClose:()=>{setViewMode(false);setSelectedReport(null);},onEdit:()=>{handleEdit(selectedReport);}});}return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-reports-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reports-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Saved Reports\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"reports-search\",children:[/*#__PURE__*/_jsx(Search,{size:16}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search reports...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})]}),filteredReports.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"reports-empty\",children:[/*#__PURE__*/_jsx(FileText,{size:48}),/*#__PURE__*/_jsx(\"h3\",{children:\"No saved reports\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Create a report in the Builder tab to get started\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"reports-grid\",children:filteredReports.map(report=>{var _report$fields;return/*#__PURE__*/_jsxs(\"div\",{className:\"report-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-card-header\",children:[/*#__PURE__*/_jsx(FileText,{size:20}),/*#__PURE__*/_jsx(\"h3\",{children:report.name||'Unnamed Report'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"report-category\",children:report.category||'Uncategorized'}),/*#__PURE__*/_jsxs(\"p\",{className:\"report-object\",children:[\"Object: \",report.objectType||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{className:\"report-fields\",children:[((_report$fields=report.fields)===null||_report$fields===void 0?void 0:_report$fields.length)||0,\" field(s) selected\"]}),report.updatedAt&&/*#__PURE__*/_jsxs(\"p\",{className:\"report-date\",children:[\"Updated: \",new Date(report.updatedAt).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-card-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"report-action-btn view-btn\",onClick:()=>handleView(report),children:[/*#__PURE__*/_jsx(Eye,{size:16}),\" View\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"report-action-btn edit-btn\",onClick:()=>handleEdit(report),children:[/*#__PURE__*/_jsx(Edit,{size:16}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"report-action-btn delete-btn\",onClick:()=>handleDelete(report.id),children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\" Delete\"]})]})]},report.id);})})]});};export default AdvancedReportsList;","map":{"version":3,"names":["React","useState","useEffect","Eye","Edit","Trash2","FileText","Search","apiClient","toast","AdvancedReportView","jsx","_jsx","jsxs","_jsxs","AdvancedReportsList","_ref","onEditReport","savedReports","setSavedReports","selectedReport","setSelectedReport","viewMode","setViewMode","searchTerm","setSearchTerm","loading","setLoading","loadSavedReports","saved","localStorage","getItem","JSON","parse","error","console","handleView","report","handleEdit","handleDelete","reportId","window","confirm","updated","filter","r","id","setItem","stringify","success","filteredReports","_report$name","_report$category","name","toLowerCase","includes","category","onClose","onEdit","className","children","size","type","placeholder","value","onChange","e","target","length","map","_report$fields","objectType","fields","updatedAt","Date","toLocaleDateString","onClick"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/AdvancedReportsList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Eye, Edit, Trash2, FileText, Search } from 'lucide-react';\nimport apiClient from '../../config/api';\nimport toast from 'react-hot-toast';\nimport AdvancedReportView from './AdvancedReportView';\nimport '../../styles/AdvancedReportsList.css';\n\nconst AdvancedReportsList = ({ onEditReport }) => {\n  const [savedReports, setSavedReports] = useState([]);\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [viewMode, setViewMode] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    loadSavedReports();\n  }, []);\n\n  const loadSavedReports = () => {\n    try {\n      const saved = localStorage.getItem('advanced_saved_reports');\n      if (saved) {\n        setSavedReports(JSON.parse(saved));\n      }\n    } catch (error) {\n      console.error('Error loading saved reports:', error);\n    }\n  };\n\n  const handleView = (report) => {\n    setSelectedReport(report);\n    setViewMode(true);\n  };\n\n  const handleEdit = (report) => {\n    if (onEditReport) {\n      onEditReport(report);\n    }\n  };\n\n  const handleDelete = (reportId) => {\n    if (window.confirm('Are you sure you want to delete this report?')) {\n      try {\n        const updated = savedReports.filter(r => r.id !== reportId);\n        localStorage.setItem('advanced_saved_reports', JSON.stringify(updated));\n        setSavedReports(updated);\n        toast.success('Report deleted successfully');\n        if (selectedReport && selectedReport.id === reportId) {\n          setSelectedReport(null);\n          setViewMode(false);\n        }\n      } catch (error) {\n        console.error('Error deleting report:', error);\n        toast.error('Failed to delete report');\n      }\n    }\n  };\n\n  const filteredReports = savedReports.filter(report =>\n    searchTerm === '' ||\n    report.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    report.category?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  if (viewMode && selectedReport) {\n    return (\n      <AdvancedReportView\n        report={selectedReport}\n        onClose={() => {\n          setViewMode(false);\n          setSelectedReport(null);\n        }}\n        onEdit={() => {\n          handleEdit(selectedReport);\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className=\"advanced-reports-list\">\n      <div className=\"reports-header\">\n        <h2>Saved Reports</h2>\n        <div className=\"reports-search\">\n          <Search size={16} />\n          <input\n            type=\"text\"\n            placeholder=\"Search reports...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n\n      {filteredReports.length === 0 ? (\n        <div className=\"reports-empty\">\n          <FileText size={48} />\n          <h3>No saved reports</h3>\n          <p>Create a report in the Builder tab to get started</p>\n        </div>\n      ) : (\n        <div className=\"reports-grid\">\n          {filteredReports.map(report => (\n            <div key={report.id} className=\"report-card\">\n              <div className=\"report-card-header\">\n                <FileText size={20} />\n                <h3>{report.name || 'Unnamed Report'}</h3>\n              </div>\n              <div className=\"report-card-body\">\n                <p className=\"report-category\">{report.category || 'Uncategorized'}</p>\n                <p className=\"report-object\">Object: {report.objectType || 'N/A'}</p>\n                <p className=\"report-fields\">\n                  {report.fields?.length || 0} field(s) selected\n                </p>\n                {report.updatedAt && (\n                  <p className=\"report-date\">\n                    Updated: {new Date(report.updatedAt).toLocaleDateString()}\n                  </p>\n                )}\n              </div>\n              <div className=\"report-card-actions\">\n                <button\n                  className=\"report-action-btn view-btn\"\n                  onClick={() => handleView(report)}\n                >\n                  <Eye size={16} /> View\n                </button>\n                <button\n                  className=\"report-action-btn edit-btn\"\n                  onClick={() => handleEdit(report)}\n                >\n                  <Edit size={16} /> Edit\n                </button>\n                <button\n                  className=\"report-action-btn delete-btn\"\n                  onClick={() => handleDelete(report.id)}\n                >\n                  <Trash2 size={16} /> Delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdvancedReportsList;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}