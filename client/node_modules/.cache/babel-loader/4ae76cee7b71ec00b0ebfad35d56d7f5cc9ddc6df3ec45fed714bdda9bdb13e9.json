{"ast":null,"code":"import React from'react';import{Download,Loader,Search,X}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MFALogTable=_ref=>{let{logs,loading,availableFields,searchTerm='',onSearchChange}=_ref;const getFieldLabel=fieldName=>{const labelMap={'Contact__c':'Contributor','Name':'MFA Verification Log Name','Flow__c':'Flow','Status__c':'Status','IP_Address__c':'IP Address'};if(labelMap[fieldName]){return labelMap[fieldName];}const field=availableFields.find(f=>f.name===fieldName);return field?field.label:fieldName;};const getFieldValue=(logItem,fieldName)=>{if(fieldName==='Contact__c'){return logItem['Contact__r.Name']||logItem[fieldName]||'';}// Handle field name variations\nif(fieldName==='IP_Address__c'&&!logItem[fieldName]){return logItem['IPAddress__c']||'';}return logItem[fieldName]||'';};const formatValue=value=>{if(value===null||value===undefined)return'';if(typeof value==='boolean')return value?'Yes':'No';return String(value);};const formatValueForCSV=value=>{if(value===null||value===undefined)return'';if(typeof value==='boolean')return value?'Yes':'No';return String(value);};const handleExportCSV=()=>{const headers=['Contributor','MFA Verification Log Name','Flow','Status','IP Address'];const fieldNames=['Contact__c','Name','Flow__c','Status__c','IP_Address__c'];const csvRows=[headers.join(',')];logs.forEach(log=>{const row=fieldNames.map(fieldName=>{const value=getFieldValue(log,fieldName);const formattedValue=formatValueForCSV(value);// Escape commas and quotes in CSV\nif(formattedValue.includes(',')||formattedValue.includes('\"')||formattedValue.includes('\\n')){return\"\\\"\".concat(formattedValue.replace(/\"/g,'\"\"'),\"\\\"\");}return formattedValue;});csvRows.push(row.join(','));});const csvContent=csvRows.join('\\n');const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',\"mfa_verification_logs_\".concat(new Date().toISOString().split('T')[0],\".csv\"));link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};const defaultColumns=['Contact__c','Name','Flow__c','Status__c','IP_Address__c'];if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-loading\",children:[/*#__PURE__*/_jsx(Loader,{className:\"spinning\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading MFA Verification Logs...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"MFA Verification Logs (\",logs.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',alignItems:'center'},children:[onSearchChange&&/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(Search,{size:16,className:\"search-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search across all columns...\",value:searchTerm,onChange:e=>onSearchChange(e.target.value),className:\"search-input\"}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onSearchChange(''),className:\"search-clear-btn\",title:\"Clear search\",style:{background:'none',border:'none',cursor:'pointer',padding:'4px'},children:/*#__PURE__*/_jsx(X,{size:14})})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-export-csv\",onClick:handleExportCSV,title:\"Export to CSV\",children:[/*#__PURE__*/_jsx(Download,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"Export CSV\"})]})]})]}),logs.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"case-table-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No MFA Verification Logs found\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"case-table-scroll-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"case-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:defaultColumns.map(column=>/*#__PURE__*/_jsx(\"th\",{children:getFieldLabel(column)},column))})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map(log=>/*#__PURE__*/_jsx(\"tr\",{className:\"case-table-row\",children:defaultColumns.map(column=>/*#__PURE__*/_jsx(\"td\",{children:formatValue(getFieldValue(log,column))},column))},log.Id))})]})})]});};export default MFALogTable;","map":{"version":3,"names":["React","Download","Loader","Search","X","jsx","_jsx","jsxs","_jsxs","MFALogTable","_ref","logs","loading","availableFields","searchTerm","onSearchChange","getFieldLabel","fieldName","labelMap","field","find","f","name","label","getFieldValue","logItem","formatValue","value","undefined","String","formatValueForCSV","handleExportCSV","headers","fieldNames","csvRows","join","forEach","log","row","map","formattedValue","includes","concat","replace","push","csvContent","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","Date","toISOString","split","style","visibility","body","appendChild","click","removeChild","defaultColumns","className","children","size","length","display","gap","alignItems","placeholder","onChange","e","target","onClick","title","background","border","cursor","padding","column","Id"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/MFAVerificationLogs/MFALogTable.js"],"sourcesContent":["import React from 'react';\nimport { Download, Loader, Search, X } from 'lucide-react';\n\nconst MFALogTable = ({ logs, loading, availableFields, searchTerm = '', onSearchChange }) => {\n  const getFieldLabel = (fieldName) => {\n    const labelMap = {\n      'Contact__c': 'Contributor',\n      'Name': 'MFA Verification Log Name',\n      'Flow__c': 'Flow',\n      'Status__c': 'Status',\n      'IP_Address__c': 'IP Address'\n    };\n    \n    if (labelMap[fieldName]) {\n      return labelMap[fieldName];\n    }\n    \n    const field = availableFields.find(f => f.name === fieldName);\n    return field ? field.label : fieldName;\n  };\n\n  const getFieldValue = (logItem, fieldName) => {\n    if (fieldName === 'Contact__c') {\n      return logItem['Contact__r.Name'] || logItem[fieldName] || '';\n    }\n    \n    // Handle field name variations\n    if (fieldName === 'IP_Address__c' && !logItem[fieldName]) {\n      return logItem['IPAddress__c'] || '';\n    }\n    \n    return logItem[fieldName] || '';\n  };\n\n  const formatValue = (value) => {\n    if (value === null || value === undefined) return '';\n    if (typeof value === 'boolean') return value ? 'Yes' : 'No';\n    return String(value);\n  };\n\n  const formatValueForCSV = (value) => {\n    if (value === null || value === undefined) return '';\n    if (typeof value === 'boolean') return value ? 'Yes' : 'No';\n    return String(value);\n  };\n\n  const handleExportCSV = () => {\n    const headers = [\n      'Contributor',\n      'MFA Verification Log Name',\n      'Flow',\n      'Status',\n      'IP Address'\n    ];\n    \n    const fieldNames = [\n      'Contact__c',\n      'Name',\n      'Flow__c',\n      'Status__c',\n      'IP_Address__c'\n    ];\n    \n    const csvRows = [headers.join(',')];\n    \n    logs.forEach(log => {\n      const row = fieldNames.map(fieldName => {\n        const value = getFieldValue(log, fieldName);\n        const formattedValue = formatValueForCSV(value);\n        // Escape commas and quotes in CSV\n        if (formattedValue.includes(',') || formattedValue.includes('\"') || formattedValue.includes('\\n')) {\n          return `\"${formattedValue.replace(/\"/g, '\"\"')}\"`;\n        }\n        return formattedValue;\n      });\n      csvRows.push(row.join(','));\n    });\n    \n    const csvContent = csvRows.join('\\n');\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `mfa_verification_logs_${new Date().toISOString().split('T')[0]}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const defaultColumns = [\n    'Contact__c',\n    'Name',\n    'Flow__c',\n    'Status__c',\n    'IP_Address__c'\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"case-table-loading\">\n        <Loader className=\"spinning\" size={24} />\n        <p>Loading MFA Verification Logs...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"case-table-container\">\n      <div className=\"case-table-header\">\n        <h3>MFA Verification Logs ({logs.length})</h3>\n        <div style={{ display: 'flex', gap: '12px', alignItems: 'center' }}>\n          {onSearchChange && (\n            <div className=\"search-container\">\n              <Search size={16} className=\"search-icon\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search across all columns...\"\n                value={searchTerm}\n                onChange={(e) => onSearchChange(e.target.value)}\n                className=\"search-input\"\n              />\n              {searchTerm && (\n                <button\n                  onClick={() => onSearchChange('')}\n                  className=\"search-clear-btn\"\n                  title=\"Clear search\"\n                  style={{ background: 'none', border: 'none', cursor: 'pointer', padding: '4px' }}\n                >\n                  <X size={14} />\n                </button>\n              )}\n            </div>\n          )}\n          <button\n            className=\"btn-export-csv\"\n            onClick={handleExportCSV}\n            title=\"Export to CSV\"\n          >\n            <Download size={14} />\n            <span>Export CSV</span>\n          </button>\n        </div>\n      </div>\n\n      {logs.length === 0 ? (\n        <div className=\"case-table-empty\">\n          <p>No MFA Verification Logs found</p>\n        </div>\n      ) : (\n        <div className=\"case-table-scroll-wrapper\">\n          <table className=\"case-table\">\n            <thead>\n              <tr>\n                {defaultColumns.map(column => (\n                  <th key={column}>\n                    {getFieldLabel(column)}\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {logs.map((log) => (\n                <tr key={log.Id} className=\"case-table-row\">\n                  {defaultColumns.map(column => (\n                    <td key={column}>\n                      {formatValue(getFieldValue(log, column))}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MFALogTable;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}