{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Cursor/ProjectSetup/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useCallback}from'react';export const useQueryBuilder=()=>{const[reportConfig,setReportConfig]=useState({name:'',objectType:'',fields:[],relationships:[],subqueries:[],filters:[],sortBy:null,sortOrder:'ASC',groupBy:null,limit:10000,category:'Uncategorized'});const updateConfig=useCallback(updates=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),updates));},[]);const addField=useCallback(field=>{setReportConfig(prev=>{if(prev.fields.some(f=>f.name===field.name)){return prev;}return _objectSpread(_objectSpread({},prev),{},{fields:[...prev.fields,field]});});},[]);const removeField=useCallback(fieldName=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{fields:prev.fields.filter(f=>f.name!==fieldName)}));},[]);const addRelationship=useCallback(relationship=>{setReportConfig(prev=>{if(prev.relationships.some(r=>r.relationshipName===relationship.relationshipName)){return prev;}return _objectSpread(_objectSpread({},prev),{},{relationships:[...prev.relationships,relationship]});});},[]);const removeRelationship=useCallback(relationshipName=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{relationships:prev.relationships.filter(r=>r.relationshipName!==relationshipName),// Also remove fields from this relationship\nfields:prev.fields.filter(f=>!f.startsWith(relationshipName))}));},[]);const addSubquery=useCallback(subquery=>{setReportConfig(prev=>{if(prev.subqueries.some(s=>s.relationshipName===subquery.relationshipName)){return prev;}return _objectSpread(_objectSpread({},prev),{},{subqueries:[...prev.subqueries,subquery]});});},[]);const removeSubquery=useCallback(relationshipName=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{subqueries:prev.subqueries.filter(s=>s.relationshipName!==relationshipName),// Also remove fields from this subquery\nfields:prev.fields.filter(f=>!f.startsWith(\"SUBQUERY:\".concat(relationshipName)))}));},[]);const addFilter=useCallback(filter=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{filters:[...prev.filters,filter]}));},[]);const removeFilter=useCallback(filterIndex=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{filters:prev.filters.filter((_,index)=>index!==filterIndex)}));},[]);const updateSort=useCallback(function(sortBy){let sortOrder=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'ASC';setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{sortBy,sortOrder}));},[]);const updateGroupBy=useCallback(groupBy=>{setReportConfig(prev=>_objectSpread(_objectSpread({},prev),{},{groupBy}));},[]);return{reportConfig,updateConfig,addField,removeField,addRelationship,removeRelationship,addSubquery,removeSubquery,addFilter,removeFilter,updateSort,updateGroupBy};};","map":{"version":3,"names":["useState","useCallback","useQueryBuilder","reportConfig","setReportConfig","name","objectType","fields","relationships","subqueries","filters","sortBy","sortOrder","groupBy","limit","category","updateConfig","updates","prev","_objectSpread","addField","field","some","f","removeField","fieldName","filter","addRelationship","relationship","r","relationshipName","removeRelationship","startsWith","addSubquery","subquery","s","removeSubquery","concat","addFilter","removeFilter","filterIndex","_","index","updateSort","arguments","length","undefined","updateGroupBy"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/hooks/useQueryBuilder.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nexport const useQueryBuilder = () => {\n  const [reportConfig, setReportConfig] = useState({\n    name: '',\n    objectType: '',\n    fields: [],\n    relationships: [],\n    subqueries: [],\n    filters: [],\n    sortBy: null,\n    sortOrder: 'ASC',\n    groupBy: null,\n    limit: 10000,\n    category: 'Uncategorized'\n  });\n\n  const updateConfig = useCallback((updates) => {\n    setReportConfig(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  const addField = useCallback((field) => {\n    setReportConfig(prev => {\n      if (prev.fields.some(f => f.name === field.name)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        fields: [...prev.fields, field]\n      };\n    });\n  }, []);\n\n  const removeField = useCallback((fieldName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      fields: prev.fields.filter(f => f.name !== fieldName)\n    }));\n  }, []);\n\n  const addRelationship = useCallback((relationship) => {\n    setReportConfig(prev => {\n      if (prev.relationships.some(r => r.relationshipName === relationship.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        relationships: [...prev.relationships, relationship]\n      };\n    });\n  }, []);\n\n  const removeRelationship = useCallback((relationshipName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      relationships: prev.relationships.filter(r => r.relationshipName !== relationshipName),\n      // Also remove fields from this relationship\n      fields: prev.fields.filter(f => !f.startsWith(relationshipName))\n    }));\n  }, []);\n\n  const addSubquery = useCallback((subquery) => {\n    setReportConfig(prev => {\n      if (prev.subqueries.some(s => s.relationshipName === subquery.relationshipName)) {\n        return prev;\n      }\n      return {\n        ...prev,\n        subqueries: [...prev.subqueries, subquery]\n      };\n    });\n  }, []);\n\n  const removeSubquery = useCallback((relationshipName) => {\n    setReportConfig(prev => ({\n      ...prev,\n      subqueries: prev.subqueries.filter(s => s.relationshipName !== relationshipName),\n      // Also remove fields from this subquery\n      fields: prev.fields.filter(f => !f.startsWith(`SUBQUERY:${relationshipName}`))\n    }));\n  }, []);\n\n  const addFilter = useCallback((filter) => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: [...prev.filters, filter]\n    }));\n  }, []);\n\n  const removeFilter = useCallback((filterIndex) => {\n    setReportConfig(prev => ({\n      ...prev,\n      filters: prev.filters.filter((_, index) => index !== filterIndex)\n    }));\n  }, []);\n\n  const updateSort = useCallback((sortBy, sortOrder = 'ASC') => {\n    setReportConfig(prev => ({\n      ...prev,\n      sortBy,\n      sortOrder\n    }));\n  }, []);\n\n  const updateGroupBy = useCallback((groupBy) => {\n    setReportConfig(prev => ({\n      ...prev,\n      groupBy\n    }));\n  }, []);\n\n  return {\n    reportConfig,\n    updateConfig,\n    addField,\n    removeField,\n    addRelationship,\n    removeRelationship,\n    addSubquery,\n    removeSubquery,\n    addFilter,\n    removeFilter,\n    updateSort,\n    updateGroupBy\n  };\n};\n\n"],"mappings":"6HAAA,OAASA,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAE7C,MAAO,MAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CACnC,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGJ,QAAQ,CAAC,CAC/CK,IAAI,CAAE,EAAE,CACRC,UAAU,CAAE,EAAE,CACdC,MAAM,CAAE,EAAE,CACVC,aAAa,CAAE,EAAE,CACjBC,UAAU,CAAE,EAAE,CACdC,OAAO,CAAE,EAAE,CACXC,MAAM,CAAE,IAAI,CACZC,SAAS,CAAE,KAAK,CAChBC,OAAO,CAAE,IAAI,CACbC,KAAK,CAAE,KAAK,CACZC,QAAQ,CAAE,eACZ,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAGf,WAAW,CAAEgB,OAAO,EAAK,CAC5Cb,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,EAAKD,OAAO,CAAG,CAAC,CACpD,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,QAAQ,CAAGnB,WAAW,CAAEoB,KAAK,EAAK,CACtCjB,eAAe,CAACc,IAAI,EAAI,CACtB,GAAIA,IAAI,CAACX,MAAM,CAACe,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAClB,IAAI,GAAKgB,KAAK,CAAChB,IAAI,CAAC,CAAE,CAChD,MAAO,CAAAa,IAAI,CACb,CACA,OAAAC,aAAA,CAAAA,aAAA,IACKD,IAAI,MACPX,MAAM,CAAE,CAAC,GAAGW,IAAI,CAACX,MAAM,CAAEc,KAAK,CAAC,GAEnC,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,WAAW,CAAGvB,WAAW,CAAEwB,SAAS,EAAK,CAC7CrB,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACPX,MAAM,CAAEW,IAAI,CAACX,MAAM,CAACmB,MAAM,CAACH,CAAC,EAAIA,CAAC,CAAClB,IAAI,GAAKoB,SAAS,CAAC,EACrD,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,eAAe,CAAG1B,WAAW,CAAE2B,YAAY,EAAK,CACpDxB,eAAe,CAACc,IAAI,EAAI,CACtB,GAAIA,IAAI,CAACV,aAAa,CAACc,IAAI,CAACO,CAAC,EAAIA,CAAC,CAACC,gBAAgB,GAAKF,YAAY,CAACE,gBAAgB,CAAC,CAAE,CACtF,MAAO,CAAAZ,IAAI,CACb,CACA,OAAAC,aAAA,CAAAA,aAAA,IACKD,IAAI,MACPV,aAAa,CAAE,CAAC,GAAGU,IAAI,CAACV,aAAa,CAAEoB,YAAY,CAAC,GAExD,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,kBAAkB,CAAG9B,WAAW,CAAE6B,gBAAgB,EAAK,CAC3D1B,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACPV,aAAa,CAAEU,IAAI,CAACV,aAAa,CAACkB,MAAM,CAACG,CAAC,EAAIA,CAAC,CAACC,gBAAgB,GAAKA,gBAAgB,CAAC,CACtF;AACAvB,MAAM,CAAEW,IAAI,CAACX,MAAM,CAACmB,MAAM,CAACH,CAAC,EAAI,CAACA,CAAC,CAACS,UAAU,CAACF,gBAAgB,CAAC,CAAC,EAChE,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,WAAW,CAAGhC,WAAW,CAAEiC,QAAQ,EAAK,CAC5C9B,eAAe,CAACc,IAAI,EAAI,CACtB,GAAIA,IAAI,CAACT,UAAU,CAACa,IAAI,CAACa,CAAC,EAAIA,CAAC,CAACL,gBAAgB,GAAKI,QAAQ,CAACJ,gBAAgB,CAAC,CAAE,CAC/E,MAAO,CAAAZ,IAAI,CACb,CACA,OAAAC,aAAA,CAAAA,aAAA,IACKD,IAAI,MACPT,UAAU,CAAE,CAAC,GAAGS,IAAI,CAACT,UAAU,CAAEyB,QAAQ,CAAC,GAE9C,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,cAAc,CAAGnC,WAAW,CAAE6B,gBAAgB,EAAK,CACvD1B,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACPT,UAAU,CAAES,IAAI,CAACT,UAAU,CAACiB,MAAM,CAACS,CAAC,EAAIA,CAAC,CAACL,gBAAgB,GAAKA,gBAAgB,CAAC,CAChF;AACAvB,MAAM,CAAEW,IAAI,CAACX,MAAM,CAACmB,MAAM,CAACH,CAAC,EAAI,CAACA,CAAC,CAACS,UAAU,aAAAK,MAAA,CAAaP,gBAAgB,CAAE,CAAC,CAAC,EAC9E,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,SAAS,CAAGrC,WAAW,CAAEyB,MAAM,EAAK,CACxCtB,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACPR,OAAO,CAAE,CAAC,GAAGQ,IAAI,CAACR,OAAO,CAAEgB,MAAM,CAAC,EAClC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAa,YAAY,CAAGtC,WAAW,CAAEuC,WAAW,EAAK,CAChDpC,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACPR,OAAO,CAAEQ,IAAI,CAACR,OAAO,CAACgB,MAAM,CAAC,CAACe,CAAC,CAAEC,KAAK,GAAKA,KAAK,GAAKF,WAAW,CAAC,EACjE,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,UAAU,CAAG1C,WAAW,CAAC,SAACU,MAAM,CAAwB,IAAtB,CAAAC,SAAS,CAAAgC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CACvDxC,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACPP,MAAM,CACNC,SAAS,EACT,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAmC,aAAa,CAAG9C,WAAW,CAAEY,OAAO,EAAK,CAC7CT,eAAe,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACPL,OAAO,EACP,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACLV,YAAY,CACZa,YAAY,CACZI,QAAQ,CACRI,WAAW,CACXG,eAAe,CACfI,kBAAkB,CAClBE,WAAW,CACXG,cAAc,CACdE,SAAS,CACTC,YAAY,CACZI,UAAU,CACVI,aACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}