{"ast":null,"code":"var _jsxFileName = \"/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/QueryCanvas/QueryCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport ObjectCard from './cards/ObjectCard';\nimport RelationshipCard from './cards/RelationshipCard';\nimport SubqueryCard from './cards/SubqueryCard';\nimport FilterCard from './cards/FilterCard';\nimport SortGroupCard from './cards/SortGroupCard';\nimport EmptyState from './EmptyState';\nimport InfoModal from '../InfoModal';\nimport '../../../styles/QueryCanvas.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QueryCanvas = ({\n  reportConfig,\n  // Legacy single-object methods\n  onFieldAdd,\n  onFieldRemove,\n  onRelationshipAdd,\n  onRelationshipRemove,\n  onSubqueryAdd,\n  onSubqueryRemove,\n  onFilterAdd,\n  onFilterRemove,\n  onSortUpdate,\n  onGroupByUpdate,\n  onConfigUpdate,\n  // New multi-object methods\n  onObjectAdd,\n  onObjectRemove,\n  onFieldAddToObject,\n  onFieldRemoveFromObject,\n  onFieldReorderInObject,\n  onRelationshipAddToObject,\n  onRelationshipRemoveFromObject,\n  onSubqueryAddToObject,\n  onSubqueryRemoveFromObject,\n  onFilterAddToObject,\n  onFilterRemoveFromObject\n}) => {\n  _s();\n  var _reportConfig$relatio, _reportConfig$subquer;\n  const [showInfoModal, setShowInfoModal] = useState(false);\n  const [infoMessage, setInfoMessage] = useState('');\n  const handleDrop = e => {\n    e.preventDefault();\n    try {\n      const dataStr = e.dataTransfer.getData('application/json');\n      if (!dataStr) {\n        return; // No data to process\n      }\n      const data = JSON.parse(dataStr);\n      if (data.type === 'field') {\n        // In multi-object mode, route to the correct object based on sourceObjectType\n        if (isMultiObjectMode && data.sourceObjectType && onFieldAddToObject) {\n          onFieldAddToObject(data.sourceObjectType, data.field);\n        } else {\n          onFieldAdd(data.field);\n        }\n      } else if (data.type === 'relationship') {\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onRelationshipAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onRelationshipAddToObject(reportConfig.objects[0].objectType, data.relationship);\n        } else {\n          onRelationshipAdd(data.relationship);\n        }\n      } else if (data.type === 'relationship-field') {\n        var _data$field;\n        // Add field from relationship\n        const fieldName = typeof data.field === 'string' ? data.field : data.field.name;\n        const fieldLabel = typeof data.field === 'string' ? data.field : data.field.label || data.field.name;\n        const fieldWithPath = {\n          name: `${data.relationshipName}.${fieldName}`,\n          label: `${data.relationshipName} ${fieldLabel}`,\n          type: ((_data$field = data.field) === null || _data$field === void 0 ? void 0 : _data$field.type) || 'string'\n        };\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onFieldAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onFieldAddToObject(reportConfig.objects[0].objectType, fieldWithPath);\n        } else {\n          onFieldAdd(fieldWithPath);\n        }\n      } else if (data.type === 'subquery') {\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onSubqueryAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onSubqueryAddToObject(reportConfig.objects[0].objectType, data.subquery);\n        } else {\n          onSubqueryAdd(data.subquery);\n        }\n      } else if (data.type === 'subquery-field') {\n        var _data$field2;\n        // Add field from subquery\n        const fieldName = typeof data.field === 'string' ? data.field : data.field.name;\n        const fieldLabel = typeof data.field === 'string' ? data.field : data.field.label || data.field.name;\n        const fieldWithPath = {\n          name: `SUBQUERY:${data.relationshipName}.${fieldName}`,\n          label: `${data.relationshipName} ${fieldLabel}`,\n          type: ((_data$field2 = data.field) === null || _data$field2 === void 0 ? void 0 : _data$field2.type) || 'string'\n        };\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onFieldAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onFieldAddToObject(reportConfig.objects[0].objectType, fieldWithPath);\n        } else {\n          onFieldAdd(fieldWithPath);\n        }\n      }\n    } catch (error) {\n      console.error('Error handling drop:', error);\n      // Silently fail - don't show browser alert\n    }\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  // Support both multi-object and legacy single-object modes\n  const isMultiObjectMode = reportConfig && reportConfig.objects && reportConfig.objects.length > 0;\n  const hasObjects = isMultiObjectMode || reportConfig && reportConfig.objectType;\n\n  // Legacy single-object field filtering - ensure these are always defined\n  const allFields = (reportConfig === null || reportConfig === void 0 ? void 0 : reportConfig.fields) || [];\n  const primaryObjectFields = allFields.filter(f => {\n    const fieldName = typeof f === 'string' ? f : (f === null || f === void 0 ? void 0 : f.name) || '';\n    return fieldName && !fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n  });\n  const relationshipFields = allFields.filter(f => {\n    const fieldName = typeof f === 'string' ? f : (f === null || f === void 0 ? void 0 : f.name) || '';\n    return fieldName && fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n  });\n  const subqueryFields = allFields.filter(f => {\n    const fieldName = typeof f === 'string' ? f : (f === null || f === void 0 ? void 0 : f.name) || '';\n    return fieldName && fieldName.startsWith('SUBQUERY:');\n  });\n  if (!hasObjects) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"query-canvas\",\n      onDrop: handleDrop,\n      onDragOver: handleDragOver,\n      children: /*#__PURE__*/_jsxDEV(EmptyState, {\n        onObjectSelect: objectType => {\n          if (onObjectAdd) {\n            onObjectAdd(objectType);\n          } else {\n            onConfigUpdate({\n              objectType\n            });\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"query-canvas\",\n    onDrop: handleDrop,\n    onDragOver: handleDragOver,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-content\",\n      children: [isMultiObjectMode && reportConfig.objects.map((objConfig, index) => {\n        var _objConfig$relationsh, _objConfig$subqueries;\n        const objFields = objConfig.fields || [];\n        const objRelationshipFields = objFields.filter(f => {\n          const fieldName = typeof f === 'string' ? f : f.name;\n          return fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n        });\n        const objSubqueryFields = objFields.filter(f => {\n          const fieldName = typeof f === 'string' ? f : f.name;\n          return fieldName.startsWith('SUBQUERY:');\n        });\n        const objPrimaryFields = objFields.filter(f => {\n          const fieldName = typeof f === 'string' ? f : f.name;\n          return !fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n        });\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"object-card-container\",\n          children: [/*#__PURE__*/_jsxDEV(ObjectCard, {\n            objectType: objConfig.objectType,\n            fields: objPrimaryFields,\n            onFieldAdd: field => {\n              // Always use the multi-object method when in multi-object mode\n              if (onFieldAddToObject) {\n                onFieldAddToObject(objConfig.objectType, field);\n              } else {\n                onFieldAdd(field);\n              }\n            },\n            onFieldRemove: fieldName => {\n              if (onFieldRemoveFromObject) {\n                onFieldRemoveFromObject(objConfig.objectType, fieldName);\n              } else {\n                onFieldRemove(fieldName);\n              }\n            },\n            onRemove: onObjectRemove ? () => onObjectRemove(objConfig.objectType) : undefined,\n            showRemove: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this), (_objConfig$relationsh = objConfig.relationships) === null || _objConfig$relationsh === void 0 ? void 0 : _objConfig$relationsh.map(relationship => {\n            const relFields = objRelationshipFields.filter(f => {\n              const fieldName = typeof f === 'string' ? f : f.name;\n              return fieldName.startsWith(`${relationship.relationshipName}.`);\n            });\n            return /*#__PURE__*/_jsxDEV(RelationshipCard, {\n              relationship: relationship,\n              fields: relFields,\n              onFieldAdd: field => (onFieldAddToObject === null || onFieldAddToObject === void 0 ? void 0 : onFieldAddToObject(objConfig.objectType, field)) || (onFieldAdd === null || onFieldAdd === void 0 ? void 0 : onFieldAdd(field)),\n              onFieldRemove: fieldName => (onFieldRemoveFromObject === null || onFieldRemoveFromObject === void 0 ? void 0 : onFieldRemoveFromObject(objConfig.objectType, fieldName)) || (onFieldRemove === null || onFieldRemove === void 0 ? void 0 : onFieldRemove(fieldName)),\n              onRemove: () => (onRelationshipRemoveFromObject === null || onRelationshipRemoveFromObject === void 0 ? void 0 : onRelationshipRemoveFromObject(objConfig.objectType, relationship.relationshipName)) || (onRelationshipRemove === null || onRelationshipRemove === void 0 ? void 0 : onRelationshipRemove(relationship.relationshipName))\n            }, relationship.relationshipName, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this);\n          }), (_objConfig$subqueries = objConfig.subqueries) === null || _objConfig$subqueries === void 0 ? void 0 : _objConfig$subqueries.map(subquery => {\n            const subFields = objSubqueryFields.filter(f => {\n              const fieldName = typeof f === 'string' ? f : f.name;\n              return fieldName.startsWith(`SUBQUERY:${subquery.relationshipName}.`);\n            });\n            return /*#__PURE__*/_jsxDEV(SubqueryCard, {\n              subquery: subquery,\n              fields: subFields,\n              onFieldAdd: field => (onFieldAddToObject === null || onFieldAddToObject === void 0 ? void 0 : onFieldAddToObject(objConfig.objectType, field)) || (onFieldAdd === null || onFieldAdd === void 0 ? void 0 : onFieldAdd(field)),\n              onFieldRemove: fieldName => (onFieldRemoveFromObject === null || onFieldRemoveFromObject === void 0 ? void 0 : onFieldRemoveFromObject(objConfig.objectType, fieldName)) || (onFieldRemove === null || onFieldRemove === void 0 ? void 0 : onFieldRemove(fieldName)),\n              onRemove: () => (onSubqueryRemoveFromObject === null || onSubqueryRemoveFromObject === void 0 ? void 0 : onSubqueryRemoveFromObject(objConfig.objectType, subquery.relationshipName)) || (onSubqueryRemove === null || onSubqueryRemove === void 0 ? void 0 : onSubqueryRemove(subquery.relationshipName))\n            }, subquery.relationshipName, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 19\n            }, this);\n          }), objConfig.filters && objConfig.filters.length > 0 && /*#__PURE__*/_jsxDEV(FilterCard, {\n            filters: objConfig.filters,\n            onFilterAdd: filter => (onFilterAddToObject === null || onFilterAddToObject === void 0 ? void 0 : onFilterAddToObject(objConfig.objectType, filter)) || (onFilterAdd === null || onFilterAdd === void 0 ? void 0 : onFilterAdd(filter)),\n            onFilterRemove: filterIndex => (onFilterRemoveFromObject === null || onFilterRemoveFromObject === void 0 ? void 0 : onFilterRemoveFromObject(objConfig.objectType, filterIndex)) || (onFilterRemove === null || onFilterRemove === void 0 ? void 0 : onFilterRemove(filterIndex)),\n            availableFields: objFields\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 17\n          }, this)]\n        }, objConfig.objectType, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this);\n      }), !isMultiObjectMode && reportConfig.objectType && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ObjectCard, {\n          objectType: reportConfig.objectType,\n          fields: primaryObjectFields,\n          onFieldAdd: onFieldAdd,\n          onFieldRemove: onFieldRemove\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), (_reportConfig$relatio = reportConfig.relationships) === null || _reportConfig$relatio === void 0 ? void 0 : _reportConfig$relatio.map(relationship => {\n          const relFields = relationshipFields.filter(f => {\n            const fieldName = typeof f === 'string' ? f : f.name;\n            return fieldName.startsWith(`${relationship.relationshipName}.`);\n          });\n          return /*#__PURE__*/_jsxDEV(RelationshipCard, {\n            relationship: relationship,\n            fields: relFields,\n            onFieldAdd: onFieldAdd,\n            onFieldRemove: onFieldRemove,\n            onRemove: () => onRelationshipRemove(relationship.relationshipName)\n          }, relationship.relationshipName, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 17\n          }, this);\n        }), (_reportConfig$subquer = reportConfig.subqueries) === null || _reportConfig$subquer === void 0 ? void 0 : _reportConfig$subquer.map(subquery => {\n          const subFields = subqueryFields.filter(f => {\n            const fieldName = typeof f === 'string' ? f : f.name;\n            return fieldName.startsWith(`SUBQUERY:${subquery.relationshipName}.`);\n          });\n          return /*#__PURE__*/_jsxDEV(SubqueryCard, {\n            subquery: subquery,\n            fields: subFields,\n            onFieldAdd: onFieldAdd,\n            onFieldRemove: onFieldRemove,\n            onRemove: () => onSubqueryRemove(subquery.relationshipName)\n          }, subquery.relationshipName, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this);\n        }), reportConfig.filters && (reportConfig.filters.length > 0 || reportConfig.objectType) && /*#__PURE__*/_jsxDEV(FilterCard, {\n          filters: reportConfig.filters,\n          onFilterAdd: onFilterAdd,\n          onFilterRemove: onFilterRemove,\n          availableFields: reportConfig.fields || []\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 15\n        }, this), reportConfig.fields && reportConfig.fields.length > 0 && /*#__PURE__*/_jsxDEV(SortGroupCard, {\n          sortBy: reportConfig.sortBy,\n          sortOrder: reportConfig.sortOrder,\n          groupBy: reportConfig.groupBy,\n          availableFields: reportConfig.fields,\n          onSortUpdate: onSortUpdate,\n          onGroupByUpdate: onGroupByUpdate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 15\n        }, this), reportConfig.objectType && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-relationship-section\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"add-relationship-btn\",\n            onClick: () => {\n              setInfoMessage('Click on a relationship in the left panel to add it to your report.');\n              setShowInfoModal(true);\n            },\n            children: \"+ Add Relationship\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 15\n        }, this), reportConfig.objectType && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-subquery-section\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"add-subquery-btn\",\n            onClick: () => {\n              setInfoMessage('Click on a child record in the left panel to add it to your report.');\n              setShowInfoModal(true);\n            },\n            children: \"+ Add Child Records\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), isMultiObjectMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-object-section\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-object-btn\",\n          onClick: () => {\n            setInfoMessage('Select an object from the left panel to add it to your report.');\n            setShowInfoModal(true);\n          },\n          children: \"+ Add Another Object\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InfoModal, {\n      show: showInfoModal,\n      message: infoMessage,\n      onClose: () => setShowInfoModal(false),\n      title: \"How to Add\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n};\n_s(QueryCanvas, \"XKHqhKXVmBpMVdF4ynaUfMUmhw8=\");\n_c = QueryCanvas;\nexport default QueryCanvas;\nvar _c;\n$RefreshReg$(_c, \"QueryCanvas\");","map":{"version":3,"names":["React","useState","ObjectCard","RelationshipCard","SubqueryCard","FilterCard","SortGroupCard","EmptyState","InfoModal","jsxDEV","_jsxDEV","Fragment","_Fragment","QueryCanvas","reportConfig","onFieldAdd","onFieldRemove","onRelationshipAdd","onRelationshipRemove","onSubqueryAdd","onSubqueryRemove","onFilterAdd","onFilterRemove","onSortUpdate","onGroupByUpdate","onConfigUpdate","onObjectAdd","onObjectRemove","onFieldAddToObject","onFieldRemoveFromObject","onFieldReorderInObject","onRelationshipAddToObject","onRelationshipRemoveFromObject","onSubqueryAddToObject","onSubqueryRemoveFromObject","onFilterAddToObject","onFilterRemoveFromObject","_s","_reportConfig$relatio","_reportConfig$subquer","showInfoModal","setShowInfoModal","infoMessage","setInfoMessage","handleDrop","e","preventDefault","dataStr","dataTransfer","getData","data","JSON","parse","type","isMultiObjectMode","sourceObjectType","field","objects","length","objectType","relationship","_data$field","fieldName","name","fieldLabel","label","fieldWithPath","relationshipName","subquery","_data$field2","error","console","handleDragOver","dropEffect","hasObjects","allFields","fields","primaryObjectFields","filter","f","includes","startsWith","relationshipFields","subqueryFields","className","onDrop","onDragOver","children","onObjectSelect","fileName","_jsxFileName","lineNumber","columnNumber","map","objConfig","index","_objConfig$relationsh","_objConfig$subqueries","objFields","objRelationshipFields","objSubqueryFields","objPrimaryFields","onRemove","undefined","showRemove","relationships","relFields","subqueries","subFields","filters","filterIndex","availableFields","sortBy","sortOrder","groupBy","onClick","show","message","onClose","title","_c","$RefreshReg$"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/QueryCanvas/QueryCanvas.js"],"sourcesContent":["import React, { useState } from 'react';\nimport ObjectCard from './cards/ObjectCard';\nimport RelationshipCard from './cards/RelationshipCard';\nimport SubqueryCard from './cards/SubqueryCard';\nimport FilterCard from './cards/FilterCard';\nimport SortGroupCard from './cards/SortGroupCard';\nimport EmptyState from './EmptyState';\nimport InfoModal from '../InfoModal';\nimport '../../../styles/QueryCanvas.css';\n\nconst QueryCanvas = ({\n  reportConfig,\n  // Legacy single-object methods\n  onFieldAdd,\n  onFieldRemove,\n  onRelationshipAdd,\n  onRelationshipRemove,\n  onSubqueryAdd,\n  onSubqueryRemove,\n  onFilterAdd,\n  onFilterRemove,\n  onSortUpdate,\n  onGroupByUpdate,\n  onConfigUpdate,\n  // New multi-object methods\n  onObjectAdd,\n  onObjectRemove,\n  onFieldAddToObject,\n  onFieldRemoveFromObject,\n  onFieldReorderInObject,\n  onRelationshipAddToObject,\n  onRelationshipRemoveFromObject,\n  onSubqueryAddToObject,\n  onSubqueryRemoveFromObject,\n  onFilterAddToObject,\n  onFilterRemoveFromObject\n}) => {\n  const [showInfoModal, setShowInfoModal] = useState(false);\n  const [infoMessage, setInfoMessage] = useState('');\n  const handleDrop = (e) => {\n    e.preventDefault();\n    try {\n      const dataStr = e.dataTransfer.getData('application/json');\n      if (!dataStr) {\n        return; // No data to process\n      }\n      \n      const data = JSON.parse(dataStr);\n      \n      if (data.type === 'field') {\n        // In multi-object mode, route to the correct object based on sourceObjectType\n        if (isMultiObjectMode && data.sourceObjectType && onFieldAddToObject) {\n          onFieldAddToObject(data.sourceObjectType, data.field);\n        } else {\n          onFieldAdd(data.field);\n        }\n      } else if (data.type === 'relationship') {\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onRelationshipAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onRelationshipAddToObject(reportConfig.objects[0].objectType, data.relationship);\n        } else {\n          onRelationshipAdd(data.relationship);\n        }\n      } else if (data.type === 'relationship-field') {\n        // Add field from relationship\n        const fieldName = typeof data.field === 'string' ? data.field : data.field.name;\n        const fieldLabel = typeof data.field === 'string' ? data.field : (data.field.label || data.field.name);\n        const fieldWithPath = {\n          name: `${data.relationshipName}.${fieldName}`,\n          label: `${data.relationshipName} ${fieldLabel}`,\n          type: data.field?.type || 'string'\n        };\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onFieldAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onFieldAddToObject(reportConfig.objects[0].objectType, fieldWithPath);\n        } else {\n          onFieldAdd(fieldWithPath);\n        }\n      } else if (data.type === 'subquery') {\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onSubqueryAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onSubqueryAddToObject(reportConfig.objects[0].objectType, data.subquery);\n        } else {\n          onSubqueryAdd(data.subquery);\n        }\n      } else if (data.type === 'subquery-field') {\n        // Add field from subquery\n        const fieldName = typeof data.field === 'string' ? data.field : data.field.name;\n        const fieldLabel = typeof data.field === 'string' ? data.field : (data.field.label || data.field.name);\n        const fieldWithPath = {\n          name: `SUBQUERY:${data.relationshipName}.${fieldName}`,\n          label: `${data.relationshipName} ${fieldLabel}`,\n          type: data.field?.type || 'string'\n        };\n        // In multi-object mode, add to first object; otherwise use legacy method\n        if (isMultiObjectMode && onFieldAddToObject && reportConfig.objects && reportConfig.objects.length > 0) {\n          onFieldAddToObject(reportConfig.objects[0].objectType, fieldWithPath);\n        } else {\n          onFieldAdd(fieldWithPath);\n        }\n      }\n    } catch (error) {\n      console.error('Error handling drop:', error);\n      // Silently fail - don't show browser alert\n    }\n  };\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  // Support both multi-object and legacy single-object modes\n  const isMultiObjectMode = reportConfig && reportConfig.objects && reportConfig.objects.length > 0;\n  const hasObjects = isMultiObjectMode || (reportConfig && reportConfig.objectType);\n\n  // Legacy single-object field filtering - ensure these are always defined\n  const allFields = reportConfig?.fields || [];\n  const primaryObjectFields = allFields.filter(f => {\n    const fieldName = typeof f === 'string' ? f : (f?.name || '');\n    return fieldName && !fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n  });\n\n  const relationshipFields = allFields.filter(f => {\n    const fieldName = typeof f === 'string' ? f : (f?.name || '');\n    return fieldName && fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n  });\n\n  const subqueryFields = allFields.filter(f => {\n    const fieldName = typeof f === 'string' ? f : (f?.name || '');\n    return fieldName && fieldName.startsWith('SUBQUERY:');\n  });\n\n  if (!hasObjects) {\n    return (\n      <div\n        className=\"query-canvas\"\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n      >\n        <EmptyState \n          onObjectSelect={(objectType) => {\n            if (onObjectAdd) {\n              onObjectAdd(objectType);\n            } else {\n              onConfigUpdate({ objectType });\n            }\n          }} \n        />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"query-canvas\"\n      onDrop={handleDrop}\n      onDragOver={handleDragOver}\n    >\n      <div className=\"canvas-content\">\n        {/* Multi-Object Mode: Show all objects */}\n        {isMultiObjectMode && reportConfig.objects.map((objConfig, index) => {\n          const objFields = objConfig.fields || [];\n          const objRelationshipFields = objFields.filter(f => {\n            const fieldName = typeof f === 'string' ? f : f.name;\n            return fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n          });\n          const objSubqueryFields = objFields.filter(f => {\n            const fieldName = typeof f === 'string' ? f : f.name;\n            return fieldName.startsWith('SUBQUERY:');\n          });\n          const objPrimaryFields = objFields.filter(f => {\n            const fieldName = typeof f === 'string' ? f : f.name;\n            return !fieldName.includes('.') && !fieldName.startsWith('SUBQUERY:');\n          });\n\n          return (\n            <div key={objConfig.objectType} className=\"object-card-container\">\n              <ObjectCard\n                objectType={objConfig.objectType}\n                fields={objPrimaryFields}\n                onFieldAdd={(field) => {\n                  // Always use the multi-object method when in multi-object mode\n                  if (onFieldAddToObject) {\n                    onFieldAddToObject(objConfig.objectType, field);\n                  } else {\n                    onFieldAdd(field);\n                  }\n                }}\n                onFieldRemove={(fieldName) => {\n                  if (onFieldRemoveFromObject) {\n                    onFieldRemoveFromObject(objConfig.objectType, fieldName);\n                  } else {\n                    onFieldRemove(fieldName);\n                  }\n                }}\n                onRemove={onObjectRemove ? () => onObjectRemove(objConfig.objectType) : undefined}\n                showRemove={true}\n              />\n\n              {/* Relationships for this object */}\n              {objConfig.relationships?.map(relationship => {\n                const relFields = objRelationshipFields.filter(f => {\n                  const fieldName = typeof f === 'string' ? f : f.name;\n                  return fieldName.startsWith(`${relationship.relationshipName}.`);\n                });\n                return (\n                  <RelationshipCard\n                    key={relationship.relationshipName}\n                    relationship={relationship}\n                    fields={relFields}\n                    onFieldAdd={(field) => onFieldAddToObject?.(objConfig.objectType, field) || onFieldAdd?.(field)}\n                    onFieldRemove={(fieldName) => onFieldRemoveFromObject?.(objConfig.objectType, fieldName) || onFieldRemove?.(fieldName)}\n                    onRemove={() => onRelationshipRemoveFromObject?.(objConfig.objectType, relationship.relationshipName) || onRelationshipRemove?.(relationship.relationshipName)}\n                  />\n                );\n              })}\n\n              {/* Subqueries for this object */}\n              {objConfig.subqueries?.map(subquery => {\n                const subFields = objSubqueryFields.filter(f => {\n                  const fieldName = typeof f === 'string' ? f : f.name;\n                  return fieldName.startsWith(`SUBQUERY:${subquery.relationshipName}.`);\n                });\n                return (\n                  <SubqueryCard\n                    key={subquery.relationshipName}\n                    subquery={subquery}\n                    fields={subFields}\n                    onFieldAdd={(field) => onFieldAddToObject?.(objConfig.objectType, field) || onFieldAdd?.(field)}\n                    onFieldRemove={(fieldName) => onFieldRemoveFromObject?.(objConfig.objectType, fieldName) || onFieldRemove?.(fieldName)}\n                    onRemove={() => onSubqueryRemoveFromObject?.(objConfig.objectType, subquery.relationshipName) || onSubqueryRemove?.(subquery.relationshipName)}\n                  />\n                );\n              })}\n\n              {/* Filters for this object */}\n              {objConfig.filters && objConfig.filters.length > 0 && (\n                <FilterCard\n                  filters={objConfig.filters}\n                  onFilterAdd={(filter) => onFilterAddToObject?.(objConfig.objectType, filter) || onFilterAdd?.(filter)}\n                  onFilterRemove={(filterIndex) => onFilterRemoveFromObject?.(objConfig.objectType, filterIndex) || onFilterRemove?.(filterIndex)}\n                  availableFields={objFields}\n                />\n              )}\n            </div>\n          );\n        })}\n\n        {/* Legacy Single-Object Mode */}\n        {!isMultiObjectMode && reportConfig.objectType && (\n          <>\n            <ObjectCard\n              objectType={reportConfig.objectType}\n              fields={primaryObjectFields}\n              onFieldAdd={onFieldAdd}\n              onFieldRemove={onFieldRemove}\n            />\n\n            {/* Relationship Cards */}\n            {reportConfig.relationships?.map(relationship => {\n              const relFields = relationshipFields.filter(f => {\n                const fieldName = typeof f === 'string' ? f : f.name;\n                return fieldName.startsWith(`${relationship.relationshipName}.`);\n              });\n              return (\n                <RelationshipCard\n                  key={relationship.relationshipName}\n                  relationship={relationship}\n                  fields={relFields}\n                  onFieldAdd={onFieldAdd}\n                  onFieldRemove={onFieldRemove}\n                  onRemove={() => onRelationshipRemove(relationship.relationshipName)}\n                />\n              );\n            })}\n\n            {/* Subquery Cards */}\n            {reportConfig.subqueries?.map(subquery => {\n              const subFields = subqueryFields.filter(f => {\n                const fieldName = typeof f === 'string' ? f : f.name;\n                return fieldName.startsWith(`SUBQUERY:${subquery.relationshipName}.`);\n              });\n              return (\n                <SubqueryCard\n                  key={subquery.relationshipName}\n                  subquery={subquery}\n                  fields={subFields}\n                  onFieldAdd={onFieldAdd}\n                  onFieldRemove={onFieldRemove}\n                  onRemove={() => onSubqueryRemove(subquery.relationshipName)}\n                />\n              );\n            })}\n\n            {/* Filter Card */}\n            {reportConfig.filters && (reportConfig.filters.length > 0 || reportConfig.objectType) && (\n              <FilterCard\n                filters={reportConfig.filters}\n                onFilterAdd={onFilterAdd}\n                onFilterRemove={onFilterRemove}\n                availableFields={reportConfig.fields || []}\n              />\n            )}\n\n            {/* Sort & Group Card */}\n            {reportConfig.fields && reportConfig.fields.length > 0 && (\n              <SortGroupCard\n                sortBy={reportConfig.sortBy}\n                sortOrder={reportConfig.sortOrder}\n                groupBy={reportConfig.groupBy}\n                availableFields={reportConfig.fields}\n                onSortUpdate={onSortUpdate}\n                onGroupByUpdate={onGroupByUpdate}\n              />\n            )}\n\n            {/* Add Relationship Button */}\n            {reportConfig.objectType && (\n              <div className=\"add-relationship-section\">\n                <button\n                  className=\"add-relationship-btn\"\n                  onClick={() => {\n                    setInfoMessage('Click on a relationship in the left panel to add it to your report.');\n                    setShowInfoModal(true);\n                  }}\n                >\n                  + Add Relationship\n                </button>\n              </div>\n            )}\n\n            {/* Add Subquery Button */}\n            {reportConfig.objectType && (\n              <div className=\"add-subquery-section\">\n                <button\n                  className=\"add-subquery-btn\"\n                  onClick={() => {\n                    setInfoMessage('Click on a child record in the left panel to add it to your report.');\n                    setShowInfoModal(true);\n                  }}\n                >\n                  + Add Child Records\n                </button>\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Add Object Button (Multi-Object Mode) */}\n        {isMultiObjectMode && (\n          <div className=\"add-object-section\">\n            <button\n              className=\"add-object-btn\"\n              onClick={() => {\n                setInfoMessage('Select an object from the left panel to add it to your report.');\n                setShowInfoModal(true);\n              }}\n            >\n              + Add Another Object\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Info Modal */}\n      <InfoModal\n        show={showInfoModal}\n        message={infoMessage}\n        onClose={() => setShowInfoModal(false)}\n        title=\"How to Add\"\n      />\n    </div>\n  );\n};\n\nexport default QueryCanvas;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}