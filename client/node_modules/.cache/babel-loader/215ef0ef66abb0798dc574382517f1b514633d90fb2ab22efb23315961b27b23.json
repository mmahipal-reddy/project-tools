{"ast":null,"code":"import React,{useState,useEffect,useImperativeHandle,forwardRef}from'react';import ObjectPanel from'./ObjectPanel/ObjectPanel';import QueryCanvas from'./QueryCanvas/QueryCanvas';import PreviewPanel from'./PreviewPanel/PreviewPanel';import{useQueryBuilder}from'./hooks/useQueryBuilder';import{usePreview}from'./hooks/usePreview';import'../../styles/AdvancedBuilderCanvas.css';import InfoModal from'./InfoModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdvancedBuilderCanvas=/*#__PURE__*/forwardRef((_ref,ref)=>{var _reportConfig$objects;let{reportToLoad,onReportLoaded}=_ref;const{reportConfig,updateConfig,loadReport,// Legacy single-object methods\naddField,removeField,addRelationship,removeRelationship,addSubquery,removeSubquery,addFilter,removeFilter,updateSort,updateGroupBy,// New multi-object methods\naddObject,removeObject,addFieldToObject,removeFieldFromObject,reorderFieldsInObject,addRelationshipToObject,removeRelationshipFromObject,addSubqueryToObject,removeSubqueryFromObject,addFilterToObject,removeFilterFromObject}=useQueryBuilder();const{previewData,loading,error,generatePreview}=usePreview();const[showPreview,setShowPreview]=useState(false);const[leftPanelWidth,setLeftPanelWidth]=useState(280);const[isResizing,setIsResizing]=useState(false);// Load report when reportToLoad prop changes\nuseEffect(()=>{if(reportToLoad){console.log('Loading report into builder:',reportToLoad);loadReport(reportToLoad);if(onReportLoaded){onReportLoaded();}}},[reportToLoad,loadReport,onReportLoaded]);// Handle panel resizing\nuseEffect(()=>{const handleMouseMove=e=>{if(!isResizing)return;e.preventDefault();const canvasLayout=document.querySelector('.canvas-layout');if(!canvasLayout)return;const rect=canvasLayout.getBoundingClientRect();const newWidth=e.clientX-rect.left;// Constrain width between min and max\nif(newWidth>=200&&newWidth<=600){setLeftPanelWidth(newWidth);}else if(newWidth<200){setLeftPanelWidth(200);}else if(newWidth>600){setLeftPanelWidth(600);}};const handleMouseUp=()=>{setIsResizing(false);};if(isResizing){document.addEventListener('mousemove',handleMouseMove);document.addEventListener('mouseup',handleMouseUp);document.body.style.cursor='col-resize';document.body.style.userSelect='none';document.body.style.pointerEvents='none';}else{document.body.style.cursor='';document.body.style.userSelect='';document.body.style.pointerEvents='';}return()=>{document.removeEventListener('mousemove',handleMouseMove);document.removeEventListener('mouseup',handleMouseUp);document.body.style.cursor='';document.body.style.userSelect='';document.body.style.pointerEvents='';};},[isResizing]);// Expose reportConfig, loadReport, and showPreview via ref\nuseImperativeHandle(ref,()=>({getReportConfig:()=>reportConfig,loadReport:report=>loadReport(report),showPreview:()=>{// Generate preview if not already loaded\nif(!previewData||previewData.length===0){generatePreview(reportConfig).then(()=>{setShowPreview(true);}).catch(err=>{console.error('Preview generation error:',err);});}else{setShowPreview(true);}}}));// Auto-preview when config changes (debounced)\nuseEffect(()=>{if(!reportConfig){return;}// Check if we have objects with fields (multi-object mode) or legacy single-object mode\nconst isMultiObjectMode=reportConfig.objects&&reportConfig.objects.length>0;let shouldGeneratePreview=false;if(isMultiObjectMode){// Multi-object mode: only preview if at least one object has fields\nshouldGeneratePreview=reportConfig.objects.some(obj=>obj&&obj.objectType&&obj.fields&&obj.fields.length>0);}else{// Legacy single-object mode: only preview if objectType and fields exist\nshouldGeneratePreview=reportConfig.objectType&&reportConfig.fields&&Array.isArray(reportConfig.fields)&&reportConfig.fields.length>0;}if(shouldGeneratePreview){const timer=setTimeout(()=>{generatePreview(reportConfig).catch(err=>{// Silently handle errors - toast already shown in usePreview\nconsole.error('Preview generation error:',err);});},500);return()=>clearTimeout(timer);}// Don't generate preview if no valid data - usePreview hook will handle clearing\n},[reportConfig,generatePreview]);return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-builder-canvas\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"canvas-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"canvas-left-panel\",style:{width:\"\".concat(leftPanelWidth,\"px\"),minWidth:\"\".concat(leftPanelWidth,\"px\")},children:/*#__PURE__*/_jsx(ObjectPanel,{selectedObject:reportConfig.objectType,selectedObjects:((_reportConfig$objects=reportConfig.objects)===null||_reportConfig$objects===void 0?void 0:_reportConfig$objects.map(obj=>obj.objectType))||[],onObjectSelect:objectType=>{// Legacy: single object mode\nupdateConfig({objectType});},onObjectAdd:objectType=>{addObject(objectType);},onObjectRemove:objectType=>{removeObject(objectType);},onFieldDrag:(field,sourceObjectType)=>{// In multi-object mode, add to the object that matches the source\n// The sourceObjectType is passed from ObjectBrowser when dragging\nif(reportConfig.objects&&reportConfig.objects.length>0){// If sourceObjectType is provided, add to that object\n// Otherwise, add to the first object (legacy behavior)\nconst targetObject=sourceObjectType||reportConfig.objects[0].objectType;addFieldToObject(targetObject,field);}else{addField(field);}},onRelationshipDrag:relationship=>{if(reportConfig.objects&&reportConfig.objects.length>0){addRelationshipToObject(reportConfig.objects[0].objectType,relationship);}else{addRelationship(relationship);}},onSubqueryDrag:subquery=>{if(reportConfig.objects&&reportConfig.objects.length>0){addSubqueryToObject(reportConfig.objects[0].objectType,subquery);}else{addSubquery(subquery);}}})}),/*#__PURE__*/_jsx(\"div\",{className:\"resize-handle\",onMouseDown:e=>{e.preventDefault();setIsResizing(true);}}),/*#__PURE__*/_jsx(\"div\",{className:\"canvas-center-panel\",children:/*#__PURE__*/_jsx(QueryCanvas,{reportConfig:reportConfig// Legacy single-object methods\n,onFieldAdd:addField,onFieldRemove:removeField,onRelationshipAdd:addRelationship,onRelationshipRemove:removeRelationship,onSubqueryAdd:addSubquery,onSubqueryRemove:removeSubquery,onFilterAdd:addFilter,onFilterRemove:removeFilter,onSortUpdate:updateSort,onGroupByUpdate:updateGroupBy,onConfigUpdate:updateConfig// New multi-object methods\n,onObjectAdd:addObject,onObjectRemove:removeObject,onFieldAddToObject:addFieldToObject,onFieldRemoveFromObject:removeFieldFromObject,onFieldReorderInObject:reorderFieldsInObject,onRelationshipAddToObject:addRelationshipToObject,onRelationshipRemoveFromObject:removeRelationshipFromObject,onSubqueryAddToObject:addSubqueryToObject,onSubqueryRemoveFromObject:removeSubqueryFromObject,onFilterAddToObject:addFilterToObject,onFilterRemoveFromObject:removeFilterFromObject})})]}),showPreview&&/*#__PURE__*/_jsx(InfoModal,{show:showPreview,onClose:()=>setShowPreview(false),title:\"Report Preview\",size:\"large\",children:/*#__PURE__*/_jsx(PreviewPanel,{data:previewData,loading:loading,error:error,expanded:true,onToggle:()=>{},reportName:reportConfig.name,reportConfig:reportConfig})})]});});AdvancedBuilderCanvas.displayName='AdvancedBuilderCanvas';export default AdvancedBuilderCanvas;","map":{"version":3,"names":["React","useState","useEffect","useImperativeHandle","forwardRef","ObjectPanel","QueryCanvas","PreviewPanel","useQueryBuilder","usePreview","InfoModal","jsx","_jsx","jsxs","_jsxs","AdvancedBuilderCanvas","_ref","ref","_reportConfig$objects","reportToLoad","onReportLoaded","reportConfig","updateConfig","loadReport","addField","removeField","addRelationship","removeRelationship","addSubquery","removeSubquery","addFilter","removeFilter","updateSort","updateGroupBy","addObject","removeObject","addFieldToObject","removeFieldFromObject","reorderFieldsInObject","addRelationshipToObject","removeRelationshipFromObject","addSubqueryToObject","removeSubqueryFromObject","addFilterToObject","removeFilterFromObject","previewData","loading","error","generatePreview","showPreview","setShowPreview","leftPanelWidth","setLeftPanelWidth","isResizing","setIsResizing","console","log","handleMouseMove","e","preventDefault","canvasLayout","document","querySelector","rect","getBoundingClientRect","newWidth","clientX","left","handleMouseUp","addEventListener","body","style","cursor","userSelect","pointerEvents","removeEventListener","getReportConfig","report","length","then","catch","err","isMultiObjectMode","objects","shouldGeneratePreview","some","obj","objectType","fields","Array","isArray","timer","setTimeout","clearTimeout","className","children","width","concat","minWidth","selectedObject","selectedObjects","map","onObjectSelect","onObjectAdd","onObjectRemove","onFieldDrag","field","sourceObjectType","targetObject","onRelationshipDrag","relationship","onSubqueryDrag","subquery","onMouseDown","onFieldAdd","onFieldRemove","onRelationshipAdd","onRelationshipRemove","onSubqueryAdd","onSubqueryRemove","onFilterAdd","onFilterRemove","onSortUpdate","onGroupByUpdate","onConfigUpdate","onFieldAddToObject","onFieldRemoveFromObject","onFieldReorderInObject","onRelationshipAddToObject","onRelationshipRemoveFromObject","onSubqueryAddToObject","onSubqueryRemoveFromObject","onFilterAddToObject","onFilterRemoveFromObject","show","onClose","title","size","data","expanded","onToggle","reportName","name","displayName"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/components/AdvancedReportBuilder/AdvancedBuilderCanvas.js"],"sourcesContent":["import React, { useState, useEffect, useImperativeHandle, forwardRef } from 'react';\nimport ObjectPanel from './ObjectPanel/ObjectPanel';\nimport QueryCanvas from './QueryCanvas/QueryCanvas';\nimport PreviewPanel from './PreviewPanel/PreviewPanel';\nimport { useQueryBuilder } from './hooks/useQueryBuilder';\nimport { usePreview } from './hooks/usePreview';\nimport '../../styles/AdvancedBuilderCanvas.css';\nimport InfoModal from './InfoModal';\n\nconst AdvancedBuilderCanvas = forwardRef(({ reportToLoad, onReportLoaded }, ref) => {\n  const {\n    reportConfig,\n    updateConfig,\n    loadReport,\n    // Legacy single-object methods\n    addField,\n    removeField,\n    addRelationship,\n    removeRelationship,\n    addSubquery,\n    removeSubquery,\n    addFilter,\n    removeFilter,\n    updateSort,\n    updateGroupBy,\n    // New multi-object methods\n    addObject,\n    removeObject,\n    addFieldToObject,\n    removeFieldFromObject,\n    reorderFieldsInObject,\n    addRelationshipToObject,\n    removeRelationshipFromObject,\n    addSubqueryToObject,\n    removeSubqueryFromObject,\n    addFilterToObject,\n    removeFilterFromObject\n  } = useQueryBuilder();\n\n  const {\n    previewData,\n    loading,\n    error,\n    generatePreview\n  } = usePreview();\n\n  const [showPreview, setShowPreview] = useState(false);\n  const [leftPanelWidth, setLeftPanelWidth] = useState(280);\n  const [isResizing, setIsResizing] = useState(false);\n\n  // Load report when reportToLoad prop changes\n  useEffect(() => {\n    if (reportToLoad) {\n      console.log('Loading report into builder:', reportToLoad);\n      loadReport(reportToLoad);\n      if (onReportLoaded) {\n        onReportLoaded();\n      }\n    }\n  }, [reportToLoad, loadReport, onReportLoaded]);\n\n  // Handle panel resizing\n  useEffect(() => {\n    const handleMouseMove = (e) => {\n      if (!isResizing) return;\n      e.preventDefault();\n      const canvasLayout = document.querySelector('.canvas-layout');\n      if (!canvasLayout) return;\n      \n      const rect = canvasLayout.getBoundingClientRect();\n      const newWidth = e.clientX - rect.left;\n      \n      // Constrain width between min and max\n      if (newWidth >= 200 && newWidth <= 600) {\n        setLeftPanelWidth(newWidth);\n      } else if (newWidth < 200) {\n        setLeftPanelWidth(200);\n      } else if (newWidth > 600) {\n        setLeftPanelWidth(600);\n      }\n    };\n\n    const handleMouseUp = () => {\n      setIsResizing(false);\n    };\n\n    if (isResizing) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = 'col-resize';\n      document.body.style.userSelect = 'none';\n      document.body.style.pointerEvents = 'none';\n    } else {\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n      document.body.style.pointerEvents = '';\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n      document.body.style.pointerEvents = '';\n    };\n  }, [isResizing]);\n\n  // Expose reportConfig, loadReport, and showPreview via ref\n  useImperativeHandle(ref, () => ({\n    getReportConfig: () => reportConfig,\n    loadReport: (report) => loadReport(report),\n    showPreview: () => {\n      // Generate preview if not already loaded\n      if (!previewData || previewData.length === 0) {\n        generatePreview(reportConfig).then(() => {\n          setShowPreview(true);\n        }).catch(err => {\n          console.error('Preview generation error:', err);\n        });\n      } else {\n        setShowPreview(true);\n      }\n    }\n  }));\n\n  // Auto-preview when config changes (debounced)\n  useEffect(() => {\n    if (!reportConfig) {\n      return;\n    }\n\n    // Check if we have objects with fields (multi-object mode) or legacy single-object mode\n    const isMultiObjectMode = reportConfig.objects && reportConfig.objects.length > 0;\n    \n    let shouldGeneratePreview = false;\n    \n    if (isMultiObjectMode) {\n      // Multi-object mode: only preview if at least one object has fields\n      shouldGeneratePreview = reportConfig.objects.some(obj => \n        obj && obj.objectType && obj.fields && obj.fields.length > 0\n      );\n    } else {\n      // Legacy single-object mode: only preview if objectType and fields exist\n      shouldGeneratePreview = reportConfig.objectType && \n                               reportConfig.fields && \n                               Array.isArray(reportConfig.fields) &&\n                               reportConfig.fields.length > 0;\n    }\n    \n    if (shouldGeneratePreview) {\n      const timer = setTimeout(() => {\n        generatePreview(reportConfig).catch(err => {\n          // Silently handle errors - toast already shown in usePreview\n          console.error('Preview generation error:', err);\n        });\n      }, 500);\n      return () => clearTimeout(timer);\n    }\n    // Don't generate preview if no valid data - usePreview hook will handle clearing\n  }, [reportConfig, generatePreview]);\n\n  return (\n    <div className=\"advanced-builder-canvas\">\n      <div className=\"canvas-layout\">\n        {/* Left Panel - Object Browser */}\n        <div \n          className=\"canvas-left-panel\"\n          style={{ width: `${leftPanelWidth}px`, minWidth: `${leftPanelWidth}px` }}\n        >\n          <ObjectPanel\n            selectedObject={reportConfig.objectType}\n            selectedObjects={reportConfig.objects?.map(obj => obj.objectType) || []}\n            onObjectSelect={(objectType) => {\n              // Legacy: single object mode\n              updateConfig({ objectType });\n            }}\n            onObjectAdd={(objectType) => {\n              addObject(objectType);\n            }}\n            onObjectRemove={(objectType) => {\n              removeObject(objectType);\n            }}\n            onFieldDrag={(field, sourceObjectType) => {\n              // In multi-object mode, add to the object that matches the source\n              // The sourceObjectType is passed from ObjectBrowser when dragging\n              if (reportConfig.objects && reportConfig.objects.length > 0) {\n                // If sourceObjectType is provided, add to that object\n                // Otherwise, add to the first object (legacy behavior)\n                const targetObject = sourceObjectType || reportConfig.objects[0].objectType;\n                addFieldToObject(targetObject, field);\n              } else {\n                addField(field);\n              }\n            }}\n            onRelationshipDrag={(relationship) => {\n              if (reportConfig.objects && reportConfig.objects.length > 0) {\n                addRelationshipToObject(reportConfig.objects[0].objectType, relationship);\n              } else {\n                addRelationship(relationship);\n              }\n            }}\n            onSubqueryDrag={(subquery) => {\n              if (reportConfig.objects && reportConfig.objects.length > 0) {\n                addSubqueryToObject(reportConfig.objects[0].objectType, subquery);\n              } else {\n                addSubquery(subquery);\n              }\n            }}\n          />\n        </div>\n        \n        {/* Resize Handle */}\n        <div\n          className=\"resize-handle\"\n          onMouseDown={(e) => {\n            e.preventDefault();\n            setIsResizing(true);\n          }}\n        />\n\n        {/* Center Panel - Visual Query Builder */}\n        <div className=\"canvas-center-panel\">\n          <QueryCanvas\n            reportConfig={reportConfig}\n            // Legacy single-object methods\n            onFieldAdd={addField}\n            onFieldRemove={removeField}\n            onRelationshipAdd={addRelationship}\n            onRelationshipRemove={removeRelationship}\n            onSubqueryAdd={addSubquery}\n            onSubqueryRemove={removeSubquery}\n            onFilterAdd={addFilter}\n            onFilterRemove={removeFilter}\n            onSortUpdate={updateSort}\n            onGroupByUpdate={updateGroupBy}\n            onConfigUpdate={updateConfig}\n            // New multi-object methods\n            onObjectAdd={addObject}\n            onObjectRemove={removeObject}\n            onFieldAddToObject={addFieldToObject}\n            onFieldRemoveFromObject={removeFieldFromObject}\n            onFieldReorderInObject={reorderFieldsInObject}\n            onRelationshipAddToObject={addRelationshipToObject}\n            onRelationshipRemoveFromObject={removeRelationshipFromObject}\n            onSubqueryAddToObject={addSubqueryToObject}\n            onSubqueryRemoveFromObject={removeSubqueryFromObject}\n            onFilterAddToObject={addFilterToObject}\n            onFilterRemoveFromObject={removeFilterFromObject}\n          />\n        </div>\n      </div>\n\n      {/* Preview Modal */}\n      {showPreview && (\n        <InfoModal\n          show={showPreview}\n          onClose={() => setShowPreview(false)}\n          title=\"Report Preview\"\n          size=\"large\"\n        >\n          <PreviewPanel\n            data={previewData}\n            loading={loading}\n            error={error}\n            expanded={true}\n            onToggle={() => {}}\n            reportName={reportConfig.name}\n            reportConfig={reportConfig}\n          />\n        </InfoModal>\n      )}\n    </div>\n  );\n});\n\nAdvancedBuilderCanvas.displayName = 'AdvancedBuilderCanvas';\n\nexport default AdvancedBuilderCanvas;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}