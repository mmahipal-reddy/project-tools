{"ast":null,"code":"var _jsxFileName = \"/Users/mmoola/Cursor/ProjectSetup/client/src/pages/CreateWorkStream.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport { Menu, LogOut, Search, X, Info, Plus, ChevronDown, ChevronUp, Trash2, Loader, Save, Copy, FolderOpen, Download, Upload, FileText } from 'lucide-react';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport * as XLSX from 'xlsx';\nimport '../styles/CreateWorkStream.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CreateWorkStream = ({\n  hideHeader = false\n}) => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [showForm, setShowForm] = useState(false); // New state to control form visibility\n\n  // Project Objectives without workstreams\n  const [projectObjectives, setProjectObjectives] = useState([]);\n  const [allProjectObjectives, setAllProjectObjectives] = useState([]); // Store all fetched data for filtering\n  const [loadingPOs, setLoadingPOs] = useState(true);\n  const [poOffset, setPoOffset] = useState(0);\n  const [poHasMore, setPoHasMore] = useState(true);\n  const [loadingMorePOs, setLoadingMorePOs] = useState(false);\n  const infiniteScrollRef = useRef(null);\n  const [statusFilter, setStatusFilter] = useState(''); // Filter by status\n\n  // Workstreams array - each workstream has its own form data\n  const [workstreams, setWorkstreams] = useState([{\n    id: Date.now(),\n    projectWorkstreamName: '',\n    projectObjective: '',\n    projectObjectiveId: '',\n    refresh: false,\n    deliveryToolName: '',\n    clientWorkstreamIdentifier: '',\n    functionality: ''\n  }]);\n\n  // Track expanded/collapsed state for each workstream\n  const [expandedWorkstreams, setExpandedWorkstreams] = useState({\n    [Date.now()]: true\n  });\n\n  // Templates state\n  const [savedTemplates, setSavedTemplates] = useState([]);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [templateName, setTemplateName] = useState('');\n  const [showLoadTemplateModal, setShowLoadTemplateModal] = useState(false);\n  const [showImportPreview, setShowImportPreview] = useState(false);\n  const [importedWorkstreams, setImportedWorkstreams] = useState([]);\n  const [importing, setImporting] = useState(false);\n\n  // Project Objective search - per workstream\n  const [projectObjectiveSearchTerms, setProjectObjectiveSearchTerms] = useState({});\n  const [projectObjectiveSearchResults, setProjectObjectiveSearchResults] = useState({});\n  const [loadingProjectObjectiveSearch, setLoadingProjectObjectiveSearch] = useState({});\n  const [showProjectObjectiveDropdowns, setShowProjectObjectiveDropdowns] = useState({});\n  const projectObjectiveSearchTimeoutRefs = useRef({});\n  const recentSelectionsRef = useRef({}); // Track recent selections to prevent search loop\n\n  // Fetch project objectives without workstreams\n  const fetchProjectObjectives = useCallback(async (offset = 0, append = false) => {\n    try {\n      if (offset === 0) {\n        setLoadingPOs(true);\n      } else {\n        setLoadingMorePOs(true);\n      }\n      const response = await apiClient.get('/workstream/project-objectives-without-workstreams', {\n        params: {\n          limit: 1000,\n          offset\n        },\n        timeout: 120000 // 2 minutes to match backend timeout\n      });\n      if (response.data.success) {\n        const newPOs = response.data.projectObjectives;\n        if (append) {\n          setAllProjectObjectives(prev => [...prev, ...newPOs]);\n        } else {\n          setAllProjectObjectives(newPOs);\n          setPoOffset(0); // Reset offset when starting fresh\n        }\n\n        // Update offset and hasMore\n        const newOffset = append ? poOffset + newPOs.length : newPOs.length;\n        setPoOffset(newOffset);\n\n        // If we got exactly 1000 records, assume there might be more\n        // Also check the hasMore flag from backend\n        const hasMoreRecords = response.data.hasMore || newPOs.length === 1000;\n        setPoHasMore(hasMoreRecords);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to fetch project objectives');\n    } finally {\n      setLoadingPOs(false);\n      setLoadingMorePOs(false);\n    }\n  }, []);\n\n  // Load saved templates from localStorage\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem('workstreamTemplates');\n      if (saved) {\n        setSavedTemplates(JSON.parse(saved));\n      }\n    } catch (error) {\n      console.error('Error loading templates:', error);\n    }\n  }, []);\n\n  // Initial load\n  useEffect(() => {\n    if (!showForm) {\n      fetchProjectObjectives(0, false);\n    }\n  }, [showForm, fetchProjectObjectives]);\n\n  // Infinite scroll for project objectives\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && poHasMore && !loadingMorePOs && !showForm) {\n        fetchProjectObjectives(poOffset, true);\n      }\n    }, {\n      threshold: 0.1\n    });\n    if (infiniteScrollRef.current) {\n      observer.observe(infiniteScrollRef.current);\n    }\n    return () => {\n      if (infiniteScrollRef.current) {\n        observer.unobserve(infiniteScrollRef.current);\n      }\n    };\n  }, [poHasMore, loadingMorePOs, poOffset, showForm, fetchProjectObjectives]);\n\n  // Filter project objectives by status\n  useEffect(() => {\n    if (statusFilter === '') {\n      setProjectObjectives(allProjectObjectives);\n    } else {\n      setProjectObjectives(allProjectObjectives.filter(po => po.status === statusFilter));\n    }\n  }, [statusFilter, allProjectObjectives]);\n\n  // Get unique status values for filter dropdown (exclude '--' and empty values)\n  const uniqueStatuses = Array.from(new Set(allProjectObjectives.map(po => po.status).filter(s => s && s !== '--'))).sort();\n\n  // Delivery Tool Name picklist (excluding QF as per original requirement)\n  const deliveryToolNameOptions = ['--None--', 'A9', 'ADAP', 'Ampersand', 'Appen Collect', 'AppenLex', 'Baseline', 'EWOQ', 'Exotel', 'Other', 'Polyglot', 'SRT', 'TryRating', 'UHRS', 'Test', 'Test Tool'];\n\n  // Functionality picklist values\n  const functionalityOptions = ['--None--', 'System Access', 'System Access & Productivity', 'Productivity'];\n\n  // Close search results when clicking outside\n  useEffect(() => {\n    const handleClickOutside = event => {\n      Object.keys(showProjectObjectiveDropdowns).forEach(workstreamId => {\n        if (showProjectObjectiveDropdowns[workstreamId] && !event.target.closest(`.project-objective-search-container-${workstreamId}`)) {\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n        }\n      });\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showProjectObjectiveDropdowns]);\n\n  // Search Project Objectives when search term changes (per workstream)\n  useEffect(() => {\n    Object.keys(projectObjectiveSearchTerms).forEach(workstreamId => {\n      const searchTerm = projectObjectiveSearchTerms[workstreamId];\n      const workstream = workstreams.find(w => w.id === workstreamId);\n\n      // Clear any existing timeout\n      if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n        clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n        delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n      }\n\n      // IMPORTANT: Don't search if an objective is already selected\n      // This prevents the search loop when user selects an objective\n      if (workstream && workstream.projectObjectiveId) {\n        setProjectObjectiveSearchResults(prev => ({\n          ...prev,\n          [workstreamId]: []\n        }));\n        setShowProjectObjectiveDropdowns(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        setLoadingProjectObjectiveSearch(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        return;\n      }\n\n      // Don't search if search term is empty\n      if (!searchTerm || searchTerm.trim() === '') {\n        setProjectObjectiveSearchResults(prev => ({\n          ...prev,\n          [workstreamId]: []\n        }));\n        setShowProjectObjectiveDropdowns(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        setLoadingProjectObjectiveSearch(prev => ({\n          ...prev,\n          [workstreamId]: false\n        }));\n        return;\n      }\n\n      // Check if this is a recent selection (within last 2 seconds)\n      const recentSelection = recentSelectionsRef.current[workstreamId];\n      if (recentSelection) {\n        const timeSinceSelection = Date.now() - recentSelection.timestamp;\n        if (timeSinceSelection < 2000) {\n          // This is a recent selection, don't search\n          setProjectObjectiveSearchResults(prev => ({\n            ...prev,\n            [workstreamId]: []\n          }));\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          setLoadingProjectObjectiveSearch(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          return;\n        }\n      }\n\n      // Only search if user is actively typing (not just matching selected value)\n      projectObjectiveSearchTimeoutRefs.current[workstreamId] = setTimeout(async () => {\n        // Get fresh search term and workstream\n        const currentSearchTerm = projectObjectiveSearchTerms[workstreamId];\n        if (!currentSearchTerm || currentSearchTerm.trim() === '') {\n          return;\n        }\n\n        // CRITICAL: Re-check if objective was selected during timeout - if so, abort search\n        const currentWorkstream = workstreams.find(w => w.id === workstreamId);\n        if (currentWorkstream && currentWorkstream.projectObjectiveId) {\n          // An objective was selected, don't search\n          setProjectObjectiveSearchResults(prev => ({\n            ...prev,\n            [workstreamId]: []\n          }));\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          setLoadingProjectObjectiveSearch(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n          return;\n        }\n\n        // Check again if this is a recent selection\n        const currentRecentSelection = recentSelectionsRef.current[workstreamId];\n        if (currentRecentSelection) {\n          const timeSinceSelection = Date.now() - currentRecentSelection.timestamp;\n          if (timeSinceSelection < 2000) {\n            // This is a recent selection, don't search\n            setProjectObjectiveSearchResults(prev => ({\n              ...prev,\n              [workstreamId]: []\n            }));\n            setShowProjectObjectiveDropdowns(prev => ({\n              ...prev,\n              [workstreamId]: false\n            }));\n            setLoadingProjectObjectiveSearch(prev => ({\n              ...prev,\n              [workstreamId]: false\n            }));\n            return;\n          }\n        }\n        setLoadingProjectObjectiveSearch(prev => ({\n          ...prev,\n          [workstreamId]: true\n        }));\n        try {\n          const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(currentSearchTerm)}`);\n          if (response.data.success) {\n            // CRITICAL: Final check before showing results - make sure objective wasn't selected during API call\n            const finalWorkstream = workstreams.find(w => w.id === workstreamId);\n            if (finalWorkstream && finalWorkstream.projectObjectiveId) {\n              // An objective was selected during the API call, don't show results\n              setProjectObjectiveSearchResults(prev => ({\n                ...prev,\n                [workstreamId]: []\n              }));\n              setShowProjectObjectiveDropdowns(prev => ({\n                ...prev,\n                [workstreamId]: false\n              }));\n              setLoadingProjectObjectiveSearch(prev => ({\n                ...prev,\n                [workstreamId]: false\n              }));\n              return;\n            }\n\n            // Check for recent selection\n            const finalRecentSelection = recentSelectionsRef.current[workstreamId];\n            if (finalRecentSelection) {\n              const timeSinceSelection = Date.now() - finalRecentSelection.timestamp;\n              if (timeSinceSelection < 2000) {\n                // Objective was just selected, don't show results\n                setProjectObjectiveSearchResults(prev => ({\n                  ...prev,\n                  [workstreamId]: []\n                }));\n                setShowProjectObjectiveDropdowns(prev => ({\n                  ...prev,\n                  [workstreamId]: false\n                }));\n                setLoadingProjectObjectiveSearch(prev => ({\n                  ...prev,\n                  [workstreamId]: false\n                }));\n                return;\n              }\n            }\n\n            // All checks passed, show results\n            setProjectObjectiveSearchResults(prev => ({\n              ...prev,\n              [workstreamId]: response.data.projectObjectives || []\n            }));\n            setShowProjectObjectiveDropdowns(prev => ({\n              ...prev,\n              [workstreamId]: true\n            }));\n          }\n        } catch (error) {\n          setProjectObjectiveSearchResults(prev => ({\n            ...prev,\n            [workstreamId]: []\n          }));\n        } finally {\n          setLoadingProjectObjectiveSearch(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n        }\n      }, 300);\n    });\n    return () => {\n      Object.keys(projectObjectiveSearchTimeoutRefs.current).forEach(workstreamId => {\n        if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n          clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n          delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n        }\n      });\n    };\n  }, [projectObjectiveSearchTerms, workstreams]);\n  const handleProjectObjectiveSelect = (workstreamId, objective) => {\n    const selectedName = objective.contributorFacingProjectName || objective.name;\n\n    // Clear any pending search timeout immediately\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n\n    // Mark this as a recent selection to prevent search loop\n    recentSelectionsRef.current[workstreamId] = {\n      name: selectedName,\n      timestamp: Date.now()\n    };\n\n    // Update workstream with selected objective\n    setWorkstreams(prev => prev.map(ws => ws.id === workstreamId ? {\n      ...ws,\n      projectObjective: selectedName,\n      projectObjectiveId: objective.id\n    } : ws));\n\n    // Clear search term instead of setting it to selected name - this prevents re-triggering search\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: ''\n    }));\n\n    // Immediately close dropdown and clear results\n    setShowProjectObjectiveDropdowns(prev => ({\n      ...prev,\n      [workstreamId]: false\n    }));\n    setProjectObjectiveSearchResults(prev => ({\n      ...prev,\n      [workstreamId]: []\n    }));\n    setLoadingProjectObjectiveSearch(prev => ({\n      ...prev,\n      [workstreamId]: false\n    }));\n\n    // Clear the recent selection flag after a delay\n    setTimeout(() => {\n      if (recentSelectionsRef.current[workstreamId]) {\n        delete recentSelectionsRef.current[workstreamId];\n      }\n    }, 2000);\n  };\n  const handleClearProjectObjective = workstreamId => {\n    setWorkstreams(prev => prev.map(ws => ws.id === workstreamId ? {\n      ...ws,\n      projectObjective: '',\n      projectObjectiveId: ''\n    } : ws));\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: ''\n    }));\n    setProjectObjectiveSearchResults(prev => ({\n      ...prev,\n      [workstreamId]: []\n    }));\n    setShowProjectObjectiveDropdowns(prev => ({\n      ...prev,\n      [workstreamId]: false\n    }));\n  };\n  const handleInputChange = (workstreamId, field, value) => {\n    setWorkstreams(prev => prev.map(ws => ws.id === workstreamId ? {\n      ...ws,\n      [field]: value\n    } : ws));\n  };\n  const handleSearchTermChange = (workstreamId, value) => {\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: value\n    }));\n    if (value === '') {\n      handleClearProjectObjective(workstreamId);\n    }\n  };\n  const toggleWorkstreamExpanded = workstreamId => {\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [workstreamId]: !prev[workstreamId]\n    }));\n  };\n  const addWorkstream = () => {\n    const newId = Date.now();\n    setWorkstreams(prev => [...prev, {\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [newId]: true\n    }));\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [newId]: ''\n    }));\n  };\n  const removeWorkstream = workstreamId => {\n    if (workstreams.length === 1) {\n      toast.error('At least one workstream is required');\n      return;\n    }\n    setWorkstreams(prev => prev.filter(ws => ws.id !== workstreamId));\n    setExpandedWorkstreams(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchTerms(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchResults(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setShowProjectObjectiveDropdowns(prev => {\n      const newState = {\n        ...prev\n      };\n      delete newState[workstreamId];\n      return newState;\n    });\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n  };\n  const validateWorkstream = workstream => {\n    if (!workstream.projectObjectiveId) {\n      return 'Project Objective is required';\n    }\n    if (!workstream.deliveryToolName || workstream.deliveryToolName === '--None--') {\n      return 'Delivery Tool Name is required';\n    }\n    if (!workstream.clientWorkstreamIdentifier || workstream.clientWorkstreamIdentifier.trim() === '') {\n      return 'Client Workstream Identifier is required';\n    }\n    if (!workstream.functionality || workstream.functionality === '--None--') {\n      return 'Functionality is required';\n    }\n    return null;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Validate all workstreams\n    const validationErrors = [];\n    workstreams.forEach((workstream, index) => {\n      const error = validateWorkstream(workstream);\n      if (error) {\n        validationErrors.push(`Workstream ${index + 1}: ${error}`);\n      }\n    });\n    if (validationErrors.length > 0) {\n      toast.error(validationErrors[0]);\n      return;\n    }\n    setSubmitting(true);\n    try {\n      // Create all workstreams - each under its respective project objective\n      const createPromises = workstreams.map(workstream => apiClient.post('/workstream/create', {\n        projectWorkstreamName: workstream.projectWorkstreamName,\n        projectObjective: workstream.projectObjective,\n        projectObjectiveId: workstream.projectObjectiveId,\n        refresh: workstream.refresh,\n        deliveryToolName: workstream.deliveryToolName,\n        clientWorkstreamIdentifier: workstream.clientWorkstreamIdentifier,\n        functionality: workstream.functionality\n      }));\n      const results = await Promise.all(createPromises);\n      const successCount = results.filter(r => r.data.success).length;\n      if (successCount === workstreams.length) {\n        toast.success(`Successfully created ${successCount} workstream(s)`);\n        // Reset all workstreams and hide form\n        const newId = Date.now();\n        setWorkstreams([{\n          id: newId,\n          projectWorkstreamName: '',\n          projectObjective: '',\n          projectObjectiveId: '',\n          refresh: false,\n          deliveryToolName: '',\n          clientWorkstreamIdentifier: '',\n          functionality: ''\n        }]);\n        setExpandedWorkstreams({\n          [newId]: true\n        });\n        setProjectObjectiveSearchTerms({\n          [newId]: ''\n        });\n        setProjectObjectiveSearchResults({});\n        setShowProjectObjectiveDropdowns({});\n        setShowForm(false);\n        // Reload project objectives list\n        fetchProjectObjectives(0, false);\n      } else {\n        toast.error(`Created ${successCount} of ${workstreams.length} workstream(s)`);\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message || 'Failed to create workstream(s)';\n      toast.error(errorMessage);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const handleCancel = () => {\n    // Reset all workstreams and hide form\n    const newId = Date.now();\n    setWorkstreams([{\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams({\n      [newId]: true\n    });\n    setProjectObjectiveSearchTerms({\n      [newId]: ''\n    });\n    setProjectObjectiveSearchResults({});\n    setShowProjectObjectiveDropdowns({});\n    setShowForm(false);\n    // Reload project objectives list\n    fetchProjectObjectives(0, false);\n  };\n  const handleAddWorkstream = () => {\n    setShowForm(true);\n  };\n\n  // Save current workstreams as template\n  const handleSaveTemplate = () => {\n    if (workstreams.length === 0) {\n      toast.error('No workstreams to save as template');\n      return;\n    }\n    setShowTemplateModal(true);\n  };\n  const confirmSaveTemplate = () => {\n    if (!templateName.trim()) {\n      toast.error('Please enter a template name');\n      return;\n    }\n    try {\n      const template = {\n        id: Date.now(),\n        name: templateName.trim(),\n        createdAt: new Date().toISOString(),\n        workstreams: workstreams.map(ws => ({\n          projectWorkstreamName: ws.projectWorkstreamName,\n          projectObjective: ws.projectObjective,\n          projectObjectiveId: ws.projectObjectiveId,\n          refresh: ws.refresh,\n          deliveryToolName: ws.deliveryToolName,\n          clientWorkstreamIdentifier: ws.clientWorkstreamIdentifier,\n          functionality: ws.functionality\n        }))\n      };\n      const updatedTemplates = [...savedTemplates, template];\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template saved successfully');\n      setShowTemplateModal(false);\n      setTemplateName('');\n    } catch (error) {\n      console.error('Error saving template:', error);\n      toast.error('Failed to save template');\n    }\n  };\n\n  // Load template\n  const handleLoadTemplate = template => {\n    try {\n      const newWorkstreams = template.workstreams.map((ws, index) => ({\n        id: Date.now() + index,\n        ...ws\n      }));\n      setWorkstreams(newWorkstreams);\n      setExpandedWorkstreams(newWorkstreams.reduce((acc, ws) => {\n        acc[ws.id] = true;\n        return acc;\n      }, {}));\n      setShowLoadTemplateModal(false);\n      toast.success(`Template \"${template.name}\" loaded successfully`);\n    } catch (error) {\n      console.error('Error loading template:', error);\n      toast.error('Failed to load template');\n    }\n  };\n\n  // Delete template\n  const handleDeleteTemplate = templateId => {\n    try {\n      const updatedTemplates = savedTemplates.filter(t => t.id !== templateId);\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template deleted successfully');\n    } catch (error) {\n      console.error('Error deleting template:', error);\n      toast.error('Failed to delete template');\n    }\n  };\n\n  // Clone workstream\n  const handleCloneWorkstream = workstreamId => {\n    const workstreamToClone = workstreams.find(ws => ws.id === workstreamId);\n    if (!workstreamToClone) return;\n    const clonedWorkstream = {\n      ...workstreamToClone,\n      id: Date.now(),\n      projectWorkstreamName: `${workstreamToClone.projectWorkstreamName} (Copy)`,\n      projectObjective: '',\n      projectObjectiveId: ''\n    };\n    setWorkstreams(prev => [...prev, clonedWorkstream]);\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [clonedWorkstream.id]: true\n    }));\n    toast.success('Workstream cloned successfully');\n  };\n  const renderWorkstreamForm = (workstream, index) => {\n    const isExpanded = expandedWorkstreams[workstream.id] !== false;\n    const searchTerm = projectObjectiveSearchTerms[workstream.id] || '';\n    const searchResults = projectObjectiveSearchResults[workstream.id] || [];\n    const loadingSearch = loadingProjectObjectiveSearch[workstream.id] || false;\n    const showDropdown = showProjectObjectiveDropdowns[workstream.id] || false;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"workstream-form-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create-workstream-header-section\",\n        onClick: () => toggleWorkstreamExpanded(workstream.id),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"create-workstream-toggle\",\n          onClick: e => {\n            e.stopPropagation();\n            toggleWorkstreamExpanded(workstream.id);\n          },\n          children: isExpanded ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"create-workstream-title-text\",\n          children: [\"WorkStream \", index + 1, workstream.projectObjective ? ` - ${workstream.projectObjective}` : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '8px',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"create-workstream-remove\",\n            onClick: e => {\n              e.stopPropagation();\n              handleCloneWorkstream(workstream.id);\n            },\n            title: \"Clone workstream\",\n            style: {\n              background: 'transparent',\n              border: 'none',\n              cursor: 'pointer',\n              padding: '4px',\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Copy, {\n              size: 16,\n              style: {\n                color: '#0176d3'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 13\n          }, this), workstreams.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"create-workstream-remove\",\n            onClick: e => {\n              e.stopPropagation();\n              removeWorkstream(workstream.id);\n            },\n            title: \"Remove workstream\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 9\n      }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workstream-form-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section-card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-grid-two-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Project Workstream Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 719,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: workstream.projectWorkstreamName,\n                  onChange: e => handleInputChange(workstream.id, 'projectWorkstreamName', e.target.value),\n                  className: \"form-input-compact\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 720,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 718,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Project Objective \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 730,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `project-objective-search-container project-objective-search-container-${workstream.id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"search-input-wrapper\",\n                    children: [/*#__PURE__*/_jsxDEV(Search, {\n                      size: 14,\n                      className: \"search-icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 734,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      placeholder: \"Search for project objective...\",\n                      value: workstream.projectObjectiveId ? workstream.projectObjective : searchTerm,\n                      readOnly: !!workstream.projectObjectiveId,\n                      onChange: e => {\n                        // Only allow changes if no objective is selected\n                        if (!workstream.projectObjectiveId) {\n                          handleSearchTermChange(workstream.id, e.target.value);\n                        }\n                      },\n                      onFocus: () => {\n                        // If there's a selection, allow clearing it\n                        if (workstream.projectObjectiveId) {\n                          // User can click X button to clear\n                        } else if (searchResults.length > 0) {\n                          setShowProjectObjectiveDropdowns(prev => ({\n                            ...prev,\n                            [workstream.id]: true\n                          }));\n                        }\n                      },\n                      onClick: () => {\n                        // If there's a selection and user clicks, don't clear automatically\n                        // They need to use the X button\n                        if (!workstream.projectObjectiveId && searchResults.length > 0) {\n                          setShowProjectObjectiveDropdowns(prev => ({\n                            ...prev,\n                            [workstream.id]: true\n                          }));\n                        }\n                      },\n                      className: \"form-input-compact search-input\",\n                      style: workstream.projectObjectiveId ? {\n                        cursor: 'default'\n                      } : {}\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 735,\n                      columnNumber: 25\n                    }, this), workstream.projectObjectiveId && /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      onClick: () => handleClearProjectObjective(workstream.id),\n                      className: \"clear-button\",\n                      title: \"Clear selection\",\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        size: 14\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 771,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 765,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 733,\n                    columnNumber: 23\n                  }, this), loadingSearch && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"searching-indicator\",\n                    children: \"Searching...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 776,\n                    columnNumber: 25\n                  }, this), showDropdown && searchResults.length > 0 && !workstream.projectObjectiveId && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"search-results-dropdown\",\n                    children: searchResults.map(objective => /*#__PURE__*/_jsxDEV(\"div\", {\n                      onClick: () => handleProjectObjectiveSelect(workstream.id, objective),\n                      className: `search-result-item ${workstream.projectObjectiveId === objective.id ? 'selected' : ''}`,\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"search-result-name\",\n                        children: objective.contributorFacingProjectName || objective.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 786,\n                        columnNumber: 31\n                      }, this), objective.projectName && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"search-result-subtitle\",\n                        children: [\"Project: \", objective.projectName]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 790,\n                        columnNumber: 33\n                      }, this)]\n                    }, objective.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 781,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 779,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 732,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                style: {\n                  marginTop: '6px'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"checkbox-label\",\n                  style: {\n                    marginBottom: 0\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: workstream.refresh,\n                    onChange: e => handleInputChange(workstream.id, 'refresh', e.target.checked),\n                    className: \"checkbox-input\",\n                    style: {\n                      marginRight: '8px',\n                      marginTop: '0',\n                      verticalAlign: 'middle'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 803,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"checkbox-text\",\n                    style: {\n                      verticalAlign: 'middle'\n                    },\n                    children: \"Refresh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 810,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Info, {\n                    size: 12,\n                    className: \"info-icon\",\n                    style: {\n                      marginLeft: '6px',\n                      verticalAlign: 'middle'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 811,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 802,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 801,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 717,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Delivery Tool Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 819,\n                    columnNumber: 42\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 818,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: workstream.deliveryToolName,\n                  onChange: e => handleInputChange(workstream.id, 'deliveryToolName', e.target.value),\n                  className: \"form-input-compact\",\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"--None--\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 827,\n                    columnNumber: 23\n                  }, this), deliveryToolNameOptions.filter(opt => opt !== '--None--').map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option,\n                    children: option\n                  }, option, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 829,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 821,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Client Workstream Identifier \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 836,\n                    columnNumber: 52\n                  }, this), /*#__PURE__*/_jsxDEV(Info, {\n                    size: 12,\n                    className: \"info-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 837,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 835,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: workstream.clientWorkstreamIdentifier,\n                  onChange: e => handleInputChange(workstream.id, 'clientWorkstreamIdentifier', e.target.value),\n                  className: \"form-input-compact\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 839,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 834,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Functionality \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"required\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 850,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Info, {\n                    size: 12,\n                    className: \"info-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 851,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 849,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: workstream.functionality,\n                  onChange: e => handleInputChange(workstream.id, 'functionality', e.target.value),\n                  className: \"form-input-compact\",\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"--None--\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 859,\n                    columnNumber: 23\n                  }, this), functionalityOptions.filter(opt => opt !== '--None--').map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option,\n                    children: option\n                  }, option, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 861,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 853,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 848,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 816,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 714,\n        columnNumber: 11\n      }, this)]\n    }, workstream.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 7\n    }, this);\n  };\n  const content = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-workstream-content\",\n    children: [!showForm ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: 0,\n            fontSize: '18px',\n            fontWeight: 600,\n            color: '#002329'\n          },\n          children: \"Project Objectives Without Workstreams\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-primary\",\n          onClick: handleAddWorkstream,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 15\n          }, this), \"Add Workstream\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 883,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 879,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '12px',\n          alignItems: 'center',\n          marginBottom: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontSize: '14px',\n            fontWeight: 500,\n            color: '#002329'\n          },\n          children: \"Filter by Status:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 896,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: statusFilter,\n          onChange: e => setStatusFilter(e.target.value),\n          style: {\n            fontSize: '14px',\n            padding: '8px 12px',\n            border: '1px solid var(--border-color)',\n            borderRadius: 'var(--radius-md)',\n            background: 'var(--surface)',\n            color: 'var(--text-primary)',\n            minWidth: '180px',\n            cursor: 'pointer',\n            fontFamily: 'Poppins'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 914,\n            columnNumber: 15\n          }, this), uniqueStatuses.map(status => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: status,\n            children: status\n          }, status, false, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 899,\n          columnNumber: 13\n        }, this), statusFilter && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setStatusFilter(''),\n          style: {\n            fontSize: '13px',\n            padding: '6px 12px',\n            background: 'transparent',\n            border: '1px solid var(--border-color)',\n            borderRadius: 'var(--radius-md)',\n            color: 'var(--text-secondary)',\n            cursor: 'pointer',\n            fontFamily: 'Poppins'\n          },\n          children: \"Clear Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 895,\n        columnNumber: 11\n      }, this), loadingPOs && allProjectObjectives.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '40px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Loader, {\n          className: \"spinning\",\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading project objectives...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 941,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"project-objectives-table-container\",\n        style: {\n          maxHeight: '70vh',\n          overflowY: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"project-objectives-table\",\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Project Objective\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 950,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Associated Project\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 951,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Project Objective Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 952,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 949,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: projectObjectives.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"3\",\n                className: \"no-data\",\n                style: {\n                  textAlign: 'center',\n                  padding: '40px'\n                },\n                children: \"No project objectives without workstreams found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 958,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 957,\n              columnNumber: 21\n            }, this) : projectObjectives.map((po, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: po.name || '--'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 965,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: po.projectName || '--'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 966,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: po.status || '--'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 967,\n                columnNumber: 25\n              }, this)]\n            }, po.id || index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 964,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 15\n        }, this), (poHasMore || allProjectObjectives.length >= 1000) && !loadingMorePOs && allProjectObjectives.length > 0 && !loadingPOs && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '20px',\n            borderTop: '1px solid var(--border-color)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: () => fetchProjectObjectives(poOffset, true),\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '8px',\n              padding: '10px 24px',\n              fontSize: '14px',\n              fontWeight: 600\n            },\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 990,\n              columnNumber: 21\n            }, this), \"Show More (\", allProjectObjectives.length, \" loaded\", poHasMore ? ', more available' : '', \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 977,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '8px',\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: \"Click to load next 1000 project objectives\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 993,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 976,\n          columnNumber: 17\n        }, this), loadingMorePOs && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '20px',\n            borderTop: '1px solid var(--border-color)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Loader, {\n            className: \"spinning\",\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1001,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: '8px'\n            },\n            children: \"Loading more project objectives...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1002,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1000,\n          columnNumber: 17\n        }, this), poHasMore && !loadingMorePOs && /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: infiniteScrollRef,\n          style: {\n            height: '20px',\n            width: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1008,\n          columnNumber: 17\n        }, this), allProjectObjectives.length > 0 && !poHasMore && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '16px',\n            borderTop: '1px solid var(--border-color)',\n            color: '#666',\n            fontSize: '13px'\n          },\n          children: statusFilter ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Showing \", projectObjectives.length, \" of \", allProjectObjectives.length, \" project objectives (filtered by status: \", statusFilter, \")\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"All \", allProjectObjectives.length, \" project objectives loaded\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1015,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 946,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"create-workstream-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: 0,\n            fontSize: '18px',\n            fontWeight: 600,\n            color: '#002329'\n          },\n          children: \"Create Workstream\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1029,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: () => setShowForm(false),\n          children: \"Back to List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1032,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1028,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '16px',\n          display: 'flex',\n          gap: '12px',\n          alignItems: 'center',\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-primary\",\n          onClick: addWorkstream,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1048,\n            columnNumber: 15\n          }, this), \"Add WorkStream\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1042,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: handleSaveTemplate,\n          disabled: workstreams.length === 0,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          title: \"Save current workstreams as template\",\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1059,\n            columnNumber: 15\n          }, this), \"Save Template\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1051,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: () => setShowLoadTemplateModal(true),\n          disabled: savedTemplates.length === 0,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          title: \"Load a saved template\",\n          children: [/*#__PURE__*/_jsxDEV(FolderOpen, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1070,\n            columnNumber: 15\n          }, this), \"Load Template\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1062,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1041,\n        columnNumber: 11\n      }, this), workstreams.map((workstream, index) => renderWorkstreamForm(workstream, index)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: handleCancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1078,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn-primary\",\n          disabled: submitting,\n          children: submitting ? 'Creating...' : `Create ${workstreams.length} WorkStream${workstreams.length > 1 ? 's' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1085,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1077,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1027,\n      columnNumber: 9\n    }, this), showTemplateModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'white',\n          padding: '24px',\n          borderRadius: '8px',\n          minWidth: '400px',\n          maxWidth: '500px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 16px 0',\n            fontSize: '18px',\n            fontWeight: 600\n          },\n          children: \"Save Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1117,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '16px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '8px',\n              fontSize: '14px',\n              fontWeight: 500\n            },\n            children: \"Template Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1119,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: templateName,\n            onChange: e => setTemplateName(e.target.value),\n            placeholder: \"Enter template name\",\n            style: {\n              width: '100%',\n              padding: '8px 12px',\n              border: '1px solid var(--border-color)',\n              borderRadius: '4px',\n              fontSize: '14px'\n            },\n            autoFocus: true,\n            onKeyPress: e => {\n              if (e.key === 'Enter') {\n                confirmSaveTemplate();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1122,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1118,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '12px',\n            justifyContent: 'flex-end'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: () => {\n              setShowTemplateModal(false);\n              setTemplateName('');\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1143,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-primary\",\n            onClick: confirmSaveTemplate,\n            disabled: !templateName.trim(),\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1142,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1110,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1098,\n      columnNumber: 9\n    }, this), showLoadTemplateModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'white',\n          padding: '24px',\n          borderRadius: '8px',\n          minWidth: '500px',\n          maxWidth: '600px',\n          maxHeight: '80vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 16px 0',\n            fontSize: '18px',\n            fontWeight: 600\n          },\n          children: \"Load Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1189,\n          columnNumber: 13\n        }, this), savedTemplates.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#666',\n            fontSize: '14px'\n          },\n          children: \"No saved templates found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1191,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '12px'\n          },\n          children: savedTemplates.map(template => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '12px',\n              border: '1px solid var(--border-color)',\n              borderRadius: '4px',\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 500,\n                  fontSize: '14px',\n                  marginBottom: '4px'\n                },\n                children: template.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1207,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#666'\n                },\n                children: [template.workstreams.length, \" workstream(s) \\u2022 Created \", new Date(template.createdAt).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1210,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1206,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-primary\",\n                onClick: () => handleLoadTemplate(template),\n                style: {\n                  fontSize: '12px',\n                  padding: '6px 12px'\n                },\n                children: \"Load\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1215,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-secondary\",\n                onClick: () => handleDeleteTemplate(template.id),\n                style: {\n                  fontSize: '12px',\n                  padding: '6px 12px',\n                  color: '#d32f2f'\n                },\n                title: \"Delete template\",\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1230,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1223,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1214,\n              columnNumber: 21\n            }, this)]\n          }, template.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1195,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1193,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            marginTop: '16px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: () => setShowLoadTemplateModal(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1238,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1180,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1168,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 875,\n    columnNumber: 5\n  }, this);\n  if (hideHeader) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-workstream-content-wrapper\",\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1253,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-layout\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      isOpen: sidebarOpen,\n      toggleSidebar: () => setSidebarOpen(!sidebarOpen)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-workstream\",\n      style: {\n        marginLeft: sidebarOpen ? '320px' : '80px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create-workstream-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-workstream-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"header-menu-toggle\",\n                onClick: () => setSidebarOpen(!sidebarOpen),\n                \"aria-label\": \"Toggle sidebar\",\n                children: /*#__PURE__*/_jsxDEV(Menu, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1270,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1265,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"page-title\",\n                  children: \"New Project Workstream\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1273,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"page-subtitle\",\n                  children: \"Create a new project workstream\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1274,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-user-profile\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-profile\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"user-avatar\",\n                  children: ((user === null || user === void 0 ? void 0 : user.email) || 'U').charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1279,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"user-name\",\n                  children: (user === null || user === void 0 ? void 0 : user.email) || 'User'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1282,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"logout-btn\",\n                  onClick: logout,\n                  title: \"Logout\",\n                  children: /*#__PURE__*/_jsxDEV(LogOut, {\n                    size: 18\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1284,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1283,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1278,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1277,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1263,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1262,\n          columnNumber: 11\n        }, this), content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1261,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1260,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1257,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateWorkStream, \"8XHI/Mc86TLjWH73Ccp0L/Rd2zA=\", false, function () {\n  return [useAuth];\n});\n_c = CreateWorkStream;\nexport default CreateWorkStream;\nvar _c;\n$RefreshReg$(_c, \"CreateWorkStream\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","Sidebar","Menu","LogOut","Search","X","Info","Plus","ChevronDown","ChevronUp","Trash2","Loader","Save","Copy","FolderOpen","Download","Upload","FileText","apiClient","toast","XLSX","jsxDEV","_jsxDEV","Fragment","_Fragment","CreateWorkStream","hideHeader","_s","user","logout","sidebarOpen","setSidebarOpen","submitting","setSubmitting","showForm","setShowForm","projectObjectives","setProjectObjectives","allProjectObjectives","setAllProjectObjectives","loadingPOs","setLoadingPOs","poOffset","setPoOffset","poHasMore","setPoHasMore","loadingMorePOs","setLoadingMorePOs","infiniteScrollRef","statusFilter","setStatusFilter","workstreams","setWorkstreams","id","Date","now","projectWorkstreamName","projectObjective","projectObjectiveId","refresh","deliveryToolName","clientWorkstreamIdentifier","functionality","expandedWorkstreams","setExpandedWorkstreams","savedTemplates","setSavedTemplates","showTemplateModal","setShowTemplateModal","templateName","setTemplateName","showLoadTemplateModal","setShowLoadTemplateModal","showImportPreview","setShowImportPreview","importedWorkstreams","setImportedWorkstreams","importing","setImporting","projectObjectiveSearchTerms","setProjectObjectiveSearchTerms","projectObjectiveSearchResults","setProjectObjectiveSearchResults","loadingProjectObjectiveSearch","setLoadingProjectObjectiveSearch","showProjectObjectiveDropdowns","setShowProjectObjectiveDropdowns","projectObjectiveSearchTimeoutRefs","recentSelectionsRef","fetchProjectObjectives","offset","append","response","get","params","limit","timeout","data","success","newPOs","prev","newOffset","length","hasMoreRecords","hasMore","error","_error$response","_error$response$data","saved","localStorage","getItem","JSON","parse","console","observer","IntersectionObserver","entries","isIntersecting","threshold","current","observe","unobserve","filter","po","status","uniqueStatuses","Array","from","Set","map","s","sort","deliveryToolNameOptions","functionalityOptions","handleClickOutside","event","Object","keys","forEach","workstreamId","target","closest","document","addEventListener","removeEventListener","searchTerm","workstream","find","w","clearTimeout","trim","recentSelection","timeSinceSelection","timestamp","setTimeout","currentSearchTerm","currentWorkstream","currentRecentSelection","encodeURIComponent","finalWorkstream","finalRecentSelection","handleProjectObjectiveSelect","objective","selectedName","contributorFacingProjectName","name","ws","handleClearProjectObjective","handleInputChange","field","value","handleSearchTermChange","toggleWorkstreamExpanded","addWorkstream","newId","removeWorkstream","newState","validateWorkstream","handleSubmit","e","preventDefault","validationErrors","index","push","createPromises","post","results","Promise","all","successCount","r","_error$response2","_error$response2$data","errorMessage","message","handleCancel","handleAddWorkstream","handleSaveTemplate","confirmSaveTemplate","template","createdAt","toISOString","updatedTemplates","setItem","stringify","handleLoadTemplate","newWorkstreams","reduce","acc","handleDeleteTemplate","templateId","t","handleCloneWorkstream","workstreamToClone","clonedWorkstream","renderWorkstreamForm","isExpanded","searchResults","loadingSearch","showDropdown","className","children","onClick","type","stopPropagation","size","fileName","_jsxFileName","lineNumber","columnNumber","style","display","gap","alignItems","title","background","border","cursor","padding","color","onChange","placeholder","readOnly","onFocus","projectName","marginTop","marginBottom","checked","marginRight","verticalAlign","marginLeft","required","opt","option","content","justifyContent","margin","fontSize","fontWeight","borderRadius","minWidth","fontFamily","textAlign","maxHeight","overflowY","width","colSpan","borderTop","ref","height","onSubmit","flexWrap","disabled","position","top","left","right","bottom","zIndex","maxWidth","autoFocus","onKeyPress","key","overflow","flexDirection","toLocaleDateString","isOpen","toggleSidebar","email","charAt","toUpperCase","_c","$RefreshReg$"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/CreateWorkStream.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport { Menu, LogOut, Search, X, Info, Plus, ChevronDown, ChevronUp, Trash2, Loader, Save, Copy, FolderOpen, Download, Upload, FileText } from 'lucide-react';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport * as XLSX from 'xlsx';\nimport '../styles/CreateWorkStream.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\nconst CreateWorkStream = ({ hideHeader = false }) => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [showForm, setShowForm] = useState(false); // New state to control form visibility\n  \n  // Project Objectives without workstreams\n  const [projectObjectives, setProjectObjectives] = useState([]);\n  const [allProjectObjectives, setAllProjectObjectives] = useState([]); // Store all fetched data for filtering\n  const [loadingPOs, setLoadingPOs] = useState(true);\n  const [poOffset, setPoOffset] = useState(0);\n  const [poHasMore, setPoHasMore] = useState(true);\n  const [loadingMorePOs, setLoadingMorePOs] = useState(false);\n  const infiniteScrollRef = useRef(null);\n  const [statusFilter, setStatusFilter] = useState(''); // Filter by status\n  \n  // Workstreams array - each workstream has its own form data\n  const [workstreams, setWorkstreams] = useState([\n    {\n      id: Date.now(),\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }\n  ]);\n  \n  // Track expanded/collapsed state for each workstream\n  const [expandedWorkstreams, setExpandedWorkstreams] = useState({ [Date.now()]: true });\n  \n  // Templates state\n  const [savedTemplates, setSavedTemplates] = useState([]);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [templateName, setTemplateName] = useState('');\n  const [showLoadTemplateModal, setShowLoadTemplateModal] = useState(false);\n  const [showImportPreview, setShowImportPreview] = useState(false);\n  const [importedWorkstreams, setImportedWorkstreams] = useState([]);\n  const [importing, setImporting] = useState(false);\n\n  // Project Objective search - per workstream\n  const [projectObjectiveSearchTerms, setProjectObjectiveSearchTerms] = useState({});\n  const [projectObjectiveSearchResults, setProjectObjectiveSearchResults] = useState({});\n  const [loadingProjectObjectiveSearch, setLoadingProjectObjectiveSearch] = useState({});\n  const [showProjectObjectiveDropdowns, setShowProjectObjectiveDropdowns] = useState({});\n  const projectObjectiveSearchTimeoutRefs = useRef({});\n  const recentSelectionsRef = useRef({}); // Track recent selections to prevent search loop\n\n  // Fetch project objectives without workstreams\n  const fetchProjectObjectives = useCallback(async (offset = 0, append = false) => {\n    try {\n      if (offset === 0) {\n        setLoadingPOs(true);\n      } else {\n        setLoadingMorePOs(true);\n      }\n      \n      const response = await apiClient.get('/workstream/project-objectives-without-workstreams', {\n        params: { limit: 1000, offset },\n        timeout: 120000 // 2 minutes to match backend timeout\n      });\n      \n      if (response.data.success) {\n        const newPOs = response.data.projectObjectives;\n        if (append) {\n          setAllProjectObjectives(prev => [...prev, ...newPOs]);\n        } else {\n          setAllProjectObjectives(newPOs);\n          setPoOffset(0); // Reset offset when starting fresh\n        }\n        \n        // Update offset and hasMore\n        const newOffset = append ? poOffset + newPOs.length : newPOs.length;\n        setPoOffset(newOffset);\n        \n        // If we got exactly 1000 records, assume there might be more\n        // Also check the hasMore flag from backend\n        const hasMoreRecords = response.data.hasMore || newPOs.length === 1000;\n        setPoHasMore(hasMoreRecords);\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.error || 'Failed to fetch project objectives');\n    } finally {\n      setLoadingPOs(false);\n      setLoadingMorePOs(false);\n    }\n  }, []);\n\n  // Load saved templates from localStorage\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem('workstreamTemplates');\n      if (saved) {\n        setSavedTemplates(JSON.parse(saved));\n      }\n    } catch (error) {\n      console.error('Error loading templates:', error);\n    }\n  }, []);\n\n  // Initial load\n  useEffect(() => {\n    if (!showForm) {\n      fetchProjectObjectives(0, false);\n    }\n  }, [showForm, fetchProjectObjectives]);\n\n  // Infinite scroll for project objectives\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && poHasMore && !loadingMorePOs && !showForm) {\n          fetchProjectObjectives(poOffset, true);\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    if (infiniteScrollRef.current) {\n      observer.observe(infiniteScrollRef.current);\n    }\n\n    return () => {\n      if (infiniteScrollRef.current) {\n        observer.unobserve(infiniteScrollRef.current);\n      }\n    };\n  }, [poHasMore, loadingMorePOs, poOffset, showForm, fetchProjectObjectives]);\n\n  // Filter project objectives by status\n  useEffect(() => {\n    if (statusFilter === '') {\n      setProjectObjectives(allProjectObjectives);\n    } else {\n      setProjectObjectives(allProjectObjectives.filter(po => po.status === statusFilter));\n    }\n  }, [statusFilter, allProjectObjectives]);\n\n  // Get unique status values for filter dropdown (exclude '--' and empty values)\n  const uniqueStatuses = Array.from(new Set(allProjectObjectives.map(po => po.status).filter(s => s && s !== '--'))).sort();\n\n  // Delivery Tool Name picklist (excluding QF as per original requirement)\n  const deliveryToolNameOptions = [\n    '--None--',\n    'A9',\n    'ADAP',\n    'Ampersand',\n    'Appen Collect',\n    'AppenLex',\n    'Baseline',\n    'EWOQ',\n    'Exotel',\n    'Other',\n    'Polyglot',\n    'SRT',\n    'TryRating',\n    'UHRS',\n    'Test',\n    'Test Tool'\n  ];\n\n  // Functionality picklist values\n  const functionalityOptions = [\n    '--None--',\n    'System Access',\n    'System Access & Productivity',\n    'Productivity'\n  ];\n\n  // Close search results when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      Object.keys(showProjectObjectiveDropdowns).forEach(workstreamId => {\n        if (showProjectObjectiveDropdowns[workstreamId] && !event.target.closest(`.project-objective-search-container-${workstreamId}`)) {\n          setShowProjectObjectiveDropdowns(prev => ({\n            ...prev,\n            [workstreamId]: false\n          }));\n        }\n      });\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showProjectObjectiveDropdowns]);\n\n  // Search Project Objectives when search term changes (per workstream)\n  useEffect(() => {\n    Object.keys(projectObjectiveSearchTerms).forEach(workstreamId => {\n      const searchTerm = projectObjectiveSearchTerms[workstreamId];\n      const workstream = workstreams.find(w => w.id === workstreamId);\n      \n      // Clear any existing timeout\n      if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n        clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n        delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n      }\n\n      // IMPORTANT: Don't search if an objective is already selected\n      // This prevents the search loop when user selects an objective\n      if (workstream && workstream.projectObjectiveId) {\n        setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n        setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n        setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n        return;\n      }\n\n      // Don't search if search term is empty\n      if (!searchTerm || searchTerm.trim() === '') {\n        setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n        setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n        setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n        return;\n      }\n\n      // Check if this is a recent selection (within last 2 seconds)\n      const recentSelection = recentSelectionsRef.current[workstreamId];\n      if (recentSelection) {\n        const timeSinceSelection = Date.now() - recentSelection.timestamp;\n        if (timeSinceSelection < 2000) {\n          // This is a recent selection, don't search\n          setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n          setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n          setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n          return;\n        }\n      }\n\n      // Only search if user is actively typing (not just matching selected value)\n      projectObjectiveSearchTimeoutRefs.current[workstreamId] = setTimeout(async () => {\n        // Get fresh search term and workstream\n        const currentSearchTerm = projectObjectiveSearchTerms[workstreamId];\n        if (!currentSearchTerm || currentSearchTerm.trim() === '') {\n          return;\n        }\n        \n        // CRITICAL: Re-check if objective was selected during timeout - if so, abort search\n        const currentWorkstream = workstreams.find(w => w.id === workstreamId);\n        if (currentWorkstream && currentWorkstream.projectObjectiveId) {\n          // An objective was selected, don't search\n          setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n          setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n          setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n          return;\n        }\n        \n        // Check again if this is a recent selection\n        const currentRecentSelection = recentSelectionsRef.current[workstreamId];\n        if (currentRecentSelection) {\n          const timeSinceSelection = Date.now() - currentRecentSelection.timestamp;\n          if (timeSinceSelection < 2000) {\n            // This is a recent selection, don't search\n            setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n            setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n            setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n            return;\n          }\n        }\n        \n        setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: true }));\n        try {\n          const response = await apiClient.get(`/workstream/search-project-objectives?search=${encodeURIComponent(currentSearchTerm)}`);\n          if (response.data.success) {\n            // CRITICAL: Final check before showing results - make sure objective wasn't selected during API call\n            const finalWorkstream = workstreams.find(w => w.id === workstreamId);\n            if (finalWorkstream && finalWorkstream.projectObjectiveId) {\n              // An objective was selected during the API call, don't show results\n              setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n              setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n              return;\n            }\n            \n            // Check for recent selection\n            const finalRecentSelection = recentSelectionsRef.current[workstreamId];\n            if (finalRecentSelection) {\n              const timeSinceSelection = Date.now() - finalRecentSelection.timestamp;\n              if (timeSinceSelection < 2000) {\n                // Objective was just selected, don't show results\n                setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n                setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n                setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n                return;\n              }\n            }\n            \n            // All checks passed, show results\n            setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: response.data.projectObjectives || [] }));\n            setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: true }));\n          }\n        } catch (error) {\n          setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n        } finally {\n          setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n        }\n      }, 300);\n    });\n\n    return () => {\n      Object.keys(projectObjectiveSearchTimeoutRefs.current).forEach(workstreamId => {\n        if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n          clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n          delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n        }\n      });\n    };\n  }, [projectObjectiveSearchTerms, workstreams]);\n\n  const handleProjectObjectiveSelect = (workstreamId, objective) => {\n    const selectedName = objective.contributorFacingProjectName || objective.name;\n    \n    // Clear any pending search timeout immediately\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n    \n    // Mark this as a recent selection to prevent search loop\n    recentSelectionsRef.current[workstreamId] = {\n      name: selectedName,\n      timestamp: Date.now()\n    };\n    \n    // Update workstream with selected objective\n    setWorkstreams(prev => prev.map(ws => \n      ws.id === workstreamId \n        ? {\n            ...ws,\n            projectObjective: selectedName,\n            projectObjectiveId: objective.id\n          }\n        : ws\n    ));\n    \n    // Clear search term instead of setting it to selected name - this prevents re-triggering search\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: ''\n    }));\n    \n    // Immediately close dropdown and clear results\n    setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n    setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n    setLoadingProjectObjectiveSearch(prev => ({ ...prev, [workstreamId]: false }));\n    \n    // Clear the recent selection flag after a delay\n    setTimeout(() => {\n      if (recentSelectionsRef.current[workstreamId]) {\n        delete recentSelectionsRef.current[workstreamId];\n      }\n    }, 2000);\n  };\n\n  const handleClearProjectObjective = (workstreamId) => {\n    setWorkstreams(prev => prev.map(ws => \n      ws.id === workstreamId \n        ? {\n            ...ws,\n            projectObjective: '',\n            projectObjectiveId: ''\n          }\n        : ws\n    ));\n    setProjectObjectiveSearchTerms(prev => ({ ...prev, [workstreamId]: '' }));\n    setProjectObjectiveSearchResults(prev => ({ ...prev, [workstreamId]: [] }));\n    setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstreamId]: false }));\n  };\n\n  const handleInputChange = (workstreamId, field, value) => {\n    setWorkstreams(prev => prev.map(ws => \n      ws.id === workstreamId ? { ...ws, [field]: value } : ws\n    ));\n  };\n\n  const handleSearchTermChange = (workstreamId, value) => {\n    setProjectObjectiveSearchTerms(prev => ({\n      ...prev,\n      [workstreamId]: value\n    }));\n    if (value === '') {\n      handleClearProjectObjective(workstreamId);\n    }\n  };\n\n  const toggleWorkstreamExpanded = (workstreamId) => {\n    setExpandedWorkstreams(prev => ({\n      ...prev,\n      [workstreamId]: !prev[workstreamId]\n    }));\n  };\n\n  const addWorkstream = () => {\n    const newId = Date.now();\n    setWorkstreams(prev => [...prev, {\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams(prev => ({ ...prev, [newId]: true }));\n    setProjectObjectiveSearchTerms(prev => ({ ...prev, [newId]: '' }));\n  };\n\n  const removeWorkstream = (workstreamId) => {\n    if (workstreams.length === 1) {\n      toast.error('At least one workstream is required');\n      return;\n    }\n    setWorkstreams(prev => prev.filter(ws => ws.id !== workstreamId));\n    setExpandedWorkstreams(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchTerms(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setProjectObjectiveSearchResults(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    setShowProjectObjectiveDropdowns(prev => {\n      const newState = { ...prev };\n      delete newState[workstreamId];\n      return newState;\n    });\n    if (projectObjectiveSearchTimeoutRefs.current[workstreamId]) {\n      clearTimeout(projectObjectiveSearchTimeoutRefs.current[workstreamId]);\n      delete projectObjectiveSearchTimeoutRefs.current[workstreamId];\n    }\n  };\n\n  const validateWorkstream = (workstream) => {\n    if (!workstream.projectObjectiveId) {\n      return 'Project Objective is required';\n    }\n    if (!workstream.deliveryToolName || workstream.deliveryToolName === '--None--') {\n      return 'Delivery Tool Name is required';\n    }\n    if (!workstream.clientWorkstreamIdentifier || workstream.clientWorkstreamIdentifier.trim() === '') {\n      return 'Client Workstream Identifier is required';\n    }\n    if (!workstream.functionality || workstream.functionality === '--None--') {\n      return 'Functionality is required';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Validate all workstreams\n    const validationErrors = [];\n    workstreams.forEach((workstream, index) => {\n      const error = validateWorkstream(workstream);\n      if (error) {\n        validationErrors.push(`Workstream ${index + 1}: ${error}`);\n      }\n    });\n\n    if (validationErrors.length > 0) {\n      toast.error(validationErrors[0]);\n      return;\n    }\n\n    setSubmitting(true);\n    try {\n      // Create all workstreams - each under its respective project objective\n      const createPromises = workstreams.map(workstream => \n        apiClient.post('/workstream/create', {\n          projectWorkstreamName: workstream.projectWorkstreamName,\n          projectObjective: workstream.projectObjective,\n          projectObjectiveId: workstream.projectObjectiveId,\n          refresh: workstream.refresh,\n          deliveryToolName: workstream.deliveryToolName,\n          clientWorkstreamIdentifier: workstream.clientWorkstreamIdentifier,\n          functionality: workstream.functionality\n        })\n      );\n\n      const results = await Promise.all(createPromises);\n      const successCount = results.filter(r => r.data.success).length;\n      \n      if (successCount === workstreams.length) {\n        toast.success(`Successfully created ${successCount} workstream(s)`);\n        // Reset all workstreams and hide form\n        const newId = Date.now();\n        setWorkstreams([{\n          id: newId,\n          projectWorkstreamName: '',\n          projectObjective: '',\n          projectObjectiveId: '',\n          refresh: false,\n          deliveryToolName: '',\n          clientWorkstreamIdentifier: '',\n          functionality: ''\n        }]);\n        setExpandedWorkstreams({ [newId]: true });\n        setProjectObjectiveSearchTerms({ [newId]: '' });\n        setProjectObjectiveSearchResults({});\n        setShowProjectObjectiveDropdowns({});\n        setShowForm(false);\n        // Reload project objectives list\n        fetchProjectObjectives(0, false);\n      } else {\n        toast.error(`Created ${successCount} of ${workstreams.length} workstream(s)`);\n      }\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || error.message || 'Failed to create workstream(s)';\n      toast.error(errorMessage);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleCancel = () => {\n    // Reset all workstreams and hide form\n    const newId = Date.now();\n    setWorkstreams([{\n      id: newId,\n      projectWorkstreamName: '',\n      projectObjective: '',\n      projectObjectiveId: '',\n      refresh: false,\n      deliveryToolName: '',\n      clientWorkstreamIdentifier: '',\n      functionality: ''\n    }]);\n    setExpandedWorkstreams({ [newId]: true });\n    setProjectObjectiveSearchTerms({ [newId]: '' });\n    setProjectObjectiveSearchResults({});\n    setShowProjectObjectiveDropdowns({});\n    setShowForm(false);\n    // Reload project objectives list\n    fetchProjectObjectives(0, false);\n  };\n\n  const handleAddWorkstream = () => {\n    setShowForm(true);\n  };\n\n  // Save current workstreams as template\n  const handleSaveTemplate = () => {\n    if (workstreams.length === 0) {\n      toast.error('No workstreams to save as template');\n      return;\n    }\n    setShowTemplateModal(true);\n  };\n\n  const confirmSaveTemplate = () => {\n    if (!templateName.trim()) {\n      toast.error('Please enter a template name');\n      return;\n    }\n\n    try {\n      const template = {\n        id: Date.now(),\n        name: templateName.trim(),\n        createdAt: new Date().toISOString(),\n        workstreams: workstreams.map(ws => ({\n          projectWorkstreamName: ws.projectWorkstreamName,\n          projectObjective: ws.projectObjective,\n          projectObjectiveId: ws.projectObjectiveId,\n          refresh: ws.refresh,\n          deliveryToolName: ws.deliveryToolName,\n          clientWorkstreamIdentifier: ws.clientWorkstreamIdentifier,\n          functionality: ws.functionality\n        }))\n      };\n\n      const updatedTemplates = [...savedTemplates, template];\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template saved successfully');\n      setShowTemplateModal(false);\n      setTemplateName('');\n    } catch (error) {\n      console.error('Error saving template:', error);\n      toast.error('Failed to save template');\n    }\n  };\n\n  // Load template\n  const handleLoadTemplate = (template) => {\n    try {\n      const newWorkstreams = template.workstreams.map((ws, index) => ({\n        id: Date.now() + index,\n        ...ws\n      }));\n      setWorkstreams(newWorkstreams);\n      setExpandedWorkstreams(newWorkstreams.reduce((acc, ws) => {\n        acc[ws.id] = true;\n        return acc;\n      }, {}));\n      setShowLoadTemplateModal(false);\n      toast.success(`Template \"${template.name}\" loaded successfully`);\n    } catch (error) {\n      console.error('Error loading template:', error);\n      toast.error('Failed to load template');\n    }\n  };\n\n  // Delete template\n  const handleDeleteTemplate = (templateId) => {\n    try {\n      const updatedTemplates = savedTemplates.filter(t => t.id !== templateId);\n      setSavedTemplates(updatedTemplates);\n      localStorage.setItem('workstreamTemplates', JSON.stringify(updatedTemplates));\n      toast.success('Template deleted successfully');\n    } catch (error) {\n      console.error('Error deleting template:', error);\n      toast.error('Failed to delete template');\n    }\n  };\n\n  // Clone workstream\n  const handleCloneWorkstream = (workstreamId) => {\n    const workstreamToClone = workstreams.find(ws => ws.id === workstreamId);\n    if (!workstreamToClone) return;\n\n    const clonedWorkstream = {\n      ...workstreamToClone,\n      id: Date.now(),\n      projectWorkstreamName: `${workstreamToClone.projectWorkstreamName} (Copy)`,\n      projectObjective: '',\n      projectObjectiveId: ''\n    };\n\n    setWorkstreams(prev => [...prev, clonedWorkstream]);\n    setExpandedWorkstreams(prev => ({ ...prev, [clonedWorkstream.id]: true }));\n    toast.success('Workstream cloned successfully');\n  };\n\n  const renderWorkstreamForm = (workstream, index) => {\n    const isExpanded = expandedWorkstreams[workstream.id] !== false;\n    const searchTerm = projectObjectiveSearchTerms[workstream.id] || '';\n    const searchResults = projectObjectiveSearchResults[workstream.id] || [];\n    const loadingSearch = loadingProjectObjectiveSearch[workstream.id] || false;\n    const showDropdown = showProjectObjectiveDropdowns[workstream.id] || false;\n\n    return (\n      <div key={workstream.id} className=\"workstream-form-card\">\n        <div \n          className=\"create-workstream-header-section\"\n          onClick={() => toggleWorkstreamExpanded(workstream.id)}\n        >\n          <button\n            type=\"button\"\n            className=\"create-workstream-toggle\"\n            onClick={(e) => {\n              e.stopPropagation();\n              toggleWorkstreamExpanded(workstream.id);\n            }}\n          >\n            {isExpanded ? <ChevronUp size={18} /> : <ChevronDown size={18} />}\n          </button>\n          <span className=\"create-workstream-title-text\">\n            WorkStream {index + 1}{workstream.projectObjective ? ` - ${workstream.projectObjective}` : ''}\n          </span>\n          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n            <button\n              type=\"button\"\n              className=\"create-workstream-remove\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleCloneWorkstream(workstream.id);\n              }}\n              title=\"Clone workstream\"\n              style={{ background: 'transparent', border: 'none', cursor: 'pointer', padding: '4px', display: 'flex', alignItems: 'center' }}\n            >\n              <Copy size={16} style={{ color: '#0176d3' }} />\n            </button>\n            {workstreams.length > 1 && (\n              <button\n                type=\"button\"\n                className=\"create-workstream-remove\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  removeWorkstream(workstream.id);\n                }}\n                title=\"Remove workstream\"\n              >\n                <Trash2 size={16} />\n              </button>\n            )}\n          </div>\n        </div>\n\n        {isExpanded && (\n          <div className=\"workstream-form-content\">\n            <div className=\"form-section-card\">\n              <div className=\"form-grid-two-column\">\n                <div className=\"form-column\">\n                  <div className=\"form-group\">\n                    <label>Project Workstream Name</label>\n                    <input\n                      type=\"text\"\n                      value={workstream.projectWorkstreamName}\n                      onChange={(e) => handleInputChange(workstream.id, 'projectWorkstreamName', e.target.value)}\n                      className=\"form-input-compact\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>\n                      Project Objective <span className=\"required\">*</span>\n                    </label>\n                    <div className={`project-objective-search-container project-objective-search-container-${workstream.id}`}>\n                      <div className=\"search-input-wrapper\">\n                        <Search size={14} className=\"search-icon\" />\n                        <input\n                          type=\"text\"\n                          placeholder=\"Search for project objective...\"\n                          value={workstream.projectObjectiveId ? workstream.projectObjective : searchTerm}\n                          readOnly={!!workstream.projectObjectiveId}\n                          onChange={(e) => {\n                            // Only allow changes if no objective is selected\n                            if (!workstream.projectObjectiveId) {\n                              handleSearchTermChange(workstream.id, e.target.value);\n                            }\n                          }}\n                          onFocus={() => {\n                            // If there's a selection, allow clearing it\n                            if (workstream.projectObjectiveId) {\n                              // User can click X button to clear\n                            } else if (searchResults.length > 0) {\n                              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstream.id]: true }));\n                            }\n                          }}\n                          onClick={() => {\n                            // If there's a selection and user clicks, don't clear automatically\n                            // They need to use the X button\n                            if (!workstream.projectObjectiveId && searchResults.length > 0) {\n                              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [workstream.id]: true }));\n                            }\n                          }}\n                          className=\"form-input-compact search-input\"\n                          style={workstream.projectObjectiveId ? { cursor: 'default' } : {}}\n                        />\n                        {workstream.projectObjectiveId && (\n                          <button\n                            type=\"button\"\n                            onClick={() => handleClearProjectObjective(workstream.id)}\n                            className=\"clear-button\"\n                            title=\"Clear selection\"\n                          >\n                            <X size={14} />\n                          </button>\n                        )}\n                      </div>\n                      {loadingSearch && (\n                        <div className=\"searching-indicator\">Searching...</div>\n                      )}\n                      {showDropdown && searchResults.length > 0 && !workstream.projectObjectiveId && (\n                        <div className=\"search-results-dropdown\">\n                          {searchResults.map((objective) => (\n                            <div\n                              key={objective.id}\n                              onClick={() => handleProjectObjectiveSelect(workstream.id, objective)}\n                              className={`search-result-item ${workstream.projectObjectiveId === objective.id ? 'selected' : ''}`}\n                            >\n                              <div className=\"search-result-name\">\n                                {objective.contributorFacingProjectName || objective.name}\n                              </div>\n                              {objective.projectName && (\n                                <div className=\"search-result-subtitle\">\n                                  Project: {objective.projectName}\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"form-group\" style={{ marginTop: '6px' }}>\n                    <label className=\"checkbox-label\" style={{ marginBottom: 0 }}>\n                      <input\n                        type=\"checkbox\"\n                        checked={workstream.refresh}\n                        onChange={(e) => handleInputChange(workstream.id, 'refresh', e.target.checked)}\n                        className=\"checkbox-input\"\n                        style={{ marginRight: '8px', marginTop: '0', verticalAlign: 'middle' }}\n                      />\n                      <span className=\"checkbox-text\" style={{ verticalAlign: 'middle' }}>Refresh</span>\n                      <Info size={12} className=\"info-icon\" style={{ marginLeft: '6px', verticalAlign: 'middle' }} />\n                    </label>\n                  </div>\n                </div>\n\n                <div className=\"form-column\">\n                  <div className=\"form-group\">\n                    <label>\n                      Delivery Tool Name <span className=\"required\">*</span>\n                    </label>\n                    <select\n                      value={workstream.deliveryToolName}\n                      onChange={(e) => handleInputChange(workstream.id, 'deliveryToolName', e.target.value)}\n                      className=\"form-input-compact\"\n                      required\n                    >\n                      <option value=\"\">--None--</option>\n                      {deliveryToolNameOptions.filter(opt => opt !== '--None--').map((option) => (\n                        <option key={option} value={option}>{option}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>\n                      Client Workstream Identifier <span className=\"required\">*</span>\n                      <Info size={12} className=\"info-icon\" />\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={workstream.clientWorkstreamIdentifier}\n                      onChange={(e) => handleInputChange(workstream.id, 'clientWorkstreamIdentifier', e.target.value)}\n                      className=\"form-input-compact\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>\n                      Functionality <span className=\"required\">*</span>\n                      <Info size={12} className=\"info-icon\" />\n                    </label>\n                    <select\n                      value={workstream.functionality}\n                      onChange={(e) => handleInputChange(workstream.id, 'functionality', e.target.value)}\n                      className=\"form-input-compact\"\n                      required\n                    >\n                      <option value=\"\">--None--</option>\n                      {functionalityOptions.filter(opt => opt !== '--None--').map((option) => (\n                        <option key={option} value={option}>{option}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const content = (\n    <div className=\"create-workstream-content\">\n      {!showForm ? (\n        <>\n          {/* Header with Add Workstream button */}\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n            <h2 style={{ margin: 0, fontSize: '18px', fontWeight: 600, color: '#002329' }}>\n              Project Objectives Without Workstreams\n            </h2>\n            <button\n              type=\"button\"\n              className=\"btn-primary\"\n              onClick={handleAddWorkstream}\n              style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n            >\n              <Plus size={16} />\n              Add Workstream\n            </button>\n          </div>\n\n          {/* Filter Section */}\n          <div style={{ display: 'flex', gap: '12px', alignItems: 'center', marginBottom: '16px' }}>\n            <label style={{ fontSize: '14px', fontWeight: 500, color: '#002329' }}>\n              Filter by Status:\n            </label>\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              style={{\n                fontSize: '14px',\n                padding: '8px 12px',\n                border: '1px solid var(--border-color)',\n                borderRadius: 'var(--radius-md)',\n                background: 'var(--surface)',\n                color: 'var(--text-primary)',\n                minWidth: '180px',\n                cursor: 'pointer',\n                fontFamily: 'Poppins'\n              }}\n            >\n              <option value=\"\">All Status</option>\n              {uniqueStatuses.map(status => (\n                <option key={status} value={status}>{status}</option>\n              ))}\n            </select>\n            {statusFilter && (\n              <button\n                type=\"button\"\n                onClick={() => setStatusFilter('')}\n                style={{\n                  fontSize: '13px',\n                  padding: '6px 12px',\n                  background: 'transparent',\n                  border: '1px solid var(--border-color)',\n                  borderRadius: 'var(--radius-md)',\n                  color: 'var(--text-secondary)',\n                  cursor: 'pointer',\n                  fontFamily: 'Poppins'\n                }}\n              >\n                Clear Filter\n              </button>\n            )}\n          </div>\n\n          {/* Project Objectives Table */}\n          {loadingPOs && allProjectObjectives.length === 0 ? (\n            <div style={{ textAlign: 'center', padding: '40px' }}>\n              <Loader className=\"spinning\" size={24} />\n              <p>Loading project objectives...</p>\n            </div>\n          ) : (\n            <div className=\"project-objectives-table-container\" style={{ maxHeight: '70vh', overflowY: 'auto' }}>\n              <table className=\"project-objectives-table\" style={{ width: '100%' }}>\n                <thead>\n                  <tr>\n                    <th>Project Objective</th>\n                    <th>Associated Project</th>\n                    <th>Project Objective Status</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {projectObjectives.length === 0 ? (\n                    <tr>\n                      <td colSpan=\"3\" className=\"no-data\" style={{ textAlign: 'center', padding: '40px' }}>\n                        No project objectives without workstreams found\n                      </td>\n                    </tr>\n                  ) : (\n                    projectObjectives.map((po, index) => (\n                      <tr key={po.id || index}>\n                        <td>{po.name || '--'}</td>\n                        <td>{po.projectName || '--'}</td>\n                        <td>{po.status || '--'}</td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n              \n              {/* Show More Button and Loading States */}\n              {((poHasMore || allProjectObjectives.length >= 1000) && !loadingMorePOs && allProjectObjectives.length > 0 && !loadingPOs) && (\n                <div style={{ textAlign: 'center', padding: '20px', borderTop: '1px solid var(--border-color)' }}>\n                  <button\n                    type=\"button\"\n                    className=\"btn-secondary\"\n                    onClick={() => fetchProjectObjectives(poOffset, true)}\n                    style={{\n                      display: 'inline-flex',\n                      alignItems: 'center',\n                      gap: '8px',\n                      padding: '10px 24px',\n                      fontSize: '14px',\n                      fontWeight: 600\n                    }}\n                  >\n                    <Plus size={16} />\n                    Show More ({allProjectObjectives.length} loaded{poHasMore ? ', more available' : ''})\n                  </button>\n                  <div style={{ marginTop: '8px', fontSize: '12px', color: '#666' }}>\n                    Click to load next 1000 project objectives\n                  </div>\n                </div>\n              )}\n              \n              {loadingMorePOs && (\n                <div style={{ textAlign: 'center', padding: '20px', borderTop: '1px solid var(--border-color)' }}>\n                  <Loader className=\"spinning\" size={16} />\n                  <span style={{ marginLeft: '8px' }}>Loading more project objectives...</span>\n                </div>\n              )}\n              \n              {/* Infinite scroll trigger (backup - hidden but still functional) */}\n              {poHasMore && !loadingMorePOs && (\n                <div\n                  ref={infiniteScrollRef}\n                  style={{ height: '20px', width: '100%' }}\n                />\n              )}\n              \n              {allProjectObjectives.length > 0 && !poHasMore && (\n                <div style={{ textAlign: 'center', padding: '16px', borderTop: '1px solid var(--border-color)', color: '#666', fontSize: '13px' }}>\n                  {statusFilter ? (\n                    <>Showing {projectObjectives.length} of {allProjectObjectives.length} project objectives (filtered by status: {statusFilter})</>\n                  ) : (\n                    <>All {allProjectObjectives.length} project objectives loaded</>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n        </>\n      ) : (\n        <form onSubmit={handleSubmit} className=\"create-workstream-form\">\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n            <h2 style={{ margin: 0, fontSize: '18px', fontWeight: 600, color: '#002329' }}>\n              Create Workstream\n            </h2>\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={() => setShowForm(false)}\n            >\n              Back to List\n            </button>\n          </div>\n\n          <div style={{ marginBottom: '16px', display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n            <button\n              type=\"button\"\n              className=\"btn-primary\"\n              onClick={addWorkstream}\n              style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n            >\n              <Plus size={16} />\n              Add WorkStream\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={handleSaveTemplate}\n              disabled={workstreams.length === 0}\n              style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n              title=\"Save current workstreams as template\"\n            >\n              <Save size={16} />\n              Save Template\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={() => setShowLoadTemplateModal(true)}\n              disabled={savedTemplates.length === 0}\n              style={{ display: 'flex', alignItems: 'center', gap: '8px' }}\n              title=\"Load a saved template\"\n            >\n              <FolderOpen size={16} />\n              Load Template\n            </button>\n          </div>\n\n          {workstreams.map((workstream, index) => renderWorkstreamForm(workstream, index))}\n\n          <div className=\"form-actions\">\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={handleCancel}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"btn-primary\"\n              disabled={submitting}\n            >\n              {submitting ? 'Creating...' : `Create ${workstreams.length} WorkStream${workstreams.length > 1 ? 's' : ''}`}\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Save Template Modal */}\n      {showTemplateModal && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        }}>\n          <div style={{\n            background: 'white',\n            padding: '24px',\n            borderRadius: '8px',\n            minWidth: '400px',\n            maxWidth: '500px'\n          }}>\n            <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: 600 }}>Save Template</h3>\n            <div style={{ marginBottom: '16px' }}>\n              <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', fontWeight: 500 }}>\n                Template Name:\n              </label>\n              <input\n                type=\"text\"\n                value={templateName}\n                onChange={(e) => setTemplateName(e.target.value)}\n                placeholder=\"Enter template name\"\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  border: '1px solid var(--border-color)',\n                  borderRadius: '4px',\n                  fontSize: '14px'\n                }}\n                autoFocus\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter') {\n                    confirmSaveTemplate();\n                  }\n                }}\n              />\n            </div>\n            <div style={{ display: 'flex', gap: '12px', justifyContent: 'flex-end' }}>\n              <button\n                type=\"button\"\n                className=\"btn-secondary\"\n                onClick={() => {\n                  setShowTemplateModal(false);\n                  setTemplateName('');\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn-primary\"\n                onClick={confirmSaveTemplate}\n                disabled={!templateName.trim()}\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Load Template Modal */}\n      {showLoadTemplateModal && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        }}>\n          <div style={{\n            background: 'white',\n            padding: '24px',\n            borderRadius: '8px',\n            minWidth: '500px',\n            maxWidth: '600px',\n            maxHeight: '80vh',\n            overflow: 'auto'\n          }}>\n            <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: 600 }}>Load Template</h3>\n            {savedTemplates.length === 0 ? (\n              <p style={{ color: '#666', fontSize: '14px' }}>No saved templates found.</p>\n            ) : (\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n                {savedTemplates.map((template) => (\n                  <div\n                    key={template.id}\n                    style={{\n                      padding: '12px',\n                      border: '1px solid var(--border-color)',\n                      borderRadius: '4px',\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center'\n                    }}\n                  >\n                    <div>\n                      <div style={{ fontWeight: 500, fontSize: '14px', marginBottom: '4px' }}>\n                        {template.name}\n                      </div>\n                      <div style={{ fontSize: '12px', color: '#666' }}>\n                        {template.workstreams.length} workstream(s)  Created {new Date(template.createdAt).toLocaleDateString()}\n                      </div>\n                    </div>\n                    <div style={{ display: 'flex', gap: '8px' }}>\n                      <button\n                        type=\"button\"\n                        className=\"btn-primary\"\n                        onClick={() => handleLoadTemplate(template)}\n                        style={{ fontSize: '12px', padding: '6px 12px' }}\n                      >\n                        Load\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"btn-secondary\"\n                        onClick={() => handleDeleteTemplate(template.id)}\n                        style={{ fontSize: '12px', padding: '6px 12px', color: '#d32f2f' }}\n                        title=\"Delete template\"\n                      >\n                        <Trash2 size={14} />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n            <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '16px' }}>\n              <button\n                type=\"button\"\n                className=\"btn-secondary\"\n                onClick={() => setShowLoadTemplateModal(false)}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  if (hideHeader) {\n    return <div className=\"create-workstream-content-wrapper\">{content}</div>;\n  }\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      \n      <div className=\"create-workstream\" style={{ marginLeft: sidebarOpen ? '320px' : '80px' }}>\n        <div className=\"create-workstream-container\">\n          <div className=\"create-workstream-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">New Project Workstream</h1>\n                  <p className=\"page-subtitle\">Create a new project workstream</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          {content}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateWorkStream;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}