{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/Sidebar';import useSidebarWidth from'../hooks/useSidebarWidth';import{Menu,LogOut,RefreshCw,DollarSign,TrendingUp,Users,AlertCircle,CheckCircle,BarChart3,Download,Loader,Clock}from'lucide-react';import{BarChart,Bar,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer,PieChart,Pie,Cell,LineChart,Line}from'recharts';import apiClient from'../config/api';import toast from'react-hot-toast';import*as XLSX from'xlsx';import BookmarkButton from'../components/BookmarkButton';import'../styles/Sidebar.css';import'../styles/GlobalHeader.css';import'../styles/ContributorPaymentsDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const COLORS=['#08979C','#13C2C2','#36CFC9','#5CDBD3','#87E8DE','#B5F5EC','#E6FFFB'];// Enhanced color palette for Payments by Status with better contrast\nconst STATUS_COLORS=['#10B981',// Green - Success/Completed\n'#3B82F6',// Blue - Pending/In Progress\n'#F59E0B',// Amber - Warning/Partial\n'#EF4444',// Red - Failed/Error\n'#8B5CF6',// Purple - Other\n'#06B6D4',// Cyan - Info\n'#EC4899',// Pink - Special\n'#6366F1',// Indigo - Alternative\n'#14B8A6',// Teal - Active\n'#F97316',// Orange - Attention\n'#84CC16',// Lime - New\n'#64748B'// Slate - Unknown/No Status\n];const ContributorPaymentsDashboard=()=>{const{user,logout}=useAuth();const[sidebarOpen,setSidebarOpen]=useState(true);const sidebarWidth=useSidebarWidth(sidebarOpen);const[refreshing,setRefreshing]=useState(false);// Individual widget states - each widget has its own state\nconst[totalContributors,setTotalContributors]=useState({value:0,lastRefreshed:null});const[totalPayments,setTotalPayments]=useState({value:0,lastRefreshed:null});const[averagePayment,setAveragePayment]=useState({value:0,lastRefreshed:null});const[pendingCount,setPendingCount]=useState({value:0,lastRefreshed:null});const[paymentsByStatus,setPaymentsByStatus]=useState({data:[],lastRefreshed:null});const[paymentsByMethod,setPaymentsByMethod]=useState({data:[],lastRefreshed:null});const[paymentsOverTime,setPaymentsOverTime]=useState({data:[],lastRefreshed:null});const[topContributors,setTopContributors]=useState({data:[],lastRefreshed:null});const[paymentsByCountry,setPaymentsByCountry]=useState({data:[],lastRefreshed:null});const[averagePaymentByCountry,setAveragePaymentByCountry]=useState({data:[],lastRefreshed:null});// Widget loading states - each widget has its own loading state\nconst[widgetStates,setWidgetStates]=useState({});// Flag to prevent saving during initial load\nconst[isLoadingBaseline,setIsLoadingBaseline]=useState(true);// Format currency with elegant million/billion formatting\nconst formatCurrency=amount=>{if(amount===null||amount===undefined||amount===0)return'$0.00';const num=parseFloat(amount);if(Math.abs(num)>=1000000000){return\"$\".concat((num/1000000000).toFixed(2),\"B\");}else if(Math.abs(num)>=1000000){return\"$\".concat((num/1000000).toFixed(2),\"M\");}else if(Math.abs(num)>=1000){return\"$\".concat((num/1000).toFixed(2),\"K\");}else{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:2,maximumFractionDigits:2}).format(num);}};// Format number\nconst formatNumber=num=>{if(num===null||num===undefined)return'0';return new Intl.NumberFormat('en-US').format(num);};// Format date\nconst formatDate=dateString=>{if(!dateString)return'Never';try{return new Date(dateString).toLocaleString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});}catch(_unused){return'Never';}};// Individual widget fetch functions - each widget has its own API\nconst fetchTotalContributors=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'totalContributors';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/total-contributors');setTotalContributors({value:response.data.totalContributors||0,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Total contributors updated');}catch(error){var _error$response,_error$response$data;const errorMsg=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message||'Unknown error';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:errorMsg}}));setTotalContributors({value:0,lastRefreshed:null});if(!silent)toast.error(\"Error loading total contributors: \".concat(errorMsg));}},[]);const fetchTotalPayments=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'totalPayments';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/total-payments');if(response.data.warning){if(!silent)toast.warning(response.data.warning);}setTotalPayments({value:response.data.totalPayments||0,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent&&!response.data.warning)toast.success('Total payments updated');}catch(error){var _error$response2,_error$response2$data;const errorMsg=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||error.message||'Unknown error';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:errorMsg}}));setTotalPayments({value:0,lastRefreshed:null});if(!silent)toast.error(\"Error loading total payments: \".concat(errorMsg));}},[]);const fetchAveragePayment=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'averagePayment';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/average-payment');setAveragePayment({value:response.data.avgPaymentAmount,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Average payment updated');}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error('Error loading average payment');}},[]);const fetchPendingCount=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'pendingCount';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/pending-count');setPendingCount({value:response.data.pendingAmount,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Pending amount updated');}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error('Error loading pending amount');}},[]);const fetchPaymentsByStatus=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsByStatus';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-by-status');setPaymentsByStatus({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments by status updated');}else{toast('No payment status data found',{icon:'âš ï¸'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments by status: \".concat(error.message));}},[]);const fetchPaymentsByMethod=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsByMethod';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-by-method');setPaymentsByMethod({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments by method updated');}else{toast('No payment method data found',{icon:'âš ï¸'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments by method: \".concat(error.message));}},[]);const fetchPaymentsOverTime=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsOverTime';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-over-time');setPaymentsOverTime({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments over time updated');}else{toast('No payment over time data found',{icon:'âš ï¸'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments over time: \".concat(error.message));}},[]);const fetchTopContributors=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'topContributors';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/top-contributors',{params:{limit:10}});setTopContributors({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Top contributors updated');}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error('Error loading top contributors');}},[]);const fetchPaymentsByCountry=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsByCountry';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-by-country');setPaymentsByCountry({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments by country updated');}else{toast('No payment by country data found',{icon:'âš ï¸'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments by country: \".concat(error.message));}},[]);const fetchAveragePaymentByCountry=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'averagePaymentByCountry';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/average-payment-by-country');setAveragePaymentByCountry({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Average payment by country updated');}else{toast('No average payment by country data found',{icon:'âš ï¸'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading average payment by country: \".concat(error.message));}},[]);// Widget-level refresh handlers\nconst handleWidgetRefresh=widgetKey=>{switch(widgetKey){case'totalContributors':fetchTotalContributors(false,widgetKey);break;case'totalPayments':fetchTotalPayments(false,widgetKey);break;case'averagePayment':fetchAveragePayment(false,widgetKey);break;case'pendingCount':fetchPendingCount(false,widgetKey);break;case'paymentsByStatus':fetchPaymentsByStatus(false,widgetKey);break;case'paymentsByMethod':fetchPaymentsByMethod(false,widgetKey);break;case'paymentsOverTime':fetchPaymentsOverTime(false,widgetKey);break;case'topContributors':fetchTopContributors(false,widgetKey);break;case'paymentsByCountry':fetchPaymentsByCountry(false,widgetKey);break;case'averagePaymentByCountry':fetchAveragePaymentByCountry(false,widgetKey);break;default:break;}};// Render widget refresh button\nconst renderWidgetRefresh=widgetKey=>{const state=widgetStates[widgetKey];return/*#__PURE__*/_jsx(\"button\",{className:\"widget-refresh-btn\",onClick:()=>handleWidgetRefresh(widgetKey),disabled:state===null||state===void 0?void 0:state.loading,title:state!==null&&state!==void 0&&state.loading?'Refreshing...':state!==null&&state!==void 0&&state.error?'Retry':'Refresh this widget',children:/*#__PURE__*/_jsx(RefreshCw,{size:14,className:state!==null&&state!==void 0&&state.loading?'spinning':''})});};// Helper to show loading/error state in widget\nconst renderWidgetStatus=widgetKey=>{const state=widgetStates[widgetKey];if(state!==null&&state!==void 0&&state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"widget-loading\",children:/*#__PURE__*/_jsx(Loader,{size:20,className:\"spinning\"})});}if(state!==null&&state!==void 0&&state.error){return/*#__PURE__*/_jsxs(\"div\",{className:\"widget-error\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Error: \",state.error]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleWidgetRefresh(widgetKey),className:\"retry-btn\",children:\"Retry\"})]});}return null;};// Refresh all widgets\nconst handleRefresh=()=>{setRefreshing(true);Promise.all([fetchTotalContributors(true,'totalContributors'),fetchTotalPayments(true,'totalPayments'),fetchAveragePayment(true,'averagePayment'),fetchPendingCount(true,'pendingCount'),fetchPaymentsByStatus(true,'paymentsByStatus'),fetchPaymentsByMethod(true,'paymentsByMethod'),fetchPaymentsOverTime(true,'paymentsOverTime'),fetchTopContributors(true,'topContributors'),fetchPaymentsByCountry(true,'paymentsByCountry'),fetchAveragePaymentByCountry(true,'averagePaymentByCountry')]).finally(()=>{setRefreshing(false);toast.success('All widgets refreshed');});};// Export to Excel\nconst handleExport=useCallback(()=>{try{const workbook=XLSX.utils.book_new();// Summary sheet\nconst summaryData=[['Metric','Value'],['Total Contributors',totalContributors.value],['Total Payments',formatCurrency(totalPayments.value)],['Average Payment',formatCurrency(averagePayment.value)],['Pending Amount',formatCurrency(pendingCount.value)]];const summarySheet=XLSX.utils.aoa_to_sheet(summaryData);XLSX.utils.book_append_sheet(workbook,summarySheet,'Summary');// Payments by Status\nif(paymentsByStatus.data.length>0){const statusData=[['Status','Count','Total Amount','Outstanding Amount']];paymentsByStatus.data.forEach(item=>{statusData.push([item.status,item.count,item.totalAmount,item.outstandingAmount]);});const statusSheet=XLSX.utils.aoa_to_sheet(statusData);XLSX.utils.book_append_sheet(workbook,statusSheet,'Payments by Status');}// Top Contributors\nif(topContributors.data.length>0){const contributorsData=[['Name','Email','Total Payment','Outstanding','Status','Last Payment Date','Method']];topContributors.data.forEach(item=>{contributorsData.push([item.name,item.email,formatCurrency(item.totalPaymentAmount),formatCurrency(item.outstandingBalance),item.paymentStatus,formatDate(item.lastPaymentDate),item.paymentMethod]);});const contributorsSheet=XLSX.utils.aoa_to_sheet(contributorsData);XLSX.utils.book_append_sheet(workbook,contributorsSheet,'Top Contributors');}XLSX.writeFile(workbook,\"contributor-payments-\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));toast.success('Data exported successfully');}catch(error){toast.error('Failed to export data');}},[totalContributors,totalPayments,averagePayment,pendingCount,paymentsByStatus,topContributors]);// Load baseline data from localStorage on mount\nuseEffect(()=>{const loadBaselineData=()=>{try{const baselineData=localStorage.getItem('contributorPaymentsBaseline');if(baselineData){const parsed=JSON.parse(baselineData);console.log('Loading baseline data from localStorage:',parsed);// Restore all widget states from baseline\nif(parsed.totalContributors){setTotalContributors(parsed.totalContributors);console.log('Loaded totalContributors:',parsed.totalContributors);}if(parsed.totalPayments){setTotalPayments(parsed.totalPayments);console.log('Loaded totalPayments:',parsed.totalPayments);}if(parsed.averagePayment){setAveragePayment(parsed.averagePayment);console.log('Loaded averagePayment:',parsed.averagePayment);}if(parsed.pendingCount){setPendingCount(parsed.pendingCount);console.log('Loaded pendingCount:',parsed.pendingCount);}if(parsed.paymentsByStatus){var _parsed$paymentsBySta;setPaymentsByStatus(parsed.paymentsByStatus);console.log('Loaded paymentsByStatus:',((_parsed$paymentsBySta=parsed.paymentsByStatus.data)===null||_parsed$paymentsBySta===void 0?void 0:_parsed$paymentsBySta.length)||0,'items');}if(parsed.paymentsByMethod){var _parsed$paymentsByMet;setPaymentsByMethod(parsed.paymentsByMethod);console.log('Loaded paymentsByMethod:',((_parsed$paymentsByMet=parsed.paymentsByMethod.data)===null||_parsed$paymentsByMet===void 0?void 0:_parsed$paymentsByMet.length)||0,'items');}if(parsed.paymentsOverTime){var _parsed$paymentsOverT;setPaymentsOverTime(parsed.paymentsOverTime);console.log('Loaded paymentsOverTime:',((_parsed$paymentsOverT=parsed.paymentsOverTime.data)===null||_parsed$paymentsOverT===void 0?void 0:_parsed$paymentsOverT.length)||0,'items');}if(parsed.topContributors){var _parsed$topContributo;setTopContributors(parsed.topContributors);console.log('Loaded topContributors:',((_parsed$topContributo=parsed.topContributors.data)===null||_parsed$topContributo===void 0?void 0:_parsed$topContributo.length)||0,'items');}if(parsed.paymentsByCountry){var _parsed$paymentsByCou;setPaymentsByCountry(parsed.paymentsByCountry);console.log('Loaded paymentsByCountry:',((_parsed$paymentsByCou=parsed.paymentsByCountry.data)===null||_parsed$paymentsByCou===void 0?void 0:_parsed$paymentsByCou.length)||0,'items');}if(parsed.averagePaymentByCountry){var _parsed$averagePaymen;setAveragePaymentByCountry(parsed.averagePaymentByCountry);console.log('Loaded averagePaymentByCountry:',((_parsed$averagePaymen=parsed.averagePaymentByCountry.data)===null||_parsed$averagePaymen===void 0?void 0:_parsed$averagePaymen.length)||0,'items');}console.log('âœ… Baseline data loaded from localStorage successfully');}else{console.log('No baseline data found in localStorage');}}catch(error){console.error('âŒ Error loading baseline data:',error);}finally{// Mark baseline loading as complete after a short delay to ensure state updates\nsetTimeout(()=>{setIsLoadingBaseline(false);console.log('Baseline loading complete');},100);}};loadBaselineData();},[]);// Save baseline data to localStorage whenever any widget data is updated\nuseEffect(()=>{// Don't save during initial baseline load\nif(isLoadingBaseline){return;}const saveBaselineData=()=>{try{const baselineData={totalContributors,totalPayments,averagePayment,pendingCount,paymentsByStatus,paymentsByMethod,paymentsOverTime,topContributors,paymentsByCountry,averagePaymentByCountry,savedAt:new Date().toISOString()};localStorage.setItem('contributorPaymentsBaseline',JSON.stringify(baselineData));console.log('ğŸ’¾ Baseline data saved to localStorage');}catch(error){console.error('âŒ Error saving baseline data:',error);}};// Only save if at least one widget has data\nif(totalContributors.value>0||totalPayments.value>0||paymentsByStatus.data.length>0||paymentsByMethod.data.length>0||paymentsOverTime.data.length>0||topContributors.data.length>0||paymentsByCountry.data.length>0||averagePaymentByCountry.data.length>0){saveBaselineData();}},[isLoadingBaseline,totalContributors,totalPayments,averagePayment,pendingCount,paymentsByStatus,paymentsByMethod,paymentsOverTime,topContributors,paymentsByCountry,averagePaymentByCountry]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{className:\"contributor-payments-dashboard\",style:{marginLeft:\"\".concat(sidebarWidth,\"px\"),width:\"calc(100% - \".concat(sidebarWidth,\"px)\"),transition:'margin-left 0.2s ease, width 0.2s ease'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"contributor-payments-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"contributor-payments-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-menu-toggle\",onClick:()=>setSidebarOpen(!sidebarOpen),children:/*#__PURE__*/_jsx(Menu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Contributor Payments Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"View payment metrics and analytics\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-user-profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-action\",onClick:handleRefresh,disabled:refreshing,title:\"Refresh All\",children:[refreshing?/*#__PURE__*/_jsx(Loader,{size:16,className:\"spinning\"}):/*#__PURE__*/_jsx(RefreshCw,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:refreshing?'Refreshing...':'Refresh All'})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn\",onClick:handleExport,title:\"Export to Excel\",children:[/*#__PURE__*/_jsx(Download,{size:16}),\"Export\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:((user===null||user===void 0?void 0:user.email)||'U').charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{size:18})})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"contributor-payments-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card green\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Total Contributors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('totalContributors')})]}),renderWidgetStatus('totalContributors')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatNumber(totalContributors.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(totalContributors.lastRefreshed)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card green\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Total Payments\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('totalPayments')})]}),renderWidgetStatus('totalPayments')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatCurrency(totalPayments.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(totalPayments.lastRefreshed)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card green\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Average Payment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('averagePayment')})]}),renderWidgetStatus('averagePayment')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatCurrency(averagePayment.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(averagePayment.lastRefreshed)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card yellow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('pendingCount')})]}),renderWidgetStatus('pendingCount')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatCurrency(pendingCount.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(pendingCount.lastRefreshed)]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"charts-grid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card top-contributors-table-card\",style:{gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Top Contributors by Payment Amount\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('topContributors')})]}),renderWidgetStatus('topContributors')||(topContributors.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Payment\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Outstanding\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Payment Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Method\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:topContributors.data.map(contributor=>{var _contributor$paymentS;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:contributor.name}),/*#__PURE__*/_jsx(\"td\",{children:contributor.email}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(contributor.totalPaymentAmount)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(contributor.outstandingBalance)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat((_contributor$paymentS=contributor.paymentStatus)===null||_contributor$paymentS===void 0?void 0:_contributor$paymentS.toLowerCase()),children:contributor.paymentStatus})}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(contributor.lastPaymentDate)}),/*#__PURE__*/_jsx(\"td\",{children:contributor.paymentMethod})]},contributor.id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(topContributors.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No top contributors data available\"}))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"charts-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments by Status\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsByStatus')})]}),renderWidgetStatus('paymentsByStatus')||(paymentsByStatus.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:paymentsByStatus.data,cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref=>{let{name,percent}=_ref;// Only show label if percentage is >= 5% to avoid clutter\nif(percent>=0.05){return\"\".concat(name,\": \").concat((percent*100).toFixed(0),\"%\");}return'';},outerRadius:100,innerRadius:30,fill:\"#8884d8\",dataKey:\"count\",paddingAngle:2,children:paymentsByStatus.data.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:STATUS_COLORS[index%STATUS_COLORS.length]},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{content:_ref2=>{let{active,payload}=_ref2;if(active&&payload&&payload.length){const data=payload[0];const entry=data.payload;const color=STATUS_COLORS[paymentsByStatus.data.findIndex(e=>e.status===entry.status)%STATUS_COLORS.length];return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:'12px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',borderRadius:'4px',backgroundColor:color,border:'1px solid #d1d5db'}}),/*#__PURE__*/_jsx(\"strong\",{style:{fontSize:'14px',color:'#111827'},children:entry.status||'No Status'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280',marginTop:'4px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Count: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:formatNumber(entry.count)})]}),entry.totalAmount!==undefined&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Total Amount: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:formatCurrency(entry.totalAmount)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'4px',fontSize:'12px',color:'#9ca3af'},children:[\"Percentage: \",(entry.count/paymentsByStatus.data.reduce((sum,e)=>sum+e.count,0)*100).toFixed(1),\"%\"]})]})]});}return null;}})]})})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'16px',padding:'12px',backgroundColor:'#f9fafb',borderRadius:'8px',display:'flex',flexWrap:'wrap',gap:'12px',justifyContent:'center',fontSize:'12px'},children:paymentsByStatus.data.map((entry,index)=>{const color=STATUS_COLORS[index%STATUS_COLORS.length];return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',borderRadius:'3px',backgroundColor:color,border:'1px solid #d1d5db',flexShrink:0}}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#374151'},children:[entry.status||'No Status',\" (\",formatNumber(entry.count),\")\"]})]},\"legend-\".concat(index));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsByStatus.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment status data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments by Method\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsByMethod')})]}),renderWidgetStatus('paymentsByMethod')||(paymentsByMethod.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:paymentsByMethod.data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"method\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>formatCurrency(value)}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",fill:\"#08979C\",name:\"Count\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"totalAmount\",fill:\"#13C2C2\",name:\"Total Amount\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsByMethod.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment method data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments Over Time\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsOverTime')})]}),renderWidgetStatus('paymentsOverTime')||(paymentsOverTime.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:paymentsOverTime.data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"period\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>formatCurrency(value)}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"totalAmount\",stroke:\"#08979C\",name:\"Total Amount\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"count\",stroke:\"#13C2C2\",name:\"Count\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsOverTime.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment over time data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",style:{gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments by Country\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsByCountry')})]}),renderWidgetStatus('paymentsByCountry')||(paymentsByCountry.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",style:{overflowX:'auto',overflowY:'hidden',width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{style:{minWidth:\"\".concat(Math.max(800,paymentsByCountry.data.length*80),\"px\"),height:'350px'},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:350,children:/*#__PURE__*/_jsxs(BarChart,{data:paymentsByCountry.data,margin:{top:5,right:30,left:20,bottom:100},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"country\",angle:-45,textAnchor:\"end\",height:100,interval:0,tick:{fontSize:12}}),/*#__PURE__*/_jsx(YAxis,{yAxisId:\"left\",tickFormatter:value=>formatCurrency(value),label:{value:'Total Amount ($)',angle:-90,position:'insideLeft'}}),/*#__PURE__*/_jsx(YAxis,{yAxisId:\"right\",orientation:\"right\",tickFormatter:value=>formatNumber(value),label:{value:'Contributor Count',angle:90,position:'insideRight'}}),/*#__PURE__*/_jsx(Tooltip,{content:_ref3=>{let{active,payload,label}=_ref3;if(active&&payload&&payload.length){return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:'12px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',fontWeight:'bold',color:'#111827',marginBottom:'8px'},children:label||'Unknown Country'}),payload.map((entry,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',gap:'12px',marginTop:'4px',fontSize:'13px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',backgroundColor:entry.color,borderRadius:'2px'}}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#6b7280'},children:[entry.name,\":\"]})]}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:entry.dataKey==='count'?formatNumber(entry.value):formatCurrency(entry.value)})]},\"tooltip-\".concat(index)))]});}return null;}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{yAxisId:\"left\",dataKey:\"totalAmount\",fill:\"#08979C\",name:\"Total Amount ($)\"}),/*#__PURE__*/_jsx(Bar,{yAxisId:\"right\",dataKey:\"count\",fill:\"#13C2C2\",name:\"Contributor Count\"})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsByCountry.lastRefreshed),\" - Showing all \",paymentsByCountry.data.length,\" countries (scroll horizontally to view all)\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment by country data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",style:{gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Average Payment by Country\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('averagePaymentByCountry')})]}),renderWidgetStatus('averagePaymentByCountry')||(averagePaymentByCountry.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",style:{overflowX:'auto',overflowY:'hidden',width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{style:{minWidth:\"\".concat(Math.max(800,averagePaymentByCountry.data.length*80),\"px\"),height:'350px'},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:350,children:/*#__PURE__*/_jsxs(BarChart,{data:averagePaymentByCountry.data,margin:{top:5,right:30,left:20,bottom:100},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"country\",angle:-45,textAnchor:\"end\",height:100,interval:0,tick:{fontSize:12}}),/*#__PURE__*/_jsx(YAxis,{tickFormatter:value=>formatCurrency(value)}),/*#__PURE__*/_jsx(Tooltip,{content:_ref4=>{let{active,payload}=_ref4;if(active&&payload&&payload.length){const data=payload[0].payload;return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:'12px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',fontWeight:'bold',marginBottom:'8px'},children:data.country}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:[\"Average: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:data.averageAmountFormatted||data.averageAmount})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:data.totalAmountFormatted||data.totalAmount})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:[\"Contributors: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:data.countFormatted||data.count})]})]});}return null;}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"averageAmount\",fill:\"#08979C\",name:\"Average Payment ($)\"})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(averagePaymentByCountry.lastRefreshed),\" - Showing all \",averagePaymentByCountry.data.length,\" countries (scroll horizontally to view all)\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No average payment by country data available\"}))]})]})]})]})})]});};export default ContributorPaymentsDashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","Sidebar","useSidebarWidth","Menu","LogOut","RefreshCw","DollarSign","TrendingUp","Users","AlertCircle","CheckCircle","BarChart3","Download","Loader","Clock","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","PieChart","Pie","Cell","LineChart","Line","apiClient","toast","XLSX","BookmarkButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","COLORS","STATUS_COLORS","ContributorPaymentsDashboard","user","logout","sidebarOpen","setSidebarOpen","sidebarWidth","refreshing","setRefreshing","totalContributors","setTotalContributors","value","lastRefreshed","totalPayments","setTotalPayments","averagePayment","setAveragePayment","pendingCount","setPendingCount","paymentsByStatus","setPaymentsByStatus","data","paymentsByMethod","setPaymentsByMethod","paymentsOverTime","setPaymentsOverTime","topContributors","setTopContributors","paymentsByCountry","setPaymentsByCountry","averagePaymentByCountry","setAveragePaymentByCountry","widgetStates","setWidgetStates","isLoadingBaseline","setIsLoadingBaseline","formatCurrency","amount","undefined","num","parseFloat","Math","abs","concat","toFixed","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","formatNumber","formatDate","dateString","Date","toLocaleString","year","month","day","hour","minute","_unused","fetchTotalContributors","silent","arguments","length","widgetKey","prev","_objectSpread","loading","error","response","get","success","_error$response","_error$response$data","errorMsg","message","fetchTotalPayments","warning","_error$response2","_error$response2$data","fetchAveragePayment","avgPaymentAmount","fetchPendingCount","pendingAmount","fetchPaymentsByStatus","icon","fetchPaymentsByMethod","fetchPaymentsOverTime","fetchTopContributors","params","limit","fetchPaymentsByCountry","fetchAveragePaymentByCountry","handleWidgetRefresh","renderWidgetRefresh","state","className","onClick","disabled","title","children","size","renderWidgetStatus","handleRefresh","Promise","all","finally","handleExport","workbook","utils","book_new","summaryData","summarySheet","aoa_to_sheet","book_append_sheet","statusData","forEach","item","push","status","count","totalAmount","outstandingAmount","statusSheet","contributorsData","name","email","totalPaymentAmount","outstandingBalance","paymentStatus","lastPaymentDate","paymentMethod","contributorsSheet","writeFile","toISOString","split","loadBaselineData","baselineData","localStorage","getItem","parsed","JSON","parse","console","log","_parsed$paymentsBySta","_parsed$paymentsByMet","_parsed$paymentsOverT","_parsed$topContributo","_parsed$paymentsByCou","_parsed$averagePaymen","setTimeout","saveBaselineData","savedAt","setItem","stringify","isOpen","toggleSidebar","marginLeft","width","transition","charAt","toUpperCase","gridColumn","display","alignItems","gap","color","map","contributor","_contributor$paymentS","toLowerCase","id","height","cx","cy","labelLine","label","_ref","percent","outerRadius","innerRadius","fill","dataKey","paddingAngle","entry","index","content","_ref2","active","payload","findIndex","e","backgroundColor","border","borderRadius","padding","boxShadow","marginBottom","fontSize","marginTop","reduce","sum","flexWrap","justifyContent","flexShrink","strokeDasharray","formatter","type","stroke","overflowX","overflowY","minWidth","max","margin","top","right","left","bottom","angle","textAnchor","interval","tick","yAxisId","tickFormatter","position","orientation","_ref3","fontWeight","_ref4","country","averageAmountFormatted","averageAmount","totalAmountFormatted","countFormatted"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/ContributorPaymentsDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport useSidebarWidth from '../hooks/useSidebarWidth';\nimport { Menu, LogOut, RefreshCw, DollarSign, TrendingUp, Users, AlertCircle, CheckCircle, BarChart3, Download, Loader, Clock } from 'lucide-react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell, LineChart, Line } from 'recharts';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport * as XLSX from 'xlsx';\nimport BookmarkButton from '../components/BookmarkButton';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\nimport '../styles/ContributorPaymentsDashboard.css';\n\nconst COLORS = ['#08979C', '#13C2C2', '#36CFC9', '#5CDBD3', '#87E8DE', '#B5F5EC', '#E6FFFB'];\n\n// Enhanced color palette for Payments by Status with better contrast\nconst STATUS_COLORS = [\n  '#10B981', // Green - Success/Completed\n  '#3B82F6', // Blue - Pending/In Progress\n  '#F59E0B', // Amber - Warning/Partial\n  '#EF4444', // Red - Failed/Error\n  '#8B5CF6', // Purple - Other\n  '#06B6D4', // Cyan - Info\n  '#EC4899', // Pink - Special\n  '#6366F1', // Indigo - Alternative\n  '#14B8A6', // Teal - Active\n  '#F97316', // Orange - Attention\n  '#84CC16', // Lime - New\n  '#64748B'  // Slate - Unknown/No Status\n];\n\nconst ContributorPaymentsDashboard = () => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const sidebarWidth = useSidebarWidth(sidebarOpen);\n  const [refreshing, setRefreshing] = useState(false);\n\n  // Individual widget states - each widget has its own state\n  const [totalContributors, setTotalContributors] = useState({ value: 0, lastRefreshed: null });\n  const [totalPayments, setTotalPayments] = useState({ value: 0, lastRefreshed: null });\n  const [averagePayment, setAveragePayment] = useState({ value: 0, lastRefreshed: null });\n  const [pendingCount, setPendingCount] = useState({ value: 0, lastRefreshed: null });\n  const [paymentsByStatus, setPaymentsByStatus] = useState({ data: [], lastRefreshed: null });\n  const [paymentsByMethod, setPaymentsByMethod] = useState({ data: [], lastRefreshed: null });\n  const [paymentsOverTime, setPaymentsOverTime] = useState({ data: [], lastRefreshed: null });\n  const [topContributors, setTopContributors] = useState({ data: [], lastRefreshed: null });\n  const [paymentsByCountry, setPaymentsByCountry] = useState({ data: [], lastRefreshed: null });\n  const [averagePaymentByCountry, setAveragePaymentByCountry] = useState({ data: [], lastRefreshed: null });\n\n  // Widget loading states - each widget has its own loading state\n  const [widgetStates, setWidgetStates] = useState({});\n  \n  // Flag to prevent saving during initial load\n  const [isLoadingBaseline, setIsLoadingBaseline] = useState(true);\n\n  // Format currency with elegant million/billion formatting\n  const formatCurrency = (amount) => {\n    if (amount === null || amount === undefined || amount === 0) return '$0.00';\n    const num = parseFloat(amount);\n    if (Math.abs(num) >= 1000000000) {\n      return `$${(num / 1000000000).toFixed(2)}B`;\n    } else if (Math.abs(num) >= 1000000) {\n      return `$${(num / 1000000).toFixed(2)}M`;\n    } else if (Math.abs(num) >= 1000) {\n      return `$${(num / 1000).toFixed(2)}K`;\n    } else {\n      return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      }).format(num);\n    }\n  };\n\n  // Format number\n  const formatNumber = (num) => {\n    if (num === null || num === undefined) return '0';\n    return new Intl.NumberFormat('en-US').format(num);\n  };\n\n  // Format date\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Never';\n    try {\n      return new Date(dateString).toLocaleString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return 'Never';\n    }\n  };\n\n  // Individual widget fetch functions - each widget has its own API\n\n  const fetchTotalContributors = useCallback(async (silent = false, widgetKey = 'totalContributors') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/total-contributors');\n      setTotalContributors({ value: response.data.totalContributors || 0, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Total contributors updated');\n    } catch (error) {\n      const errorMsg = error.response?.data?.error || error.message || 'Unknown error';\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: errorMsg } }));\n      setTotalContributors({ value: 0, lastRefreshed: null });\n      if (!silent) toast.error(`Error loading total contributors: ${errorMsg}`);\n    }\n  }, []);\n\n  const fetchTotalPayments = useCallback(async (silent = false, widgetKey = 'totalPayments') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/total-payments');\n      if (response.data.warning) {\n        if (!silent) toast.warning(response.data.warning);\n      }\n      setTotalPayments({ value: response.data.totalPayments || 0, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent && !response.data.warning) toast.success('Total payments updated');\n    } catch (error) {\n      const errorMsg = error.response?.data?.error || error.message || 'Unknown error';\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: errorMsg } }));\n      setTotalPayments({ value: 0, lastRefreshed: null });\n      if (!silent) toast.error(`Error loading total payments: ${errorMsg}`);\n    }\n  }, []);\n\n  const fetchAveragePayment = useCallback(async (silent = false, widgetKey = 'averagePayment') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/average-payment');\n      setAveragePayment({ value: response.data.avgPaymentAmount, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Average payment updated');\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error('Error loading average payment');\n    }\n  }, []);\n\n  const fetchPendingCount = useCallback(async (silent = false, widgetKey = 'pendingCount') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/pending-count');\n      setPendingCount({ value: response.data.pendingAmount, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Pending amount updated');\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error('Error loading pending amount');\n    }\n  }, []);\n\n  const fetchPaymentsByStatus = useCallback(async (silent = false, widgetKey = 'paymentsByStatus') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-by-status');\n      setPaymentsByStatus({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments by status updated');\n        } else {\n          toast('No payment status data found', { icon: 'âš ï¸' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments by status: ${error.message}`);\n    }\n  }, []);\n\n  const fetchPaymentsByMethod = useCallback(async (silent = false, widgetKey = 'paymentsByMethod') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-by-method');\n      setPaymentsByMethod({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments by method updated');\n        } else {\n          toast('No payment method data found', { icon: 'âš ï¸' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments by method: ${error.message}`);\n    }\n  }, []);\n\n  const fetchPaymentsOverTime = useCallback(async (silent = false, widgetKey = 'paymentsOverTime') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-over-time');\n      setPaymentsOverTime({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments over time updated');\n        } else {\n          toast('No payment over time data found', { icon: 'âš ï¸' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments over time: ${error.message}`);\n    }\n  }, []);\n\n  const fetchTopContributors = useCallback(async (silent = false, widgetKey = 'topContributors') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/top-contributors', { params: { limit: 10 } });\n      setTopContributors({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Top contributors updated');\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error('Error loading top contributors');\n    }\n  }, []);\n\n  const fetchPaymentsByCountry = useCallback(async (silent = false, widgetKey = 'paymentsByCountry') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-by-country');\n      setPaymentsByCountry({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments by country updated');\n        } else {\n          toast('No payment by country data found', { icon: 'âš ï¸' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments by country: ${error.message}`);\n    }\n  }, []);\n\n\n  const fetchAveragePaymentByCountry = useCallback(async (silent = false, widgetKey = 'averagePaymentByCountry') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/average-payment-by-country');\n      setAveragePaymentByCountry({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Average payment by country updated');\n        } else {\n          toast('No average payment by country data found', { icon: 'âš ï¸' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading average payment by country: ${error.message}`);\n    }\n  }, []);\n\n  // Widget-level refresh handlers\n  const handleWidgetRefresh = (widgetKey) => {\n    switch(widgetKey) {\n      case 'totalContributors':\n        fetchTotalContributors(false, widgetKey);\n        break;\n      case 'totalPayments':\n        fetchTotalPayments(false, widgetKey);\n        break;\n      case 'averagePayment':\n        fetchAveragePayment(false, widgetKey);\n        break;\n      case 'pendingCount':\n        fetchPendingCount(false, widgetKey);\n        break;\n      case 'paymentsByStatus':\n        fetchPaymentsByStatus(false, widgetKey);\n        break;\n      case 'paymentsByMethod':\n        fetchPaymentsByMethod(false, widgetKey);\n        break;\n      case 'paymentsOverTime':\n        fetchPaymentsOverTime(false, widgetKey);\n        break;\n      case 'topContributors':\n        fetchTopContributors(false, widgetKey);\n        break;\n      case 'paymentsByCountry':\n        fetchPaymentsByCountry(false, widgetKey);\n        break;\n      case 'averagePaymentByCountry':\n        fetchAveragePaymentByCountry(false, widgetKey);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // Render widget refresh button\n  const renderWidgetRefresh = (widgetKey) => {\n    const state = widgetStates[widgetKey];\n    return (\n      <button\n        className=\"widget-refresh-btn\"\n        onClick={() => handleWidgetRefresh(widgetKey)}\n        disabled={state?.loading}\n        title={state?.loading ? 'Refreshing...' : state?.error ? 'Retry' : 'Refresh this widget'}\n      >\n        <RefreshCw size={14} className={state?.loading ? 'spinning' : ''} />\n      </button>\n    );\n  };\n\n  // Helper to show loading/error state in widget\n  const renderWidgetStatus = (widgetKey) => {\n    const state = widgetStates[widgetKey];\n    if (state?.loading) {\n      return (\n        <div className=\"widget-loading\">\n          <Loader size={20} className=\"spinning\" />\n        </div>\n      );\n    }\n    if (state?.error) {\n      return (\n        <div className=\"widget-error\">\n          <span>Error: {state.error}</span>\n          <button onClick={() => handleWidgetRefresh(widgetKey)} className=\"retry-btn\">Retry</button>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  // Refresh all widgets\n  const handleRefresh = () => {\n    setRefreshing(true);\n    Promise.all([\n      fetchTotalContributors(true, 'totalContributors'),\n      fetchTotalPayments(true, 'totalPayments'),\n      fetchAveragePayment(true, 'averagePayment'),\n      fetchPendingCount(true, 'pendingCount'),\n      fetchPaymentsByStatus(true, 'paymentsByStatus'),\n      fetchPaymentsByMethod(true, 'paymentsByMethod'),\n      fetchPaymentsOverTime(true, 'paymentsOverTime'),\n      fetchTopContributors(true, 'topContributors'),\n      fetchPaymentsByCountry(true, 'paymentsByCountry'),\n      fetchAveragePaymentByCountry(true, 'averagePaymentByCountry')\n    ]).finally(() => {\n      setRefreshing(false);\n      toast.success('All widgets refreshed');\n    });\n  };\n\n  // Export to Excel\n  const handleExport = useCallback(() => {\n    try {\n      const workbook = XLSX.utils.book_new();\n      \n      // Summary sheet\n      const summaryData = [\n        ['Metric', 'Value'],\n        ['Total Contributors', totalContributors.value],\n        ['Total Payments', formatCurrency(totalPayments.value)],\n        ['Average Payment', formatCurrency(averagePayment.value)],\n        ['Pending Amount', formatCurrency(pendingCount.value)]\n      ];\n      const summarySheet = XLSX.utils.aoa_to_sheet(summaryData);\n      XLSX.utils.book_append_sheet(workbook, summarySheet, 'Summary');\n\n      // Payments by Status\n      if (paymentsByStatus.data.length > 0) {\n        const statusData = [['Status', 'Count', 'Total Amount', 'Outstanding Amount']];\n        paymentsByStatus.data.forEach(item => {\n          statusData.push([item.status, item.count, item.totalAmount, item.outstandingAmount]);\n        });\n        const statusSheet = XLSX.utils.aoa_to_sheet(statusData);\n        XLSX.utils.book_append_sheet(workbook, statusSheet, 'Payments by Status');\n      }\n\n      // Top Contributors\n      if (topContributors.data.length > 0) {\n        const contributorsData = [['Name', 'Email', 'Total Payment', 'Outstanding', 'Status', 'Last Payment Date', 'Method']];\n        topContributors.data.forEach(item => {\n          contributorsData.push([\n            item.name,\n            item.email,\n            formatCurrency(item.totalPaymentAmount),\n            formatCurrency(item.outstandingBalance),\n            item.paymentStatus,\n            formatDate(item.lastPaymentDate),\n            item.paymentMethod\n          ]);\n        });\n        const contributorsSheet = XLSX.utils.aoa_to_sheet(contributorsData);\n        XLSX.utils.book_append_sheet(workbook, contributorsSheet, 'Top Contributors');\n      }\n\n      XLSX.writeFile(workbook, `contributor-payments-${new Date().toISOString().split('T')[0]}.xlsx`);\n      toast.success('Data exported successfully');\n    } catch (error) {\n      toast.error('Failed to export data');\n    }\n  }, [totalContributors, totalPayments, averagePayment, pendingCount, paymentsByStatus, topContributors]);\n\n  // Load baseline data from localStorage on mount\n  useEffect(() => {\n    const loadBaselineData = () => {\n      try {\n        const baselineData = localStorage.getItem('contributorPaymentsBaseline');\n        if (baselineData) {\n          const parsed = JSON.parse(baselineData);\n          console.log('Loading baseline data from localStorage:', parsed);\n          \n          // Restore all widget states from baseline\n          if (parsed.totalContributors) {\n            setTotalContributors(parsed.totalContributors);\n            console.log('Loaded totalContributors:', parsed.totalContributors);\n          }\n          if (parsed.totalPayments) {\n            setTotalPayments(parsed.totalPayments);\n            console.log('Loaded totalPayments:', parsed.totalPayments);\n          }\n          if (parsed.averagePayment) {\n            setAveragePayment(parsed.averagePayment);\n            console.log('Loaded averagePayment:', parsed.averagePayment);\n          }\n          if (parsed.pendingCount) {\n            setPendingCount(parsed.pendingCount);\n            console.log('Loaded pendingCount:', parsed.pendingCount);\n          }\n          if (parsed.paymentsByStatus) {\n            setPaymentsByStatus(parsed.paymentsByStatus);\n            console.log('Loaded paymentsByStatus:', parsed.paymentsByStatus.data?.length || 0, 'items');\n          }\n          if (parsed.paymentsByMethod) {\n            setPaymentsByMethod(parsed.paymentsByMethod);\n            console.log('Loaded paymentsByMethod:', parsed.paymentsByMethod.data?.length || 0, 'items');\n          }\n          if (parsed.paymentsOverTime) {\n            setPaymentsOverTime(parsed.paymentsOverTime);\n            console.log('Loaded paymentsOverTime:', parsed.paymentsOverTime.data?.length || 0, 'items');\n          }\n          if (parsed.topContributors) {\n            setTopContributors(parsed.topContributors);\n            console.log('Loaded topContributors:', parsed.topContributors.data?.length || 0, 'items');\n          }\n          if (parsed.paymentsByCountry) {\n            setPaymentsByCountry(parsed.paymentsByCountry);\n            console.log('Loaded paymentsByCountry:', parsed.paymentsByCountry.data?.length || 0, 'items');\n          }\n          if (parsed.averagePaymentByCountry) {\n            setAveragePaymentByCountry(parsed.averagePaymentByCountry);\n            console.log('Loaded averagePaymentByCountry:', parsed.averagePaymentByCountry.data?.length || 0, 'items');\n          }\n          \n          console.log('âœ… Baseline data loaded from localStorage successfully');\n        } else {\n          console.log('No baseline data found in localStorage');\n        }\n      } catch (error) {\n        console.error('âŒ Error loading baseline data:', error);\n      } finally {\n        // Mark baseline loading as complete after a short delay to ensure state updates\n        setTimeout(() => {\n          setIsLoadingBaseline(false);\n          console.log('Baseline loading complete');\n        }, 100);\n      }\n    };\n    \n    loadBaselineData();\n  }, []);\n  \n  // Save baseline data to localStorage whenever any widget data is updated\n  useEffect(() => {\n    // Don't save during initial baseline load\n    if (isLoadingBaseline) {\n      return;\n    }\n    \n    const saveBaselineData = () => {\n      try {\n        const baselineData = {\n          totalContributors,\n          totalPayments,\n          averagePayment,\n          pendingCount,\n          paymentsByStatus,\n          paymentsByMethod,\n          paymentsOverTime,\n          topContributors,\n          paymentsByCountry,\n          averagePaymentByCountry,\n          savedAt: new Date().toISOString()\n        };\n        localStorage.setItem('contributorPaymentsBaseline', JSON.stringify(baselineData));\n        console.log('ğŸ’¾ Baseline data saved to localStorage');\n      } catch (error) {\n        console.error('âŒ Error saving baseline data:', error);\n      }\n    };\n    \n    // Only save if at least one widget has data\n    if (totalContributors.value > 0 || \n        totalPayments.value > 0 || \n        paymentsByStatus.data.length > 0 ||\n        paymentsByMethod.data.length > 0 ||\n        paymentsOverTime.data.length > 0 ||\n        topContributors.data.length > 0 ||\n        paymentsByCountry.data.length > 0 ||\n        averagePaymentByCountry.data.length > 0) {\n      saveBaselineData();\n    }\n  }, [isLoadingBaseline, totalContributors, totalPayments, averagePayment, pendingCount, paymentsByStatus, paymentsByMethod, paymentsOverTime, topContributors, paymentsByCountry, averagePaymentByCountry]);\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      <div className=\"contributor-payments-dashboard\" style={{ marginLeft: `${sidebarWidth}px`, width: `calc(100% - ${sidebarWidth}px)`, transition: 'margin-left 0.2s ease, width 0.2s ease' }}>\n        <div className=\"contributor-payments-container\">\n          <div className=\"contributor-payments-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button\n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">Contributor Payments Analytics</h1>\n                  <p className=\"page-subtitle\">View payment metrics and analytics</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <div className=\"header-actions\">\n                  <button \n                    className=\"btn-action\" \n                    onClick={handleRefresh}\n                    disabled={refreshing}\n                    title=\"Refresh All\"\n                  >\n                    {refreshing ? <Loader size={16} className=\"spinning\" /> : <RefreshCw size={16} />}\n                    <span>{refreshing ? 'Refreshing...' : 'Refresh All'}</span>\n                  </button>\n                  <button \n                    className=\"action-btn\" \n                    onClick={handleExport}\n                    title=\"Export to Excel\"\n                  >\n                    <Download size={16} />\n                    Export\n                  </button>\n                </div>\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"contributor-payments-content\">\n            {/* KPI Cards - Grid Layout */}\n            <div className=\"kpi-grid\">\n              {/* Widget 1: Total Contributors */}\n              <div className=\"kpi-card green\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Total Contributors</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('totalContributors')}\n                  </div>\n                </div>\n                {renderWidgetStatus('totalContributors') || (\n                  <>\n                    <div className=\"kpi-value\">{formatNumber(totalContributors.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(totalContributors.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n\n              {/* Widget 2: Total Payments */}\n              <div className=\"kpi-card green\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Total Payments</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('totalPayments')}\n                  </div>\n                </div>\n                {renderWidgetStatus('totalPayments') || (\n                  <>\n                    <div className=\"kpi-value\">{formatCurrency(totalPayments.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(totalPayments.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n\n              {/* Widget 3: Average Payment */}\n              <div className=\"kpi-card green\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Average Payment</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('averagePayment')}\n                  </div>\n                </div>\n                {renderWidgetStatus('averagePayment') || (\n                  <>\n                    <div className=\"kpi-value\">{formatCurrency(averagePayment.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(averagePayment.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n\n              {/* Widget 4: Pending Amount */}\n              <div className=\"kpi-card yellow\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Pending</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('pendingCount')}\n                  </div>\n                </div>\n                {renderWidgetStatus('pendingCount') || (\n                  <>\n                    <div className=\"kpi-value\">{formatCurrency(pendingCount.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(pendingCount.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Top Contributors Table - Right after summary */}\n            <div className=\"charts-grid\">\n              {/* Widget 12: Top Contributors Table */}\n              <div className=\"chart-card top-contributors-table-card\" style={{ gridColumn: '1 / -1' }}>\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Top Contributors by Payment Amount</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('topContributors')}\n                  </div>\n                </div>\n                {renderWidgetStatus('topContributors') || (\n                  topContributors.data.length > 0 ? (\n                    <>\n                      <div className=\"table-container\">\n                        <table>\n                          <thead>\n                            <tr>\n                              <th>Name</th>\n                              <th>Email</th>\n                              <th>Total Payment</th>\n                              <th>Outstanding</th>\n                              <th>Status</th>\n                              <th>Last Payment Date</th>\n                              <th>Method</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {topContributors.data.map((contributor) => (\n                              <tr key={contributor.id}>\n                                <td>{contributor.name}</td>\n                                <td>{contributor.email}</td>\n                                <td>{formatCurrency(contributor.totalPaymentAmount)}</td>\n                                <td>{formatCurrency(contributor.outstandingBalance)}</td>\n                                <td>\n                                  <span className={`status-badge status-${contributor.paymentStatus?.toLowerCase()}`}>\n                                    {contributor.paymentStatus}\n                                  </span>\n                                </td>\n                                <td>{formatDate(contributor.lastPaymentDate)}</td>\n                                <td>{contributor.paymentMethod}</td>\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(topContributors.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No top contributors data available</div>\n                  )\n                )}\n              </div>\n            </div>\n\n            {/* Charts Grid - Grid Layout - All Graph Widgets */}\n            <div className=\"charts-grid\">\n              {/* Widget 8: Payments by Status */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments by Status</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsByStatus')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsByStatus') || (\n                  paymentsByStatus.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\">\n                        <ResponsiveContainer width=\"100%\" height={300}>\n                          <PieChart>\n                            <Pie\n                              data={paymentsByStatus.data}\n                              cx=\"50%\"\n                              cy=\"50%\"\n                              labelLine={false}\n                              label={({ name, percent }) => {\n                                // Only show label if percentage is >= 5% to avoid clutter\n                                if (percent >= 0.05) {\n                                  return `${name}: ${(percent * 100).toFixed(0)}%`;\n                                }\n                                return '';\n                              }}\n                              outerRadius={100}\n                              innerRadius={30}\n                              fill=\"#8884d8\"\n                              dataKey=\"count\"\n                              paddingAngle={2}\n                            >\n                              {paymentsByStatus.data.map((entry, index) => (\n                                <Cell \n                                  key={`cell-${index}`} \n                                  fill={STATUS_COLORS[index % STATUS_COLORS.length]} \n                                />\n                              ))}\n                            </Pie>\n                            <Tooltip \n                              content={({ active, payload }) => {\n                                if (active && payload && payload.length) {\n                                  const data = payload[0];\n                                  const entry = data.payload;\n                                  const color = STATUS_COLORS[paymentsByStatus.data.findIndex(e => e.status === entry.status) % STATUS_COLORS.length];\n                                  return (\n                                    <div style={{\n                                      backgroundColor: 'white',\n                                      border: '1px solid #e5e7eb',\n                                      borderRadius: '8px',\n                                      padding: '12px',\n                                      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n                                    }}>\n                                      <div style={{ \n                                        display: 'flex', \n                                        alignItems: 'center', \n                                        gap: '8px',\n                                        marginBottom: '8px'\n                                      }}>\n                                        <div style={{\n                                          width: '16px',\n                                          height: '16px',\n                                          borderRadius: '4px',\n                                          backgroundColor: color,\n                                          border: '1px solid #d1d5db'\n                                        }}></div>\n                                        <strong style={{ fontSize: '14px', color: '#111827' }}>\n                                          {entry.status || 'No Status'}\n                                        </strong>\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280', marginTop: '4px' }}>\n                                        <div>Count: <strong style={{ color: '#111827' }}>{formatNumber(entry.count)}</strong></div>\n                                        {entry.totalAmount !== undefined && (\n                                          <div>Total Amount: <strong style={{ color: '#111827' }}>{formatCurrency(entry.totalAmount)}</strong></div>\n                                        )}\n                                        <div style={{ marginTop: '4px', fontSize: '12px', color: '#9ca3af' }}>\n                                          Percentage: {((entry.count / paymentsByStatus.data.reduce((sum, e) => sum + e.count, 0)) * 100).toFixed(1)}%\n                                        </div>\n                                      </div>\n                                    </div>\n                                  );\n                                }\n                                return null;\n                              }}\n                            />\n                          </PieChart>\n                        </ResponsiveContainer>\n                      </div>\n                      {/* Legend showing status colors */}\n                      <div style={{ \n                        marginTop: '16px', \n                        padding: '12px',\n                        backgroundColor: '#f9fafb',\n                        borderRadius: '8px',\n                        display: 'flex',\n                        flexWrap: 'wrap',\n                        gap: '12px',\n                        justifyContent: 'center',\n                        fontSize: '12px'\n                      }}>\n                        {paymentsByStatus.data.map((entry, index) => {\n                          const color = STATUS_COLORS[index % STATUS_COLORS.length];\n                          return (\n                            <div \n                              key={`legend-${index}`}\n                              style={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: '6px'\n                              }}\n                            >\n                              <div style={{\n                                width: '12px',\n                                height: '12px',\n                                borderRadius: '3px',\n                                backgroundColor: color,\n                                border: '1px solid #d1d5db',\n                                flexShrink: 0\n                              }}></div>\n                              <span style={{ color: '#374151' }}>\n                                {entry.status || 'No Status'} ({formatNumber(entry.count)})\n                              </span>\n                            </div>\n                          );\n                        })}\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsByStatus.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment status data available</div>\n                  )\n                )}\n              </div>\n\n              {/* Widget 9: Payments by Method */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments by Method</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsByMethod')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsByMethod') || (\n                  paymentsByMethod.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\">\n                        <ResponsiveContainer width=\"100%\" height={300}>\n                          <BarChart data={paymentsByMethod.data}>\n                            <CartesianGrid strokeDasharray=\"3 3\" />\n                            <XAxis dataKey=\"method\" />\n                            <YAxis />\n                            <Tooltip formatter={(value) => formatCurrency(value)} />\n                            <Legend />\n                            <Bar dataKey=\"count\" fill=\"#08979C\" name=\"Count\" />\n                            <Bar dataKey=\"totalAmount\" fill=\"#13C2C2\" name=\"Total Amount\" />\n                          </BarChart>\n                        </ResponsiveContainer>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsByMethod.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment method data available</div>\n                  )\n                )}\n              </div>\n\n              {/* Widget 10: Payments Over Time */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments Over Time</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsOverTime')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsOverTime') || (\n                  paymentsOverTime.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\">\n                        <ResponsiveContainer width=\"100%\" height={300}>\n                          <LineChart data={paymentsOverTime.data}>\n                            <CartesianGrid strokeDasharray=\"3 3\" />\n                            <XAxis dataKey=\"period\" />\n                            <YAxis />\n                            <Tooltip formatter={(value) => formatCurrency(value)} />\n                            <Legend />\n                            <Line type=\"monotone\" dataKey=\"totalAmount\" stroke=\"#08979C\" name=\"Total Amount\" />\n                            <Line type=\"monotone\" dataKey=\"count\" stroke=\"#13C2C2\" name=\"Count\" />\n                          </LineChart>\n                        </ResponsiveContainer>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsOverTime.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment over time data available</div>\n                  )\n                )}\n              </div>\n\n              {/* Widget 11: Payments by Country - Full Width */}\n              <div className=\"chart-card\" style={{ gridColumn: '1 / -1' }}>\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments by Country</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsByCountry')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsByCountry') || (\n                  paymentsByCountry.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\" style={{ overflowX: 'auto', overflowY: 'hidden', width: '100%' }}>\n                        <div style={{ minWidth: `${Math.max(800, paymentsByCountry.data.length * 80)}px`, height: '350px' }}>\n                          <ResponsiveContainer width=\"100%\" height={350}>\n                            <BarChart data={paymentsByCountry.data} margin={{ top: 5, right: 30, left: 20, bottom: 100 }}>\n                              <CartesianGrid strokeDasharray=\"3 3\" />\n                              <XAxis \n                                dataKey=\"country\" \n                                angle={-45} \n                                textAnchor=\"end\" \n                                height={100}\n                                interval={0}\n                                tick={{ fontSize: 12 }}\n                              />\n                            <YAxis \n                              yAxisId=\"left\" \n                              tickFormatter={(value) => formatCurrency(value)}\n                              label={{ value: 'Total Amount ($)', angle: -90, position: 'insideLeft' }}\n                            />\n                            <YAxis \n                              yAxisId=\"right\" \n                              orientation=\"right\"\n                              tickFormatter={(value) => formatNumber(value)}\n                              label={{ value: 'Contributor Count', angle: 90, position: 'insideRight' }}\n                            />\n                            <Tooltip \n                              content={({ active, payload, label }) => {\n                                if (active && payload && payload.length) {\n                                  return (\n                                    <div style={{\n                                      backgroundColor: 'white',\n                                      border: '1px solid #e5e7eb',\n                                      borderRadius: '8px',\n                                      padding: '12px',\n                                      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n                                    }}>\n                                      <div style={{ \n                                        fontSize: '14px', \n                                        fontWeight: 'bold',\n                                        color: '#111827',\n                                        marginBottom: '8px'\n                                      }}>\n                                        {label || 'Unknown Country'}\n                                      </div>\n                                      {payload.map((entry, index) => (\n                                        <div \n                                          key={`tooltip-${index}`}\n                                          style={{\n                                            display: 'flex',\n                                            justifyContent: 'space-between',\n                                            alignItems: 'center',\n                                            gap: '12px',\n                                            marginTop: '4px',\n                                            fontSize: '13px'\n                                          }}\n                                        >\n                                          <div style={{ \n                                            display: 'flex', \n                                            alignItems: 'center', \n                                            gap: '6px' \n                                          }}>\n                                            <div style={{\n                                              width: '12px',\n                                              height: '12px',\n                                              backgroundColor: entry.color,\n                                              borderRadius: '2px'\n                                            }}></div>\n                                            <span style={{ color: '#6b7280' }}>\n                                              {entry.name}:\n                                            </span>\n                                          </div>\n                                          <strong style={{ color: '#111827' }}>\n                                            {entry.dataKey === 'count' \n                                              ? formatNumber(entry.value) \n                                              : formatCurrency(entry.value)\n                                            }\n                                          </strong>\n                                        </div>\n                                      ))}\n                                    </div>\n                                  );\n                                }\n                                return null;\n                              }}\n                            />\n                            <Legend />\n                            <Bar \n                              yAxisId=\"left\"\n                              dataKey=\"totalAmount\" \n                              fill=\"#08979C\" \n                              name=\"Total Amount ($)\" \n                            />\n                            <Bar \n                              yAxisId=\"right\"\n                              dataKey=\"count\" \n                              fill=\"#13C2C2\" \n                              name=\"Contributor Count\" \n                            />\n                          </BarChart>\n                        </ResponsiveContainer>\n                        </div>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsByCountry.lastRefreshed)} - Showing all {paymentsByCountry.data.length} countries (scroll horizontally to view all)</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment by country data available</div>\n                  )\n                )}\n              </div>\n\n              {/* Widget 15: Average Payment by Country - Full Width */}\n              <div className=\"chart-card\" style={{ gridColumn: '1 / -1' }}>\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Average Payment by Country</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('averagePaymentByCountry')}\n                  </div>\n                </div>\n                {renderWidgetStatus('averagePaymentByCountry') || (\n                  averagePaymentByCountry.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\" style={{ overflowX: 'auto', overflowY: 'hidden', width: '100%' }}>\n                        <div style={{ minWidth: `${Math.max(800, averagePaymentByCountry.data.length * 80)}px`, height: '350px' }}>\n                          <ResponsiveContainer width=\"100%\" height={350}>\n                            <BarChart data={averagePaymentByCountry.data} margin={{ top: 5, right: 30, left: 20, bottom: 100 }}>\n                              <CartesianGrid strokeDasharray=\"3 3\" />\n                              <XAxis \n                                dataKey=\"country\" \n                                angle={-45} \n                                textAnchor=\"end\" \n                                height={100}\n                                interval={0}\n                                tick={{ fontSize: 12 }}\n                              />\n                            <YAxis tickFormatter={(value) => formatCurrency(value)} />\n                            <Tooltip\n                              content={({ active, payload }) => {\n                                if (active && payload && payload.length) {\n                                  const data = payload[0].payload;\n                                  return (\n                                    <div style={{\n                                      backgroundColor: 'white',\n                                      border: '1px solid #e5e7eb',\n                                      borderRadius: '8px',\n                                      padding: '12px',\n                                      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n                                    }}>\n                                      <div style={{ fontSize: '14px', fontWeight: 'bold', marginBottom: '8px' }}>\n                                        {data.country}\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\n                                        Average: <strong style={{ color: '#111827' }}>{data.averageAmountFormatted || data.averageAmount}</strong>\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\n                                        Total: <strong style={{ color: '#111827' }}>{data.totalAmountFormatted || data.totalAmount}</strong>\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\n                                        Contributors: <strong style={{ color: '#111827' }}>{data.countFormatted || data.count}</strong>\n                                      </div>\n                                    </div>\n                                  );\n                                }\n                                return null;\n                              }}\n                            />\n                            <Legend />\n                            <Bar dataKey=\"averageAmount\" fill=\"#08979C\" name=\"Average Payment ($)\" />\n                          </BarChart>\n                        </ResponsiveContainer>\n                        </div>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(averagePaymentByCountry.lastRefreshed)} - Showing all {averagePaymentByCountry.data.length} countries (scroll horizontally to view all)</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No average payment by country data available</div>\n                  )\n                )}\n              </div>\n\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ContributorPaymentsDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}