{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{X,Save}from'lucide-react';import toast from'react-hot-toast';import'../../styles/SaveReportModal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SaveReportModal=_ref=>{let{show,onClose,reportConfig,onSave}=_ref;const[reportName,setReportName]=useState(reportConfig.name||'');const[category,setCategory]=useState(reportConfig.category||'Uncategorized');const handleSave=()=>{if(!reportName.trim()){toast.error('Please enter a report name');return;}// Check if multi-object mode or legacy single-object mode\nconst isMultiObjectMode=reportConfig.objects&&reportConfig.objects.length>0;if(isMultiObjectMode){// Multi-object mode: check if at least one object has fields\nconst hasFields=reportConfig.objects.some(obj=>obj.fields&&obj.fields.length>0);if(!hasFields){toast.error('Please add at least one field to at least one object');return;}// Also check if at least one object is selected\nif(reportConfig.objects.length===0){toast.error('Please select at least one object');return;}}else{// Legacy single-object mode\nif(!reportConfig.objectType){toast.error('Please select an object type');return;}if(!reportConfig.fields||reportConfig.fields.length===0){toast.error('Please add at least one field');return;}}const reportToSave=_objectSpread(_objectSpread({},reportConfig),{},{name:reportName.trim(),category:category.trim()||'Uncategorized',id:reportConfig.id||\"advanced_report_\".concat(Date.now()),createdAt:reportConfig.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()});onSave(reportToSave);onClose();setReportName('');setCategory('Uncategorized');};if(!show)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"save-report-modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"save-report-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"save-modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Save Report\"}),/*#__PURE__*/_jsx(\"button\",{className:\"save-modal-close\",onClick:onClose,children:/*#__PURE__*/_jsx(X,{size:18})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"save-modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"save-modal-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Report Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reportName,onChange:e=>setReportName(e.target.value),placeholder:\"Enter report name\",className:\"save-modal-input\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"save-modal-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:category,onChange:e=>setCategory(e.target.value),placeholder:\"Uncategorized\",className:\"save-modal-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"save-modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"save-modal-cancel\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"save-modal-save\",onClick:handleSave,children:[/*#__PURE__*/_jsx(Save,{size:16}),\" Save Report\"]})]})]})});};export default SaveReportModal;","map":{"version":3,"names":["React","useState","X","Save","toast","jsx","_jsx","jsxs","_jsxs","SaveReportModal","_ref","show","onClose","reportConfig","onSave","reportName","setReportName","name","category","setCategory","handleSave","trim","error","isMultiObjectMode","objects","length","hasFields","some","obj","fields","objectType","reportToSave","_objectSpread","id","concat","Date","now","createdAt","toISOString","updatedAt","className","onClick","children","e","stopPropagation","size","type","value","onChange","target","placeholder","autoFocus"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/components/AdvancedReportBuilder/SaveReportModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { X, Save } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport '../../styles/SaveReportModal.css';\n\nconst SaveReportModal = ({ show, onClose, reportConfig, onSave }) => {\n  const [reportName, setReportName] = useState(reportConfig.name || '');\n  const [category, setCategory] = useState(reportConfig.category || 'Uncategorized');\n\n  const handleSave = () => {\n    if (!reportName.trim()) {\n      toast.error('Please enter a report name');\n      return;\n    }\n\n    // Check if multi-object mode or legacy single-object mode\n    const isMultiObjectMode = reportConfig.objects && reportConfig.objects.length > 0;\n    \n    if (isMultiObjectMode) {\n      // Multi-object mode: check if at least one object has fields\n      const hasFields = reportConfig.objects.some(obj => \n        obj.fields && obj.fields.length > 0\n      );\n      \n      if (!hasFields) {\n        toast.error('Please add at least one field to at least one object');\n        return;\n      }\n      \n      // Also check if at least one object is selected\n      if (reportConfig.objects.length === 0) {\n        toast.error('Please select at least one object');\n        return;\n      }\n    } else {\n      // Legacy single-object mode\n      if (!reportConfig.objectType) {\n        toast.error('Please select an object type');\n        return;\n      }\n\n      if (!reportConfig.fields || reportConfig.fields.length === 0) {\n        toast.error('Please add at least one field');\n        return;\n      }\n    }\n\n    const reportToSave = {\n      ...reportConfig,\n      name: reportName.trim(),\n      category: category.trim() || 'Uncategorized',\n      id: reportConfig.id || `advanced_report_${Date.now()}`,\n      createdAt: reportConfig.createdAt || new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n\n    onSave(reportToSave);\n    onClose();\n    setReportName('');\n    setCategory('Uncategorized');\n  };\n\n  if (!show) return null;\n\n  return (\n    <div className=\"save-report-modal-overlay\" onClick={onClose}>\n      <div className=\"save-report-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"save-modal-header\">\n          <h3>Save Report</h3>\n          <button className=\"save-modal-close\" onClick={onClose}>\n            <X size={18} />\n          </button>\n        </div>\n        <div className=\"save-modal-content\">\n          <div className=\"save-modal-field\">\n            <label>Report Name *</label>\n            <input\n              type=\"text\"\n              value={reportName}\n              onChange={(e) => setReportName(e.target.value)}\n              placeholder=\"Enter report name\"\n              className=\"save-modal-input\"\n              autoFocus\n            />\n          </div>\n          <div className=\"save-modal-field\">\n            <label>Category</label>\n            <input\n              type=\"text\"\n              value={category}\n              onChange={(e) => setCategory(e.target.value)}\n              placeholder=\"Uncategorized\"\n              className=\"save-modal-input\"\n            />\n          </div>\n        </div>\n        <div className=\"save-modal-actions\">\n          <button className=\"save-modal-cancel\" onClick={onClose}>\n            Cancel\n          </button>\n          <button className=\"save-modal-save\" onClick={handleSave}>\n            <Save size={16} /> Save Report\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SaveReportModal;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}