{"ast":null,"code":"import axios from 'axios';\n\n// In development, use relative URL to go through proxy (avoids CORS)\n// In production, use full URL from environment variable\nconst API_BASE_URL = process.env.REACT_APP_API_URL || (process.env.NODE_ENV === 'production' ? '/api' : '/api');\n\n// Backend health check with retry logic\nlet backendHealthCheckPromise = null;\nlet lastHealthCheck = null;\nconst HEALTH_CHECK_CACHE_MS = 5000; // Cache health check for 5 seconds\n\nconst checkBackendHealthWithCache = async () => {\n  const now = Date.now();\n\n  // Return cached result if available and recent\n  if (lastHealthCheck && now - lastHealthCheck.timestamp < HEALTH_CHECK_CACHE_MS) {\n    return lastHealthCheck.isHealthy;\n  }\n\n  // If a health check is already in progress, wait for it\n  if (backendHealthCheckPromise) {\n    return backendHealthCheckPromise;\n  }\n\n  // Start new health check\n  backendHealthCheckPromise = (async () => {\n    try {\n      const response = await axios.get('/health', {\n        baseURL: API_BASE_URL,\n        timeout: 3000,\n        validateStatus: status => status === 200\n      });\n      lastHealthCheck = {\n        isHealthy: true,\n        timestamp: now\n      };\n      return true;\n    } catch (error) {\n      lastHealthCheck = {\n        isHealthy: false,\n        timestamp: now\n      };\n      return false;\n    } finally {\n      backendHealthCheckPromise = null;\n    }\n  })();\n  return backendHealthCheckPromise;\n};\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  // Remove withCredentials to avoid CORS issues - server CORS is configured correctly\n  // withCredentials: true,\n  timeout: 120000 // 120 second timeout (increased for Salesforce API calls, especially KPIs)\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Always log request details in development for debugging\n  if (process.env.NODE_ENV === 'development') {\n    console.log('API Request:', {\n      url: config.url,\n      method: config.method,\n      baseURL: config.baseURL,\n      fullURL: `${config.baseURL}${config.url}`,\n      hasToken: !!token,\n      tokenLength: token ? token.length : 0,\n      headers: {\n        'Content-Type': config.headers['Content-Type'],\n        'Authorization': config.headers.Authorization ? 'Bearer ***' : 'None',\n        'Origin': window.location.origin\n      },\n      withCredentials: config.withCredentials\n    });\n  } else if (!token) {\n    console.warn('API Request without token:', {\n      url: config.url,\n      method: config.method\n    });\n  }\n  return config;\n}, error => {\n  console.error('Request interceptor error:', error);\n  return Promise.reject(error);\n});\n\n// Use the cached health check function\nconst checkBackendHealth = checkBackendHealthWithCache;\n\n// Export health check function for use in other modules\nexport { checkBackendHealth };\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(response => response, async error => {\n  var _error$response, _error$response3, _error$response4;\n  // Handle 504 Gateway Timeout errors\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 504 || error.code === 'ECONNREFUSED' || error.code === 'ETIMEDOUT') {\n    var _error$config, _error$response2;\n    const url = ((_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url) || '';\n    console.error('Backend connection error:', {\n      status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status,\n      code: error.code,\n      message: error.message,\n      url: url\n    });\n    error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n    error.isBackendDown = true;\n    error.userMessage = 'Unable to connect to server. Please ensure the backend server is running on port 5000.';\n  }\n\n  // Handle 404 errors - check if backend is ready\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 404) {\n    var _error$config2;\n    const url = ((_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.url) || '';\n    const isAuthEndpoint = url.includes('/auth/');\n\n    // For auth endpoints, check if backend is ready\n    if (isAuthEndpoint) {\n      const isHealthy = await checkBackendHealth();\n      if (!isHealthy) {\n        console.error('Backend is not responding. Please ensure the server is running on port 5000.');\n        error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n        error.isBackendDown = true;\n      } else {\n        console.error('404 on auth endpoint - route may not be registered:', url);\n        error.message = `Route not found: ${url}. Please check that the backend server has restarted and routes are registered.`;\n      }\n    }\n  }\n\n  // Handle network errors (server not running, CORS blocked, etc.)\n  if (!error.response) {\n    var _error$config3, _error$config4;\n    const url = ((_error$config3 = error.config) === null || _error$config3 === void 0 ? void 0 : _error$config3.url) || '';\n    const baseURL = ((_error$config4 = error.config) === null || _error$config4 === void 0 ? void 0 : _error$config4.baseURL) || API_BASE_URL;\n    const fullURL = `${baseURL}${url}`;\n    console.error('Network error - request did not reach server:', {\n      url: url,\n      fullURL: fullURL,\n      baseURL: baseURL,\n      message: error.message,\n      code: error.code,\n      name: error.name\n    });\n\n    // Check if it's a CORS error\n    if (error.message && (error.message.includes('CORS') || error.message.includes('Network Error') || error.code === 'ERR_NETWORK' || error.code === 'ERR_BLOCKED_BY_CLIENT')) {\n      console.error('CORS or network blocking detected. Check:');\n      console.error('1. Server is running on port 5000');\n      console.error('2. CORS is configured correctly on server');\n      console.error('3. Browser is not blocking the request');\n      console.error('4. Request URL:', fullURL);\n    }\n    const isAuthEndpoint = url.includes('/auth/');\n\n    // For login/verify endpoints, provide helpful error message\n    if (isAuthEndpoint && (url.includes('/login') || url.includes('/verify'))) {\n      // Don't show error toast for network errors on login - let the component handle it\n      // The error will be caught in the login function and shown there\n    }\n    return Promise.reject(error);\n  }\n  if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401) {\n    var _error$config5;\n    // Check if this is a Salesforce endpoint error (invalid Salesforce credentials)\n    // vs an auth endpoint error (invalid user token)\n    const url = ((_error$config5 = error.config) === null || _error$config5 === void 0 ? void 0 : _error$config5.url) || '';\n    const isSalesforceEndpoint = url.includes('/salesforce/');\n    const isAuthEndpoint = url.includes('/auth/');\n\n    // Only redirect to login if it's an auth endpoint error (user token invalid)\n    // Salesforce 401 errors should not redirect - they're just invalid Salesforce credentials\n    if (isAuthEndpoint && !isSalesforceEndpoint) {\n      // Token expired or invalid - redirect to login\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    // For Salesforce endpoints, just return the error without redirecting\n  }\n  return Promise.reject(error);\n});\nexport default apiClient;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","NODE_ENV","backendHealthCheckPromise","lastHealthCheck","HEALTH_CHECK_CACHE_MS","checkBackendHealthWithCache","now","Date","timestamp","isHealthy","response","get","baseURL","timeout","validateStatus","status","error","apiClient","create","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","console","log","url","method","fullURL","hasToken","tokenLength","length","window","location","origin","withCredentials","warn","Promise","reject","checkBackendHealth","_error$response","_error$response3","_error$response4","code","_error$config","_error$response2","message","isBackendDown","userMessage","_error$config2","isAuthEndpoint","includes","_error$config3","_error$config4","name","_error$config5","isSalesforceEndpoint","removeItem","href"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/config/api.js"],"sourcesContent":["import axios from 'axios';\n\n// In development, use relative URL to go through proxy (avoids CORS)\n// In production, use full URL from environment variable\nconst API_BASE_URL = process.env.REACT_APP_API_URL || (process.env.NODE_ENV === 'production' ? '/api' : '/api');\n\n// Backend health check with retry logic\nlet backendHealthCheckPromise = null;\nlet lastHealthCheck = null;\nconst HEALTH_CHECK_CACHE_MS = 5000; // Cache health check for 5 seconds\n\nconst checkBackendHealthWithCache = async () => {\n  const now = Date.now();\n  \n  // Return cached result if available and recent\n  if (lastHealthCheck && (now - lastHealthCheck.timestamp) < HEALTH_CHECK_CACHE_MS) {\n    return lastHealthCheck.isHealthy;\n  }\n  \n  // If a health check is already in progress, wait for it\n  if (backendHealthCheckPromise) {\n    return backendHealthCheckPromise;\n  }\n  \n  // Start new health check\n  backendHealthCheckPromise = (async () => {\n    try {\n      const response = await axios.get('/health', {\n        baseURL: API_BASE_URL,\n        timeout: 3000,\n        validateStatus: (status) => status === 200\n      });\n      lastHealthCheck = { isHealthy: true, timestamp: now };\n      return true;\n    } catch (error) {\n      lastHealthCheck = { isHealthy: false, timestamp: now };\n      return false;\n    } finally {\n      backendHealthCheckPromise = null;\n    }\n  })();\n  \n  return backendHealthCheckPromise;\n};\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  // Remove withCredentials to avoid CORS issues - server CORS is configured correctly\n  // withCredentials: true,\n  timeout: 120000, // 120 second timeout (increased for Salesforce API calls, especially KPIs)\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    \n    // Always log request details in development for debugging\n    if (process.env.NODE_ENV === 'development') {\n      console.log('API Request:', {\n        url: config.url,\n        method: config.method,\n        baseURL: config.baseURL,\n        fullURL: `${config.baseURL}${config.url}`,\n        hasToken: !!token,\n        tokenLength: token ? token.length : 0,\n        headers: {\n          'Content-Type': config.headers['Content-Type'],\n          'Authorization': config.headers.Authorization ? 'Bearer ***' : 'None',\n          'Origin': window.location.origin\n        },\n        withCredentials: config.withCredentials\n      });\n    } else if (!token) {\n      console.warn('API Request without token:', {\n        url: config.url,\n        method: config.method\n      });\n    }\n    \n    return config;\n  },\n  (error) => {\n    console.error('Request interceptor error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Use the cached health check function\nconst checkBackendHealth = checkBackendHealthWithCache;\n\n// Export health check function for use in other modules\nexport { checkBackendHealth };\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    // Handle 504 Gateway Timeout errors\n    if (error.response?.status === 504 || error.code === 'ECONNREFUSED' || error.code === 'ETIMEDOUT') {\n      const url = error.config?.url || '';\n      console.error('Backend connection error:', {\n        status: error.response?.status,\n        code: error.code,\n        message: error.message,\n        url: url\n      });\n      \n      error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n      error.isBackendDown = true;\n      error.userMessage = 'Unable to connect to server. Please ensure the backend server is running on port 5000.';\n    }\n    \n    // Handle 404 errors - check if backend is ready\n    if (error.response?.status === 404) {\n      const url = error.config?.url || '';\n      const isAuthEndpoint = url.includes('/auth/');\n      \n      // For auth endpoints, check if backend is ready\n      if (isAuthEndpoint) {\n        const isHealthy = await checkBackendHealth();\n        if (!isHealthy) {\n          console.error('Backend is not responding. Please ensure the server is running on port 5000.');\n          error.message = 'Backend server is not responding. Please ensure the server is running on port 5000.';\n          error.isBackendDown = true;\n        } else {\n          console.error('404 on auth endpoint - route may not be registered:', url);\n          error.message = `Route not found: ${url}. Please check that the backend server has restarted and routes are registered.`;\n        }\n      }\n    }\n    \n    // Handle network errors (server not running, CORS blocked, etc.)\n    if (!error.response) {\n      const url = error.config?.url || '';\n      const baseURL = error.config?.baseURL || API_BASE_URL;\n      const fullURL = `${baseURL}${url}`;\n      \n      console.error('Network error - request did not reach server:', {\n        url: url,\n        fullURL: fullURL,\n        baseURL: baseURL,\n        message: error.message,\n        code: error.code,\n        name: error.name\n      });\n      \n      // Check if it's a CORS error\n      if (error.message && (\n        error.message.includes('CORS') || \n        error.message.includes('Network Error') ||\n        error.code === 'ERR_NETWORK' ||\n        error.code === 'ERR_BLOCKED_BY_CLIENT'\n      )) {\n        console.error('CORS or network blocking detected. Check:');\n        console.error('1. Server is running on port 5000');\n        console.error('2. CORS is configured correctly on server');\n        console.error('3. Browser is not blocking the request');\n        console.error('4. Request URL:', fullURL);\n      }\n      \n      const isAuthEndpoint = url.includes('/auth/');\n      \n      // For login/verify endpoints, provide helpful error message\n      if (isAuthEndpoint && (url.includes('/login') || url.includes('/verify'))) {\n        // Don't show error toast for network errors on login - let the component handle it\n        // The error will be caught in the login function and shown there\n      }\n      \n      return Promise.reject(error);\n    }\n    \n    if (error.response?.status === 401) {\n      // Check if this is a Salesforce endpoint error (invalid Salesforce credentials)\n      // vs an auth endpoint error (invalid user token)\n      const url = error.config?.url || '';\n      const isSalesforceEndpoint = url.includes('/salesforce/');\n      const isAuthEndpoint = url.includes('/auth/');\n      \n      // Only redirect to login if it's an auth endpoint error (user token invalid)\n      // Salesforce 401 errors should not redirect - they're just invalid Salesforce credentials\n      if (isAuthEndpoint && !isSalesforceEndpoint) {\n        // Token expired or invalid - redirect to login\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      }\n      // For Salesforce endpoints, just return the error without redirecting\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default apiClient;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}