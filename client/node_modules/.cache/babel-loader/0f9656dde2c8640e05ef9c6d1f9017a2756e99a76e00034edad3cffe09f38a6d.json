{"ast":null,"code":"var _jsxFileName = \"/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/ProjectManagement/PMApprovals/PMApprovals.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useAuth } from '../../../context/AuthContext';\nimport Sidebar from '../../../components/Sidebar';\nimport { Menu, LogOut, RefreshCw, Loader } from 'lucide-react';\nimport apiClient from '../../../config/api';\nimport toast from 'react-hot-toast';\nimport BookmarkButton from '../../../components/BookmarkButton';\nimport DeadlinesPanel from './components/DeadlinesPanel';\nimport RecordsCount from './components/RecordsCount';\nimport FilterPanel from './components/FilterPanel';\nimport PendingHoursCard from './components/PendingHoursCard';\nimport MetricsRow from './components/MetricsRow';\nimport PendingUnitsCard from './components/PendingUnitsCard';\nimport ApprovalsTable from './components/ApprovalsTable';\nimport ActionButtons from './components/ActionButtons';\nimport ApprovalModal from './components/ApprovalModal';\nimport RejectModal from './components/RejectModal';\nimport EmailModal from './components/EmailModal';\nimport './PMApprovals.css';\nimport '../../../styles/Sidebar.css';\nimport '../../../styles/GlobalHeader.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PMApprovals = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n\n  // Data states\n  const [records, setRecords] = useState([]);\n  const [summary, setSummary] = useState(null);\n  const [deadlines, setDeadlines] = useState(null);\n  const [filterOptions, setFilterOptions] = useState({\n    accounts: [],\n    projects: [],\n    projectObjectives: [],\n    emails: [],\n    statuses: []\n  });\n\n  // Filter states\n  const [filters, setFilters] = useState({\n    account: 'all',\n    project: 'all',\n    projectObjective: 'all',\n    email: 'all',\n    transactionDateFrom: '',\n    transactionDateTo: '',\n    weekendingDateFrom: '',\n    weekendingDateTo: '',\n    transactionId: ''\n  });\n\n  // Table states\n  const [offset, setOffset] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [isLoadingMoreBatches, setIsLoadingMoreBatches] = useState(false);\n  const [totalRecords, setTotalRecords] = useState(0);\n  const [sortBy, setSortBy] = useState('Transaction_Date__c');\n  const [sortOrder, setSortOrder] = useState('DESC');\n  const [selectedRows, setSelectedRows] = useState([]);\n\n  // Modal states\n  const [showApprovalModal, setShowApprovalModal] = useState(false);\n  const [showRejectModal, setShowRejectModal] = useState(false);\n  const [showEmailModal, setShowEmailModal] = useState(false);\n\n  // Track if warning has been shown to avoid duplicates\n  const warningShownRef = useRef(false);\n  const tableContainerRef = useRef(null);\n\n  // Fetch deadlines\n  const fetchDeadlines = useCallback(async () => {\n    try {\n      const response = await apiClient.get('/pm-approvals/deadlines');\n      if (response.data.success) {\n        setDeadlines(response.data.deadlines);\n      }\n    } catch (error) {\n      console.error('Error fetching deadlines:', error);\n      // Don't show error toast - backend might be restarting\n      // The UI will continue to work with cached/default data\n    }\n  }, []);\n\n  // Fetch filter options\n  const fetchFilterOptions = useCallback(async () => {\n    try {\n      const response = await apiClient.get('/pm-approvals/filters');\n      if (response.data.success) {\n        setFilterOptions(response.data.filters);\n\n        // Show warning if Salesforce object is not configured (only once)\n        if (response.data.warning && !warningShownRef.current) {\n          warningShownRef.current = true;\n          toast(response.data.warning, {\n            duration: 8000,\n            icon: '⚠️',\n            style: {\n              background: '#fffbeb',\n              color: '#92400e',\n              border: '1px solid #fde68a'\n            }\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching filter options:', error);\n      // Don't show error toast - backend might be restarting\n      // Use empty filter options as fallback\n      setFilterOptions({\n        accounts: [],\n        projects: [],\n        projectObjectives: [],\n        emails: [],\n        statuses: []\n      });\n    }\n  }, []);\n\n  // Fetch summary metrics\n  const fetchSummary = useCallback(async (silent = false) => {\n    try {\n      const params = new URLSearchParams();\n      Object.keys(filters).forEach(key => {\n        if (filters[key] && filters[key] !== 'all' && filters[key] !== '') {\n          params.append(key, filters[key]);\n        }\n      });\n      const response = await apiClient.get(`/pm-approvals/summary?${params.toString()}`);\n      if (response.data.success) {\n        setSummary(response.data.data);\n\n        // Show warning if Salesforce object is not configured (only once)\n        if (response.data.warning && !silent && !warningShownRef.current) {\n          warningShownRef.current = true;\n          toast(response.data.warning, {\n            duration: 8000,\n            icon: '⚠️',\n            style: {\n              background: '#fffbeb',\n              color: '#92400e',\n              border: '1px solid #fde68a'\n            }\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching summary:', error);\n      // Don't show error toast if backend is down - UI will show loading/empty state\n      // Only show error if it's not a connection error\n      if (!silent && error.code !== 'ECONNREFUSED' && error.code !== 'ERR_NETWORK' && !error.isBackendDown) {\n        toast.error('Failed to load summary metrics');\n      }\n    }\n  }, [filters]);\n\n  // Fetch records in batches of 10,000\n  const fetchRecords = useCallback(async (reset = false, customOffset = null) => {\n    if (reset) {\n      setLoading(true);\n      setOffset(0);\n      setRecords([]);\n      setIsLoadingMoreBatches(true);\n    } else {\n      setLoadingMore(true);\n    }\n    try {\n      const params = new URLSearchParams();\n      const currentOffset = reset ? 0 : customOffset !== null ? customOffset : offset;\n      params.append('offset', currentOffset.toString());\n      params.append('limit', '10000'); // Request 10,000 records per batch\n      params.append('sortBy', sortBy);\n      params.append('sortOrder', sortOrder);\n      Object.keys(filters).forEach(key => {\n        if (filters[key] && filters[key] !== 'all' && filters[key] !== '') {\n          params.append(key, filters[key]);\n        }\n      });\n      const response = await apiClient.get(`/pm-approvals/list?${params.toString()}`);\n      if (response.data.success) {\n        const newRecords = response.data.records || [];\n        const total = response.data.total || 0;\n        setTotalRecords(total);\n        if (reset) {\n          setRecords(newRecords);\n          setOffset(newRecords.length);\n        } else {\n          setRecords(prev => {\n            const existingIds = new Set(prev.map(r => r.id));\n            const uniqueNewRecords = newRecords.filter(r => !existingIds.has(r.id));\n            return [...prev, ...uniqueNewRecords];\n          });\n          setOffset(prev => prev + newRecords.length);\n        }\n        const hasMore = response.data.hasMore || false;\n        setHasMore(hasMore);\n\n        // Automatically load next batch if there are more records\n        if (hasMore && newRecords.length > 0) {\n          // Use setTimeout to allow UI to update before loading next batch\n          setTimeout(() => {\n            const nextOffset = reset ? newRecords.length : offset + newRecords.length;\n            fetchRecords(false, nextOffset);\n          }, 100);\n        } else {\n          setIsLoadingMoreBatches(false);\n        }\n\n        // Show warning if Salesforce object is not configured (only once)\n        if (response.data.warning && reset && !warningShownRef.current) {\n          warningShownRef.current = true;\n          toast(response.data.warning, {\n            duration: 8000,\n            icon: '⚠️',\n            style: {\n              background: '#fffbeb',\n              color: '#92400e',\n              border: '1px solid #fde68a'\n            }\n          });\n        }\n      } else {\n        setIsLoadingMoreBatches(false);\n        toast.error(response.data.error || 'Failed to fetch approvals');\n      }\n    } catch (error) {\n      setIsLoadingMoreBatches(false);\n      // Don't show error toast if backend is down - UI will show empty state\n      // Only show error if it's not a connection error\n      if (error.code !== 'ECONNREFUSED' && error.code !== 'ERR_NETWORK' && !error.isBackendDown) {\n        var _error$response, _error$response$data;\n        const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message || 'Failed to fetch approvals';\n        toast.error(errorMessage);\n      }\n    } finally {\n      setLoading(false);\n      setLoadingMore(false);\n      setRefreshing(false);\n    }\n  }, [filters, sortBy, sortOrder, offset]);\n\n  // Initial load\n  useEffect(() => {\n    fetchDeadlines();\n    fetchFilterOptions();\n  }, [fetchDeadlines, fetchFilterOptions]);\n\n  // Fetch data when filters change\n  useEffect(() => {\n    setOffset(0);\n    setRecords([]);\n    setHasMore(true);\n    setSelectedRows([]);\n    fetchRecords(true);\n    fetchSummary(true);\n  }, [filters, sortBy, sortOrder]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Infinite scroll\n  useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n    const scrollWrapper = container.querySelector('.approvals-table-container');\n    if (!scrollWrapper) return;\n    let isFetching = false;\n    let scrollTimeout = null;\n    const handleScroll = () => {\n      if (scrollTimeout) {\n        clearTimeout(scrollTimeout);\n      }\n      scrollTimeout = setTimeout(() => {\n        if (loadingMore || isFetching || !hasMore) return;\n        const {\n          scrollTop,\n          scrollHeight,\n          clientHeight\n        } = scrollWrapper;\n        const distanceFromBottom = scrollHeight - scrollTop - clientHeight;\n        if (distanceFromBottom < 200) {\n          isFetching = true;\n          const currentOffset = records.length;\n          fetchRecords(false, currentOffset).finally(() => {\n            isFetching = false;\n          });\n        }\n      }, 100);\n    };\n    scrollWrapper.addEventListener('scroll', handleScroll, {\n      passive: true\n    });\n    return () => {\n      clearTimeout(scrollTimeout);\n      scrollWrapper.removeEventListener('scroll', handleScroll);\n    };\n  }, [records.length, loadingMore, hasMore, fetchRecords]);\n  const handleRefresh = useCallback(e => {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    setRefreshing(true);\n    setOffset(0);\n    setRecords([]);\n    setHasMore(true);\n    setSelectedRows([]);\n    fetchRecords(true).finally(() => {\n      setRefreshing(false);\n    });\n    fetchSummary();\n    fetchFilterOptions();\n  }, [fetchRecords, fetchSummary, fetchFilterOptions]);\n  const handleFilterChange = newFilters => {\n    setFilters(newFilters);\n  };\n  const handleClearFilters = clearedFilters => {\n    setFilters(clearedFilters);\n  };\n  const handleSort = (column, order) => {\n    setSortBy(column);\n    setSortOrder(order);\n  };\n  const handleRowSelect = recordId => {\n    setSelectedRows(prev => {\n      if (prev.includes(recordId)) {\n        return prev.filter(id => id !== recordId);\n      } else {\n        return [...prev, recordId];\n      }\n    });\n  };\n  const handleApprove = () => {\n    if (selectedRows.length === 0) {\n      toast.error('Please select at least one record to approve');\n      return;\n    }\n    setShowApprovalModal(true);\n  };\n  const handleReject = () => {\n    if (selectedRows.length === 0) {\n      toast.error('Please select at least one record to reject');\n      return;\n    }\n    setShowRejectModal(true);\n  };\n  const handleSendEmail = () => {\n    if (selectedRows.length === 0) {\n      toast.error('Please select at least one record to email');\n      return;\n    }\n    setShowEmailModal(true);\n  };\n  const handleApprovalConfirm = async comment => {\n    try {\n      const response = await apiClient.post('/pm-approvals/approve', {\n        transactionIds: selectedRows,\n        comment: comment || ''\n      });\n      if (response.data.success) {\n        toast.success(`Successfully approved ${response.data.approved} record(s)`);\n        setSelectedRows([]);\n        setShowApprovalModal(false);\n        fetchRecords(true);\n        fetchSummary();\n      } else {\n        toast.error(response.data.error || 'Failed to approve records');\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      toast.error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Failed to approve records');\n    }\n  };\n  const handleRejectConfirm = async reason => {\n    try {\n      const response = await apiClient.post('/pm-approvals/reject', {\n        transactionIds: selectedRows,\n        reason: reason || ''\n      });\n      if (response.data.success) {\n        toast.success(`Successfully rejected ${response.data.rejected} record(s)`);\n        setSelectedRows([]);\n        setShowRejectModal(false);\n        fetchRecords(true);\n        fetchSummary();\n      } else {\n        toast.error(response.data.error || 'Failed to reject records');\n      }\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      toast.error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Failed to reject records');\n    }\n  };\n  const handleEmailConfirm = async emailData => {\n    // Email functionality - to be implemented\n    toast.info('Email functionality coming soon');\n    setShowEmailModal(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-layout\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      isOpen: sidebarOpen,\n      toggleSidebar: () => setSidebarOpen(!sidebarOpen)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-approvals-page\",\n      style: {\n        marginLeft: sidebarOpen ? '320px' : '80px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pm-approvals-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pm-approvals-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"header-menu-toggle\",\n                onClick: () => setSidebarOpen(!sidebarOpen),\n                \"aria-label\": \"Toggle sidebar\",\n                children: /*#__PURE__*/_jsxDEV(Menu, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"page-title\",\n                  children: \"PM Approvals for Self Reported Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-right\",\n              children: [/*#__PURE__*/_jsxDEV(BookmarkButton, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"refresh-btn\",\n                onClick: handleRefresh,\n                disabled: refreshing,\n                title: \"Refresh\",\n                children: /*#__PURE__*/_jsxDEV(RefreshCw, {\n                  size: 18,\n                  className: refreshing ? 'spinning' : ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"header-user-profile\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"user-profile\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"user-avatar\",\n                    children: ((user === null || user === void 0 ? void 0 : user.email) || 'U').charAt(0).toUpperCase()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 451,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"user-name\",\n                    children: (user === null || user === void 0 ? void 0 : user.email) || 'User'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 454,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"logout-btn\",\n                    onClick: logout,\n                    title: \"Logout\",\n                    children: /*#__PURE__*/_jsxDEV(LogOut, {\n                      size: 18\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 456,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pm-approvals-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pm-approvals-sidebar\",\n            children: [/*#__PURE__*/_jsxDEV(DeadlinesPanel, {\n              deadlines: deadlines,\n              loading: !deadlines\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(RecordsCount, {\n              count: records.length,\n              total: totalRecords,\n              loading: loading,\n              isLoadingMore: isLoadingMoreBatches || loadingMore\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FilterPanel, {\n              filters: filters,\n              onFilterChange: handleFilterChange,\n              onClearFilters: handleClearFilters,\n              filterOptions: filterOptions,\n              loading: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ActionButtons, {\n              onApprove: handleApprove,\n              onReject: handleReject,\n              onSendEmail: handleSendEmail,\n              disabled: loading,\n              selectedCount: selectedRows.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pm-approvals-main\",\n            ref: tableContainerRef,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-metrics-section\",\n              children: [/*#__PURE__*/_jsxDEV(PendingHoursCard, {\n                totalPendingHours: (summary === null || summary === void 0 ? void 0 : summary.totalPendingHours) || 0,\n                totalHours: (summary === null || summary === void 0 ? void 0 : summary.totalHours) || 0,\n                loading: !summary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(MetricsRow, {\n                selfReportedTime: (summary === null || summary === void 0 ? void 0 : summary.selfReportedTime) || 0,\n                systemTracked: (summary === null || summary === void 0 ? void 0 : summary.systemTracked) || 0,\n                payment: (summary === null || summary === void 0 ? void 0 : summary.totalPayment) || 0,\n                loading: !summary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(PendingUnitsCard, {\n                totalPendingUnits: (summary === null || summary === void 0 ? void 0 : summary.totalPendingUnits) || 0,\n                loading: !summary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-section\",\n              children: [/*#__PURE__*/_jsxDEV(ApprovalsTable, {\n                records: records,\n                loading: loading,\n                onSort: handleSort,\n                sortBy: sortBy,\n                sortOrder: sortOrder,\n                selectedRows: selectedRows,\n                onRowSelect: handleRowSelect\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 17\n              }, this), loadingMore && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-more\",\n                children: [/*#__PURE__*/_jsxDEV(Loader, {\n                  className: \"spinning\",\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Loading more records...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), showApprovalModal && /*#__PURE__*/_jsxDEV(ApprovalModal, {\n      selectedCount: selectedRows.length,\n      onConfirm: handleApprovalConfirm,\n      onClose: () => setShowApprovalModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 9\n    }, this), showRejectModal && /*#__PURE__*/_jsxDEV(RejectModal, {\n      selectedCount: selectedRows.length,\n      onConfirm: handleRejectConfirm,\n      onClose: () => setShowRejectModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 9\n    }, this), showEmailModal && /*#__PURE__*/_jsxDEV(EmailModal, {\n      selectedCount: selectedRows.length,\n      selectedRecords: records.filter(r => selectedRows.includes(r.id)),\n      onConfirm: handleEmailConfirm,\n      onClose: () => setShowEmailModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 419,\n    columnNumber: 5\n  }, this);\n};\n_s(PMApprovals, \"upWThO1YEWZwYRErC8KBpgfkpRg=\", false, function () {\n  return [useAuth];\n});\n_c = PMApprovals;\nexport default PMApprovals;\nvar _c;\n$RefreshReg$(_c, \"PMApprovals\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useAuth","Sidebar","Menu","LogOut","RefreshCw","Loader","apiClient","toast","BookmarkButton","DeadlinesPanel","RecordsCount","FilterPanel","PendingHoursCard","MetricsRow","PendingUnitsCard","ApprovalsTable","ActionButtons","ApprovalModal","RejectModal","EmailModal","jsxDEV","_jsxDEV","PMApprovals","_s","user","logout","sidebarOpen","setSidebarOpen","loading","setLoading","refreshing","setRefreshing","records","setRecords","summary","setSummary","deadlines","setDeadlines","filterOptions","setFilterOptions","accounts","projects","projectObjectives","emails","statuses","filters","setFilters","account","project","projectObjective","email","transactionDateFrom","transactionDateTo","weekendingDateFrom","weekendingDateTo","transactionId","offset","setOffset","hasMore","setHasMore","loadingMore","setLoadingMore","isLoadingMoreBatches","setIsLoadingMoreBatches","totalRecords","setTotalRecords","sortBy","setSortBy","sortOrder","setSortOrder","selectedRows","setSelectedRows","showApprovalModal","setShowApprovalModal","showRejectModal","setShowRejectModal","showEmailModal","setShowEmailModal","warningShownRef","tableContainerRef","fetchDeadlines","response","get","data","success","error","console","fetchFilterOptions","warning","current","duration","icon","style","background","color","border","fetchSummary","silent","params","URLSearchParams","Object","keys","forEach","key","append","toString","code","isBackendDown","fetchRecords","reset","customOffset","currentOffset","newRecords","total","length","prev","existingIds","Set","map","r","id","uniqueNewRecords","filter","has","setTimeout","nextOffset","_error$response","_error$response$data","errorMessage","message","container","scrollWrapper","querySelector","isFetching","scrollTimeout","handleScroll","clearTimeout","scrollTop","scrollHeight","clientHeight","distanceFromBottom","finally","addEventListener","passive","removeEventListener","handleRefresh","e","preventDefault","stopPropagation","handleFilterChange","newFilters","handleClearFilters","clearedFilters","handleSort","column","order","handleRowSelect","recordId","includes","handleApprove","handleReject","handleSendEmail","handleApprovalConfirm","comment","post","transactionIds","approved","_error$response2","_error$response2$data","handleRejectConfirm","reason","rejected","_error$response3","_error$response3$data","handleEmailConfirm","emailData","info","className","children","isOpen","toggleSidebar","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","onClick","size","disabled","title","charAt","toUpperCase","count","isLoadingMore","onFilterChange","onClearFilters","onApprove","onReject","onSendEmail","selectedCount","ref","totalPendingHours","totalHours","selfReportedTime","systemTracked","payment","totalPayment","totalPendingUnits","onSort","onRowSelect","onConfirm","onClose","selectedRecords","_c","$RefreshReg$"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/ProjectManagement/PMApprovals/PMApprovals.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useAuth } from '../../../context/AuthContext';\nimport Sidebar from '../../../components/Sidebar';\nimport { Menu, LogOut, RefreshCw, Loader } from 'lucide-react';\nimport apiClient from '../../../config/api';\nimport toast from 'react-hot-toast';\nimport BookmarkButton from '../../../components/BookmarkButton';\nimport DeadlinesPanel from './components/DeadlinesPanel';\nimport RecordsCount from './components/RecordsCount';\nimport FilterPanel from './components/FilterPanel';\nimport PendingHoursCard from './components/PendingHoursCard';\nimport MetricsRow from './components/MetricsRow';\nimport PendingUnitsCard from './components/PendingUnitsCard';\nimport ApprovalsTable from './components/ApprovalsTable';\nimport ActionButtons from './components/ActionButtons';\nimport ApprovalModal from './components/ApprovalModal';\nimport RejectModal from './components/RejectModal';\nimport EmailModal from './components/EmailModal';\nimport './PMApprovals.css';\nimport '../../../styles/Sidebar.css';\nimport '../../../styles/GlobalHeader.css';\n\nconst PMApprovals = () => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  \n  // Data states\n  const [records, setRecords] = useState([]);\n  const [summary, setSummary] = useState(null);\n  const [deadlines, setDeadlines] = useState(null);\n  const [filterOptions, setFilterOptions] = useState({\n    accounts: [],\n    projects: [],\n    projectObjectives: [],\n    emails: [],\n    statuses: []\n  });\n  \n  // Filter states\n  const [filters, setFilters] = useState({\n    account: 'all',\n    project: 'all',\n    projectObjective: 'all',\n    email: 'all',\n    transactionDateFrom: '',\n    transactionDateTo: '',\n    weekendingDateFrom: '',\n    weekendingDateTo: '',\n    transactionId: ''\n  });\n  \n  // Table states\n  const [offset, setOffset] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [isLoadingMoreBatches, setIsLoadingMoreBatches] = useState(false);\n  const [totalRecords, setTotalRecords] = useState(0);\n  const [sortBy, setSortBy] = useState('Transaction_Date__c');\n  const [sortOrder, setSortOrder] = useState('DESC');\n  const [selectedRows, setSelectedRows] = useState([]);\n  \n  // Modal states\n  const [showApprovalModal, setShowApprovalModal] = useState(false);\n  const [showRejectModal, setShowRejectModal] = useState(false);\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  \n  // Track if warning has been shown to avoid duplicates\n  const warningShownRef = useRef(false);\n  \n  const tableContainerRef = useRef(null);\n\n  // Fetch deadlines\n  const fetchDeadlines = useCallback(async () => {\n    try {\n      const response = await apiClient.get('/pm-approvals/deadlines');\n      if (response.data.success) {\n        setDeadlines(response.data.deadlines);\n      }\n    } catch (error) {\n      console.error('Error fetching deadlines:', error);\n      // Don't show error toast - backend might be restarting\n      // The UI will continue to work with cached/default data\n    }\n  }, []);\n\n  // Fetch filter options\n  const fetchFilterOptions = useCallback(async () => {\n    try {\n      const response = await apiClient.get('/pm-approvals/filters');\n      if (response.data.success) {\n        setFilterOptions(response.data.filters);\n        \n        // Show warning if Salesforce object is not configured (only once)\n        if (response.data.warning && !warningShownRef.current) {\n          warningShownRef.current = true;\n          toast(response.data.warning, {\n            duration: 8000,\n            icon: '⚠️',\n            style: {\n              background: '#fffbeb',\n              color: '#92400e',\n              border: '1px solid #fde68a'\n            }\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching filter options:', error);\n      // Don't show error toast - backend might be restarting\n      // Use empty filter options as fallback\n      setFilterOptions({\n        accounts: [],\n        projects: [],\n        projectObjectives: [],\n        emails: [],\n        statuses: []\n      });\n    }\n  }, []);\n\n  // Fetch summary metrics\n  const fetchSummary = useCallback(async (silent = false) => {\n    try {\n      const params = new URLSearchParams();\n      Object.keys(filters).forEach(key => {\n        if (filters[key] && filters[key] !== 'all' && filters[key] !== '') {\n          params.append(key, filters[key]);\n        }\n      });\n      \n      const response = await apiClient.get(`/pm-approvals/summary?${params.toString()}`);\n      if (response.data.success) {\n        setSummary(response.data.data);\n        \n        // Show warning if Salesforce object is not configured (only once)\n        if (response.data.warning && !silent && !warningShownRef.current) {\n          warningShownRef.current = true;\n          toast(response.data.warning, {\n            duration: 8000,\n            icon: '⚠️',\n            style: {\n              background: '#fffbeb',\n              color: '#92400e',\n              border: '1px solid #fde68a'\n            }\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching summary:', error);\n      // Don't show error toast if backend is down - UI will show loading/empty state\n      // Only show error if it's not a connection error\n      if (!silent && error.code !== 'ECONNREFUSED' && error.code !== 'ERR_NETWORK' && !error.isBackendDown) {\n        toast.error('Failed to load summary metrics');\n      }\n    }\n  }, [filters]);\n\n  // Fetch records in batches of 10,000\n  const fetchRecords = useCallback(async (reset = false, customOffset = null) => {\n    if (reset) {\n      setLoading(true);\n      setOffset(0);\n      setRecords([]);\n      setIsLoadingMoreBatches(true);\n    } else {\n      setLoadingMore(true);\n    }\n\n    try {\n      const params = new URLSearchParams();\n      const currentOffset = reset ? 0 : (customOffset !== null ? customOffset : offset);\n      params.append('offset', currentOffset.toString());\n      params.append('limit', '10000'); // Request 10,000 records per batch\n      params.append('sortBy', sortBy);\n      params.append('sortOrder', sortOrder);\n      \n      Object.keys(filters).forEach(key => {\n        if (filters[key] && filters[key] !== 'all' && filters[key] !== '') {\n          params.append(key, filters[key]);\n        }\n      });\n      \n      const response = await apiClient.get(`/pm-approvals/list?${params.toString()}`);\n      if (response.data.success) {\n        const newRecords = response.data.records || [];\n        const total = response.data.total || 0;\n        setTotalRecords(total);\n        \n        if (reset) {\n          setRecords(newRecords);\n          setOffset(newRecords.length);\n        } else {\n          setRecords(prev => {\n            const existingIds = new Set(prev.map(r => r.id));\n            const uniqueNewRecords = newRecords.filter(r => !existingIds.has(r.id));\n            return [...prev, ...uniqueNewRecords];\n          });\n          setOffset(prev => prev + newRecords.length);\n        }\n        \n        const hasMore = response.data.hasMore || false;\n        setHasMore(hasMore);\n        \n        // Automatically load next batch if there are more records\n        if (hasMore && newRecords.length > 0) {\n          // Use setTimeout to allow UI to update before loading next batch\n          setTimeout(() => {\n            const nextOffset = reset ? newRecords.length : (offset + newRecords.length);\n            fetchRecords(false, nextOffset);\n          }, 100);\n        } else {\n          setIsLoadingMoreBatches(false);\n        }\n        \n        // Show warning if Salesforce object is not configured (only once)\n        if (response.data.warning && reset && !warningShownRef.current) {\n          warningShownRef.current = true;\n          toast(response.data.warning, {\n            duration: 8000,\n            icon: '⚠️',\n            style: {\n              background: '#fffbeb',\n              color: '#92400e',\n              border: '1px solid #fde68a'\n            }\n          });\n        }\n      } else {\n        setIsLoadingMoreBatches(false);\n        toast.error(response.data.error || 'Failed to fetch approvals');\n      }\n    } catch (error) {\n      setIsLoadingMoreBatches(false);\n      // Don't show error toast if backend is down - UI will show empty state\n      // Only show error if it's not a connection error\n      if (error.code !== 'ECONNREFUSED' && error.code !== 'ERR_NETWORK' && !error.isBackendDown) {\n        const errorMessage = error.response?.data?.error || error.message || 'Failed to fetch approvals';\n        toast.error(errorMessage);\n      }\n    } finally {\n      setLoading(false);\n      setLoadingMore(false);\n      setRefreshing(false);\n    }\n  }, [filters, sortBy, sortOrder, offset]);\n\n  // Initial load\n  useEffect(() => {\n    fetchDeadlines();\n    fetchFilterOptions();\n  }, [fetchDeadlines, fetchFilterOptions]);\n\n  // Fetch data when filters change\n  useEffect(() => {\n    setOffset(0);\n    setRecords([]);\n    setHasMore(true);\n    setSelectedRows([]);\n    fetchRecords(true);\n    fetchSummary(true);\n  }, [filters, sortBy, sortOrder]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Infinite scroll\n  useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const scrollWrapper = container.querySelector('.approvals-table-container');\n    if (!scrollWrapper) return;\n\n    let isFetching = false;\n    let scrollTimeout = null;\n\n    const handleScroll = () => {\n      if (scrollTimeout) {\n        clearTimeout(scrollTimeout);\n      }\n\n      scrollTimeout = setTimeout(() => {\n        if (loadingMore || isFetching || !hasMore) return;\n        \n        const { scrollTop, scrollHeight, clientHeight } = scrollWrapper;\n        const distanceFromBottom = scrollHeight - scrollTop - clientHeight;\n        \n        if (distanceFromBottom < 200) {\n          isFetching = true;\n          const currentOffset = records.length;\n          fetchRecords(false, currentOffset).finally(() => {\n            isFetching = false;\n          });\n        }\n      }, 100);\n    };\n\n    scrollWrapper.addEventListener('scroll', handleScroll, { passive: true });\n    \n    return () => {\n      clearTimeout(scrollTimeout);\n      scrollWrapper.removeEventListener('scroll', handleScroll);\n    };\n  }, [records.length, loadingMore, hasMore, fetchRecords]);\n\n  const handleRefresh = useCallback((e) => {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    setRefreshing(true);\n    setOffset(0);\n    setRecords([]);\n    setHasMore(true);\n    setSelectedRows([]);\n    fetchRecords(true).finally(() => {\n      setRefreshing(false);\n    });\n    fetchSummary();\n    fetchFilterOptions();\n  }, [fetchRecords, fetchSummary, fetchFilterOptions]);\n\n  const handleFilterChange = (newFilters) => {\n    setFilters(newFilters);\n  };\n\n  const handleClearFilters = (clearedFilters) => {\n    setFilters(clearedFilters);\n  };\n\n  const handleSort = (column, order) => {\n    setSortBy(column);\n    setSortOrder(order);\n  };\n\n  const handleRowSelect = (recordId) => {\n    setSelectedRows(prev => {\n      if (prev.includes(recordId)) {\n        return prev.filter(id => id !== recordId);\n      } else {\n        return [...prev, recordId];\n      }\n    });\n  };\n\n  const handleApprove = () => {\n    if (selectedRows.length === 0) {\n      toast.error('Please select at least one record to approve');\n      return;\n    }\n    setShowApprovalModal(true);\n  };\n\n  const handleReject = () => {\n    if (selectedRows.length === 0) {\n      toast.error('Please select at least one record to reject');\n      return;\n    }\n    setShowRejectModal(true);\n  };\n\n  const handleSendEmail = () => {\n    if (selectedRows.length === 0) {\n      toast.error('Please select at least one record to email');\n      return;\n    }\n    setShowEmailModal(true);\n  };\n\n  const handleApprovalConfirm = async (comment) => {\n    try {\n      const response = await apiClient.post('/pm-approvals/approve', {\n        transactionIds: selectedRows,\n        comment: comment || ''\n      });\n      \n      if (response.data.success) {\n        toast.success(`Successfully approved ${response.data.approved} record(s)`);\n        setSelectedRows([]);\n        setShowApprovalModal(false);\n        fetchRecords(true);\n        fetchSummary();\n      } else {\n        toast.error(response.data.error || 'Failed to approve records');\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.error || 'Failed to approve records');\n    }\n  };\n\n  const handleRejectConfirm = async (reason) => {\n    try {\n      const response = await apiClient.post('/pm-approvals/reject', {\n        transactionIds: selectedRows,\n        reason: reason || ''\n      });\n      \n      if (response.data.success) {\n        toast.success(`Successfully rejected ${response.data.rejected} record(s)`);\n        setSelectedRows([]);\n        setShowRejectModal(false);\n        fetchRecords(true);\n        fetchSummary();\n      } else {\n        toast.error(response.data.error || 'Failed to reject records');\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.error || 'Failed to reject records');\n    }\n  };\n\n  const handleEmailConfirm = async (emailData) => {\n    // Email functionality - to be implemented\n    toast.info('Email functionality coming soon');\n    setShowEmailModal(false);\n  };\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      \n      <div className=\"pm-approvals-page\" style={{ marginLeft: sidebarOpen ? '320px' : '80px' }}>\n        <div className=\"pm-approvals-container\">\n          {/* Header */}\n          <div className=\"pm-approvals-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">PM Approvals for Self Reported Time</h1>\n                </div>\n              </div>\n              <div className=\"header-right\">\n                <BookmarkButton />\n                <button\n                  className=\"refresh-btn\"\n                  onClick={handleRefresh}\n                  disabled={refreshing}\n                  title=\"Refresh\"\n                >\n                  <RefreshCw size={18} className={refreshing ? 'spinning' : ''} />\n                </button>\n                <div className=\"header-user-profile\">\n                  <div className=\"user-profile\">\n                    <div className=\"user-avatar\">\n                      {(user?.email || 'U').charAt(0).toUpperCase()}\n                    </div>\n                    <span className=\"user-name\">{user?.email || 'User'}</span>\n                    <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                      <LogOut size={18} />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"pm-approvals-content\">\n            {/* Left Sidebar */}\n            <div className=\"pm-approvals-sidebar\">\n              <DeadlinesPanel deadlines={deadlines} loading={!deadlines} />\n              <RecordsCount \n                count={records.length} \n                total={totalRecords}\n                loading={loading} \n                isLoadingMore={isLoadingMoreBatches || loadingMore}\n              />\n              <FilterPanel\n                filters={filters}\n                onFilterChange={handleFilterChange}\n                onClearFilters={handleClearFilters}\n                filterOptions={filterOptions}\n                loading={loading}\n              />\n              <ActionButtons\n                onApprove={handleApprove}\n                onReject={handleReject}\n                onSendEmail={handleSendEmail}\n                disabled={loading}\n                selectedCount={selectedRows.length}\n              />\n            </div>\n\n            {/* Main Content Area */}\n            <div className=\"pm-approvals-main\" ref={tableContainerRef}>\n              {/* Summary Metrics */}\n              <div className=\"summary-metrics-section\">\n                <PendingHoursCard\n                  totalPendingHours={summary?.totalPendingHours || 0}\n                  totalHours={summary?.totalHours || 0}\n                  loading={!summary}\n                />\n                <MetricsRow\n                  selfReportedTime={summary?.selfReportedTime || 0}\n                  systemTracked={summary?.systemTracked || 0}\n                  payment={summary?.totalPayment || 0}\n                  loading={!summary}\n                />\n                <PendingUnitsCard\n                  totalPendingUnits={summary?.totalPendingUnits || 0}\n                  loading={!summary}\n                />\n              </div>\n\n              {/* Data Table */}\n              <div className=\"table-section\">\n                <ApprovalsTable\n                  records={records}\n                  loading={loading}\n                  onSort={handleSort}\n                  sortBy={sortBy}\n                  sortOrder={sortOrder}\n                  selectedRows={selectedRows}\n                  onRowSelect={handleRowSelect}\n                />\n                {loadingMore && (\n                  <div className=\"loading-more\">\n                    <Loader className=\"spinning\" size={20} />\n                    <span>Loading more records...</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Modals */}\n      {showApprovalModal && (\n        <ApprovalModal\n          selectedCount={selectedRows.length}\n          onConfirm={handleApprovalConfirm}\n          onClose={() => setShowApprovalModal(false)}\n        />\n      )}\n      {showRejectModal && (\n        <RejectModal\n          selectedCount={selectedRows.length}\n          onConfirm={handleRejectConfirm}\n          onClose={() => setShowRejectModal(false)}\n        />\n      )}\n      {showEmailModal && (\n        <EmailModal\n          selectedCount={selectedRows.length}\n          selectedRecords={records.filter(r => selectedRows.includes(r.id))}\n          onConfirm={handleEmailConfirm}\n          onClose={() => setShowEmailModal(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default PMApprovals;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}