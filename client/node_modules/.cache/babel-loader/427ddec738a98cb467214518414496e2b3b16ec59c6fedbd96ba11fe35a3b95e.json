{"ast":null,"code":"// Global Search Service - Search across all features\n\nimport apiClient from '../../config/api';\n\n// Searchable feature types\nconst SEARCHABLE_FEATURES = {\n  PROJECTS: 'projects',\n  PROJECT_OBJECTIVES: 'project_objectives',\n  WORKSTREAMS: 'workstreams',\n  CONTRIBUTOR_PROJECTS: 'contributor_projects',\n  CASES: 'cases',\n  CONTACTS: 'contacts',\n  ACCOUNTS: 'accounts',\n  PAGES: 'pages' // Navigation pages from sidebar\n};\n\n/**\n * Search across all features\n * @param {string} query - Search query\n * @param {Array} features - Features to search (default: all)\n * @returns {Promise<Object>} Search results grouped by feature\n */\nexport const globalSearch = async (query, features = null) => {\n  if (!query || query.trim() === '') {\n    return {\n      results: {},\n      total: 0\n    };\n  }\n  const featuresToSearch = features || Object.values(SEARCHABLE_FEATURES);\n  const results = {};\n  let total = 0;\n  try {\n    // Search each feature in parallel\n    const searchPromises = featuresToSearch.map(async feature => {\n      try {\n        // Handle pages search (navigation items) - no API call needed\n        if (feature === SEARCHABLE_FEATURES.PAGES) {\n          const pageResults = searchPages(query);\n          return {\n            feature,\n            items: pageResults,\n            count: pageResults.length\n          };\n        }\n        let response;\n        switch (feature) {\n          case SEARCHABLE_FEATURES.PROJECTS:\n            response = await apiClient.get(`/projects?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          case SEARCHABLE_FEATURES.PROJECT_OBJECTIVES:\n            response = await apiClient.get(`/project-objectives?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          case SEARCHABLE_FEATURES.WORKSTREAMS:\n            response = await apiClient.get(`/workstream?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          case SEARCHABLE_FEATURES.CONTRIBUTOR_PROJECTS:\n            response = await apiClient.get(`/queue-status-management/contributor-projects?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          default:\n            return {\n              feature,\n              items: [],\n              count: 0\n            };\n        }\n        if (response.data.success) {\n          const items = response.data.projects || response.data.objectives || response.data.workstreams || [];\n          return {\n            feature,\n            items: items.map(item => ({\n              ...item,\n              type: feature,\n              path: getPathForFeature(feature, item.id)\n            })),\n            count: items.length\n          };\n        }\n        return {\n          feature,\n          items: [],\n          count: 0\n        };\n      } catch (error) {\n        console.error(`Error searching ${feature}:`, error);\n        return {\n          feature,\n          items: [],\n          count: 0\n        };\n      }\n    });\n    const searchResults = await Promise.all(searchPromises);\n    searchResults.forEach(result => {\n      results[result.feature] = {\n        items: result.items,\n        count: result.count\n      };\n      total += result.count;\n    });\n    return {\n      results,\n      total\n    };\n  } catch (error) {\n    console.error('Error in global search:', error);\n    return {\n      results: {},\n      total: 0,\n      error: error.message\n    };\n  }\n};\n\n/**\n * Get path for a feature item\n * @param {string} feature - Feature type\n * @param {string} id - Item ID\n * @returns {string} Route path\n */\nconst getPathForFeature = (feature, id) => {\n  const paths = {\n    [SEARCHABLE_FEATURES.PROJECTS]: `/projects/${id}`,\n    [SEARCHABLE_FEATURES.PROJECT_OBJECTIVES]: `/project-objectives/${id}`,\n    [SEARCHABLE_FEATURES.WORKSTREAMS]: `/workstream-management`,\n    [SEARCHABLE_FEATURES.CONTRIBUTOR_PROJECTS]: `/queue-status-management`,\n    [SEARCHABLE_FEATURES.CASES]: `/case-analytics`,\n    [SEARCHABLE_FEATURES.CONTACTS]: `/contacts/${id}`,\n    [SEARCHABLE_FEATURES.ACCOUNTS]: `/accounts/${id}`\n  };\n  return paths[feature] || '/';\n};\nexport { SEARCHABLE_FEATURES };","map":{"version":3,"names":["apiClient","SEARCHABLE_FEATURES","PROJECTS","PROJECT_OBJECTIVES","WORKSTREAMS","CONTRIBUTOR_PROJECTS","CASES","CONTACTS","ACCOUNTS","PAGES","globalSearch","query","features","trim","results","total","featuresToSearch","Object","values","searchPromises","map","feature","pageResults","searchPages","items","count","length","response","get","encodeURIComponent","data","success","projects","objectives","workstreams","item","type","path","getPathForFeature","id","error","console","searchResults","Promise","all","forEach","result","message","paths"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/utils/crossFeature/globalSearch.js"],"sourcesContent":["// Global Search Service - Search across all features\n\nimport apiClient from '../../config/api';\n\n// Searchable feature types\nconst SEARCHABLE_FEATURES = {\n  PROJECTS: 'projects',\n  PROJECT_OBJECTIVES: 'project_objectives',\n  WORKSTREAMS: 'workstreams',\n  CONTRIBUTOR_PROJECTS: 'contributor_projects',\n  CASES: 'cases',\n  CONTACTS: 'contacts',\n  ACCOUNTS: 'accounts',\n  PAGES: 'pages' // Navigation pages from sidebar\n};\n\n/**\n * Search across all features\n * @param {string} query - Search query\n * @param {Array} features - Features to search (default: all)\n * @returns {Promise<Object>} Search results grouped by feature\n */\nexport const globalSearch = async (query, features = null) => {\n  if (!query || query.trim() === '') {\n    return { results: {}, total: 0 };\n  }\n\n  const featuresToSearch = features || Object.values(SEARCHABLE_FEATURES);\n  const results = {};\n  let total = 0;\n\n  try {\n    // Search each feature in parallel\n    const searchPromises = featuresToSearch.map(async (feature) => {\n      try {\n        // Handle pages search (navigation items) - no API call needed\n        if (feature === SEARCHABLE_FEATURES.PAGES) {\n          const pageResults = searchPages(query);\n          return {\n            feature,\n            items: pageResults,\n            count: pageResults.length\n          };\n        }\n\n        let response;\n        switch (feature) {\n          case SEARCHABLE_FEATURES.PROJECTS:\n            response = await apiClient.get(`/projects?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          case SEARCHABLE_FEATURES.PROJECT_OBJECTIVES:\n            response = await apiClient.get(`/project-objectives?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          case SEARCHABLE_FEATURES.WORKSTREAMS:\n            response = await apiClient.get(`/workstream?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          case SEARCHABLE_FEATURES.CONTRIBUTOR_PROJECTS:\n            response = await apiClient.get(`/queue-status-management/contributor-projects?searchTerm=${encodeURIComponent(query)}&limit=10`);\n            break;\n          default:\n            return { feature, items: [], count: 0 };\n        }\n\n        if (response.data.success) {\n          const items = response.data.projects || response.data.objectives || response.data.workstreams || [];\n          return {\n            feature,\n            items: items.map(item => ({\n              ...item,\n              type: feature,\n              path: getPathForFeature(feature, item.id)\n            })),\n            count: items.length\n          };\n        }\n        return { feature, items: [], count: 0 };\n      } catch (error) {\n        console.error(`Error searching ${feature}:`, error);\n        return { feature, items: [], count: 0 };\n      }\n    });\n\n    const searchResults = await Promise.all(searchPromises);\n    \n    searchResults.forEach(result => {\n      results[result.feature] = {\n        items: result.items,\n        count: result.count\n      };\n      total += result.count;\n    });\n\n    return { results, total };\n  } catch (error) {\n    console.error('Error in global search:', error);\n    return { results: {}, total: 0, error: error.message };\n  }\n};\n\n/**\n * Get path for a feature item\n * @param {string} feature - Feature type\n * @param {string} id - Item ID\n * @returns {string} Route path\n */\nconst getPathForFeature = (feature, id) => {\n  const paths = {\n    [SEARCHABLE_FEATURES.PROJECTS]: `/projects/${id}`,\n    [SEARCHABLE_FEATURES.PROJECT_OBJECTIVES]: `/project-objectives/${id}`,\n    [SEARCHABLE_FEATURES.WORKSTREAMS]: `/workstream-management`,\n    [SEARCHABLE_FEATURES.CONTRIBUTOR_PROJECTS]: `/queue-status-management`,\n    [SEARCHABLE_FEATURES.CASES]: `/case-analytics`,\n    [SEARCHABLE_FEATURES.CONTACTS]: `/contacts/${id}`,\n    [SEARCHABLE_FEATURES.ACCOUNTS]: `/accounts/${id}`\n  };\n  return paths[feature] || '/';\n};\n\nexport { SEARCHABLE_FEATURES };\n\n"],"mappings":"AAAA;;AAEA,OAAOA,SAAS,MAAM,kBAAkB;;AAExC;AACA,MAAMC,mBAAmB,GAAG;EAC1BC,QAAQ,EAAE,UAAU;EACpBC,kBAAkB,EAAE,oBAAoB;EACxCC,WAAW,EAAE,aAAa;EAC1BC,oBAAoB,EAAE,sBAAsB;EAC5CC,KAAK,EAAE,OAAO;EACdC,QAAQ,EAAE,UAAU;EACpBC,QAAQ,EAAE,UAAU;EACpBC,KAAK,EAAE,OAAO,CAAC;AACjB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,GAAG,IAAI,KAAK;EAC5D,IAAI,CAACD,KAAK,IAAIA,KAAK,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;IACjC,OAAO;MAAEC,OAAO,EAAE,CAAC,CAAC;MAAEC,KAAK,EAAE;IAAE,CAAC;EAClC;EAEA,MAAMC,gBAAgB,GAAGJ,QAAQ,IAAIK,MAAM,CAACC,MAAM,CAACjB,mBAAmB,CAAC;EACvE,MAAMa,OAAO,GAAG,CAAC,CAAC;EAClB,IAAIC,KAAK,GAAG,CAAC;EAEb,IAAI;IACF;IACA,MAAMI,cAAc,GAAGH,gBAAgB,CAACI,GAAG,CAAC,MAAOC,OAAO,IAAK;MAC7D,IAAI;QACF;QACA,IAAIA,OAAO,KAAKpB,mBAAmB,CAACQ,KAAK,EAAE;UACzC,MAAMa,WAAW,GAAGC,WAAW,CAACZ,KAAK,CAAC;UACtC,OAAO;YACLU,OAAO;YACPG,KAAK,EAAEF,WAAW;YAClBG,KAAK,EAAEH,WAAW,CAACI;UACrB,CAAC;QACH;QAEA,IAAIC,QAAQ;QACZ,QAAQN,OAAO;UACb,KAAKpB,mBAAmB,CAACC,QAAQ;YAC/ByB,QAAQ,GAAG,MAAM3B,SAAS,CAAC4B,GAAG,CAAC,wBAAwBC,kBAAkB,CAAClB,KAAK,CAAC,WAAW,CAAC;YAC5F;UACF,KAAKV,mBAAmB,CAACE,kBAAkB;YACzCwB,QAAQ,GAAG,MAAM3B,SAAS,CAAC4B,GAAG,CAAC,kCAAkCC,kBAAkB,CAAClB,KAAK,CAAC,WAAW,CAAC;YACtG;UACF,KAAKV,mBAAmB,CAACG,WAAW;YAClCuB,QAAQ,GAAG,MAAM3B,SAAS,CAAC4B,GAAG,CAAC,0BAA0BC,kBAAkB,CAAClB,KAAK,CAAC,WAAW,CAAC;YAC9F;UACF,KAAKV,mBAAmB,CAACI,oBAAoB;YAC3CsB,QAAQ,GAAG,MAAM3B,SAAS,CAAC4B,GAAG,CAAC,4DAA4DC,kBAAkB,CAAClB,KAAK,CAAC,WAAW,CAAC;YAChI;UACF;YACE,OAAO;cAAEU,OAAO;cAAEG,KAAK,EAAE,EAAE;cAAEC,KAAK,EAAE;YAAE,CAAC;QAC3C;QAEA,IAAIE,QAAQ,CAACG,IAAI,CAACC,OAAO,EAAE;UACzB,MAAMP,KAAK,GAAGG,QAAQ,CAACG,IAAI,CAACE,QAAQ,IAAIL,QAAQ,CAACG,IAAI,CAACG,UAAU,IAAIN,QAAQ,CAACG,IAAI,CAACI,WAAW,IAAI,EAAE;UACnG,OAAO;YACLb,OAAO;YACPG,KAAK,EAAEA,KAAK,CAACJ,GAAG,CAACe,IAAI,KAAK;cACxB,GAAGA,IAAI;cACPC,IAAI,EAAEf,OAAO;cACbgB,IAAI,EAAEC,iBAAiB,CAACjB,OAAO,EAAEc,IAAI,CAACI,EAAE;YAC1C,CAAC,CAAC,CAAC;YACHd,KAAK,EAAED,KAAK,CAACE;UACf,CAAC;QACH;QACA,OAAO;UAAEL,OAAO;UAAEG,KAAK,EAAE,EAAE;UAAEC,KAAK,EAAE;QAAE,CAAC;MACzC,CAAC,CAAC,OAAOe,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mBAAmBnB,OAAO,GAAG,EAAEmB,KAAK,CAAC;QACnD,OAAO;UAAEnB,OAAO;UAAEG,KAAK,EAAE,EAAE;UAAEC,KAAK,EAAE;QAAE,CAAC;MACzC;IACF,CAAC,CAAC;IAEF,MAAMiB,aAAa,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACzB,cAAc,CAAC;IAEvDuB,aAAa,CAACG,OAAO,CAACC,MAAM,IAAI;MAC9BhC,OAAO,CAACgC,MAAM,CAACzB,OAAO,CAAC,GAAG;QACxBG,KAAK,EAAEsB,MAAM,CAACtB,KAAK;QACnBC,KAAK,EAAEqB,MAAM,CAACrB;MAChB,CAAC;MACDV,KAAK,IAAI+B,MAAM,CAACrB,KAAK;IACvB,CAAC,CAAC;IAEF,OAAO;MAAEX,OAAO;MAAEC;IAAM,CAAC;EAC3B,CAAC,CAAC,OAAOyB,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAO;MAAE1B,OAAO,EAAE,CAAC,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEyB,KAAK,EAAEA,KAAK,CAACO;IAAQ,CAAC;EACxD;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,MAAMT,iBAAiB,GAAGA,CAACjB,OAAO,EAAEkB,EAAE,KAAK;EACzC,MAAMS,KAAK,GAAG;IACZ,CAAC/C,mBAAmB,CAACC,QAAQ,GAAG,aAAaqC,EAAE,EAAE;IACjD,CAACtC,mBAAmB,CAACE,kBAAkB,GAAG,uBAAuBoC,EAAE,EAAE;IACrE,CAACtC,mBAAmB,CAACG,WAAW,GAAG,wBAAwB;IAC3D,CAACH,mBAAmB,CAACI,oBAAoB,GAAG,0BAA0B;IACtE,CAACJ,mBAAmB,CAACK,KAAK,GAAG,iBAAiB;IAC9C,CAACL,mBAAmB,CAACM,QAAQ,GAAG,aAAagC,EAAE,EAAE;IACjD,CAACtC,mBAAmB,CAACO,QAAQ,GAAG,aAAa+B,EAAE;EACjD,CAAC;EACD,OAAOS,KAAK,CAAC3B,OAAO,CAAC,IAAI,GAAG;AAC9B,CAAC;AAED,SAASpB,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}