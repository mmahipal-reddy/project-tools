{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Cursor/ProjectSetup/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/Sidebar';import{Menu,LogOut,RefreshCw,DollarSign,TrendingUp,Users,AlertCircle,CheckCircle,BarChart3,Download,Loader,Clock}from'lucide-react';import{BarChart,Bar,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer,PieChart,Pie,Cell,LineChart,Line}from'recharts';import apiClient from'../config/api';import toast from'react-hot-toast';import*as XLSX from'xlsx';import'../styles/Sidebar.css';import'../styles/GlobalHeader.css';import'../styles/ContributorPaymentsDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const COLORS=['#08979C','#13C2C2','#36CFC9','#5CDBD3','#87E8DE','#B5F5EC','#E6FFFB'];// Enhanced color palette for Payments by Status with better contrast\nconst STATUS_COLORS=['#10B981',// Green - Success/Completed\n'#3B82F6',// Blue - Pending/In Progress\n'#F59E0B',// Amber - Warning/Partial\n'#EF4444',// Red - Failed/Error\n'#8B5CF6',// Purple - Other\n'#06B6D4',// Cyan - Info\n'#EC4899',// Pink - Special\n'#6366F1',// Indigo - Alternative\n'#14B8A6',// Teal - Active\n'#F97316',// Orange - Attention\n'#84CC16',// Lime - New\n'#64748B'// Slate - Unknown/No Status\n];const ContributorPaymentsDashboard=()=>{const{user,logout}=useAuth();const[sidebarOpen,setSidebarOpen]=useState(true);const[refreshing,setRefreshing]=useState(false);// Individual widget states - each widget has its own state\nconst[totalContributors,setTotalContributors]=useState({value:0,lastRefreshed:null});const[totalPayments,setTotalPayments]=useState({value:0,lastRefreshed:null});const[averagePayment,setAveragePayment]=useState({value:0,lastRefreshed:null});const[pendingCount,setPendingCount]=useState({value:0,lastRefreshed:null});const[paymentsByStatus,setPaymentsByStatus]=useState({data:[],lastRefreshed:null});const[paymentsByMethod,setPaymentsByMethod]=useState({data:[],lastRefreshed:null});const[paymentsOverTime,setPaymentsOverTime]=useState({data:[],lastRefreshed:null});const[topContributors,setTopContributors]=useState({data:[],lastRefreshed:null});const[paymentsByCountry,setPaymentsByCountry]=useState({data:[],lastRefreshed:null});const[averagePaymentByCountry,setAveragePaymentByCountry]=useState({data:[],lastRefreshed:null});// Widget loading states - each widget has its own loading state\nconst[widgetStates,setWidgetStates]=useState({});// Format currency with elegant million/billion formatting\nconst formatCurrency=amount=>{if(amount===null||amount===undefined||amount===0)return'$0.00';const num=parseFloat(amount);if(Math.abs(num)>=1000000000){return\"$\".concat((num/1000000000).toFixed(2),\"B\");}else if(Math.abs(num)>=1000000){return\"$\".concat((num/1000000).toFixed(2),\"M\");}else if(Math.abs(num)>=1000){return\"$\".concat((num/1000).toFixed(2),\"K\");}else{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:2,maximumFractionDigits:2}).format(num);}};// Format number\nconst formatNumber=num=>{if(num===null||num===undefined)return'0';return new Intl.NumberFormat('en-US').format(num);};// Format date\nconst formatDate=dateString=>{if(!dateString)return'Never';try{return new Date(dateString).toLocaleString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});}catch(_unused){return'Never';}};// Individual widget fetch functions - each widget has its own API\nconst fetchTotalContributors=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'totalContributors';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/total-contributors');setTotalContributors({value:response.data.totalContributors||0,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Total contributors updated');}catch(error){var _error$response,_error$response$data;const errorMsg=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message||'Unknown error';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:errorMsg}}));setTotalContributors({value:0,lastRefreshed:null});if(!silent)toast.error(\"Error loading total contributors: \".concat(errorMsg));}},[]);const fetchTotalPayments=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'totalPayments';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/total-payments');if(response.data.warning){if(!silent)toast.warning(response.data.warning);}setTotalPayments({value:response.data.totalPayments||0,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent&&!response.data.warning)toast.success('Total payments updated');}catch(error){var _error$response2,_error$response2$data;const errorMsg=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||error.message||'Unknown error';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:errorMsg}}));setTotalPayments({value:0,lastRefreshed:null});if(!silent)toast.error(\"Error loading total payments: \".concat(errorMsg));}},[]);const fetchAveragePayment=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'averagePayment';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/average-payment');setAveragePayment({value:response.data.avgPaymentAmount,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Average payment updated');}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error('Error loading average payment');}},[]);const fetchPendingCount=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'pendingCount';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/pending-count');setPendingCount({value:response.data.pendingAmount,lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Pending amount updated');}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error('Error loading pending amount');}},[]);const fetchPaymentsByStatus=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsByStatus';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-by-status');setPaymentsByStatus({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments by status updated');}else{toast('No payment status data found',{icon:'⚠️'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments by status: \".concat(error.message));}},[]);const fetchPaymentsByMethod=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsByMethod';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-by-method');setPaymentsByMethod({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments by method updated');}else{toast('No payment method data found',{icon:'⚠️'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments by method: \".concat(error.message));}},[]);const fetchPaymentsOverTime=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsOverTime';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-over-time');setPaymentsOverTime({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments over time updated');}else{toast('No payment over time data found',{icon:'⚠️'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments over time: \".concat(error.message));}},[]);const fetchTopContributors=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'topContributors';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/top-contributors',{params:{limit:10}});setTopContributors({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent)toast.success('Top contributors updated');}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error('Error loading top contributors');}},[]);const fetchPaymentsByCountry=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'paymentsByCountry';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/payments-by-country');setPaymentsByCountry({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Payments by country updated');}else{toast('No payment by country data found',{icon:'⚠️'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading payments by country: \".concat(error.message));}},[]);const fetchAveragePaymentByCountry=useCallback(async function(){let silent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let widgetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'averagePaymentByCountry';setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:true,error:null}}));try{const response=await apiClient.get('/contributor-payments/average-payment-by-country');setAveragePaymentByCountry({data:response.data.data||[],lastRefreshed:response.data.lastRefreshed});setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:null}}));if(!silent){if(response.data.data&&response.data.data.length>0){toast.success('Average payment by country updated');}else{toast('No average payment by country data found',{icon:'⚠️'});}}}catch(error){setWidgetStates(prev=>_objectSpread(_objectSpread({},prev),{},{[widgetKey]:{loading:false,error:error.message}}));if(!silent)toast.error(\"Error loading average payment by country: \".concat(error.message));}},[]);// Widget-level refresh handlers\nconst handleWidgetRefresh=widgetKey=>{switch(widgetKey){case'totalContributors':fetchTotalContributors(false,widgetKey);break;case'totalPayments':fetchTotalPayments(false,widgetKey);break;case'averagePayment':fetchAveragePayment(false,widgetKey);break;case'pendingCount':fetchPendingCount(false,widgetKey);break;case'paymentsByStatus':fetchPaymentsByStatus(false,widgetKey);break;case'paymentsByMethod':fetchPaymentsByMethod(false,widgetKey);break;case'paymentsOverTime':fetchPaymentsOverTime(false,widgetKey);break;case'topContributors':fetchTopContributors(false,widgetKey);break;case'paymentsByCountry':fetchPaymentsByCountry(false,widgetKey);break;case'averagePaymentByCountry':fetchAveragePaymentByCountry(false,widgetKey);break;default:break;}};// Render widget refresh button\nconst renderWidgetRefresh=widgetKey=>{const state=widgetStates[widgetKey];return/*#__PURE__*/_jsx(\"button\",{className:\"widget-refresh-btn\",onClick:()=>handleWidgetRefresh(widgetKey),disabled:state===null||state===void 0?void 0:state.loading,title:state!==null&&state!==void 0&&state.loading?'Refreshing...':state!==null&&state!==void 0&&state.error?'Retry':'Refresh this widget',children:/*#__PURE__*/_jsx(RefreshCw,{size:14,className:state!==null&&state!==void 0&&state.loading?'spinning':''})});};// Helper to show loading/error state in widget\nconst renderWidgetStatus=widgetKey=>{const state=widgetStates[widgetKey];if(state!==null&&state!==void 0&&state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"widget-loading\",children:/*#__PURE__*/_jsx(Loader,{size:20,className:\"spinning\"})});}if(state!==null&&state!==void 0&&state.error){return/*#__PURE__*/_jsxs(\"div\",{className:\"widget-error\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Error: \",state.error]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleWidgetRefresh(widgetKey),className:\"retry-btn\",children:\"Retry\"})]});}return null;};// Refresh all widgets\nconst handleRefresh=()=>{setRefreshing(true);Promise.all([fetchTotalContributors(true,'totalContributors'),fetchTotalPayments(true,'totalPayments'),fetchAveragePayment(true,'averagePayment'),fetchPendingCount(true,'pendingCount'),fetchPaymentsByStatus(true,'paymentsByStatus'),fetchPaymentsByMethod(true,'paymentsByMethod'),fetchPaymentsOverTime(true,'paymentsOverTime'),fetchTopContributors(true,'topContributors'),fetchPaymentsByCountry(true,'paymentsByCountry'),fetchAveragePaymentByCountry(true,'averagePaymentByCountry')]).finally(()=>{setRefreshing(false);toast.success('All widgets refreshed');});};// Export to Excel\nconst handleExport=useCallback(()=>{try{const workbook=XLSX.utils.book_new();// Summary sheet\nconst summaryData=[['Metric','Value'],['Total Contributors',totalContributors.value],['Total Payments',formatCurrency(totalPayments.value)],['Average Payment',formatCurrency(averagePayment.value)],['Pending Amount',formatCurrency(pendingCount.value)]];const summarySheet=XLSX.utils.aoa_to_sheet(summaryData);XLSX.utils.book_append_sheet(workbook,summarySheet,'Summary');// Payments by Status\nif(paymentsByStatus.data.length>0){const statusData=[['Status','Count','Total Amount','Outstanding Amount']];paymentsByStatus.data.forEach(item=>{statusData.push([item.status,item.count,item.totalAmount,item.outstandingAmount]);});const statusSheet=XLSX.utils.aoa_to_sheet(statusData);XLSX.utils.book_append_sheet(workbook,statusSheet,'Payments by Status');}// Top Contributors\nif(topContributors.data.length>0){const contributorsData=[['Name','Email','Total Payment','Outstanding','Status','Last Payment Date','Method']];topContributors.data.forEach(item=>{contributorsData.push([item.name,item.email,formatCurrency(item.totalPaymentAmount),formatCurrency(item.outstandingBalance),item.paymentStatus,formatDate(item.lastPaymentDate),item.paymentMethod]);});const contributorsSheet=XLSX.utils.aoa_to_sheet(contributorsData);XLSX.utils.book_append_sheet(workbook,contributorsSheet,'Top Contributors');}XLSX.writeFile(workbook,\"contributor-payments-\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));toast.success('Data exported successfully');}catch(error){toast.error('Failed to export data');}},[totalContributors,totalPayments,averagePayment,pendingCount,paymentsByStatus,topContributors]);// Don't auto-fetch on mount - user must click refresh\nuseEffect(()=>{// No auto-fetch\n},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{className:\"contributor-payments-dashboard\",style:{marginLeft:sidebarOpen?'320px':'80px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"contributor-payments-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"contributor-payments-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-menu-toggle\",onClick:()=>setSidebarOpen(!sidebarOpen),children:/*#__PURE__*/_jsx(Menu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Contributor Payments Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"View payment metrics and analytics\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-user-profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn\",onClick:handleRefresh,disabled:refreshing,title:\"Refresh All\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:16,className:refreshing?'spinning':''}),refreshing?'Refreshing...':'Refresh All']}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn\",onClick:handleExport,title:\"Export to Excel\",children:[/*#__PURE__*/_jsx(Download,{size:16}),\"Export\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:((user===null||user===void 0?void 0:user.email)||'U').charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{size:18})})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"contributor-payments-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card green\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Total Contributors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('totalContributors')})]}),renderWidgetStatus('totalContributors')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatNumber(totalContributors.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(totalContributors.lastRefreshed)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card green\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Total Payments\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('totalPayments')})]}),renderWidgetStatus('totalPayments')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatCurrency(totalPayments.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(totalPayments.lastRefreshed)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card green\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Average Payment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('averagePayment')})]}),renderWidgetStatus('averagePayment')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatCurrency(averagePayment.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(averagePayment.lastRefreshed)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-card yellow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kpi-label\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('pendingCount')})]}),renderWidgetStatus('pendingCount')||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"kpi-value\",children:formatCurrency(pendingCount.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-footer\",children:[\"As of \",formatDate(pendingCount.lastRefreshed)]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"charts-grid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card top-contributors-table-card\",style:{gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Top Contributors by Payment Amount\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('topContributors')})]}),renderWidgetStatus('topContributors')||(topContributors.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Payment\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Outstanding\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Payment Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Method\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:topContributors.data.map(contributor=>{var _contributor$paymentS;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:contributor.name}),/*#__PURE__*/_jsx(\"td\",{children:contributor.email}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(contributor.totalPaymentAmount)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(contributor.outstandingBalance)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat((_contributor$paymentS=contributor.paymentStatus)===null||_contributor$paymentS===void 0?void 0:_contributor$paymentS.toLowerCase()),children:contributor.paymentStatus})}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(contributor.lastPaymentDate)}),/*#__PURE__*/_jsx(\"td\",{children:contributor.paymentMethod})]},contributor.id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(topContributors.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No top contributors data available\"}))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"charts-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments by Status\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsByStatus')})]}),renderWidgetStatus('paymentsByStatus')||(paymentsByStatus.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:paymentsByStatus.data,cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref=>{let{name,percent}=_ref;// Only show label if percentage is >= 5% to avoid clutter\nif(percent>=0.05){return\"\".concat(name,\": \").concat((percent*100).toFixed(0),\"%\");}return'';},outerRadius:100,innerRadius:30,fill:\"#8884d8\",dataKey:\"count\",paddingAngle:2,children:paymentsByStatus.data.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:STATUS_COLORS[index%STATUS_COLORS.length]},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{content:_ref2=>{let{active,payload}=_ref2;if(active&&payload&&payload.length){const data=payload[0];const entry=data.payload;const color=STATUS_COLORS[paymentsByStatus.data.findIndex(e=>e.status===entry.status)%STATUS_COLORS.length];return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:'12px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',borderRadius:'4px',backgroundColor:color,border:'1px solid #d1d5db'}}),/*#__PURE__*/_jsx(\"strong\",{style:{fontSize:'14px',color:'#111827'},children:entry.status||'No Status'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280',marginTop:'4px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Count: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:formatNumber(entry.count)})]}),entry.totalAmount!==undefined&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Total Amount: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:formatCurrency(entry.totalAmount)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'4px',fontSize:'12px',color:'#9ca3af'},children:[\"Percentage: \",(entry.count/paymentsByStatus.data.reduce((sum,e)=>sum+e.count,0)*100).toFixed(1),\"%\"]})]})]});}return null;}})]})})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'16px',padding:'12px',backgroundColor:'#f9fafb',borderRadius:'8px',display:'flex',flexWrap:'wrap',gap:'12px',justifyContent:'center',fontSize:'12px'},children:paymentsByStatus.data.map((entry,index)=>{const color=STATUS_COLORS[index%STATUS_COLORS.length];return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',borderRadius:'3px',backgroundColor:color,border:'1px solid #d1d5db',flexShrink:0}}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#374151'},children:[entry.status||'No Status',\" (\",formatNumber(entry.count),\")\"]})]},\"legend-\".concat(index));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsByStatus.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment status data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments by Method\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsByMethod')})]}),renderWidgetStatus('paymentsByMethod')||(paymentsByMethod.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:paymentsByMethod.data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"method\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>formatCurrency(value)}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",fill:\"#08979C\",name:\"Count\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"totalAmount\",fill:\"#13C2C2\",name:\"Total Amount\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsByMethod.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment method data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments Over Time\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsOverTime')})]}),renderWidgetStatus('paymentsOverTime')||(paymentsOverTime.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:paymentsOverTime.data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"period\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>formatCurrency(value)}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"totalAmount\",stroke:\"#08979C\",name:\"Total Amount\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"count\",stroke:\"#13C2C2\",name:\"Count\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsOverTime.lastRefreshed)]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment over time data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payments by Country\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('paymentsByCountry')})]}),renderWidgetStatus('paymentsByCountry')||(paymentsByCountry.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",style:{overflowX:'auto',overflowY:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{minWidth:\"\".concat(Math.max(800,paymentsByCountry.data.length*80),\"px\"),height:'300px'},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:paymentsByCountry.data,margin:{top:5,right:30,left:20,bottom:100},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"country\",angle:-45,textAnchor:\"end\",height:100,interval:0}),/*#__PURE__*/_jsx(YAxis,{yAxisId:\"left\",tickFormatter:value=>formatCurrency(value),label:{value:'Total Amount ($)',angle:-90,position:'insideLeft'}}),/*#__PURE__*/_jsx(YAxis,{yAxisId:\"right\",orientation:\"right\",tickFormatter:value=>formatNumber(value),label:{value:'Contributor Count',angle:90,position:'insideRight'}}),/*#__PURE__*/_jsx(Tooltip,{content:_ref3=>{let{active,payload,label}=_ref3;if(active&&payload&&payload.length){return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:'12px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',fontWeight:'bold',color:'#111827',marginBottom:'8px'},children:label||'Unknown Country'}),payload.map((entry,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',gap:'12px',marginTop:'4px',fontSize:'13px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',backgroundColor:entry.color,borderRadius:'2px'}}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#6b7280'},children:[entry.name,\":\"]})]}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:entry.dataKey==='count'?formatNumber(entry.value):formatCurrency(entry.value)})]},\"tooltip-\".concat(index)))]});}return null;}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{yAxisId:\"left\",dataKey:\"totalAmount\",fill:\"#08979C\",name:\"Total Amount ($)\"}),/*#__PURE__*/_jsx(Bar,{yAxisId:\"right\",dataKey:\"count\",fill:\"#13C2C2\",name:\"Contributor Count\"})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(paymentsByCountry.lastRefreshed),\" - Showing all \",paymentsByCountry.data.length,\" countries (scroll horizontally to view all)\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No payment by country data available\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20,color:\"#08979C\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Average Payment by Country\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"widget-actions\",children:renderWidgetRefresh('averagePaymentByCountry')})]}),renderWidgetStatus('averagePaymentByCountry')||(averagePaymentByCountry.data.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",style:{overflowX:'auto',overflowY:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{minWidth:\"\".concat(Math.max(800,averagePaymentByCountry.data.length*80),\"px\"),height:'300px'},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:averagePaymentByCountry.data,margin:{top:5,right:30,left:20,bottom:100},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"country\",angle:-45,textAnchor:\"end\",height:100,interval:0}),/*#__PURE__*/_jsx(YAxis,{tickFormatter:value=>formatCurrency(value)}),/*#__PURE__*/_jsx(Tooltip,{content:_ref4=>{let{active,payload}=_ref4;if(active&&payload&&payload.length){const data=payload[0].payload;return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:'12px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',fontWeight:'bold',marginBottom:'8px'},children:data.country}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:[\"Average: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:data.averageAmountFormatted||data.averageAmount})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:data.totalAmountFormatted||data.totalAmount})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:[\"Contributors: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#111827'},children:data.countFormatted||data.count})]})]});}return null;}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"averageAmount\",fill:\"#08979C\",name:\"Average Payment ($)\"})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-footer\",children:[\"As of \",formatDate(averagePaymentByCountry.lastRefreshed),\" - Showing all \",averagePaymentByCountry.data.length,\" countries (scroll horizontally to view all)\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No average payment by country data available\"}))]})]})]})]})})]});};export default ContributorPaymentsDashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","Sidebar","Menu","LogOut","RefreshCw","DollarSign","TrendingUp","Users","AlertCircle","CheckCircle","BarChart3","Download","Loader","Clock","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","PieChart","Pie","Cell","LineChart","Line","apiClient","toast","XLSX","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","COLORS","STATUS_COLORS","ContributorPaymentsDashboard","user","logout","sidebarOpen","setSidebarOpen","refreshing","setRefreshing","totalContributors","setTotalContributors","value","lastRefreshed","totalPayments","setTotalPayments","averagePayment","setAveragePayment","pendingCount","setPendingCount","paymentsByStatus","setPaymentsByStatus","data","paymentsByMethod","setPaymentsByMethod","paymentsOverTime","setPaymentsOverTime","topContributors","setTopContributors","paymentsByCountry","setPaymentsByCountry","averagePaymentByCountry","setAveragePaymentByCountry","widgetStates","setWidgetStates","formatCurrency","amount","undefined","num","parseFloat","Math","abs","concat","toFixed","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","formatNumber","formatDate","dateString","Date","toLocaleString","year","month","day","hour","minute","_unused","fetchTotalContributors","silent","arguments","length","widgetKey","prev","_objectSpread","loading","error","response","get","success","_error$response","_error$response$data","errorMsg","message","fetchTotalPayments","warning","_error$response2","_error$response2$data","fetchAveragePayment","avgPaymentAmount","fetchPendingCount","pendingAmount","fetchPaymentsByStatus","icon","fetchPaymentsByMethod","fetchPaymentsOverTime","fetchTopContributors","params","limit","fetchPaymentsByCountry","fetchAveragePaymentByCountry","handleWidgetRefresh","renderWidgetRefresh","state","className","onClick","disabled","title","children","size","renderWidgetStatus","handleRefresh","Promise","all","finally","handleExport","workbook","utils","book_new","summaryData","summarySheet","aoa_to_sheet","book_append_sheet","statusData","forEach","item","push","status","count","totalAmount","outstandingAmount","statusSheet","contributorsData","name","email","totalPaymentAmount","outstandingBalance","paymentStatus","lastPaymentDate","paymentMethod","contributorsSheet","writeFile","toISOString","split","isOpen","toggleSidebar","marginLeft","charAt","toUpperCase","gridColumn","display","alignItems","gap","color","map","contributor","_contributor$paymentS","toLowerCase","id","width","height","cx","cy","labelLine","label","_ref","percent","outerRadius","innerRadius","fill","dataKey","paddingAngle","entry","index","content","_ref2","active","payload","findIndex","e","backgroundColor","border","borderRadius","padding","boxShadow","marginBottom","fontSize","marginTop","reduce","sum","flexWrap","justifyContent","flexShrink","strokeDasharray","formatter","type","stroke","overflowX","overflowY","minWidth","max","margin","top","right","left","bottom","angle","textAnchor","interval","yAxisId","tickFormatter","position","orientation","_ref3","fontWeight","_ref4","country","averageAmountFormatted","averageAmount","totalAmountFormatted","countFormatted"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/ContributorPaymentsDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport { Menu, LogOut, RefreshCw, DollarSign, TrendingUp, Users, AlertCircle, CheckCircle, BarChart3, Download, Loader, Clock } from 'lucide-react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell, LineChart, Line } from 'recharts';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport * as XLSX from 'xlsx';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\nimport '../styles/ContributorPaymentsDashboard.css';\n\nconst COLORS = ['#08979C', '#13C2C2', '#36CFC9', '#5CDBD3', '#87E8DE', '#B5F5EC', '#E6FFFB'];\n\n// Enhanced color palette for Payments by Status with better contrast\nconst STATUS_COLORS = [\n  '#10B981', // Green - Success/Completed\n  '#3B82F6', // Blue - Pending/In Progress\n  '#F59E0B', // Amber - Warning/Partial\n  '#EF4444', // Red - Failed/Error\n  '#8B5CF6', // Purple - Other\n  '#06B6D4', // Cyan - Info\n  '#EC4899', // Pink - Special\n  '#6366F1', // Indigo - Alternative\n  '#14B8A6', // Teal - Active\n  '#F97316', // Orange - Attention\n  '#84CC16', // Lime - New\n  '#64748B'  // Slate - Unknown/No Status\n];\n\nconst ContributorPaymentsDashboard = () => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n\n  // Individual widget states - each widget has its own state\n  const [totalContributors, setTotalContributors] = useState({ value: 0, lastRefreshed: null });\n  const [totalPayments, setTotalPayments] = useState({ value: 0, lastRefreshed: null });\n  const [averagePayment, setAveragePayment] = useState({ value: 0, lastRefreshed: null });\n  const [pendingCount, setPendingCount] = useState({ value: 0, lastRefreshed: null });\n  const [paymentsByStatus, setPaymentsByStatus] = useState({ data: [], lastRefreshed: null });\n  const [paymentsByMethod, setPaymentsByMethod] = useState({ data: [], lastRefreshed: null });\n  const [paymentsOverTime, setPaymentsOverTime] = useState({ data: [], lastRefreshed: null });\n  const [topContributors, setTopContributors] = useState({ data: [], lastRefreshed: null });\n  const [paymentsByCountry, setPaymentsByCountry] = useState({ data: [], lastRefreshed: null });\n  const [averagePaymentByCountry, setAveragePaymentByCountry] = useState({ data: [], lastRefreshed: null });\n\n  // Widget loading states - each widget has its own loading state\n  const [widgetStates, setWidgetStates] = useState({});\n\n  // Format currency with elegant million/billion formatting\n  const formatCurrency = (amount) => {\n    if (amount === null || amount === undefined || amount === 0) return '$0.00';\n    const num = parseFloat(amount);\n    if (Math.abs(num) >= 1000000000) {\n      return `$${(num / 1000000000).toFixed(2)}B`;\n    } else if (Math.abs(num) >= 1000000) {\n      return `$${(num / 1000000).toFixed(2)}M`;\n    } else if (Math.abs(num) >= 1000) {\n      return `$${(num / 1000).toFixed(2)}K`;\n    } else {\n      return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      }).format(num);\n    }\n  };\n\n  // Format number\n  const formatNumber = (num) => {\n    if (num === null || num === undefined) return '0';\n    return new Intl.NumberFormat('en-US').format(num);\n  };\n\n  // Format date\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Never';\n    try {\n      return new Date(dateString).toLocaleString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return 'Never';\n    }\n  };\n\n  // Individual widget fetch functions - each widget has its own API\n\n  const fetchTotalContributors = useCallback(async (silent = false, widgetKey = 'totalContributors') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/total-contributors');\n      setTotalContributors({ value: response.data.totalContributors || 0, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Total contributors updated');\n    } catch (error) {\n      const errorMsg = error.response?.data?.error || error.message || 'Unknown error';\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: errorMsg } }));\n      setTotalContributors({ value: 0, lastRefreshed: null });\n      if (!silent) toast.error(`Error loading total contributors: ${errorMsg}`);\n    }\n  }, []);\n\n  const fetchTotalPayments = useCallback(async (silent = false, widgetKey = 'totalPayments') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/total-payments');\n      if (response.data.warning) {\n        if (!silent) toast.warning(response.data.warning);\n      }\n      setTotalPayments({ value: response.data.totalPayments || 0, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent && !response.data.warning) toast.success('Total payments updated');\n    } catch (error) {\n      const errorMsg = error.response?.data?.error || error.message || 'Unknown error';\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: errorMsg } }));\n      setTotalPayments({ value: 0, lastRefreshed: null });\n      if (!silent) toast.error(`Error loading total payments: ${errorMsg}`);\n    }\n  }, []);\n\n  const fetchAveragePayment = useCallback(async (silent = false, widgetKey = 'averagePayment') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/average-payment');\n      setAveragePayment({ value: response.data.avgPaymentAmount, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Average payment updated');\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error('Error loading average payment');\n    }\n  }, []);\n\n  const fetchPendingCount = useCallback(async (silent = false, widgetKey = 'pendingCount') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/pending-count');\n      setPendingCount({ value: response.data.pendingAmount, lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Pending amount updated');\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error('Error loading pending amount');\n    }\n  }, []);\n\n  const fetchPaymentsByStatus = useCallback(async (silent = false, widgetKey = 'paymentsByStatus') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-by-status');\n      setPaymentsByStatus({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments by status updated');\n        } else {\n          toast('No payment status data found', { icon: '⚠️' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments by status: ${error.message}`);\n    }\n  }, []);\n\n  const fetchPaymentsByMethod = useCallback(async (silent = false, widgetKey = 'paymentsByMethod') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-by-method');\n      setPaymentsByMethod({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments by method updated');\n        } else {\n          toast('No payment method data found', { icon: '⚠️' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments by method: ${error.message}`);\n    }\n  }, []);\n\n  const fetchPaymentsOverTime = useCallback(async (silent = false, widgetKey = 'paymentsOverTime') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-over-time');\n      setPaymentsOverTime({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments over time updated');\n        } else {\n          toast('No payment over time data found', { icon: '⚠️' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments over time: ${error.message}`);\n    }\n  }, []);\n\n  const fetchTopContributors = useCallback(async (silent = false, widgetKey = 'topContributors') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/top-contributors', { params: { limit: 10 } });\n      setTopContributors({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) toast.success('Top contributors updated');\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error('Error loading top contributors');\n    }\n  }, []);\n\n  const fetchPaymentsByCountry = useCallback(async (silent = false, widgetKey = 'paymentsByCountry') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/payments-by-country');\n      setPaymentsByCountry({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Payments by country updated');\n        } else {\n          toast('No payment by country data found', { icon: '⚠️' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading payments by country: ${error.message}`);\n    }\n  }, []);\n\n\n  const fetchAveragePaymentByCountry = useCallback(async (silent = false, widgetKey = 'averagePaymentByCountry') => {\n    setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: true, error: null } }));\n    try {\n      const response = await apiClient.get('/contributor-payments/average-payment-by-country');\n      setAveragePaymentByCountry({ data: response.data.data || [], lastRefreshed: response.data.lastRefreshed });\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: null } }));\n      if (!silent) {\n        if (response.data.data && response.data.data.length > 0) {\n          toast.success('Average payment by country updated');\n        } else {\n          toast('No average payment by country data found', { icon: '⚠️' });\n        }\n      }\n    } catch (error) {\n      setWidgetStates(prev => ({ ...prev, [widgetKey]: { loading: false, error: error.message } }));\n      if (!silent) toast.error(`Error loading average payment by country: ${error.message}`);\n    }\n  }, []);\n\n  // Widget-level refresh handlers\n  const handleWidgetRefresh = (widgetKey) => {\n    switch(widgetKey) {\n      case 'totalContributors':\n        fetchTotalContributors(false, widgetKey);\n        break;\n      case 'totalPayments':\n        fetchTotalPayments(false, widgetKey);\n        break;\n      case 'averagePayment':\n        fetchAveragePayment(false, widgetKey);\n        break;\n      case 'pendingCount':\n        fetchPendingCount(false, widgetKey);\n        break;\n      case 'paymentsByStatus':\n        fetchPaymentsByStatus(false, widgetKey);\n        break;\n      case 'paymentsByMethod':\n        fetchPaymentsByMethod(false, widgetKey);\n        break;\n      case 'paymentsOverTime':\n        fetchPaymentsOverTime(false, widgetKey);\n        break;\n      case 'topContributors':\n        fetchTopContributors(false, widgetKey);\n        break;\n      case 'paymentsByCountry':\n        fetchPaymentsByCountry(false, widgetKey);\n        break;\n      case 'averagePaymentByCountry':\n        fetchAveragePaymentByCountry(false, widgetKey);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // Render widget refresh button\n  const renderWidgetRefresh = (widgetKey) => {\n    const state = widgetStates[widgetKey];\n    return (\n      <button\n        className=\"widget-refresh-btn\"\n        onClick={() => handleWidgetRefresh(widgetKey)}\n        disabled={state?.loading}\n        title={state?.loading ? 'Refreshing...' : state?.error ? 'Retry' : 'Refresh this widget'}\n      >\n        <RefreshCw size={14} className={state?.loading ? 'spinning' : ''} />\n      </button>\n    );\n  };\n\n  // Helper to show loading/error state in widget\n  const renderWidgetStatus = (widgetKey) => {\n    const state = widgetStates[widgetKey];\n    if (state?.loading) {\n      return (\n        <div className=\"widget-loading\">\n          <Loader size={20} className=\"spinning\" />\n        </div>\n      );\n    }\n    if (state?.error) {\n      return (\n        <div className=\"widget-error\">\n          <span>Error: {state.error}</span>\n          <button onClick={() => handleWidgetRefresh(widgetKey)} className=\"retry-btn\">Retry</button>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  // Refresh all widgets\n  const handleRefresh = () => {\n    setRefreshing(true);\n    Promise.all([\n      fetchTotalContributors(true, 'totalContributors'),\n      fetchTotalPayments(true, 'totalPayments'),\n      fetchAveragePayment(true, 'averagePayment'),\n      fetchPendingCount(true, 'pendingCount'),\n      fetchPaymentsByStatus(true, 'paymentsByStatus'),\n      fetchPaymentsByMethod(true, 'paymentsByMethod'),\n      fetchPaymentsOverTime(true, 'paymentsOverTime'),\n      fetchTopContributors(true, 'topContributors'),\n      fetchPaymentsByCountry(true, 'paymentsByCountry'),\n      fetchAveragePaymentByCountry(true, 'averagePaymentByCountry')\n    ]).finally(() => {\n      setRefreshing(false);\n      toast.success('All widgets refreshed');\n    });\n  };\n\n  // Export to Excel\n  const handleExport = useCallback(() => {\n    try {\n      const workbook = XLSX.utils.book_new();\n      \n      // Summary sheet\n      const summaryData = [\n        ['Metric', 'Value'],\n        ['Total Contributors', totalContributors.value],\n        ['Total Payments', formatCurrency(totalPayments.value)],\n        ['Average Payment', formatCurrency(averagePayment.value)],\n        ['Pending Amount', formatCurrency(pendingCount.value)]\n      ];\n      const summarySheet = XLSX.utils.aoa_to_sheet(summaryData);\n      XLSX.utils.book_append_sheet(workbook, summarySheet, 'Summary');\n\n      // Payments by Status\n      if (paymentsByStatus.data.length > 0) {\n        const statusData = [['Status', 'Count', 'Total Amount', 'Outstanding Amount']];\n        paymentsByStatus.data.forEach(item => {\n          statusData.push([item.status, item.count, item.totalAmount, item.outstandingAmount]);\n        });\n        const statusSheet = XLSX.utils.aoa_to_sheet(statusData);\n        XLSX.utils.book_append_sheet(workbook, statusSheet, 'Payments by Status');\n      }\n\n      // Top Contributors\n      if (topContributors.data.length > 0) {\n        const contributorsData = [['Name', 'Email', 'Total Payment', 'Outstanding', 'Status', 'Last Payment Date', 'Method']];\n        topContributors.data.forEach(item => {\n          contributorsData.push([\n            item.name,\n            item.email,\n            formatCurrency(item.totalPaymentAmount),\n            formatCurrency(item.outstandingBalance),\n            item.paymentStatus,\n            formatDate(item.lastPaymentDate),\n            item.paymentMethod\n          ]);\n        });\n        const contributorsSheet = XLSX.utils.aoa_to_sheet(contributorsData);\n        XLSX.utils.book_append_sheet(workbook, contributorsSheet, 'Top Contributors');\n      }\n\n      XLSX.writeFile(workbook, `contributor-payments-${new Date().toISOString().split('T')[0]}.xlsx`);\n      toast.success('Data exported successfully');\n    } catch (error) {\n      toast.error('Failed to export data');\n    }\n  }, [totalContributors, totalPayments, averagePayment, pendingCount, paymentsByStatus, topContributors]);\n\n  // Don't auto-fetch on mount - user must click refresh\n  useEffect(() => {\n    // No auto-fetch\n  }, []);\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      <div className=\"contributor-payments-dashboard\" style={{ marginLeft: sidebarOpen ? '320px' : '80px' }}>\n        <div className=\"contributor-payments-container\">\n          <div className=\"contributor-payments-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button\n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">Contributor Payments Analytics</h1>\n                  <p className=\"page-subtitle\">View payment metrics and analytics</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <div className=\"header-actions\">\n                  <button \n                    className=\"action-btn\" \n                    onClick={handleRefresh}\n                    disabled={refreshing}\n                    title=\"Refresh All\"\n                  >\n                    <RefreshCw size={16} className={refreshing ? 'spinning' : ''} />\n                    {refreshing ? 'Refreshing...' : 'Refresh All'}\n                  </button>\n                  <button \n                    className=\"action-btn\" \n                    onClick={handleExport}\n                    title=\"Export to Excel\"\n                  >\n                    <Download size={16} />\n                    Export\n                  </button>\n                </div>\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"contributor-payments-content\">\n            {/* KPI Cards - Grid Layout */}\n            <div className=\"kpi-grid\">\n              {/* Widget 1: Total Contributors */}\n              <div className=\"kpi-card green\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Total Contributors</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('totalContributors')}\n                  </div>\n                </div>\n                {renderWidgetStatus('totalContributors') || (\n                  <>\n                    <div className=\"kpi-value\">{formatNumber(totalContributors.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(totalContributors.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n\n              {/* Widget 2: Total Payments */}\n              <div className=\"kpi-card green\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Total Payments</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('totalPayments')}\n                  </div>\n                </div>\n                {renderWidgetStatus('totalPayments') || (\n                  <>\n                    <div className=\"kpi-value\">{formatCurrency(totalPayments.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(totalPayments.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n\n              {/* Widget 3: Average Payment */}\n              <div className=\"kpi-card green\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Average Payment</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('averagePayment')}\n                  </div>\n                </div>\n                {renderWidgetStatus('averagePayment') || (\n                  <>\n                    <div className=\"kpi-value\">{formatCurrency(averagePayment.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(averagePayment.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n\n              {/* Widget 4: Pending Amount */}\n              <div className=\"kpi-card yellow\">\n                <div className=\"kpi-header\">\n                  <span className=\"kpi-label\">Pending</span>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('pendingCount')}\n                  </div>\n                </div>\n                {renderWidgetStatus('pendingCount') || (\n                  <>\n                    <div className=\"kpi-value\">{formatCurrency(pendingCount.value)}</div>\n                    <div className=\"kpi-footer\">As of {formatDate(pendingCount.lastRefreshed)}</div>\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Top Contributors Table - Right after summary */}\n            <div className=\"charts-grid\">\n              {/* Widget 12: Top Contributors Table */}\n              <div className=\"chart-card top-contributors-table-card\" style={{ gridColumn: '1 / -1' }}>\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Top Contributors by Payment Amount</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('topContributors')}\n                  </div>\n                </div>\n                {renderWidgetStatus('topContributors') || (\n                  topContributors.data.length > 0 ? (\n                    <>\n                      <div className=\"table-container\">\n                        <table>\n                          <thead>\n                            <tr>\n                              <th>Name</th>\n                              <th>Email</th>\n                              <th>Total Payment</th>\n                              <th>Outstanding</th>\n                              <th>Status</th>\n                              <th>Last Payment Date</th>\n                              <th>Method</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {topContributors.data.map((contributor) => (\n                              <tr key={contributor.id}>\n                                <td>{contributor.name}</td>\n                                <td>{contributor.email}</td>\n                                <td>{formatCurrency(contributor.totalPaymentAmount)}</td>\n                                <td>{formatCurrency(contributor.outstandingBalance)}</td>\n                                <td>\n                                  <span className={`status-badge status-${contributor.paymentStatus?.toLowerCase()}`}>\n                                    {contributor.paymentStatus}\n                                  </span>\n                                </td>\n                                <td>{formatDate(contributor.lastPaymentDate)}</td>\n                                <td>{contributor.paymentMethod}</td>\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(topContributors.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No top contributors data available</div>\n                  )\n                )}\n              </div>\n            </div>\n\n            {/* Charts Grid - Grid Layout - All Graph Widgets */}\n            <div className=\"charts-grid\">\n              {/* Widget 8: Payments by Status */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments by Status</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsByStatus')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsByStatus') || (\n                  paymentsByStatus.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\">\n                        <ResponsiveContainer width=\"100%\" height={300}>\n                          <PieChart>\n                            <Pie\n                              data={paymentsByStatus.data}\n                              cx=\"50%\"\n                              cy=\"50%\"\n                              labelLine={false}\n                              label={({ name, percent }) => {\n                                // Only show label if percentage is >= 5% to avoid clutter\n                                if (percent >= 0.05) {\n                                  return `${name}: ${(percent * 100).toFixed(0)}%`;\n                                }\n                                return '';\n                              }}\n                              outerRadius={100}\n                              innerRadius={30}\n                              fill=\"#8884d8\"\n                              dataKey=\"count\"\n                              paddingAngle={2}\n                            >\n                              {paymentsByStatus.data.map((entry, index) => (\n                                <Cell \n                                  key={`cell-${index}`} \n                                  fill={STATUS_COLORS[index % STATUS_COLORS.length]} \n                                />\n                              ))}\n                            </Pie>\n                            <Tooltip \n                              content={({ active, payload }) => {\n                                if (active && payload && payload.length) {\n                                  const data = payload[0];\n                                  const entry = data.payload;\n                                  const color = STATUS_COLORS[paymentsByStatus.data.findIndex(e => e.status === entry.status) % STATUS_COLORS.length];\n                                  return (\n                                    <div style={{\n                                      backgroundColor: 'white',\n                                      border: '1px solid #e5e7eb',\n                                      borderRadius: '8px',\n                                      padding: '12px',\n                                      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n                                    }}>\n                                      <div style={{ \n                                        display: 'flex', \n                                        alignItems: 'center', \n                                        gap: '8px',\n                                        marginBottom: '8px'\n                                      }}>\n                                        <div style={{\n                                          width: '16px',\n                                          height: '16px',\n                                          borderRadius: '4px',\n                                          backgroundColor: color,\n                                          border: '1px solid #d1d5db'\n                                        }}></div>\n                                        <strong style={{ fontSize: '14px', color: '#111827' }}>\n                                          {entry.status || 'No Status'}\n                                        </strong>\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280', marginTop: '4px' }}>\n                                        <div>Count: <strong style={{ color: '#111827' }}>{formatNumber(entry.count)}</strong></div>\n                                        {entry.totalAmount !== undefined && (\n                                          <div>Total Amount: <strong style={{ color: '#111827' }}>{formatCurrency(entry.totalAmount)}</strong></div>\n                                        )}\n                                        <div style={{ marginTop: '4px', fontSize: '12px', color: '#9ca3af' }}>\n                                          Percentage: {((entry.count / paymentsByStatus.data.reduce((sum, e) => sum + e.count, 0)) * 100).toFixed(1)}%\n                                        </div>\n                                      </div>\n                                    </div>\n                                  );\n                                }\n                                return null;\n                              }}\n                            />\n                          </PieChart>\n                        </ResponsiveContainer>\n                      </div>\n                      {/* Legend showing status colors */}\n                      <div style={{ \n                        marginTop: '16px', \n                        padding: '12px',\n                        backgroundColor: '#f9fafb',\n                        borderRadius: '8px',\n                        display: 'flex',\n                        flexWrap: 'wrap',\n                        gap: '12px',\n                        justifyContent: 'center',\n                        fontSize: '12px'\n                      }}>\n                        {paymentsByStatus.data.map((entry, index) => {\n                          const color = STATUS_COLORS[index % STATUS_COLORS.length];\n                          return (\n                            <div \n                              key={`legend-${index}`}\n                              style={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: '6px'\n                              }}\n                            >\n                              <div style={{\n                                width: '12px',\n                                height: '12px',\n                                borderRadius: '3px',\n                                backgroundColor: color,\n                                border: '1px solid #d1d5db',\n                                flexShrink: 0\n                              }}></div>\n                              <span style={{ color: '#374151' }}>\n                                {entry.status || 'No Status'} ({formatNumber(entry.count)})\n                              </span>\n                            </div>\n                          );\n                        })}\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsByStatus.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment status data available</div>\n                  )\n                )}\n              </div>\n\n              {/* Widget 9: Payments by Method */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments by Method</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsByMethod')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsByMethod') || (\n                  paymentsByMethod.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\">\n                        <ResponsiveContainer width=\"100%\" height={300}>\n                          <BarChart data={paymentsByMethod.data}>\n                            <CartesianGrid strokeDasharray=\"3 3\" />\n                            <XAxis dataKey=\"method\" />\n                            <YAxis />\n                            <Tooltip formatter={(value) => formatCurrency(value)} />\n                            <Legend />\n                            <Bar dataKey=\"count\" fill=\"#08979C\" name=\"Count\" />\n                            <Bar dataKey=\"totalAmount\" fill=\"#13C2C2\" name=\"Total Amount\" />\n                          </BarChart>\n                        </ResponsiveContainer>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsByMethod.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment method data available</div>\n                  )\n                )}\n              </div>\n\n              {/* Widget 10: Payments Over Time */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments Over Time</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsOverTime')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsOverTime') || (\n                  paymentsOverTime.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\">\n                        <ResponsiveContainer width=\"100%\" height={300}>\n                          <LineChart data={paymentsOverTime.data}>\n                            <CartesianGrid strokeDasharray=\"3 3\" />\n                            <XAxis dataKey=\"period\" />\n                            <YAxis />\n                            <Tooltip formatter={(value) => formatCurrency(value)} />\n                            <Legend />\n                            <Line type=\"monotone\" dataKey=\"totalAmount\" stroke=\"#08979C\" name=\"Total Amount\" />\n                            <Line type=\"monotone\" dataKey=\"count\" stroke=\"#13C2C2\" name=\"Count\" />\n                          </LineChart>\n                        </ResponsiveContainer>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsOverTime.lastRefreshed)}</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment over time data available</div>\n                  )\n                )}\n              </div>\n\n              {/* Widget 11: Payments by Country */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Payments by Country</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('paymentsByCountry')}\n                  </div>\n                </div>\n                {renderWidgetStatus('paymentsByCountry') || (\n                  paymentsByCountry.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\" style={{ overflowX: 'auto', overflowY: 'hidden' }}>\n                        <div style={{ minWidth: `${Math.max(800, paymentsByCountry.data.length * 80)}px`, height: '300px' }}>\n                          <ResponsiveContainer width=\"100%\" height={300}>\n                            <BarChart data={paymentsByCountry.data} margin={{ top: 5, right: 30, left: 20, bottom: 100 }}>\n                              <CartesianGrid strokeDasharray=\"3 3\" />\n                              <XAxis \n                                dataKey=\"country\" \n                                angle={-45} \n                                textAnchor=\"end\" \n                                height={100}\n                                interval={0}\n                              />\n                            <YAxis \n                              yAxisId=\"left\" \n                              tickFormatter={(value) => formatCurrency(value)}\n                              label={{ value: 'Total Amount ($)', angle: -90, position: 'insideLeft' }}\n                            />\n                            <YAxis \n                              yAxisId=\"right\" \n                              orientation=\"right\"\n                              tickFormatter={(value) => formatNumber(value)}\n                              label={{ value: 'Contributor Count', angle: 90, position: 'insideRight' }}\n                            />\n                            <Tooltip \n                              content={({ active, payload, label }) => {\n                                if (active && payload && payload.length) {\n                                  return (\n                                    <div style={{\n                                      backgroundColor: 'white',\n                                      border: '1px solid #e5e7eb',\n                                      borderRadius: '8px',\n                                      padding: '12px',\n                                      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n                                    }}>\n                                      <div style={{ \n                                        fontSize: '14px', \n                                        fontWeight: 'bold',\n                                        color: '#111827',\n                                        marginBottom: '8px'\n                                      }}>\n                                        {label || 'Unknown Country'}\n                                      </div>\n                                      {payload.map((entry, index) => (\n                                        <div \n                                          key={`tooltip-${index}`}\n                                          style={{\n                                            display: 'flex',\n                                            justifyContent: 'space-between',\n                                            alignItems: 'center',\n                                            gap: '12px',\n                                            marginTop: '4px',\n                                            fontSize: '13px'\n                                          }}\n                                        >\n                                          <div style={{ \n                                            display: 'flex', \n                                            alignItems: 'center', \n                                            gap: '6px' \n                                          }}>\n                                            <div style={{\n                                              width: '12px',\n                                              height: '12px',\n                                              backgroundColor: entry.color,\n                                              borderRadius: '2px'\n                                            }}></div>\n                                            <span style={{ color: '#6b7280' }}>\n                                              {entry.name}:\n                                            </span>\n                                          </div>\n                                          <strong style={{ color: '#111827' }}>\n                                            {entry.dataKey === 'count' \n                                              ? formatNumber(entry.value) \n                                              : formatCurrency(entry.value)\n                                            }\n                                          </strong>\n                                        </div>\n                                      ))}\n                                    </div>\n                                  );\n                                }\n                                return null;\n                              }}\n                            />\n                            <Legend />\n                            <Bar \n                              yAxisId=\"left\"\n                              dataKey=\"totalAmount\" \n                              fill=\"#08979C\" \n                              name=\"Total Amount ($)\" \n                            />\n                            <Bar \n                              yAxisId=\"right\"\n                              dataKey=\"count\" \n                              fill=\"#13C2C2\" \n                              name=\"Contributor Count\" \n                            />\n                          </BarChart>\n                        </ResponsiveContainer>\n                        </div>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(paymentsByCountry.lastRefreshed)} - Showing all {paymentsByCountry.data.length} countries (scroll horizontally to view all)</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No payment by country data available</div>\n                  )\n                )}\n              </div>\n\n\n              {/* Widget 15: Average Payment by Country */}\n              <div className=\"chart-card\">\n                <div className=\"chart-header\">\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <BarChart3 size={20} color=\"#08979C\" />\n                    <h3>Average Payment by Country</h3>\n                  </div>\n                  <div className=\"widget-actions\">\n                    {renderWidgetRefresh('averagePaymentByCountry')}\n                  </div>\n                </div>\n                {renderWidgetStatus('averagePaymentByCountry') || (\n                  averagePaymentByCountry.data.length > 0 ? (\n                    <>\n                      <div className=\"chart-container\" style={{ overflowX: 'auto', overflowY: 'hidden' }}>\n                        <div style={{ minWidth: `${Math.max(800, averagePaymentByCountry.data.length * 80)}px`, height: '300px' }}>\n                          <ResponsiveContainer width=\"100%\" height={300}>\n                            <BarChart data={averagePaymentByCountry.data} margin={{ top: 5, right: 30, left: 20, bottom: 100 }}>\n                              <CartesianGrid strokeDasharray=\"3 3\" />\n                              <XAxis \n                                dataKey=\"country\" \n                                angle={-45} \n                                textAnchor=\"end\" \n                                height={100}\n                                interval={0}\n                              />\n                            <YAxis tickFormatter={(value) => formatCurrency(value)} />\n                            <Tooltip\n                              content={({ active, payload }) => {\n                                if (active && payload && payload.length) {\n                                  const data = payload[0].payload;\n                                  return (\n                                    <div style={{\n                                      backgroundColor: 'white',\n                                      border: '1px solid #e5e7eb',\n                                      borderRadius: '8px',\n                                      padding: '12px',\n                                      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n                                    }}>\n                                      <div style={{ fontSize: '14px', fontWeight: 'bold', marginBottom: '8px' }}>\n                                        {data.country}\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\n                                        Average: <strong style={{ color: '#111827' }}>{data.averageAmountFormatted || data.averageAmount}</strong>\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\n                                        Total: <strong style={{ color: '#111827' }}>{data.totalAmountFormatted || data.totalAmount}</strong>\n                                      </div>\n                                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\n                                        Contributors: <strong style={{ color: '#111827' }}>{data.countFormatted || data.count}</strong>\n                                      </div>\n                                    </div>\n                                  );\n                                }\n                                return null;\n                              }}\n                            />\n                            <Legend />\n                            <Bar dataKey=\"averageAmount\" fill=\"#08979C\" name=\"Average Payment ($)\"                             />\n                          </BarChart>\n                        </ResponsiveContainer>\n                        </div>\n                      </div>\n                      <div className=\"chart-footer\">As of {formatDate(averagePaymentByCountry.lastRefreshed)} - Showing all {averagePaymentByCountry.data.length} countries (scroll horizontally to view all)</div>\n                    </>\n                  ) : (\n                    <div className=\"no-data\">No average payment by country data available</div>\n                  )\n                )}\n              </div>\n\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ContributorPaymentsDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}