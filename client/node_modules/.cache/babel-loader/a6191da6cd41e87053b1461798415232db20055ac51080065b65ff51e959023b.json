{"ast":null,"code":"import React,{useState}from'react';import{ChevronDown,Plus,Loader,Download}from'lucide-react';import TableHeader from'../Table/TableHeader';import TableCell from'../Table/TableCell';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CaseTable=_ref=>{let{cases,loading,selectedColumns,availableFields,onColumnChange,onCaseClick}=_ref;const[showColumnSelector,setShowColumnSelector]=useState(false);// Calculate column width - Contributor column is smaller\nconst getColumnWidth=columnName=>{if(selectedColumns.length===0)return'auto';// Contributor column (ContactId) gets 4.5% width (reduced by 25% from 6%)\nif(columnName==='ContactId'){return'4.5%';}// Calculate remaining width for other columns\nconst contributorColumnCount=selectedColumns.filter(col=>col==='ContactId').length;const otherColumnCount=selectedColumns.length-contributorColumnCount;const contributorWidth=contributorColumnCount*4.5;// 4.5% per contributor column\nconst remainingWidth=100-contributorWidth;// Distribute remaining width equally among other columns\nreturn otherColumnCount>0?\"\".concat(remainingWidth/otherColumnCount,\"%\"):'auto';};const getFieldLabel=fieldName=>{const labelMap={'Case_Reason__c':'Reason','ContactId':'Contributor','OwnerId':'Case Owner','CaseNumber':'Case Number','CreatedDate':'Date/Time Opened','CaseDuration':'Case Duration'};if(labelMap[fieldName]){return labelMap[fieldName];}const field=availableFields.find(f=>f.name===fieldName);return field?field.label:fieldName;};const calculateCaseDuration=caseItem=>{const createdDate=caseItem.CreatedDate;const closedDate=caseItem.ClosedDate;if(!createdDate)return'';const startDate=createdDate instanceof Date?createdDate:new Date(createdDate);const endDate=closedDate?closedDate instanceof Date?closedDate:new Date(closedDate):new Date();if(isNaN(startDate.getTime())||isNaN(endDate.getTime()))return'';const diffMs=endDate.getTime()-startDate.getTime();const diffDays=Math.floor(diffMs/(1000*60*60*24));const diffHours=Math.floor(diffMs%(1000*60*60*24)/(1000*60*60));const diffMinutes=Math.floor(diffMs%(1000*60*60)/(1000*60));if(diffDays>0){return\"\".concat(diffDays,\"d \").concat(diffHours,\"h\");}else if(diffHours>0){return\"\".concat(diffHours,\"h \").concat(diffMinutes,\"m\");}else{return\"\".concat(diffMinutes,\"m\");}};const getFieldValue=(caseItem,fieldName)=>{if(fieldName==='CaseDuration'){return calculateCaseDuration(caseItem);}if(fieldName.includes('.')){var _caseItem$relationshi,_caseItem;const[relationship,field]=fieldName.split('.');return((_caseItem$relationshi=caseItem[relationship])===null||_caseItem$relationshi===void 0?void 0:_caseItem$relationshi[field])||((_caseItem=caseItem[\"\".concat(relationship,\"__r\")])===null||_caseItem===void 0?void 0:_caseItem[field])||'';}if(fieldName==='ContactId'){var _caseItem$Contact;return caseItem['Contact.Name']||((_caseItem$Contact=caseItem.Contact)===null||_caseItem$Contact===void 0?void 0:_caseItem$Contact.Name)||caseItem[fieldName]||'';}if(fieldName==='OwnerId'){var _caseItem$Owner;return caseItem['Owner.Name']||((_caseItem$Owner=caseItem.Owner)===null||_caseItem$Owner===void 0?void 0:_caseItem$Owner.Name)||caseItem[fieldName]||'';}return caseItem[fieldName]||'';};const formatValue=(value,fieldName)=>{if(value===null||value===undefined)return'';if(typeof value==='boolean')return value?'Yes':'No';if(fieldName==='CreatedDate'||fieldName==='LastModifiedDate'||fieldName==='ClosedDate'){if(value instanceof Date||typeof value==='string'&&value){const dateObj=value instanceof Date?value:new Date(value);if(!isNaN(dateObj.getTime())){const date=dateObj.toLocaleDateString();const time=dateObj.toLocaleTimeString();return/*#__PURE__*/_jsxs(\"div\",{className:\"date-time-cell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"date-value\",children:date}),/*#__PURE__*/_jsx(\"div\",{className:\"time-value\",children:time})]});}}return String(value);}if(value instanceof Date){return new Date(value).toLocaleString();}return String(value);};const formatValueForCSV=(value,fieldName)=>{if(value===null||value===undefined)return'';if(typeof value==='boolean')return value?'Yes':'No';if(fieldName==='CaseDuration'){return String(value);}if(fieldName==='CreatedDate'||fieldName==='LastModifiedDate'||fieldName==='ClosedDate'){if(value instanceof Date||typeof value==='string'&&value){const dateObj=value instanceof Date?value:new Date(value);if(!isNaN(dateObj.getTime())){return dateObj.toLocaleString();}}return String(value);}if(value instanceof Date){return new Date(value).toLocaleString();}return String(value);};const handleExportCSV=()=>{// Create CSV content\nconst headers=selectedColumns.map(col=>getFieldLabel(col));const rows=cases.map(caseItem=>selectedColumns.map(column=>{const value=getFieldValue(caseItem,column);const formattedValue=formatValueForCSV(value,column);// Escape quotes and wrap in quotes if contains comma, newline, or quote\nif(formattedValue.includes(',')||formattedValue.includes('\\n')||formattedValue.includes('\"')){return\"\\\"\".concat(formattedValue.replace(/\"/g,'\"\"'),\"\\\"\");}return formattedValue;}));// Combine headers and rows\nconst csvContent=[headers.join(','),...rows.map(row=>row.join(','))].join('\\n');// Create blob and download\nconst blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',\"cases_\".concat(new Date().toISOString().split('T')[0],\".csv\"));link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};const handleColumnToggle=fieldName=>{if(selectedColumns.includes(fieldName)){if(selectedColumns.length>1){onColumnChange(selectedColumns.filter(col=>col!==fieldName));}}else{onColumnChange([...selectedColumns,fieldName]);}};const defaultColumns=['CaseNumber','Case_Reason__c','Type','ContactId','OwnerId','Status','CreatedDate','CaseDuration'];if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-loading\",children:[/*#__PURE__*/_jsx(Loader,{className:\"spinning\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading cases...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"case-table-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Cases (\",cases.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-export-csv\",onClick:handleExportCSV,title:\"Export to CSV\",children:[/*#__PURE__*/_jsx(Download,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"Export CSV\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"column-selector-wrapper\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-column-selector\",onClick:()=>setShowColumnSelector(!showColumnSelector),children:[/*#__PURE__*/_jsx(Plus,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Columns\"}),/*#__PURE__*/_jsx(ChevronDown,{size:14})]}),showColumnSelector&&/*#__PURE__*/_jsxs(\"div\",{className:\"column-selector-dropdown\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"column-selector-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Select Columns\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowColumnSelector(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"column-selector-list\",children:availableFields.filter(field=>!defaultColumns.includes(field.name)&&field.name!=='CaseDuration').map(field=>/*#__PURE__*/_jsxs(\"label\",{className:\"column-selector-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedColumns.includes(field.name),onChange:()=>handleColumnToggle(field.name)}),/*#__PURE__*/_jsx(\"span\",{children:field.label})]},field.name))})]})]})]})]}),cases.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"case-table-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No cases found\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"case-table-scroll-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"case-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:selectedColumns.map(column=>{const colWidth=getColumnWidth(column);const isContributor=column==='ContactId';const style=isContributor?{width:'4.5%',minWidth:'50px',maxWidth:'4.5%',paddingLeft:'8px',paddingRight:'8px',boxSizing:'border-box'}:{width:colWidth,minWidth:0,maxWidth:colWidth};return/*#__PURE__*/_jsx(TableHeader,{style:style,\"data-column\":column,className:isContributor?'case-table-contributor-column':'',children:getFieldLabel(column)},column);})})}),/*#__PURE__*/_jsx(\"tbody\",{children:cases.map(caseItem=>/*#__PURE__*/_jsx(\"tr\",{onClick:()=>onCaseClick(caseItem.Id),className:\"case-table-row\",children:selectedColumns.map(column=>{const colWidth=getColumnWidth(column);const isContributor=column==='ContactId';const style=isContributor?{width:'4.5%',minWidth:'50px',maxWidth:'4.5%',paddingLeft:'8px',paddingRight:'8px',boxSizing:'border-box'}:{width:colWidth,minWidth:0,maxWidth:colWidth};return/*#__PURE__*/_jsx(TableCell,{style:style,\"data-column\":column,className:isContributor?'case-table-contributor-column':'',children:formatValue(getFieldValue(caseItem,column),column)},column);})},caseItem.Id))})]})})]});};export default CaseTable;","map":{"version":3,"names":["React","useState","ChevronDown","Plus","Loader","Download","TableHeader","TableCell","jsx","_jsx","jsxs","_jsxs","CaseTable","_ref","cases","loading","selectedColumns","availableFields","onColumnChange","onCaseClick","showColumnSelector","setShowColumnSelector","getColumnWidth","columnName","length","contributorColumnCount","filter","col","otherColumnCount","contributorWidth","remainingWidth","concat","getFieldLabel","fieldName","labelMap","field","find","f","name","label","calculateCaseDuration","caseItem","createdDate","CreatedDate","closedDate","ClosedDate","startDate","Date","endDate","isNaN","getTime","diffMs","diffDays","Math","floor","diffHours","diffMinutes","getFieldValue","includes","_caseItem$relationshi","_caseItem","relationship","split","_caseItem$Contact","Contact","Name","_caseItem$Owner","Owner","formatValue","value","undefined","dateObj","date","toLocaleDateString","time","toLocaleTimeString","className","children","String","toLocaleString","formatValueForCSV","handleExportCSV","headers","map","rows","column","formattedValue","replace","csvContent","join","row","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","toISOString","style","visibility","body","appendChild","click","removeChild","handleColumnToggle","defaultColumns","size","display","gap","alignItems","onClick","title","checked","onChange","colWidth","isContributor","width","minWidth","maxWidth","paddingLeft","paddingRight","boxSizing","Id"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/components/CaseManagement/CaseTable.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { ChevronDown, Plus, Loader, Download } from 'lucide-react';\nimport TableHeader from '../Table/TableHeader';\nimport TableCell from '../Table/TableCell';\n\nconst CaseTable = ({ cases, loading, selectedColumns, availableFields, onColumnChange, onCaseClick }) => {\n  const [showColumnSelector, setShowColumnSelector] = useState(false);\n  \n  // Calculate column width - Contributor column is smaller\n  const getColumnWidth = (columnName) => {\n    if (selectedColumns.length === 0) return 'auto';\n    \n    // Contributor column (ContactId) gets 4.5% width (reduced by 25% from 6%)\n    if (columnName === 'ContactId') {\n      return '4.5%';\n    }\n    \n    // Calculate remaining width for other columns\n    const contributorColumnCount = selectedColumns.filter(col => col === 'ContactId').length;\n    const otherColumnCount = selectedColumns.length - contributorColumnCount;\n    const contributorWidth = contributorColumnCount * 4.5; // 4.5% per contributor column\n    const remainingWidth = 100 - contributorWidth;\n    \n    // Distribute remaining width equally among other columns\n    return otherColumnCount > 0 ? `${remainingWidth / otherColumnCount}%` : 'auto';\n  };\n\n  const getFieldLabel = (fieldName) => {\n    const labelMap = {\n      'Case_Reason__c': 'Reason',\n      'ContactId': 'Contributor',\n      'OwnerId': 'Case Owner',\n      'CaseNumber': 'Case Number',\n      'CreatedDate': 'Date/Time Opened',\n      'CaseDuration': 'Case Duration'\n    };\n    \n    if (labelMap[fieldName]) {\n      return labelMap[fieldName];\n    }\n    \n    const field = availableFields.find(f => f.name === fieldName);\n    return field ? field.label : fieldName;\n  };\n\n  const calculateCaseDuration = (caseItem) => {\n    const createdDate = caseItem.CreatedDate;\n    const closedDate = caseItem.ClosedDate;\n    \n    if (!createdDate) return '';\n    \n    const startDate = createdDate instanceof Date ? createdDate : new Date(createdDate);\n    const endDate = closedDate ? (closedDate instanceof Date ? closedDate : new Date(closedDate)) : new Date();\n    \n    if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) return '';\n    \n    const diffMs = endDate.getTime() - startDate.getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n    const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n    const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n    \n    if (diffDays > 0) {\n      return `${diffDays}d ${diffHours}h`;\n    } else if (diffHours > 0) {\n      return `${diffHours}h ${diffMinutes}m`;\n    } else {\n      return `${diffMinutes}m`;\n    }\n  };\n\n  const getFieldValue = (caseItem, fieldName) => {\n    if (fieldName === 'CaseDuration') {\n      return calculateCaseDuration(caseItem);\n    }\n    \n    if (fieldName.includes('.')) {\n      const [relationship, field] = fieldName.split('.');\n      return caseItem[relationship]?.[field] || caseItem[`${relationship}__r`]?.[field] || '';\n    }\n    \n    if (fieldName === 'ContactId') {\n      return caseItem['Contact.Name'] || caseItem.Contact?.Name || caseItem[fieldName] || '';\n    }\n    \n    if (fieldName === 'OwnerId') {\n      return caseItem['Owner.Name'] || caseItem.Owner?.Name || caseItem[fieldName] || '';\n    }\n    \n    return caseItem[fieldName] || '';\n  };\n\n  const formatValue = (value, fieldName) => {\n    if (value === null || value === undefined) return '';\n    if (typeof value === 'boolean') return value ? 'Yes' : 'No';\n    \n    if (fieldName === 'CreatedDate' || fieldName === 'LastModifiedDate' || fieldName === 'ClosedDate') {\n      if (value instanceof Date || (typeof value === 'string' && value)) {\n        const dateObj = value instanceof Date ? value : new Date(value);\n        if (!isNaN(dateObj.getTime())) {\n          const date = dateObj.toLocaleDateString();\n          const time = dateObj.toLocaleTimeString();\n          return (\n            <div className=\"date-time-cell\">\n              <div className=\"date-value\">{date}</div>\n              <div className=\"time-value\">{time}</div>\n            </div>\n          );\n        }\n      }\n      return String(value);\n    }\n    \n    if (value instanceof Date) {\n      return new Date(value).toLocaleString();\n    }\n    return String(value);\n  };\n\n  const formatValueForCSV = (value, fieldName) => {\n    if (value === null || value === undefined) return '';\n    if (typeof value === 'boolean') return value ? 'Yes' : 'No';\n    \n    if (fieldName === 'CaseDuration') {\n      return String(value);\n    }\n    \n    if (fieldName === 'CreatedDate' || fieldName === 'LastModifiedDate' || fieldName === 'ClosedDate') {\n      if (value instanceof Date || (typeof value === 'string' && value)) {\n        const dateObj = value instanceof Date ? value : new Date(value);\n        if (!isNaN(dateObj.getTime())) {\n          return dateObj.toLocaleString();\n        }\n      }\n      return String(value);\n    }\n    \n    if (value instanceof Date) {\n      return new Date(value).toLocaleString();\n    }\n    return String(value);\n  };\n\n  const handleExportCSV = () => {\n    // Create CSV content\n    const headers = selectedColumns.map(col => getFieldLabel(col));\n    const rows = cases.map(caseItem => \n      selectedColumns.map(column => {\n        const value = getFieldValue(caseItem, column);\n        const formattedValue = formatValueForCSV(value, column);\n        // Escape quotes and wrap in quotes if contains comma, newline, or quote\n        if (formattedValue.includes(',') || formattedValue.includes('\\n') || formattedValue.includes('\"')) {\n          return `\"${formattedValue.replace(/\"/g, '\"\"')}\"`;\n        }\n        return formattedValue;\n      })\n    );\n\n    // Combine headers and rows\n    const csvContent = [\n      headers.join(','),\n      ...rows.map(row => row.join(','))\n    ].join('\\n');\n\n    // Create blob and download\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `cases_${new Date().toISOString().split('T')[0]}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleColumnToggle = (fieldName) => {\n    if (selectedColumns.includes(fieldName)) {\n      if (selectedColumns.length > 1) {\n        onColumnChange(selectedColumns.filter(col => col !== fieldName));\n      }\n    } else {\n      onColumnChange([...selectedColumns, fieldName]);\n    }\n  };\n\n  const defaultColumns = [\n    'CaseNumber',\n    'Case_Reason__c',\n    'Type',\n    'ContactId',\n    'OwnerId',\n    'Status',\n    'CreatedDate',\n    'CaseDuration'\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"case-table-loading\">\n        <Loader className=\"spinning\" size={24} />\n        <p>Loading cases...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"case-table-container\">\n      <div className=\"case-table-header\">\n        <h3>Cases ({cases.length})</h3>\n        <div style={{ display: 'flex', gap: '12px', alignItems: 'center' }}>\n          <button\n            className=\"btn-export-csv\"\n            onClick={handleExportCSV}\n            title=\"Export to CSV\"\n          >\n            <Download size={14} />\n            <span>Export CSV</span>\n          </button>\n          <div className=\"column-selector-wrapper\">\n            <button\n              className=\"btn-column-selector\"\n              onClick={() => setShowColumnSelector(!showColumnSelector)}\n            >\n              <Plus size={14} />\n              <span>Add Columns</span>\n              <ChevronDown size={14} />\n            </button>\n          {showColumnSelector && (\n            <div className=\"column-selector-dropdown\">\n              <div className=\"column-selector-header\">\n                <span>Select Columns</span>\n                <button onClick={() => setShowColumnSelector(false)}>Ã—</button>\n              </div>\n              <div className=\"column-selector-list\">\n                {availableFields\n                  .filter(field => !defaultColumns.includes(field.name) && field.name !== 'CaseDuration')\n                  .map(field => (\n                    <label key={field.name} className=\"column-selector-item\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedColumns.includes(field.name)}\n                        onChange={() => handleColumnToggle(field.name)}\n                      />\n                      <span>{field.label}</span>\n                    </label>\n                  ))}\n              </div>\n            </div>\n          )}\n          </div>\n        </div>\n      </div>\n\n      {cases.length === 0 ? (\n        <div className=\"case-table-empty\">\n          <p>No cases found</p>\n        </div>\n      ) : (\n        <div className=\"case-table-scroll-wrapper\">\n          <table \n            className=\"case-table\"\n          >\n            <thead>\n              <tr>\n                {selectedColumns.map(column => {\n                  const colWidth = getColumnWidth(column);\n                  const isContributor = column === 'ContactId';\n                  const style = isContributor \n                    ? { width: '4.5%', minWidth: '50px', maxWidth: '4.5%', paddingLeft: '8px', paddingRight: '8px', boxSizing: 'border-box' }\n                    : { width: colWidth, minWidth: 0, maxWidth: colWidth };\n                  return (\n                    <TableHeader \n                      key={column} \n                      style={style}\n                      data-column={column}\n                      className={isContributor ? 'case-table-contributor-column' : ''}\n                    >\n                      {getFieldLabel(column)}\n                    </TableHeader>\n                  );\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {cases.map(caseItem => (\n                <tr\n                  key={caseItem.Id}\n                  onClick={() => onCaseClick(caseItem.Id)}\n                  className=\"case-table-row\"\n                >\n                  {selectedColumns.map(column => {\n                    const colWidth = getColumnWidth(column);\n                    const isContributor = column === 'ContactId';\n                    const style = isContributor \n                      ? { width: '4.5%', minWidth: '50px', maxWidth: '4.5%', paddingLeft: '8px', paddingRight: '8px', boxSizing: 'border-box' }\n                      : { width: colWidth, minWidth: 0, maxWidth: colWidth };\n                    return (\n                      <TableCell \n                        key={column} \n                        style={style}\n                        data-column={column}\n                        className={isContributor ? 'case-table-contributor-column' : ''}\n                      >\n                        {formatValue(getFieldValue(caseItem, column), column)}\n                      </TableCell>\n                    );\n                  })}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CaseTable;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}