{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// MultipleFieldsUpdate component - Handles multiple fields update form\nimport React,{useEffect}from'react';import{Plus,Trash2}from'lucide-react';import FieldValueInput from'./FieldValueInput';import{DEFAULT_MULTIPLE_FIELD_UPDATE,UPDATE_MODES}from'../constants';import toast from'react-hot-toast';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const MultipleFieldsUpdate=_ref=>{let{selectedObject,fields,loadingFields,multipleFieldUpdates,setMultipleFieldUpdates,fetchPicklistValues,searchReference}=_ref;// Sync fieldInfo when fields change to prevent losing selections\n// This ensures that when fields are re-fetched, the fieldInfo in multipleFieldUpdates stays in sync\n// IMPORTANT: This should NOT run when user is actively selecting values - only when fields array changes\nuseEffect(()=>{if(fields.length>0){// Use functional update to get latest state and avoid stale closures\nsetMultipleFieldUpdates(prevUpdates=>{if(prevUpdates.length===0)return prevUpdates;// Check if any fieldUpdate needs fieldInfo syncing\nlet hasChanges=false;const updated=prevUpdates.map(fieldUpdate=>{if(fieldUpdate.fieldName&&fieldUpdate.fieldName!==''){const currentFieldInfo=fields.find(f=>f.name===fieldUpdate.fieldName);// Only update if fieldInfo is missing or stale\nif(currentFieldInfo&&(!fieldUpdate.fieldInfo||fieldUpdate.fieldInfo.name!==currentFieldInfo.name)){hasChanges=true;return _objectSpread(_objectSpread({},fieldUpdate),{},{// Preserve ALL fields including newValue, currentValue, etc.\nfieldInfo:currentFieldInfo,// Only update picklistValues if they're missing or empty, don't overwrite if already fetched\npicklistValues:currentFieldInfo.type==='picklist'||currentFieldInfo.type==='multipicklist'?fieldUpdate.picklistValues&&fieldUpdate.picklistValues.length>0?fieldUpdate.picklistValues// Keep existing picklistValues if already fetched\n:currentFieldInfo.picklistValues||[]// Use from fieldInfo if not fetched yet\n:fieldUpdate.picklistValues||[]});}}return fieldUpdate;// No changes needed\n});// Only return updated array if something actually changed\nreturn hasChanges?updated:prevUpdates;});}},[fields]);// Only depend on fields - use functional update to avoid needing multipleFieldUpdates in deps\nconst addFieldUpdate=()=>{setMultipleFieldUpdates(prevUpdates=>[...prevUpdates,_objectSpread(_objectSpread({},DEFAULT_MULTIPLE_FIELD_UPDATE),{},{id:Date.now()})]);};const removeFieldUpdate=id=>{setMultipleFieldUpdates(prevUpdates=>{if(prevUpdates.length>1){return prevUpdates.filter(field=>field.id!==id);}else{toast.error('At least one field update is required');return prevUpdates;}});};const updateFieldUpdate=(id,updates)=>{console.log('[MultipleFieldsUpdate] updateFieldUpdate called for id:',id,'updates:',updates);setMultipleFieldUpdates(prevUpdates=>{const updated=prevUpdates.map(field=>{if(field.id===id){const merged=_objectSpread(_objectSpread({},field),updates);console.log('[MultipleFieldsUpdate] Updated fieldUpdate:',merged);return merged;}return field;});return updated;});};const handleFieldChange=(fieldUpdateId,fieldName)=>{const fieldInfo=fields.find(f=>f.name===fieldName);const updates={fieldName:fieldName,fieldInfo:fieldInfo,newValue:'',currentValue:'',picklistValues:fieldInfo&&(fieldInfo.type==='picklist'||fieldInfo.type==='multipicklist')?fieldInfo.picklistValues||[]:[],referenceSearchTerm:'',referenceSearchResults:[],currentValueReferenceSearchTerm:'',currentValueReferenceSearchResults:[]};updateFieldUpdate(fieldUpdateId,updates);// Fetch picklist values if needed\nif(fieldInfo&&(fieldInfo.type==='picklist'||fieldInfo.type==='multipicklist')){// First use picklist values from fieldInfo if available\nconst initialPicklistValues=fieldInfo.picklistValues&&fieldInfo.picklistValues.length>0?fieldInfo.picklistValues:[];// Update with initial values immediately\nif(initialPicklistValues.length>0){setMultipleFieldUpdates(prevUpdates=>prevUpdates.map(field=>{if(field.id===fieldUpdateId){return _objectSpread(_objectSpread({},field),{},{picklistValues:initialPicklistValues});}return field;}));}// Always fetch from API to ensure we have the latest values\n// This is especially important for Contributor Project and other objects\nfetchPicklistValues(selectedObject,fieldName).then(values=>{console.log(\"[MultipleFieldsUpdate] Fetched picklist values for \".concat(selectedObject,\".\").concat(fieldName,\":\"),values);// Use functional update to preserve newValue and other fields\nsetMultipleFieldUpdates(prevUpdates=>prevUpdates.map(field=>{if(field.id===fieldUpdateId){console.log('[MultipleFieldsUpdate] Updating picklistValues for fieldUpdate',fieldUpdateId,'with',values.length,'values');// Preserve all existing values, only update picklistValues\nreturn _objectSpread(_objectSpread({},field),{},{picklistValues:values&&values.length>0?values:initialPicklistValues});}return field;}));}).catch(error=>{console.error('[MultipleFieldsUpdate] Error fetching picklist values:',error);// If API call fails but we have initial values, keep them\nif(initialPicklistValues.length>0){console.log('[MultipleFieldsUpdate] Using initial picklist values from fieldInfo due to API error');}});}};const handleReferenceSearch=async function(fieldUpdateId,searchTerm){let isCurrentValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!searchTerm||searchTerm.trim()===''){// Clear results if search term is empty\nsetMultipleFieldUpdates(prevUpdates=>prevUpdates.map(field=>{if(field.id===fieldUpdateId){return _objectSpread(_objectSpread({},field),{},{[isCurrentValue?'currentValueReferenceSearchResults':'referenceSearchResults']:[],[isCurrentValue?'searchingCurrentValueReference':'searchingReference']:false,[isCurrentValue?'showCurrentValueReferenceDropdown':'showReferenceDropdown']:false});}return field;}));return;}// Use functional update to get latest fieldUpdate\nsetMultipleFieldUpdates(prevUpdates=>{const fieldUpdate=prevUpdates.find(f=>f.id===fieldUpdateId);if(!fieldUpdate||!fieldUpdate.fieldInfo||!fieldUpdate.fieldInfo.referenceTo){var _fieldUpdate$fieldInf;console.warn('[MultipleFieldsUpdate] Cannot search reference - missing fieldInfo or referenceTo:',{hasFieldInfo:!!(fieldUpdate!==null&&fieldUpdate!==void 0&&fieldUpdate.fieldInfo),referenceTo:fieldUpdate===null||fieldUpdate===void 0?void 0:(_fieldUpdate$fieldInf=fieldUpdate.fieldInfo)===null||_fieldUpdate$fieldInf===void 0?void 0:_fieldUpdate$fieldInf.referenceTo,fieldName:fieldUpdate===null||fieldUpdate===void 0?void 0:fieldUpdate.fieldName});return prevUpdates;}const referenceObject=fieldUpdate.fieldInfo.referenceTo;console.log(\"[MultipleFieldsUpdate] Searching \".concat(referenceObject,\" for \\\"\").concat(searchTerm,\"\\\" (field: \").concat(fieldUpdate.fieldName,\")\"));// Update searching state\nconst updated=prevUpdates.map(field=>{if(field.id===fieldUpdateId){return _objectSpread(_objectSpread({},field),{},{[isCurrentValue?'searchingCurrentValueReference':'searchingReference']:true,[isCurrentValue?'showCurrentValueReferenceDropdown':'showReferenceDropdown']:true});}return field;});// Perform search asynchronously\nsearchReference(referenceObject,searchTerm).then(results=>{console.log(\"[MultipleFieldsUpdate] Found \".concat(results.length,\" results for \").concat(referenceObject,\":\"),results);setMultipleFieldUpdates(prev=>prev.map(field=>{if(field.id===fieldUpdateId){return _objectSpread(_objectSpread({},field),{},{[isCurrentValue?'currentValueReferenceSearchResults':'referenceSearchResults']:results,[isCurrentValue?'searchingCurrentValueReference':'searchingReference']:false});}return field;}));}).catch(error=>{console.error('[MultipleFieldsUpdate] Reference search error:',error);setMultipleFieldUpdates(prev=>prev.map(field=>{if(field.id===fieldUpdateId){return _objectSpread(_objectSpread({},field),{},{[isCurrentValue?'currentValueReferenceSearchResults':'referenceSearchResults']:[],[isCurrentValue?'searchingCurrentValueReference':'searchingReference']:false});}return field;}));});return updated;});};const handleReferenceSelect=function(fieldUpdateId,record){let isCurrentValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;updateFieldUpdate(fieldUpdateId,{[isCurrentValue?'currentValue':'newValue']:record.id||record.Id,[isCurrentValue?'currentValueReferenceSearchTerm':'referenceSearchTerm']:record.name||record.Name,[isCurrentValue?'showCurrentValueReferenceDropdown':'showReferenceDropdown']:false,[isCurrentValue?'searchingCurrentValueReference':'searchingReference']:false,[isCurrentValue?'currentValueReferenceSearchResults':'referenceSearchResults']:[]});};return/*#__PURE__*/_jsxs(\"div\",{children:[multipleFieldUpdates.map((fieldUpdate,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px',padding:'16px',border:'1px solid #e5e7eb',borderRadius:'8px',backgroundColor:'#fafafa'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:'600'},children:[\"Field Update \",index+1]}),multipleFieldUpdates.length>1&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>removeFieldUpdate(fieldUpdate.id),style:{padding:'4px 8px',fontSize:'11px',backgroundColor:'#fee2e2',color:'#dc2626',border:'1px solid #fecaca',borderRadius:'4px',cursor:'pointer',display:'flex',alignItems:'center',gap:'4px'},children:[/*#__PURE__*/_jsx(Trash2,{size:12}),\"Remove\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid compact-grid single-field-update-grid\",style:{gridTemplateColumns:fieldUpdate.updateMode===UPDATE_MODES.SPECIFIC?'1fr 1fr 1fr 1fr':'1fr 1fr 1fr',gap:'10px',display:'grid',width:'100%',minWidth:0,alignItems:'start'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Field *\"}),loadingFields?/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px',fontSize:'12px',color:'#666'},children:\"Loading fields...\"}):/*#__PURE__*/_jsxs(\"select\",{value:fieldUpdate.fieldName||'',onChange:e=>handleFieldChange(fieldUpdate.id,e.target.value),disabled:!selectedObject||fields.length===0,style:{fontSize:'12px',padding:'6px 10px',height:'32px',width:'100%',border:'1px solid #d1d5db',borderRadius:'4px',backgroundColor:'#fff'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--Select Field--\"}),fields.map(field=>/*#__PURE__*/_jsxs(\"option\",{value:field.name,children:[field.label,\" (\",field.type,\")\"]},field.name)),fieldUpdate.fieldName&&!fields.find(f=>f.name===fieldUpdate.fieldName)&&/*#__PURE__*/_jsxs(\"option\",{value:fieldUpdate.fieldName,disabled:true,children:[fieldUpdate.fieldName,\" (Not available)\"]},fieldUpdate.fieldName)]},\"field-select-\".concat(fieldUpdate.id,\"-\").concat(fieldUpdate.fieldName||'empty'))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Update Mode *\"}),/*#__PURE__*/_jsxs(\"select\",{value:fieldUpdate.updateMode,onChange:e=>updateFieldUpdate(fieldUpdate.id,{updateMode:e.target.value,currentValue:''}),style:{fontSize:'12px',padding:'6px 10px',height:'32px',width:'100%',border:'1px solid #d1d5db',borderRadius:'4px',backgroundColor:'#fff'},children:[/*#__PURE__*/_jsx(\"option\",{value:UPDATE_MODES.ALL,children:\"Update All Records\"}),/*#__PURE__*/_jsx(\"option\",{value:UPDATE_MODES.SPECIFIC,children:\"Update Only Records with Specific Value\"})]})]}),fieldUpdate.updateMode===UPDATE_MODES.SPECIFIC&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Value *\"}),/*#__PURE__*/_jsx(FieldValueInput,{value:fieldUpdate.currentValue,onChange:value=>updateFieldUpdate(fieldUpdate.id,{currentValue:value}),fieldInfo:fieldUpdate.fieldInfo,picklistValues:fieldUpdate.picklistValues,placeholder:\"Enter current value to update\",disabled:!fieldUpdate.fieldName,isCurrentValue:true,currentValueReferenceSearchTerm:fieldUpdate.currentValueReferenceSearchTerm,setCurrentValueReferenceSearchTerm:term=>{updateFieldUpdate(fieldUpdate.id,{currentValueReferenceSearchTerm:term});if(term&&term.trim()!==''){handleReferenceSearch(fieldUpdate.id,term,true);}},currentValueReferenceSearchResults:fieldUpdate.currentValueReferenceSearchResults,searchingCurrentValueReference:fieldUpdate.searchingCurrentValueReference,showCurrentValueReferenceDropdown:fieldUpdate.showCurrentValueReferenceDropdown,setShowCurrentValueReferenceDropdown:show=>updateFieldUpdate(fieldUpdate.id,{showCurrentValueReferenceDropdown:show}),onCurrentValueReferenceSelect:record=>handleReferenceSelect(fieldUpdate.id,record,true)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Value *\"}),/*#__PURE__*/_jsx(FieldValueInput,{value:fieldUpdate.newValue||'',onChange:value=>{console.log('[MultipleFieldsUpdate] Updating newValue for fieldUpdate',fieldUpdate.id,'to:',value);updateFieldUpdate(fieldUpdate.id,{newValue:value});},fieldInfo:fieldUpdate.fieldInfo,picklistValues:fieldUpdate.picklistValues,placeholder:fieldUpdate.fieldInfo?\"Enter new value for \".concat(fieldUpdate.fieldInfo.label):'Enter new value',disabled:!fieldUpdate.fieldName,referenceSearchTerm:fieldUpdate.referenceSearchTerm,setReferenceSearchTerm:term=>{// Update search term without clearing newValue\n// newValue will be set when a record is selected via onReferenceSelect\nupdateFieldUpdate(fieldUpdate.id,{referenceSearchTerm:term});if(term&&term.trim()!==''){handleReferenceSearch(fieldUpdate.id,term,false);}},referenceSearchResults:fieldUpdate.referenceSearchResults,searchingReference:fieldUpdate.searchingReference,showReferenceDropdown:fieldUpdate.showReferenceDropdown,setShowReferenceDropdown:show=>updateFieldUpdate(fieldUpdate.id,{showReferenceDropdown:show}),onReferenceSelect:record=>handleReferenceSelect(fieldUpdate.id,record,false)},\"new-value-\".concat(fieldUpdate.id,\"-\").concat(fieldUpdate.fieldName||'empty',\"-\").concat(fieldUpdate.newValue||'empty'))]})]},\"multiple-field-grid-\".concat(fieldUpdate.id,\"-\").concat(fieldUpdate.updateMode))]},fieldUpdate.id)),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:addFieldUpdate,style:{padding:'8px 16px',fontSize:'12px',backgroundColor:'#f0f9ff',color:'#0284c7',border:'1px solid #bae6fd',borderRadius:'6px',cursor:'pointer',display:'flex',alignItems:'center',gap:'6px',marginTop:'12px'},children:[/*#__PURE__*/_jsx(Plus,{size:14}),\"Add Another Field\"]})]});};export default MultipleFieldsUpdate;","map":{"version":3,"names":["React","useEffect","Plus","Trash2","FieldValueInput","DEFAULT_MULTIPLE_FIELD_UPDATE","UPDATE_MODES","toast","jsxs","_jsxs","jsx","_jsx","MultipleFieldsUpdate","_ref","selectedObject","fields","loadingFields","multipleFieldUpdates","setMultipleFieldUpdates","fetchPicklistValues","searchReference","length","prevUpdates","hasChanges","updated","map","fieldUpdate","fieldName","currentFieldInfo","find","f","name","fieldInfo","_objectSpread","picklistValues","type","addFieldUpdate","id","Date","now","removeFieldUpdate","filter","field","error","updateFieldUpdate","updates","console","log","merged","handleFieldChange","fieldUpdateId","newValue","currentValue","referenceSearchTerm","referenceSearchResults","currentValueReferenceSearchTerm","currentValueReferenceSearchResults","initialPicklistValues","then","values","concat","catch","handleReferenceSearch","searchTerm","isCurrentValue","arguments","undefined","trim","referenceTo","_fieldUpdate$fieldInf","warn","hasFieldInfo","referenceObject","results","prev","handleReferenceSelect","record","Id","Name","children","index","style","marginBottom","padding","border","borderRadius","backgroundColor","display","justifyContent","alignItems","margin","fontSize","fontWeight","onClick","color","cursor","gap","size","className","gridTemplateColumns","updateMode","SPECIFIC","width","minWidth","value","onChange","e","target","disabled","height","label","ALL","placeholder","setCurrentValueReferenceSearchTerm","term","searchingCurrentValueReference","showCurrentValueReferenceDropdown","setShowCurrentValueReferenceDropdown","show","onCurrentValueReferenceSelect","setReferenceSearchTerm","searchingReference","showReferenceDropdown","setShowReferenceDropdown","onReferenceSelect","marginTop"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/UpdateObjectFields/components/MultipleFieldsUpdate.js"],"sourcesContent":["// MultipleFieldsUpdate component - Handles multiple fields update form\n\nimport React, { useEffect } from 'react';\nimport { Plus, Trash2 } from 'lucide-react';\nimport FieldValueInput from './FieldValueInput';\nimport { DEFAULT_MULTIPLE_FIELD_UPDATE, UPDATE_MODES } from '../constants';\nimport toast from 'react-hot-toast';\n\nconst MultipleFieldsUpdate = ({\n  selectedObject,\n  fields,\n  loadingFields,\n  multipleFieldUpdates,\n  setMultipleFieldUpdates,\n  fetchPicklistValues,\n  searchReference\n}) => {\n  // Sync fieldInfo when fields change to prevent losing selections\n  // This ensures that when fields are re-fetched, the fieldInfo in multipleFieldUpdates stays in sync\n  // IMPORTANT: This should NOT run when user is actively selecting values - only when fields array changes\n  useEffect(() => {\n    if (fields.length > 0) {\n      // Use functional update to get latest state and avoid stale closures\n      setMultipleFieldUpdates(prevUpdates => {\n        if (prevUpdates.length === 0) return prevUpdates;\n        \n        // Check if any fieldUpdate needs fieldInfo syncing\n        let hasChanges = false;\n        const updated = prevUpdates.map(fieldUpdate => {\n          if (fieldUpdate.fieldName && fieldUpdate.fieldName !== '') {\n            const currentFieldInfo = fields.find(f => f.name === fieldUpdate.fieldName);\n            // Only update if fieldInfo is missing or stale\n            if (currentFieldInfo && (!fieldUpdate.fieldInfo || fieldUpdate.fieldInfo.name !== currentFieldInfo.name)) {\n              hasChanges = true;\n              return {\n                ...fieldUpdate, // Preserve ALL fields including newValue, currentValue, etc.\n                fieldInfo: currentFieldInfo,\n                // Only update picklistValues if they're missing or empty, don't overwrite if already fetched\n                picklistValues: (currentFieldInfo.type === 'picklist' || currentFieldInfo.type === 'multipicklist')\n                  ? (fieldUpdate.picklistValues && fieldUpdate.picklistValues.length > 0 \n                      ? fieldUpdate.picklistValues // Keep existing picklistValues if already fetched\n                      : (currentFieldInfo.picklistValues || [])) // Use from fieldInfo if not fetched yet\n                  : fieldUpdate.picklistValues || []\n              };\n            }\n          }\n          return fieldUpdate; // No changes needed\n        });\n        \n        // Only return updated array if something actually changed\n        return hasChanges ? updated : prevUpdates;\n      });\n    }\n  }, [fields]); // Only depend on fields - use functional update to avoid needing multipleFieldUpdates in deps\n  const addFieldUpdate = () => {\n    setMultipleFieldUpdates(prevUpdates => [...prevUpdates, {\n      ...DEFAULT_MULTIPLE_FIELD_UPDATE,\n      id: Date.now()\n    }]);\n  };\n\n  const removeFieldUpdate = (id) => {\n    setMultipleFieldUpdates(prevUpdates => {\n      if (prevUpdates.length > 1) {\n        return prevUpdates.filter(field => field.id !== id);\n      } else {\n        toast.error('At least one field update is required');\n        return prevUpdates;\n      }\n    });\n  };\n\n  const updateFieldUpdate = (id, updates) => {\n    console.log('[MultipleFieldsUpdate] updateFieldUpdate called for id:', id, 'updates:', updates);\n    setMultipleFieldUpdates(prevUpdates => {\n      const updated = prevUpdates.map(field => {\n        if (field.id === id) {\n          const merged = { ...field, ...updates };\n          console.log('[MultipleFieldsUpdate] Updated fieldUpdate:', merged);\n          return merged;\n        }\n        return field;\n      });\n      return updated;\n    });\n  };\n\n  const handleFieldChange = (fieldUpdateId, fieldName) => {\n    const fieldInfo = fields.find(f => f.name === fieldName);\n    const updates = {\n      fieldName: fieldName,\n      fieldInfo: fieldInfo,\n      newValue: '',\n      currentValue: '',\n      picklistValues: fieldInfo && (fieldInfo.type === 'picklist' || fieldInfo.type === 'multipicklist') \n        ? (fieldInfo.picklistValues || []) \n        : [],\n      referenceSearchTerm: '',\n      referenceSearchResults: [],\n      currentValueReferenceSearchTerm: '',\n      currentValueReferenceSearchResults: []\n    };\n    updateFieldUpdate(fieldUpdateId, updates);\n    \n    // Fetch picklist values if needed\n    if (fieldInfo && (fieldInfo.type === 'picklist' || fieldInfo.type === 'multipicklist')) {\n      // First use picklist values from fieldInfo if available\n      const initialPicklistValues = fieldInfo.picklistValues && fieldInfo.picklistValues.length > 0\n        ? fieldInfo.picklistValues\n        : [];\n      \n      // Update with initial values immediately\n      if (initialPicklistValues.length > 0) {\n        setMultipleFieldUpdates(prevUpdates => prevUpdates.map(field => {\n          if (field.id === fieldUpdateId) {\n            return { ...field, picklistValues: initialPicklistValues };\n          }\n          return field;\n        }));\n      }\n      \n      // Always fetch from API to ensure we have the latest values\n      // This is especially important for Contributor Project and other objects\n      fetchPicklistValues(selectedObject, fieldName).then(values => {\n        console.log(`[MultipleFieldsUpdate] Fetched picklist values for ${selectedObject}.${fieldName}:`, values);\n        // Use functional update to preserve newValue and other fields\n        setMultipleFieldUpdates(prevUpdates => prevUpdates.map(field => {\n          if (field.id === fieldUpdateId) {\n            console.log('[MultipleFieldsUpdate] Updating picklistValues for fieldUpdate', fieldUpdateId, 'with', values.length, 'values');\n            // Preserve all existing values, only update picklistValues\n            return { ...field, picklistValues: values && values.length > 0 ? values : initialPicklistValues };\n          }\n          return field;\n        }));\n      }).catch(error => {\n        console.error('[MultipleFieldsUpdate] Error fetching picklist values:', error);\n        // If API call fails but we have initial values, keep them\n        if (initialPicklistValues.length > 0) {\n          console.log('[MultipleFieldsUpdate] Using initial picklist values from fieldInfo due to API error');\n        }\n      });\n    }\n  };\n\n  const handleReferenceSearch = async (fieldUpdateId, searchTerm, isCurrentValue = false) => {\n    if (!searchTerm || searchTerm.trim() === '') {\n      // Clear results if search term is empty\n      setMultipleFieldUpdates(prevUpdates => prevUpdates.map(field => {\n        if (field.id === fieldUpdateId) {\n          return {\n            ...field,\n            [isCurrentValue ? 'currentValueReferenceSearchResults' : 'referenceSearchResults']: [],\n            [isCurrentValue ? 'searchingCurrentValueReference' : 'searchingReference']: false,\n            [isCurrentValue ? 'showCurrentValueReferenceDropdown' : 'showReferenceDropdown']: false\n          };\n        }\n        return field;\n      }));\n      return;\n    }\n\n    // Use functional update to get latest fieldUpdate\n    setMultipleFieldUpdates(prevUpdates => {\n      const fieldUpdate = prevUpdates.find(f => f.id === fieldUpdateId);\n      if (!fieldUpdate || !fieldUpdate.fieldInfo || !fieldUpdate.fieldInfo.referenceTo) {\n        console.warn('[MultipleFieldsUpdate] Cannot search reference - missing fieldInfo or referenceTo:', {\n          hasFieldInfo: !!fieldUpdate?.fieldInfo,\n          referenceTo: fieldUpdate?.fieldInfo?.referenceTo,\n          fieldName: fieldUpdate?.fieldName\n        });\n        return prevUpdates;\n      }\n\n      const referenceObject = fieldUpdate.fieldInfo.referenceTo;\n      console.log(`[MultipleFieldsUpdate] Searching ${referenceObject} for \"${searchTerm}\" (field: ${fieldUpdate.fieldName})`);\n\n      // Update searching state\n      const updated = prevUpdates.map(field => {\n        if (field.id === fieldUpdateId) {\n          return {\n            ...field,\n            [isCurrentValue ? 'searchingCurrentValueReference' : 'searchingReference']: true,\n            [isCurrentValue ? 'showCurrentValueReferenceDropdown' : 'showReferenceDropdown']: true\n          };\n        }\n        return field;\n      });\n      \n      // Perform search asynchronously\n      searchReference(referenceObject, searchTerm)\n        .then(results => {\n          console.log(`[MultipleFieldsUpdate] Found ${results.length} results for ${referenceObject}:`, results);\n          setMultipleFieldUpdates(prev => prev.map(field => {\n            if (field.id === fieldUpdateId) {\n              return {\n                ...field,\n                [isCurrentValue ? 'currentValueReferenceSearchResults' : 'referenceSearchResults']: results,\n                [isCurrentValue ? 'searchingCurrentValueReference' : 'searchingReference']: false\n              };\n            }\n            return field;\n          }));\n        })\n        .catch(error => {\n          console.error('[MultipleFieldsUpdate] Reference search error:', error);\n          setMultipleFieldUpdates(prev => prev.map(field => {\n            if (field.id === fieldUpdateId) {\n              return {\n                ...field,\n                [isCurrentValue ? 'currentValueReferenceSearchResults' : 'referenceSearchResults']: [],\n                [isCurrentValue ? 'searchingCurrentValueReference' : 'searchingReference']: false\n              };\n            }\n            return field;\n          }));\n        });\n      \n      return updated;\n    });\n  };\n\n  const handleReferenceSelect = (fieldUpdateId, record, isCurrentValue = false) => {\n    updateFieldUpdate(fieldUpdateId, {\n      [isCurrentValue ? 'currentValue' : 'newValue']: record.id || record.Id,\n      [isCurrentValue ? 'currentValueReferenceSearchTerm' : 'referenceSearchTerm']: record.name || record.Name,\n      [isCurrentValue ? 'showCurrentValueReferenceDropdown' : 'showReferenceDropdown']: false,\n      [isCurrentValue ? 'searchingCurrentValueReference' : 'searchingReference']: false,\n      [isCurrentValue ? 'currentValueReferenceSearchResults' : 'referenceSearchResults']: []\n    });\n  };\n\n  return (\n    <div>\n      {multipleFieldUpdates.map((fieldUpdate, index) => (\n        <div key={fieldUpdate.id} style={{ \n          marginBottom: '16px', \n          padding: '16px', \n          border: '1px solid #e5e7eb', \n          borderRadius: '8px',\n          backgroundColor: '#fafafa'\n        }}>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\n            <h3 style={{ margin: 0, fontSize: '14px', fontWeight: '600' }}>Field Update {index + 1}</h3>\n            {multipleFieldUpdates.length > 1 && (\n              <button\n                type=\"button\"\n                onClick={() => removeFieldUpdate(fieldUpdate.id)}\n                style={{\n                  padding: '4px 8px',\n                  fontSize: '11px',\n                  backgroundColor: '#fee2e2',\n                  color: '#dc2626',\n                  border: '1px solid #fecaca',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '4px'\n                }}\n              >\n                <Trash2 size={12} />\n                Remove\n              </button>\n            )}\n          </div>\n          <div \n            key={`multiple-field-grid-${fieldUpdate.id}-${fieldUpdate.updateMode}`}\n            className=\"form-grid compact-grid single-field-update-grid\" \n            style={{ \n              gridTemplateColumns: fieldUpdate.updateMode === UPDATE_MODES.SPECIFIC ? '1fr 1fr 1fr 1fr' : '1fr 1fr 1fr', \n              gap: '10px',\n              display: 'grid',\n              width: '100%',\n              minWidth: 0,\n              alignItems: 'start'\n            }}\n          >\n            <div className=\"form-group\">\n              <label>Field *</label>\n              {loadingFields ? (\n                <div style={{ padding: '6px', fontSize: '12px', color: '#666' }}>Loading fields...</div>\n              ) : (\n                <select\n                  key={`field-select-${fieldUpdate.id}-${fieldUpdate.fieldName || 'empty'}`}\n                  value={fieldUpdate.fieldName || ''}\n                  onChange={(e) => handleFieldChange(fieldUpdate.id, e.target.value)}\n                  disabled={!selectedObject || fields.length === 0}\n                  style={{ fontSize: '12px', padding: '6px 10px', height: '32px', width: '100%', border: '1px solid #d1d5db', borderRadius: '4px', backgroundColor: '#fff' }}\n                >\n                  <option value=\"\">--Select Field--</option>\n                  {fields.map((field) => (\n                    <option key={field.name} value={field.name}>\n                      {field.label} ({field.type})\n                    </option>\n                  ))}\n                  {/* Preserve selected field even if not in current fields list (temporary) */}\n                  {fieldUpdate.fieldName && !fields.find(f => f.name === fieldUpdate.fieldName) && (\n                    <option key={fieldUpdate.fieldName} value={fieldUpdate.fieldName} disabled>\n                      {fieldUpdate.fieldName} (Not available)\n                    </option>\n                  )}\n                </select>\n              )}\n            </div>\n\n            <div className=\"form-group\">\n              <label>Update Mode *</label>\n              <select\n                value={fieldUpdate.updateMode}\n                onChange={(e) => updateFieldUpdate(fieldUpdate.id, {\n                  updateMode: e.target.value,\n                  currentValue: ''\n                })}\n                style={{ fontSize: '12px', padding: '6px 10px', height: '32px', width: '100%', border: '1px solid #d1d5db', borderRadius: '4px', backgroundColor: '#fff' }}\n              >\n                <option value={UPDATE_MODES.ALL}>Update All Records</option>\n                <option value={UPDATE_MODES.SPECIFIC}>Update Only Records with Specific Value</option>\n              </select>\n            </div>\n\n            {fieldUpdate.updateMode === UPDATE_MODES.SPECIFIC && (\n              <div className=\"form-group\">\n                <label>Current Value *</label>\n                <FieldValueInput\n                  value={fieldUpdate.currentValue}\n                  onChange={(value) => updateFieldUpdate(fieldUpdate.id, { currentValue: value })}\n                  fieldInfo={fieldUpdate.fieldInfo}\n                  picklistValues={fieldUpdate.picklistValues}\n                  placeholder=\"Enter current value to update\"\n                  disabled={!fieldUpdate.fieldName}\n                  isCurrentValue={true}\n                  currentValueReferenceSearchTerm={fieldUpdate.currentValueReferenceSearchTerm}\n                  setCurrentValueReferenceSearchTerm={(term) => {\n                    updateFieldUpdate(fieldUpdate.id, { currentValueReferenceSearchTerm: term });\n                    if (term && term.trim() !== '') {\n                      handleReferenceSearch(fieldUpdate.id, term, true);\n                    }\n                  }}\n                  currentValueReferenceSearchResults={fieldUpdate.currentValueReferenceSearchResults}\n                  searchingCurrentValueReference={fieldUpdate.searchingCurrentValueReference}\n                  showCurrentValueReferenceDropdown={fieldUpdate.showCurrentValueReferenceDropdown}\n                  setShowCurrentValueReferenceDropdown={(show) => updateFieldUpdate(fieldUpdate.id, { showCurrentValueReferenceDropdown: show })}\n                  onCurrentValueReferenceSelect={(record) => handleReferenceSelect(fieldUpdate.id, record, true)}\n                />\n              </div>\n            )}\n\n            <div className=\"form-group\">\n              <label>New Value *</label>\n              <FieldValueInput\n                key={`new-value-${fieldUpdate.id}-${fieldUpdate.fieldName || 'empty'}-${fieldUpdate.newValue || 'empty'}`}\n                value={fieldUpdate.newValue || ''}\n                onChange={(value) => {\n                  console.log('[MultipleFieldsUpdate] Updating newValue for fieldUpdate', fieldUpdate.id, 'to:', value);\n                  updateFieldUpdate(fieldUpdate.id, { newValue: value });\n                }}\n                fieldInfo={fieldUpdate.fieldInfo}\n                picklistValues={fieldUpdate.picklistValues}\n                placeholder={fieldUpdate.fieldInfo ? `Enter new value for ${fieldUpdate.fieldInfo.label}` : 'Enter new value'}\n                disabled={!fieldUpdate.fieldName}\n                referenceSearchTerm={fieldUpdate.referenceSearchTerm}\n                setReferenceSearchTerm={(term) => {\n                  // Update search term without clearing newValue\n                  // newValue will be set when a record is selected via onReferenceSelect\n                  updateFieldUpdate(fieldUpdate.id, { referenceSearchTerm: term });\n                  if (term && term.trim() !== '') {\n                    handleReferenceSearch(fieldUpdate.id, term, false);\n                  }\n                }}\n                referenceSearchResults={fieldUpdate.referenceSearchResults}\n                searchingReference={fieldUpdate.searchingReference}\n                showReferenceDropdown={fieldUpdate.showReferenceDropdown}\n                setShowReferenceDropdown={(show) => updateFieldUpdate(fieldUpdate.id, { showReferenceDropdown: show })}\n                onReferenceSelect={(record) => handleReferenceSelect(fieldUpdate.id, record, false)}\n              />\n            </div>\n          </div>\n        </div>\n      ))}\n      <button\n        type=\"button\"\n        onClick={addFieldUpdate}\n        style={{\n          padding: '8px 16px',\n          fontSize: '12px',\n          backgroundColor: '#f0f9ff',\n          color: '#0284c7',\n          border: '1px solid #bae6fd',\n          borderRadius: '6px',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '6px',\n          marginTop: '12px'\n        }}\n      >\n        <Plus size={14} />\n        Add Another Field\n      </button>\n    </div>\n  );\n};\n\nexport default MultipleFieldsUpdate;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}