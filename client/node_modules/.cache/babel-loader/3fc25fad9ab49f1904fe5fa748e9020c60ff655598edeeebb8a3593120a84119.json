{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{X,Download,Edit,Loader,Filter,Plus}from'lucide-react';import{exportData}from'../../utils/crossFeature/exportService';import axios from'axios';import toast from'react-hot-toast';import'../../styles/AdvancedReportView.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const reportApiClient=axios.create({baseURL:process.env.REACT_APP_API_URL||'/api',headers:{'Content-Type':'application/json'},timeout:600000});reportApiClient.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});const AdvancedReportView=_ref=>{let{report,onClose,onEdit}=_ref;const[reportData,setReportData]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[filters,setFilters]=useState([]);const[showFilters,setShowFilters]=useState(false);useEffect(()=>{if(report){loadReportData();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[report]);const loadReportData=async()=>{setLoading(true);setError(null);try{// Check if multi-object mode or legacy single-object mode\nconst isMultiObjectMode=report.objects&&report.objects.length>0;if(isMultiObjectMode){// Multi-object mode: use preview-multi endpoint\nconst objectsWithFields=report.objects.filter(obj=>{const fields=obj.fields||[];return fields.length>0;});if(objectsWithFields.length===0){setError('No objects with fields found in this report');setLoading(false);return;}const objects=objectsWithFields.map(obj=>({objectType:obj.objectType,fields:(obj.fields||[]).map(f=>typeof f==='string'?f:(f===null||f===void 0?void 0:f.name)||f),filters:obj.filters&&obj.filters.length>0?{groups:[{id:'group_1',logic:'AND',conditions:(obj.filters||[]).map(filter=>({field:(filter===null||filter===void 0?void 0:filter.field)||'',operator:(filter===null||filter===void 0?void 0:filter.operator)||'equals',value:(filter===null||filter===void 0?void 0:filter.value)||''}))}],groupLogic:'AND'}:{},relationships:obj.relationships||[],subqueries:obj.subqueries||[]}));const response=await reportApiClient.post('/reports/preview-multi',{objects,sortBy:report.sortBy,sortOrder:report.sortOrder,groupBy:report.groupBy,limit:report.limit||10000});if(response.data.success){setReportData(response.data.records||[]);}else{setError(response.data.error||'Failed to load report data');}}else{// Legacy single-object mode: use preview endpoint\nconst fields=(report.fields||[]).map(f=>typeof f==='string'?f:(f===null||f===void 0?void 0:f.name)||f);// Validate required fields\nif(!report.objectType||!fields||fields.length===0){setError('Report configuration is invalid: missing objectType or fields');setLoading(false);return;}const filters=report.filters&&report.filters.length>0?{groups:[{id:'group_1',logic:'AND',conditions:(report.filters||[]).map(filter=>({field:(filter===null||filter===void 0?void 0:filter.field)||'',operator:(filter===null||filter===void 0?void 0:filter.operator)||'equals',value:(filter===null||filter===void 0?void 0:filter.value)||''}))}],groupLogic:'AND'}:{};const response=await reportApiClient.post('/reports/preview',{objectType:report.objectType,fields,filters,sortBy:report.sortBy,sortOrder:report.sortOrder,groupBy:report.groupBy,limit:report.limit||10000});if(response.data.success){setReportData(response.data.records||[]);}else{setError(response.data.error||'Failed to load report data');}}}catch(err){var _err$response,_err$response$data;const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'Failed to load report data';setError(errorMessage);toast.error(errorMessage);}finally{setLoading(false);}};const handleExport=format=>{if(!reportData||reportData.length===0){toast.error('No data to export');return;}exportData(reportData,report.name||'report',format);toast.success(\"Report exported as \".concat(format.toUpperCase()));};// Utility function to get field label from API name\nconst getFieldLabel=apiName=>{if(!report||!apiName)return apiName;// Handle multi-object mode\nif(report.objects&&report.objects.length>0){// Parse the field name: \"project_Name\" or \"project_Project_Status__c\" or \"project objective_Name\"\n// The format is: \"objectType_FieldName\"\nconst underscoreIndex=apiName.indexOf('_');if(underscoreIndex===-1){// No underscore, try to find in all objects\nfor(const obj of report.objects){if(obj.fields){const field=obj.fields.find(f=>{const fName=typeof f==='string'?f:(f===null||f===void 0?void 0:f.name)||'';return fName===apiName;});if(field){if(typeof field==='string')return field;return field.label||field.name||apiName;}}}return apiName;}// Find the object type (first part before first underscore)\nconst objectType=apiName.substring(0,underscoreIndex);// Reconstruct the field name (everything after the first underscore)\nconst fieldName=apiName.substring(underscoreIndex+1);// Find the object in report\nconst obj=report.objects.find(o=>o.objectType===objectType);if(obj&&obj.fields){// Find the field in the object's fields array\nconst field=obj.fields.find(f=>{const fName=typeof f==='string'?f:(f===null||f===void 0?void 0:f.name)||'';return fName===fieldName||fName===apiName;});if(field){// Return the label if available, otherwise use the name\nif(typeof field==='string'){return field;}return field.label||field.name||apiName;}}}// Handle legacy single-object mode\nif(report.fields&&report.fields.length>0){const field=report.fields.find(f=>{const fName=typeof f==='string'?f:(f===null||f===void 0?void 0:f.name)||'';return fName===apiName;});if(field){if(typeof field==='string'){return field;}return field.label||field.name||apiName;}}// Fallback: try to format the API name nicely\nreturn apiName.replace(/_/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase());};// Calculate columns - must be before early returns\nconst columns=reportData&&reportData.length>0?Object.keys(reportData[0]).filter(k=>!k.startsWith('_')):[];// Get available fields for filtering (only fields in the report) - must be before early returns\nconst availableFields=useMemo(()=>{return columns.map(col=>({name:col,label:getFieldLabel(col),type:'string'// Default type, could be enhanced to detect actual types\n}));},[columns,report]);// Apply filters to data - must be before early returns\nconst filteredData=useMemo(()=>{if(!reportData||filters.length===0)return reportData;return reportData.filter(row=>{return filters.every(filter=>{if(!filter.field||!filter.operator)return true;const cellValue=row[filter.field];const filterValue=filter.value;// Handle null/undefined\nif(cellValue===null||cellValue===undefined){if(filter.operator==='isEmpty')return true;if(filter.operator==='isNotEmpty')return false;return false;}const cellStr=String(cellValue).toLowerCase();const filterStr=String(filterValue).toLowerCase();switch(filter.operator){case'equals':return cellStr===filterStr;case'notEquals':return cellStr!==filterStr;case'contains':return cellStr.includes(filterStr);case'notContains':return!cellStr.includes(filterStr);case'startsWith':return cellStr.startsWith(filterStr);case'endsWith':return cellStr.endsWith(filterStr);case'isEmpty':return!cellValue||String(cellValue).trim()==='';case'isNotEmpty':return cellValue&&String(cellValue).trim()!=='';default:return true;}});});},[reportData,filters]);// Early returns must come AFTER all hooks\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"advanced-report-view\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-loading\",children:[/*#__PURE__*/_jsx(Loader,{size:32,className:\"spinning\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading report data...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"advanced-report-view\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-error\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,children:\"Close\"})]})});}const addFilter=()=>{setFilters([...filters,{field:'',operator:'equals',value:''}]);};const removeFilter=index=>{setFilters(filters.filter((_,i)=>i!==index));};const updateFilter=(index,updates)=>{const updated=[...filters];updated[index]=_objectSpread(_objectSpread({},updated[index]),updates);setFilters(updated);};const clearFilters=()=>{setFilters([]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-report-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:report.name||'Unnamed Report'}),/*#__PURE__*/_jsx(\"span\",{className:\"report-view-meta\",children:reportData?\"\".concat(reportData.length,\" records\"):'0 records'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"report-view-btn\",onClick:()=>setShowFilters(!showFilters),title:\"Toggle filters\",children:[/*#__PURE__*/_jsx(Filter,{size:16}),\" \",filters.length>0?\"Filters (\".concat(filters.length,\")\"):'Filter']}),/*#__PURE__*/_jsxs(\"button\",{className:\"report-view-btn\",onClick:()=>handleExport('excel'),disabled:!reportData||reportData.length===0,children:[/*#__PURE__*/_jsx(Download,{size:16}),\" Export Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"report-view-btn\",onClick:()=>handleExport('csv'),disabled:!reportData||reportData.length===0,children:[/*#__PURE__*/_jsx(Download,{size:16}),\" Export CSV\"]}),onEdit&&/*#__PURE__*/_jsxs(\"button\",{className:\"report-view-btn edit-btn\",onClick:onEdit,children:[/*#__PURE__*/_jsx(Edit,{size:16}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"report-view-btn close-btn\",onClick:onClose,children:[/*#__PURE__*/_jsx(X,{size:16}),\" Close\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-content\",children:[showFilters&&/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-filters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filter Report\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"filter-btn-add\",onClick:addFilter,children:[/*#__PURE__*/_jsx(Plus,{size:14}),\" Add Filter\"]}),filters.length>0&&/*#__PURE__*/_jsx(\"button\",{className:\"filter-btn-clear\",onClick:clearFilters,children:\"Clear All\"})]})]}),filters.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"filters-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No filters applied. Click \\\"Add Filter\\\" to filter the report data.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"filters-list\",children:filters.map((filter,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"filter-row\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"filter-field-select\",value:filter.field,onChange:e=>updateFilter(index,{field:e.target.value,value:''}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Field\"}),availableFields.map(field=>/*#__PURE__*/_jsx(\"option\",{value:field.name,children:field.label},field.name))]}),/*#__PURE__*/_jsxs(\"select\",{className:\"filter-operator-select\",value:filter.operator,onChange:e=>updateFilter(index,{operator:e.target.value}),disabled:!filter.field,children:[/*#__PURE__*/_jsx(\"option\",{value:\"equals\",children:\"Equals\"}),/*#__PURE__*/_jsx(\"option\",{value:\"notEquals\",children:\"Not Equals\"}),/*#__PURE__*/_jsx(\"option\",{value:\"contains\",children:\"Contains\"}),/*#__PURE__*/_jsx(\"option\",{value:\"notContains\",children:\"Not Contains\"}),/*#__PURE__*/_jsx(\"option\",{value:\"startsWith\",children:\"Starts With\"}),/*#__PURE__*/_jsx(\"option\",{value:\"endsWith\",children:\"Ends With\"}),/*#__PURE__*/_jsx(\"option\",{value:\"isEmpty\",children:\"Is Empty\"}),/*#__PURE__*/_jsx(\"option\",{value:\"isNotEmpty\",children:\"Is Not Empty\"})]}),filter.operator!=='isEmpty'&&filter.operator!=='isNotEmpty'&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter-value-input\",value:filter.value,onChange:e=>updateFilter(index,{value:e.target.value}),placeholder:\"Enter value\",disabled:!filter.field}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-remove-btn\",onClick:()=>removeFilter(index),title:\"Remove filter\",children:/*#__PURE__*/_jsx(X,{size:14})})]},index))})]}),!reportData||reportData.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"report-view-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No data available for this report\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"report-view-table-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"report-view-table-header\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"table-count\",children:[\"Showing \",(filteredData===null||filteredData===void 0?void 0:filteredData.length)||0,\" of \",reportData.length,\" records\",filters.length>0&&' (filtered)']})}),/*#__PURE__*/_jsxs(\"table\",{className:\"report-view-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map(column=>/*#__PURE__*/_jsx(\"th\",{children:getFieldLabel(column)},column))})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredData&&filteredData.length>0?filteredData.map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{children:columns.map(column=>/*#__PURE__*/_jsx(\"td\",{children:row[column]!==null&&row[column]!==undefined?String(row[column]):''},column))},index)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:columns.length,className:\"no-results\",children:\"No records match the applied filters\"})})})]})]})]})]});};export default AdvancedReportView;","map":{"version":3,"names":["React","useState","useEffect","useMemo","X","Download","Edit","Loader","Filter","Plus","exportData","axios","toast","jsx","_jsx","jsxs","_jsxs","reportApiClient","create","baseURL","process","env","REACT_APP_API_URL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","AdvancedReportView","_ref","report","onClose","onEdit","reportData","setReportData","loading","setLoading","error","setError","filters","setFilters","showFilters","setShowFilters","loadReportData","isMultiObjectMode","objects","length","objectsWithFields","filter","obj","fields","map","objectType","f","name","groups","id","logic","conditions","field","operator","value","groupLogic","relationships","subqueries","response","post","sortBy","sortOrder","groupBy","limit","data","success","records","err","_err$response","_err$response$data","errorMessage","message","handleExport","format","toUpperCase","getFieldLabel","apiName","underscoreIndex","indexOf","find","fName","label","substring","fieldName","o","replace","l","columns","Object","keys","k","startsWith","availableFields","col","type","filteredData","row","every","cellValue","filterValue","undefined","cellStr","String","toLowerCase","filterStr","includes","endsWith","trim","className","children","size","onClick","addFilter","removeFilter","index","_","i","updateFilter","updates","updated","_objectSpread","clearFilters","title","disabled","onChange","e","target","placeholder","column","colSpan"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/components/AdvancedReportBuilder/AdvancedReportView.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { X, Download, Edit, Loader, Filter, Plus } from 'lucide-react';\nimport { exportData } from '../../utils/crossFeature/exportService';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport '../../styles/AdvancedReportView.css';\n\nconst reportApiClient = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || '/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 600000,\n});\n\nreportApiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nconst AdvancedReportView = ({ report, onClose, onEdit }) => {\n  const [reportData, setReportData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [filters, setFilters] = useState([]);\n  const [showFilters, setShowFilters] = useState(false);\n\n  useEffect(() => {\n    if (report) {\n      loadReportData();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [report]);\n\n  const loadReportData = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Check if multi-object mode or legacy single-object mode\n      const isMultiObjectMode = report.objects && report.objects.length > 0;\n\n      if (isMultiObjectMode) {\n        // Multi-object mode: use preview-multi endpoint\n        const objectsWithFields = report.objects.filter(obj => {\n          const fields = obj.fields || [];\n          return fields.length > 0;\n        });\n\n        if (objectsWithFields.length === 0) {\n          setError('No objects with fields found in this report');\n          setLoading(false);\n          return;\n        }\n\n        const objects = objectsWithFields.map(obj => ({\n          objectType: obj.objectType,\n          fields: (obj.fields || []).map(f => typeof f === 'string' ? f : (f?.name || f)),\n          filters: (obj.filters && obj.filters.length > 0) ? {\n            groups: [{\n              id: 'group_1',\n              logic: 'AND',\n              conditions: (obj.filters || []).map(filter => ({\n                field: filter?.field || '',\n                operator: filter?.operator || 'equals',\n                value: filter?.value || ''\n              }))\n            }],\n            groupLogic: 'AND'\n          } : {},\n          relationships: obj.relationships || [],\n          subqueries: obj.subqueries || []\n        }));\n\n        const response = await reportApiClient.post('/reports/preview-multi', {\n          objects,\n          sortBy: report.sortBy,\n          sortOrder: report.sortOrder,\n          groupBy: report.groupBy,\n          limit: report.limit || 10000\n        });\n\n        if (response.data.success) {\n          setReportData(response.data.records || []);\n        } else {\n          setError(response.data.error || 'Failed to load report data');\n        }\n      } else {\n        // Legacy single-object mode: use preview endpoint\n        const fields = (report.fields || []).map(f => typeof f === 'string' ? f : (f?.name || f));\n\n        // Validate required fields\n        if (!report.objectType || !fields || fields.length === 0) {\n          setError('Report configuration is invalid: missing objectType or fields');\n          setLoading(false);\n          return;\n        }\n\n        const filters = (report.filters && report.filters.length > 0) ? {\n          groups: [{\n            id: 'group_1',\n            logic: 'AND',\n            conditions: (report.filters || []).map(filter => ({\n              field: filter?.field || '',\n              operator: filter?.operator || 'equals',\n              value: filter?.value || ''\n            }))\n          }],\n          groupLogic: 'AND'\n        } : {};\n\n        const response = await reportApiClient.post('/reports/preview', {\n          objectType: report.objectType,\n          fields,\n          filters,\n          sortBy: report.sortBy,\n          sortOrder: report.sortOrder,\n          groupBy: report.groupBy,\n          limit: report.limit || 10000\n        });\n\n        if (response.data.success) {\n          setReportData(response.data.records || []);\n        } else {\n          setError(response.data.error || 'Failed to load report data');\n        }\n      }\n    } catch (err) {\n      const errorMessage = err.response?.data?.error || err.message || 'Failed to load report data';\n      setError(errorMessage);\n      toast.error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleExport = (format) => {\n    if (!reportData || reportData.length === 0) {\n      toast.error('No data to export');\n      return;\n    }\n    exportData(reportData, report.name || 'report', format);\n    toast.success(`Report exported as ${format.toUpperCase()}`);\n  };\n\n  // Utility function to get field label from API name\n  const getFieldLabel = (apiName) => {\n    if (!report || !apiName) return apiName;\n\n    // Handle multi-object mode\n    if (report.objects && report.objects.length > 0) {\n      // Parse the field name: \"project_Name\" or \"project_Project_Status__c\" or \"project objective_Name\"\n      // The format is: \"objectType_FieldName\"\n      const underscoreIndex = apiName.indexOf('_');\n      if (underscoreIndex === -1) {\n        // No underscore, try to find in all objects\n        for (const obj of report.objects) {\n          if (obj.fields) {\n            const field = obj.fields.find(f => {\n              const fName = typeof f === 'string' ? f : (f?.name || '');\n              return fName === apiName;\n            });\n            if (field) {\n              if (typeof field === 'string') return field;\n              return field.label || field.name || apiName;\n            }\n          }\n        }\n        return apiName;\n      }\n\n      // Find the object type (first part before first underscore)\n      const objectType = apiName.substring(0, underscoreIndex);\n      // Reconstruct the field name (everything after the first underscore)\n      const fieldName = apiName.substring(underscoreIndex + 1);\n\n      // Find the object in report\n      const obj = report.objects.find(o => o.objectType === objectType);\n      if (obj && obj.fields) {\n        // Find the field in the object's fields array\n        const field = obj.fields.find(f => {\n          const fName = typeof f === 'string' ? f : (f?.name || '');\n          return fName === fieldName || fName === apiName;\n        });\n\n        if (field) {\n          // Return the label if available, otherwise use the name\n          if (typeof field === 'string') {\n            return field;\n          }\n          return field.label || field.name || apiName;\n        }\n      }\n    }\n\n    // Handle legacy single-object mode\n    if (report.fields && report.fields.length > 0) {\n      const field = report.fields.find(f => {\n        const fName = typeof f === 'string' ? f : (f?.name || '');\n        return fName === apiName;\n      });\n\n      if (field) {\n        if (typeof field === 'string') {\n          return field;\n        }\n        return field.label || field.name || apiName;\n      }\n    }\n\n    // Fallback: try to format the API name nicely\n    return apiName\n      .replace(/_/g, ' ')\n      .replace(/\\b\\w/g, l => l.toUpperCase());\n  };\n\n  // Calculate columns - must be before early returns\n  const columns = reportData && reportData.length > 0\n    ? Object.keys(reportData[0]).filter(k => !k.startsWith('_'))\n    : [];\n\n  // Get available fields for filtering (only fields in the report) - must be before early returns\n  const availableFields = useMemo(() => {\n    return columns.map(col => ({\n      name: col,\n      label: getFieldLabel(col),\n      type: 'string' // Default type, could be enhanced to detect actual types\n    }));\n  }, [columns, report]);\n\n  // Apply filters to data - must be before early returns\n  const filteredData = useMemo(() => {\n    if (!reportData || filters.length === 0) return reportData;\n    \n    return reportData.filter(row => {\n      return filters.every(filter => {\n        if (!filter.field || !filter.operator) return true;\n        \n        const cellValue = row[filter.field];\n        const filterValue = filter.value;\n        \n        // Handle null/undefined\n        if (cellValue === null || cellValue === undefined) {\n          if (filter.operator === 'isEmpty') return true;\n          if (filter.operator === 'isNotEmpty') return false;\n          return false;\n        }\n        \n        const cellStr = String(cellValue).toLowerCase();\n        const filterStr = String(filterValue).toLowerCase();\n        \n        switch (filter.operator) {\n          case 'equals':\n            return cellStr === filterStr;\n          case 'notEquals':\n            return cellStr !== filterStr;\n          case 'contains':\n            return cellStr.includes(filterStr);\n          case 'notContains':\n            return !cellStr.includes(filterStr);\n          case 'startsWith':\n            return cellStr.startsWith(filterStr);\n          case 'endsWith':\n            return cellStr.endsWith(filterStr);\n          case 'isEmpty':\n            return !cellValue || String(cellValue).trim() === '';\n          case 'isNotEmpty':\n            return cellValue && String(cellValue).trim() !== '';\n          default:\n            return true;\n        }\n      });\n    });\n  }, [reportData, filters]);\n\n  // Early returns must come AFTER all hooks\n  if (loading) {\n    return (\n      <div className=\"advanced-report-view\">\n        <div className=\"report-view-loading\">\n          <Loader size={32} className=\"spinning\" />\n          <p>Loading report data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"advanced-report-view\">\n        <div className=\"report-view-error\">\n          <p>Error: {error}</p>\n          <button onClick={onClose}>Close</button>\n        </div>\n      </div>\n    );\n  }\n\n  const addFilter = () => {\n    setFilters([...filters, { field: '', operator: 'equals', value: '' }]);\n  };\n\n  const removeFilter = (index) => {\n    setFilters(filters.filter((_, i) => i !== index));\n  };\n\n  const updateFilter = (index, updates) => {\n    const updated = [...filters];\n    updated[index] = { ...updated[index], ...updates };\n    setFilters(updated);\n  };\n\n  const clearFilters = () => {\n    setFilters([]);\n  };\n\n  return (\n    <div className=\"advanced-report-view\">\n      <div className=\"report-view-header\">\n        <div className=\"report-view-title\">\n          <h2>{report.name || 'Unnamed Report'}</h2>\n          <span className=\"report-view-meta\">\n            {reportData ? `${reportData.length} records` : '0 records'}\n          </span>\n        </div>\n        <div className=\"report-view-actions\">\n          <button\n            className=\"report-view-btn\"\n            onClick={() => setShowFilters(!showFilters)}\n            title=\"Toggle filters\"\n          >\n            <Filter size={16} /> {filters.length > 0 ? `Filters (${filters.length})` : 'Filter'}\n          </button>\n          <button\n            className=\"report-view-btn\"\n            onClick={() => handleExport('excel')}\n            disabled={!reportData || reportData.length === 0}\n          >\n            <Download size={16} /> Export Excel\n          </button>\n          <button\n            className=\"report-view-btn\"\n            onClick={() => handleExport('csv')}\n            disabled={!reportData || reportData.length === 0}\n          >\n            <Download size={16} /> Export CSV\n          </button>\n          {onEdit && (\n            <button\n              className=\"report-view-btn edit-btn\"\n              onClick={onEdit}\n            >\n              <Edit size={16} /> Edit\n            </button>\n          )}\n          <button\n            className=\"report-view-btn close-btn\"\n            onClick={onClose}\n          >\n            <X size={16} /> Close\n          </button>\n        </div>\n      </div>\n\n      <div className=\"report-view-content\">\n        {/* Filter Panel */}\n        {showFilters && (\n          <div className=\"report-view-filters\">\n            <div className=\"filters-header\">\n              <h3>Filter Report</h3>\n              <div className=\"filters-actions\">\n                <button className=\"filter-btn-add\" onClick={addFilter}>\n                  <Plus size={14} /> Add Filter\n                </button>\n                {filters.length > 0 && (\n                  <button className=\"filter-btn-clear\" onClick={clearFilters}>\n                    Clear All\n                  </button>\n                )}\n              </div>\n            </div>\n            {filters.length === 0 ? (\n              <div className=\"filters-empty\">\n                <p>No filters applied. Click \"Add Filter\" to filter the report data.</p>\n              </div>\n            ) : (\n              <div className=\"filters-list\">\n                {filters.map((filter, index) => (\n                  <div key={index} className=\"filter-row\">\n                    <select\n                      className=\"filter-field-select\"\n                      value={filter.field}\n                      onChange={(e) => updateFilter(index, { field: e.target.value, value: '' })}\n                    >\n                      <option value=\"\">Select Field</option>\n                      {availableFields.map(field => (\n                        <option key={field.name} value={field.name}>\n                          {field.label}\n                        </option>\n                      ))}\n                    </select>\n                    <select\n                      className=\"filter-operator-select\"\n                      value={filter.operator}\n                      onChange={(e) => updateFilter(index, { operator: e.target.value })}\n                      disabled={!filter.field}\n                    >\n                      <option value=\"equals\">Equals</option>\n                      <option value=\"notEquals\">Not Equals</option>\n                      <option value=\"contains\">Contains</option>\n                      <option value=\"notContains\">Not Contains</option>\n                      <option value=\"startsWith\">Starts With</option>\n                      <option value=\"endsWith\">Ends With</option>\n                      <option value=\"isEmpty\">Is Empty</option>\n                      <option value=\"isNotEmpty\">Is Not Empty</option>\n                    </select>\n                    {filter.operator !== 'isEmpty' && filter.operator !== 'isNotEmpty' && (\n                      <input\n                        type=\"text\"\n                        className=\"filter-value-input\"\n                        value={filter.value}\n                        onChange={(e) => updateFilter(index, { value: e.target.value })}\n                        placeholder=\"Enter value\"\n                        disabled={!filter.field}\n                      />\n                    )}\n                    <button\n                      className=\"filter-remove-btn\"\n                      onClick={() => removeFilter(index)}\n                      title=\"Remove filter\"\n                    >\n                      <X size={14} />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {!reportData || reportData.length === 0 ? (\n          <div className=\"report-view-empty\">\n            <p>No data available for this report</p>\n          </div>\n        ) : (\n          <div className=\"report-view-table-container\">\n            <div className=\"report-view-table-header\">\n              <span className=\"table-count\">\n                Showing {filteredData?.length || 0} of {reportData.length} records\n                {filters.length > 0 && ' (filtered)'}\n              </span>\n            </div>\n            <table className=\"report-view-table\">\n              <thead>\n                <tr>\n                  {columns.map(column => (\n                    <th key={column}>{getFieldLabel(column)}</th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n                {filteredData && filteredData.length > 0 ? (\n                  filteredData.map((row, index) => (\n                    <tr key={index}>\n                      {columns.map(column => (\n                        <td key={column}>\n                          {row[column] !== null && row[column] !== undefined\n                            ? String(row[column])\n                            : ''}\n                        </td>\n                      ))}\n                    </tr>\n                  ))\n                ) : (\n                  <tr>\n                    <td colSpan={columns.length} className=\"no-results\">\n                      No records match the applied filters\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdvancedReportView;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}