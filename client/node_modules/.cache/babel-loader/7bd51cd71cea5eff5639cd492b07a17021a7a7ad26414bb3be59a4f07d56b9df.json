{"ast":null,"code":"/**\n * Client Tool Account Availability Validation\n * Checks if accounts are available for assignment\n */\n\n/**\n * Checks if an account is available for assignment\n * @param {Object} account - The account object\n * @param {string} projectId - The project ID to assign to\n * @param {Array} projects - Array of all projects\n * @returns {Object} - { isAvailable: boolean, reason: string|null }\n */\nexport const checkAccountAvailability = (account, projectId, projects) => {\n  if (!account) {\n    return {\n      isAvailable: false,\n      reason: 'Account not found'\n    };\n  }\n\n  // Check if account is deactivated\n  if (account.deactivated) {\n    return {\n      isAvailable: false,\n      reason: 'Account is deactivated'\n    };\n  }\n\n  // Check if account is already mapped to a different project\n  const existingProject = projects.find(p => p.id !== projectId && p.clientToolAccountUsed === account.id);\n  if (existingProject) {\n    return {\n      isAvailable: false,\n      reason: `Account is already mapped to project: ${existingProject.name}`,\n      existingProjectId: existingProject.id,\n      existingProjectName: existingProject.name\n    };\n  }\n  return {\n    isAvailable: true,\n    reason: null\n  };\n};\n\n/**\n * Checks availability for multiple accounts\n * @param {Array} accounts - Array of account objects\n * @param {string} projectId - The project ID\n * @param {Array} projects - Array of all projects\n * @returns {Object} - Map of accountId to availability status\n */\nexport const checkMultipleAccountAvailability = (accounts, projectId, projects) => {\n  const availabilityMap = {};\n  accounts.forEach(account => {\n    if (account && account.id) {\n      availabilityMap[account.id] = checkAccountAvailability(account, projectId, projects);\n    }\n  });\n  return availabilityMap;\n};\n\n/**\n * Filters available accounts from a list\n * @param {Array} accounts - Array of account objects\n * @param {string} projectId - The project ID\n * @param {Array} projects - Array of all projects\n * @returns {Array} - Array of available accounts\n */\nexport const filterAvailableAccounts = (accounts, projectId, projects) => {\n  return accounts.filter(account => {\n    const availability = checkAccountAvailability(account, projectId, projects);\n    return availability.isAvailable;\n  });\n};","map":{"version":3,"names":["checkAccountAvailability","account","projectId","projects","isAvailable","reason","deactivated","existingProject","find","p","id","clientToolAccountUsed","name","existingProjectId","existingProjectName","checkMultipleAccountAvailability","accounts","availabilityMap","forEach","filterAvailableAccounts","filter","availability"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/utils/clientToolAccountAvailability.js"],"sourcesContent":["/**\n * Client Tool Account Availability Validation\n * Checks if accounts are available for assignment\n */\n\n/**\n * Checks if an account is available for assignment\n * @param {Object} account - The account object\n * @param {string} projectId - The project ID to assign to\n * @param {Array} projects - Array of all projects\n * @returns {Object} - { isAvailable: boolean, reason: string|null }\n */\nexport const checkAccountAvailability = (account, projectId, projects) => {\n  if (!account) {\n    return {\n      isAvailable: false,\n      reason: 'Account not found'\n    };\n  }\n\n  // Check if account is deactivated\n  if (account.deactivated) {\n    return {\n      isAvailable: false,\n      reason: 'Account is deactivated'\n    };\n  }\n\n  // Check if account is already mapped to a different project\n  const existingProject = projects.find(\n    p => p.id !== projectId && p.clientToolAccountUsed === account.id\n  );\n\n  if (existingProject) {\n    return {\n      isAvailable: false,\n      reason: `Account is already mapped to project: ${existingProject.name}`,\n      existingProjectId: existingProject.id,\n      existingProjectName: existingProject.name\n    };\n  }\n\n  return {\n    isAvailable: true,\n    reason: null\n  };\n};\n\n/**\n * Checks availability for multiple accounts\n * @param {Array} accounts - Array of account objects\n * @param {string} projectId - The project ID\n * @param {Array} projects - Array of all projects\n * @returns {Object} - Map of accountId to availability status\n */\nexport const checkMultipleAccountAvailability = (accounts, projectId, projects) => {\n  const availabilityMap = {};\n\n  accounts.forEach(account => {\n    if (account && account.id) {\n      availabilityMap[account.id] = checkAccountAvailability(account, projectId, projects);\n    }\n  });\n\n  return availabilityMap;\n};\n\n/**\n * Filters available accounts from a list\n * @param {Array} accounts - Array of account objects\n * @param {string} projectId - The project ID\n * @param {Array} projects - Array of all projects\n * @returns {Array} - Array of available accounts\n */\nexport const filterAvailableAccounts = (accounts, projectId, projects) => {\n  return accounts.filter(account => {\n    const availability = checkAccountAvailability(account, projectId, projects);\n    return availability.isAvailable;\n  });\n};\n\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,wBAAwB,GAAGA,CAACC,OAAO,EAAEC,SAAS,EAAEC,QAAQ,KAAK;EACxE,IAAI,CAACF,OAAO,EAAE;IACZ,OAAO;MACLG,WAAW,EAAE,KAAK;MAClBC,MAAM,EAAE;IACV,CAAC;EACH;;EAEA;EACA,IAAIJ,OAAO,CAACK,WAAW,EAAE;IACvB,OAAO;MACLF,WAAW,EAAE,KAAK;MAClBC,MAAM,EAAE;IACV,CAAC;EACH;;EAEA;EACA,MAAME,eAAe,GAAGJ,QAAQ,CAACK,IAAI,CACnCC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKR,SAAS,IAAIO,CAAC,CAACE,qBAAqB,KAAKV,OAAO,CAACS,EACjE,CAAC;EAED,IAAIH,eAAe,EAAE;IACnB,OAAO;MACLH,WAAW,EAAE,KAAK;MAClBC,MAAM,EAAE,yCAAyCE,eAAe,CAACK,IAAI,EAAE;MACvEC,iBAAiB,EAAEN,eAAe,CAACG,EAAE;MACrCI,mBAAmB,EAAEP,eAAe,CAACK;IACvC,CAAC;EACH;EAEA,OAAO;IACLR,WAAW,EAAE,IAAI;IACjBC,MAAM,EAAE;EACV,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMU,gCAAgC,GAAGA,CAACC,QAAQ,EAAEd,SAAS,EAAEC,QAAQ,KAAK;EACjF,MAAMc,eAAe,GAAG,CAAC,CAAC;EAE1BD,QAAQ,CAACE,OAAO,CAACjB,OAAO,IAAI;IAC1B,IAAIA,OAAO,IAAIA,OAAO,CAACS,EAAE,EAAE;MACzBO,eAAe,CAAChB,OAAO,CAACS,EAAE,CAAC,GAAGV,wBAAwB,CAACC,OAAO,EAAEC,SAAS,EAAEC,QAAQ,CAAC;IACtF;EACF,CAAC,CAAC;EAEF,OAAOc,eAAe;AACxB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,uBAAuB,GAAGA,CAACH,QAAQ,EAAEd,SAAS,EAAEC,QAAQ,KAAK;EACxE,OAAOa,QAAQ,CAACI,MAAM,CAACnB,OAAO,IAAI;IAChC,MAAMoB,YAAY,GAAGrB,wBAAwB,CAACC,OAAO,EAAEC,SAAS,EAAEC,QAAQ,CAAC;IAC3E,OAAOkB,YAAY,CAACjB,WAAW;EACjC,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}