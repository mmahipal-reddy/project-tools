{"ast":null,"code":"import{useState,useRef,useEffect}from'react';/**\n * Hook that detects if text is truncated and provides tooltip functionality\n * Returns: { ref, isTruncated, showTooltip, handleMouseEnter, handleMouseLeave }\n */export const useTruncatedTooltip=text=>{const[isTruncated,setIsTruncated]=useState(false);const[showTooltip,setShowTooltip]=useState(false);const ref=useRef(null);useEffect(()=>{const checkTruncation=()=>{if(ref.current){const element=ref.current;// Check if text is truncated (scrollWidth > clientWidth for horizontal, scrollHeight > clientHeight for vertical)\nconst isTextTruncated=element.scrollWidth>element.clientWidth||element.scrollHeight>element.clientHeight;setIsTruncated(isTextTruncated);}};// Use requestAnimationFrame to ensure DOM is fully rendered\nlet rafId=null;try{rafId=requestAnimationFrame(()=>{checkTruncation();// Also check after a small delay to catch any async updates\nsetTimeout(checkTruncation,100);});}catch(error){console.warn('Error in requestAnimationFrame:',error);// Fallback to setTimeout\nsetTimeout(checkTruncation,100);}// Recheck on window resize\nconst handleResize=()=>{try{requestAnimationFrame(()=>{checkTruncation();});}catch(error){checkTruncation();}};window.addEventListener('resize',handleResize);// Also use MutationObserver to detect content changes\nlet observer=null;let observerTimeout=null;// Use a timeout to ensure ref.current is available\ntry{observerTimeout=setTimeout(()=>{if(ref.current&&typeof MutationObserver!=='undefined'){try{observer=new MutationObserver(()=>{checkTruncation();});observer.observe(ref.current,{childList:true,subtree:true,characterData:true,attributes:true,attributeFilter:['style','class']});}catch(error){console.warn('Error creating MutationObserver:',error);}}},0);}catch(error){console.warn('Error setting up MutationObserver:',error);}return()=>{try{if(rafId){cancelAnimationFrame(rafId);}if(observerTimeout){clearTimeout(observerTimeout);}window.removeEventListener('resize',handleResize);if(observer){observer.disconnect();}}catch(error){console.warn('Error cleaning up tooltip hook:',error);}};},[text]);const handleMouseEnter=()=>{if(isTruncated){setShowTooltip(true);}};const handleMouseLeave=()=>{setShowTooltip(false);};return{ref,isTruncated,showTooltip,setShowTooltip,handleMouseEnter,handleMouseLeave};};","map":{"version":3,"names":["useState","useRef","useEffect","useTruncatedTooltip","text","isTruncated","setIsTruncated","showTooltip","setShowTooltip","ref","checkTruncation","current","element","isTextTruncated","scrollWidth","clientWidth","scrollHeight","clientHeight","rafId","requestAnimationFrame","setTimeout","error","console","warn","handleResize","window","addEventListener","observer","observerTimeout","MutationObserver","observe","childList","subtree","characterData","attributes","attributeFilter","cancelAnimationFrame","clearTimeout","removeEventListener","disconnect","handleMouseEnter","handleMouseLeave"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/utils/useTruncatedTooltip.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\n\n/**\n * Hook that detects if text is truncated and provides tooltip functionality\n * Returns: { ref, isTruncated, showTooltip, handleMouseEnter, handleMouseLeave }\n */\nexport const useTruncatedTooltip = (text) => {\n  const [isTruncated, setIsTruncated] = useState(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n  const ref = useRef(null);\n\n  useEffect(() => {\n    const checkTruncation = () => {\n      if (ref.current) {\n        const element = ref.current;\n        // Check if text is truncated (scrollWidth > clientWidth for horizontal, scrollHeight > clientHeight for vertical)\n        const isTextTruncated = element.scrollWidth > element.clientWidth || \n                                element.scrollHeight > element.clientHeight;\n        setIsTruncated(isTextTruncated);\n      }\n    };\n\n    // Use requestAnimationFrame to ensure DOM is fully rendered\n    let rafId = null;\n    try {\n      rafId = requestAnimationFrame(() => {\n        checkTruncation();\n        // Also check after a small delay to catch any async updates\n        setTimeout(checkTruncation, 100);\n      });\n    } catch (error) {\n      console.warn('Error in requestAnimationFrame:', error);\n      // Fallback to setTimeout\n      setTimeout(checkTruncation, 100);\n    }\n    \n    // Recheck on window resize\n    const handleResize = () => {\n      try {\n        requestAnimationFrame(() => {\n          checkTruncation();\n        });\n      } catch (error) {\n        checkTruncation();\n      }\n    };\n    \n    window.addEventListener('resize', handleResize);\n    \n    // Also use MutationObserver to detect content changes\n    let observer = null;\n    let observerTimeout = null;\n    // Use a timeout to ensure ref.current is available\n    try {\n      observerTimeout = setTimeout(() => {\n        if (ref.current && typeof MutationObserver !== 'undefined') {\n          try {\n            observer = new MutationObserver(() => {\n              checkTruncation();\n            });\n            observer.observe(ref.current, {\n              childList: true,\n              subtree: true,\n              characterData: true,\n              attributes: true,\n              attributeFilter: ['style', 'class']\n            });\n          } catch (error) {\n            console.warn('Error creating MutationObserver:', error);\n          }\n        }\n      }, 0);\n    } catch (error) {\n      console.warn('Error setting up MutationObserver:', error);\n    }\n    \n    return () => {\n      try {\n        if (rafId) {\n          cancelAnimationFrame(rafId);\n        }\n        if (observerTimeout) {\n          clearTimeout(observerTimeout);\n        }\n        window.removeEventListener('resize', handleResize);\n        if (observer) {\n          observer.disconnect();\n        }\n      } catch (error) {\n        console.warn('Error cleaning up tooltip hook:', error);\n      }\n    };\n  }, [text]);\n\n  const handleMouseEnter = () => {\n    if (isTruncated) {\n      setShowTooltip(true);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    setShowTooltip(false);\n  };\n\n  return {\n    ref,\n    isTruncated,\n    showTooltip,\n    setShowTooltip,\n    handleMouseEnter,\n    handleMouseLeave\n  };\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}