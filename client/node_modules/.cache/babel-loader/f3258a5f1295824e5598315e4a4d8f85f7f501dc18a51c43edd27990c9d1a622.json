{"ast":null,"code":"import React,{useState}from'react';import{X,Plus,Filter}from'lucide-react';import FilterBuilder from'../../../ReportBuilder/FilterBuilder/FilterBuilder';import'../../../../styles/FilterCard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FilterCard=_ref=>{let{filters,onFilterAdd,onFilterRemove,availableFields}=_ref;const[showFilterBuilder,setShowFilterBuilder]=useState(false);// Convert filters array to filter structure for FilterBuilder\nconst filterStructure={groups:[{id:'group_1',logic:'AND',conditions:filters.map((filter,index)=>({field:filter.field,operator:filter.operator,value:filter.value,valueType:filter.valueType||'text'}))}],groupLogic:'AND'};const handleFiltersChange=newFilters=>{if(newFilters.groups&&newFilters.groups.length>0){const conditions=newFilters.groups[0].conditions||[];// Update filters array\nconditions.forEach((condition,index)=>{if(index<filters.length){// Update existing\n}else{// Add new\nonFilterAdd(condition);}});// Remove extra filters\nfor(let i=conditions.length;i<filters.length;i++){onFilterRemove(i);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"query-card filter-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(Filter,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:\"Filters\"})]}),filters.length>0&&/*#__PURE__*/_jsx(\"button\",{className:\"card-remove-btn\",onClick:()=>{// Remove all filters\nfilters.forEach((_,index)=>onFilterRemove(index));},title:\"Clear all filters\",children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[filters.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card-empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No filters applied\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"add-filter-btn\",onClick:()=>setShowFilterBuilder(true),children:[/*#__PURE__*/_jsx(Plus,{size:14}),\" Add Filter\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"filter-list\",children:[filters.map((filter,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"filter-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter-field\",children:filter.field}),/*#__PURE__*/_jsx(\"span\",{className:\"filter-operator\",children:filter.operator}),/*#__PURE__*/_jsx(\"span\",{className:\"filter-value\",children:String(filter.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-remove-btn\",onClick:()=>onFilterRemove(index),children:/*#__PURE__*/_jsx(X,{size:12})})]},index)),/*#__PURE__*/_jsxs(\"button\",{className:\"add-filter-btn-small\",onClick:()=>setShowFilterBuilder(true),children:[/*#__PURE__*/_jsx(Plus,{size:12}),\" Add Filter\"]})]}),showFilterBuilder&&/*#__PURE__*/_jsx(\"div\",{className:\"filter-builder-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"filter-builder-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-builder-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Filter\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFilterBuilder(false),children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsx(FilterBuilder,{availableFields:availableFields,filterOptions:{},filters:filterStructure,onFiltersChange:handleFiltersChange})]})})]})]});};export default FilterCard;","map":{"version":3,"names":["React","useState","X","Plus","Filter","FilterBuilder","jsx","_jsx","jsxs","_jsxs","FilterCard","_ref","filters","onFilterAdd","onFilterRemove","availableFields","showFilterBuilder","setShowFilterBuilder","filterStructure","groups","id","logic","conditions","map","filter","index","field","operator","value","valueType","groupLogic","handleFiltersChange","newFilters","length","forEach","condition","i","className","children","size","onClick","_","title","String","filterOptions","onFiltersChange"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/AdvancedReportBuilder/QueryCanvas/cards/FilterCard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { X, Plus, Filter } from 'lucide-react';\nimport FilterBuilder from '../../../ReportBuilder/FilterBuilder/FilterBuilder';\nimport '../../../../styles/FilterCard.css';\n\nconst FilterCard = ({ filters, onFilterAdd, onFilterRemove, availableFields }) => {\n  const [showFilterBuilder, setShowFilterBuilder] = useState(false);\n\n  // Convert filters array to filter structure for FilterBuilder\n  const filterStructure = {\n    groups: [{\n      id: 'group_1',\n      logic: 'AND',\n      conditions: filters.map((filter, index) => ({\n        field: filter.field,\n        operator: filter.operator,\n        value: filter.value,\n        valueType: filter.valueType || 'text'\n      }))\n    }],\n    groupLogic: 'AND'\n  };\n\n  const handleFiltersChange = (newFilters) => {\n    if (newFilters.groups && newFilters.groups.length > 0) {\n      const conditions = newFilters.groups[0].conditions || [];\n      // Update filters array\n      conditions.forEach((condition, index) => {\n        if (index < filters.length) {\n          // Update existing\n        } else {\n          // Add new\n          onFilterAdd(condition);\n        }\n      });\n      // Remove extra filters\n      for (let i = conditions.length; i < filters.length; i++) {\n        onFilterRemove(i);\n      }\n    }\n  };\n\n  return (\n    <div className=\"query-card filter-card\">\n      <div className=\"card-header\">\n        <div className=\"card-title\">\n          <Filter size={18} />\n          <span>Filters</span>\n        </div>\n        {filters.length > 0 && (\n          <button\n            className=\"card-remove-btn\"\n            onClick={() => {\n              // Remove all filters\n              filters.forEach((_, index) => onFilterRemove(index));\n            }}\n            title=\"Clear all filters\"\n          >\n            <X size={16} />\n          </button>\n        )}\n      </div>\n      \n      <div className=\"card-content\">\n        {filters.length === 0 ? (\n          <div className=\"card-empty\">\n            <p>No filters applied</p>\n            <button\n              className=\"add-filter-btn\"\n              onClick={() => setShowFilterBuilder(true)}\n            >\n              <Plus size={14} /> Add Filter\n            </button>\n          </div>\n        ) : (\n          <div className=\"filter-list\">\n            {filters.map((filter, index) => (\n              <div key={index} className=\"filter-item\">\n                <span className=\"filter-field\">{filter.field}</span>\n                <span className=\"filter-operator\">{filter.operator}</span>\n                <span className=\"filter-value\">{String(filter.value)}</span>\n                <button\n                  className=\"filter-remove-btn\"\n                  onClick={() => onFilterRemove(index)}\n                >\n                  <X size={12} />\n                </button>\n              </div>\n            ))}\n            <button\n              className=\"add-filter-btn-small\"\n              onClick={() => setShowFilterBuilder(true)}\n            >\n              <Plus size={12} /> Add Filter\n            </button>\n          </div>\n        )}\n\n        {showFilterBuilder && (\n          <div className=\"filter-builder-modal\">\n            <div className=\"filter-builder-content\">\n              <div className=\"filter-builder-header\">\n                <h3>Add Filter</h3>\n                <button onClick={() => setShowFilterBuilder(false)}>\n                  <X size={16} />\n                </button>\n              </div>\n              <FilterBuilder\n                availableFields={availableFields}\n                filterOptions={{}}\n                filters={filterStructure}\n                onFiltersChange={handleFiltersChange}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FilterCard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}