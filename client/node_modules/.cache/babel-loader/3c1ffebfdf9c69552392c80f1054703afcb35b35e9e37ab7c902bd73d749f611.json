{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Search,X}from'lucide-react';import apiClient from'../../../config/api';import'./FilterBuilder.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LookupFieldSearch=_ref=>{let{field,value,onChange,placeholder='Search...'}=_ref;const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const[showDropdown,setShowDropdown]=useState(false);const[selectedRecord,setSelectedRecord]=useState(null);const[error,setError]=useState(null);const dropdownRef=useRef(null);const inputRef=useRef(null);const searchTimeoutRef=useRef(null);// Load selected record name if value is an ID\nuseEffect(()=>{if(value&&typeof value==='string'&&(value.length===15||value.length===18)&&field!==null&&field!==void 0&&field.referenceTo){const referenceObject=Array.isArray(field.referenceTo)?field.referenceTo[0]:field.referenceTo;if(referenceObject){loadRecordName(value,referenceObject);}}else if(value&&selectedRecord&&selectedRecord.Id===value){// Value already matches selected record\n}else{setSelectedRecord(null);}},[value,field]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)&&inputRef.current&&!inputRef.current.contains(event.target)){setShowDropdown(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);const loadRecordName=async(recordId,objectType)=>{if(!recordId||!objectType)return;try{const response=await apiClient.post('/reports/lookup-search',{objectType,searchTerm:recordId,exactMatch:true});if(response.data.success&&response.data.records&&response.data.records.length>0){setSelectedRecord(response.data.records[0]);setSearchTerm(response.data.records[0].Name||recordId);}}catch(error){console.error('Error loading record name:',error);}};const searchRecords=async term=>{if(!term||term.trim().length<2){setSearchResults([]);setShowDropdown(false);return;}const referenceObject=Array.isArray(field===null||field===void 0?void 0:field.referenceTo)?field.referenceTo[0]:field===null||field===void 0?void 0:field.referenceTo;if(!referenceObject){setError('No reference object specified');return;}setIsSearching(true);setError(null);try{const response=await apiClient.post('/reports/lookup-search',{objectType:referenceObject,searchTerm:term.trim()});if(response.data.success){setSearchResults(response.data.records||[]);setShowDropdown(true);}else{setError(response.data.error||'Search failed');setSearchResults([]);}}catch(error){var _error$response,_error$response$data;console.error('Error searching records:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to search records');setSearchResults([]);}finally{setIsSearching(false);}};const handleSearchChange=e=>{const term=e.target.value;setSearchTerm(term);setSelectedRecord(null);setShowDropdown(false);setError(null);// Clear previous timeout\nif(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}// Debounce search\nif(term.trim().length>=2){searchTimeoutRef.current=setTimeout(()=>{searchRecords(term);},300);}else{setSearchResults([]);// If search term is cleared, clear the value\nif(!term){onChange('');}}};const handleSelectRecord=record=>{setSelectedRecord(record);setSearchTerm(record.Name||record.Id);setShowDropdown(false);onChange(record.Id);// Store the ID, not the name\n};const handleClear=()=>{setSearchTerm('');setSelectedRecord(null);setSearchResults([]);setShowDropdown(false);onChange('');};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"text\",value:searchTerm,onChange:handleSearchChange,onFocus:()=>{if(searchResults.length>0){setShowDropdown(true);}else if(searchTerm.trim().length>=2){searchRecords(searchTerm);}},placeholder:placeholder,className:\"filter-value-input\",style:{paddingRight:selectedRecord?'60px':'30px'}}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',right:selectedRecord?'30px':'8px',display:'flex',alignItems:'center',pointerEvents:'none'},children:isSearching?/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",style:{width:'14px',height:'14px',borderWidth:'2px'}}):/*#__PURE__*/_jsx(Search,{size:14,color:\"#666\"})}),selectedRecord&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleClear,style:{position:'absolute',right:'4px',background:'none',border:'none',cursor:'pointer',padding:'4px',display:'flex',alignItems:'center'},title:\"Clear selection\",children:/*#__PURE__*/_jsx(X,{size:14,color:\"#666\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#d32f2f',marginTop:'4px',padding:'4px 8px',background:'#ffebee',borderRadius:'4px'},children:error}),showDropdown&&searchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{ref:dropdownRef,style:{position:'absolute',top:'100%',left:0,right:0,background:'#fff',border:'1px solid #d9d9d9',borderRadius:'4px',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',zIndex:10000,maxHeight:'200px',overflowY:'auto',marginTop:'4px'},children:searchResults.map(record=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleSelectRecord(record),style:{padding:'8px 12px',cursor:'pointer',borderBottom:'1px solid #f0f0f0',fontSize:'12px'},onMouseEnter:e=>{e.target.style.background='#f5f5f5';},onMouseLeave:e=>{e.target.style.background='#fff';},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#002329'},children:record.Name||record.Id}),record.Id&&record.Id!==record.Name&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:'2px'},children:record.Id})]},record.Id))}),showDropdown&&searchResults.length===0&&searchTerm.trim().length>=2&&!isSearching&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,background:'#fff',border:'1px solid #d9d9d9',borderRadius:'4px',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',zIndex:10000,padding:'12px',fontSize:'12px',color:'#666',marginTop:'4px'},children:\"No records found\"})]});};export default LookupFieldSearch;","map":{"version":3,"names":["React","useState","useEffect","useRef","Search","X","apiClient","jsx","_jsx","jsxs","_jsxs","LookupFieldSearch","_ref","field","value","onChange","placeholder","searchTerm","setSearchTerm","searchResults","setSearchResults","isSearching","setIsSearching","showDropdown","setShowDropdown","selectedRecord","setSelectedRecord","error","setError","dropdownRef","inputRef","searchTimeoutRef","length","referenceTo","referenceObject","Array","isArray","loadRecordName","Id","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","recordId","objectType","response","post","exactMatch","data","success","records","Name","console","searchRecords","term","trim","_error$response","_error$response$data","handleSearchChange","e","clearTimeout","setTimeout","handleSelectRecord","record","handleClear","style","position","width","children","display","alignItems","ref","type","onFocus","className","paddingRight","right","pointerEvents","height","borderWidth","size","color","onClick","background","border","cursor","padding","title","fontSize","marginTop","borderRadius","top","left","boxShadow","zIndex","maxHeight","overflowY","map","borderBottom","onMouseEnter","onMouseLeave","fontWeight"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/components/ReportBuilder/FilterBuilder/LookupFieldSearch.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Search, X } from 'lucide-react';\nimport apiClient from '../../../config/api';\nimport './FilterBuilder.css';\n\nconst LookupFieldSearch = ({\n  field,\n  value,\n  onChange,\n  placeholder = 'Search...'\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [selectedRecord, setSelectedRecord] = useState(null);\n  const [error, setError] = useState(null);\n  const dropdownRef = useRef(null);\n  const inputRef = useRef(null);\n  const searchTimeoutRef = useRef(null);\n\n  // Load selected record name if value is an ID\n  useEffect(() => {\n    if (value && typeof value === 'string' && (value.length === 15 || value.length === 18) && field?.referenceTo) {\n      const referenceObject = Array.isArray(field.referenceTo) ? field.referenceTo[0] : field.referenceTo;\n      if (referenceObject) {\n        loadRecordName(value, referenceObject);\n      }\n    } else if (value && selectedRecord && selectedRecord.Id === value) {\n      // Value already matches selected record\n    } else {\n      setSelectedRecord(null);\n    }\n  }, [value, field]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target) &&\n          inputRef.current && !inputRef.current.contains(event.target)) {\n        setShowDropdown(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const loadRecordName = async (recordId, objectType) => {\n    if (!recordId || !objectType) return;\n    \n    try {\n      const response = await apiClient.post('/reports/lookup-search', {\n        objectType,\n        searchTerm: recordId,\n        exactMatch: true\n      });\n      \n      if (response.data.success && response.data.records && response.data.records.length > 0) {\n        setSelectedRecord(response.data.records[0]);\n        setSearchTerm(response.data.records[0].Name || recordId);\n      }\n    } catch (error) {\n      console.error('Error loading record name:', error);\n    }\n  };\n\n  const searchRecords = async (term) => {\n    if (!term || term.trim().length < 2) {\n      setSearchResults([]);\n      setShowDropdown(false);\n      return;\n    }\n\n    const referenceObject = Array.isArray(field?.referenceTo) ? field.referenceTo[0] : field?.referenceTo;\n    if (!referenceObject) {\n      setError('No reference object specified');\n      return;\n    }\n\n    setIsSearching(true);\n    setError(null);\n\n    try {\n      const response = await apiClient.post('/reports/lookup-search', {\n        objectType: referenceObject,\n        searchTerm: term.trim()\n      });\n\n      if (response.data.success) {\n        setSearchResults(response.data.records || []);\n        setShowDropdown(true);\n      } else {\n        setError(response.data.error || 'Search failed');\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error('Error searching records:', error);\n      setError(error.response?.data?.error || 'Failed to search records');\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  const handleSearchChange = (e) => {\n    const term = e.target.value;\n    setSearchTerm(term);\n    setSelectedRecord(null);\n    setShowDropdown(false);\n    setError(null);\n\n    // Clear previous timeout\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    // Debounce search\n    if (term.trim().length >= 2) {\n      searchTimeoutRef.current = setTimeout(() => {\n        searchRecords(term);\n      }, 300);\n    } else {\n      setSearchResults([]);\n      // If search term is cleared, clear the value\n      if (!term) {\n        onChange('');\n      }\n    }\n  };\n\n  const handleSelectRecord = (record) => {\n    setSelectedRecord(record);\n    setSearchTerm(record.Name || record.Id);\n    setShowDropdown(false);\n    onChange(record.Id); // Store the ID, not the name\n  };\n\n  const handleClear = () => {\n    setSearchTerm('');\n    setSelectedRecord(null);\n    setSearchResults([]);\n    setShowDropdown(false);\n    onChange('');\n  };\n\n  return (\n    <div style={{ position: 'relative', width: '100%' }}>\n      <div style={{ position: 'relative', display: 'flex', alignItems: 'center' }}>\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={searchTerm}\n          onChange={handleSearchChange}\n          onFocus={() => {\n            if (searchResults.length > 0) {\n              setShowDropdown(true);\n            } else if (searchTerm.trim().length >= 2) {\n              searchRecords(searchTerm);\n            }\n          }}\n          placeholder={placeholder}\n          className=\"filter-value-input\"\n          style={{ paddingRight: selectedRecord ? '60px' : '30px' }}\n        />\n        <div style={{ \n          position: 'absolute', \n          right: selectedRecord ? '30px' : '8px',\n          display: 'flex',\n          alignItems: 'center',\n          pointerEvents: 'none'\n        }}>\n          {isSearching ? (\n            <div className=\"spinner\" style={{ width: '14px', height: '14px', borderWidth: '2px' }} />\n          ) : (\n            <Search size={14} color=\"#666\" />\n          )}\n        </div>\n        {selectedRecord && (\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            style={{\n              position: 'absolute',\n              right: '4px',\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              padding: '4px',\n              display: 'flex',\n              alignItems: 'center'\n            }}\n            title=\"Clear selection\"\n          >\n            <X size={14} color=\"#666\" />\n          </button>\n        )}\n      </div>\n\n      {error && (\n        <div style={{ \n          fontSize: '11px', \n          color: '#d32f2f', \n          marginTop: '4px',\n          padding: '4px 8px',\n          background: '#ffebee',\n          borderRadius: '4px'\n        }}>\n          {error}\n        </div>\n      )}\n\n      {showDropdown && searchResults.length > 0 && (\n        <div\n          ref={dropdownRef}\n          style={{\n            position: 'absolute',\n            top: '100%',\n            left: 0,\n            right: 0,\n            background: '#fff',\n            border: '1px solid #d9d9d9',\n            borderRadius: '4px',\n            boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n            zIndex: 10000,\n            maxHeight: '200px',\n            overflowY: 'auto',\n            marginTop: '4px'\n          }}\n        >\n          {searchResults.map((record) => (\n            <div\n              key={record.Id}\n              onClick={() => handleSelectRecord(record)}\n              style={{\n                padding: '8px 12px',\n                cursor: 'pointer',\n                borderBottom: '1px solid #f0f0f0',\n                fontSize: '12px'\n              }}\n              onMouseEnter={(e) => {\n                e.target.style.background = '#f5f5f5';\n              }}\n              onMouseLeave={(e) => {\n                e.target.style.background = '#fff';\n              }}\n            >\n              <div style={{ fontWeight: '500', color: '#002329' }}>\n                {record.Name || record.Id}\n              </div>\n              {record.Id && record.Id !== record.Name && (\n                <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>\n                  {record.Id}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {showDropdown && searchResults.length === 0 && searchTerm.trim().length >= 2 && !isSearching && (\n        <div\n          style={{\n            position: 'absolute',\n            top: '100%',\n            left: 0,\n            right: 0,\n            background: '#fff',\n            border: '1px solid #d9d9d9',\n            borderRadius: '4px',\n            boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n            zIndex: 10000,\n            padding: '12px',\n            fontSize: '12px',\n            color: '#666',\n            marginTop: '4px'\n          }}\n        >\n          No records found\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LookupFieldSearch;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,MAAM,CAAEC,CAAC,KAAQ,cAAc,CACxC,MAAO,CAAAC,SAAS,KAAM,qBAAqB,CAC3C,MAAO,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7B,KAAM,CAAAC,iBAAiB,CAAGC,IAAA,EAKpB,IALqB,CACzBC,KAAK,CACLC,KAAK,CACLC,QAAQ,CACRC,WAAW,CAAG,WAChB,CAAC,CAAAJ,IAAA,CACC,KAAM,CAACK,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACkB,aAAa,CAAEC,gBAAgB,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACoB,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACsB,YAAY,CAAEC,eAAe,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACwB,cAAc,CAAEC,iBAAiB,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAAC0B,KAAK,CAAEC,QAAQ,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAA4B,WAAW,CAAG1B,MAAM,CAAC,IAAI,CAAC,CAChC,KAAM,CAAA2B,QAAQ,CAAG3B,MAAM,CAAC,IAAI,CAAC,CAC7B,KAAM,CAAA4B,gBAAgB,CAAG5B,MAAM,CAAC,IAAI,CAAC,CAErC;AACAD,SAAS,CAAC,IAAM,CACd,GAAIY,KAAK,EAAI,MAAO,CAAAA,KAAK,GAAK,QAAQ,GAAKA,KAAK,CAACkB,MAAM,GAAK,EAAE,EAAIlB,KAAK,CAACkB,MAAM,GAAK,EAAE,CAAC,EAAInB,KAAK,SAALA,KAAK,WAALA,KAAK,CAAEoB,WAAW,CAAE,CAC5G,KAAM,CAAAC,eAAe,CAAGC,KAAK,CAACC,OAAO,CAACvB,KAAK,CAACoB,WAAW,CAAC,CAAGpB,KAAK,CAACoB,WAAW,CAAC,CAAC,CAAC,CAAGpB,KAAK,CAACoB,WAAW,CACnG,GAAIC,eAAe,CAAE,CACnBG,cAAc,CAACvB,KAAK,CAAEoB,eAAe,CAAC,CACxC,CACF,CAAC,IAAM,IAAIpB,KAAK,EAAIW,cAAc,EAAIA,cAAc,CAACa,EAAE,GAAKxB,KAAK,CAAE,CACjE;AAAA,CACD,IAAM,CACLY,iBAAiB,CAAC,IAAI,CAAC,CACzB,CACF,CAAC,CAAE,CAACZ,KAAK,CAAED,KAAK,CAAC,CAAC,CAElB;AACAX,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqC,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIX,WAAW,CAACY,OAAO,EAAI,CAACZ,WAAW,CAACY,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,EAClEb,QAAQ,CAACW,OAAO,EAAI,CAACX,QAAQ,CAACW,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CAChEnB,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAEDoB,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAF,cAAc,CAAG,KAAAA,CAAOU,QAAQ,CAAEC,UAAU,GAAK,CACrD,GAAI,CAACD,QAAQ,EAAI,CAACC,UAAU,CAAE,OAE9B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA3C,SAAS,CAAC4C,IAAI,CAAC,wBAAwB,CAAE,CAC9DF,UAAU,CACV/B,UAAU,CAAE8B,QAAQ,CACpBI,UAAU,CAAE,IACd,CAAC,CAAC,CAEF,GAAIF,QAAQ,CAACG,IAAI,CAACC,OAAO,EAAIJ,QAAQ,CAACG,IAAI,CAACE,OAAO,EAAIL,QAAQ,CAACG,IAAI,CAACE,OAAO,CAACtB,MAAM,CAAG,CAAC,CAAE,CACtFN,iBAAiB,CAACuB,QAAQ,CAACG,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC,CAC3CpC,aAAa,CAAC+B,QAAQ,CAACG,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,EAAIR,QAAQ,CAAC,CAC1D,CACF,CAAE,MAAOpB,KAAK,CAAE,CACd6B,OAAO,CAAC7B,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CAAC,CAED,KAAM,CAAA8B,aAAa,CAAG,KAAO,CAAAC,IAAI,EAAK,CACpC,GAAI,CAACA,IAAI,EAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC3B,MAAM,CAAG,CAAC,CAAE,CACnCZ,gBAAgB,CAAC,EAAE,CAAC,CACpBI,eAAe,CAAC,KAAK,CAAC,CACtB,OACF,CAEA,KAAM,CAAAU,eAAe,CAAGC,KAAK,CAACC,OAAO,CAACvB,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEoB,WAAW,CAAC,CAAGpB,KAAK,CAACoB,WAAW,CAAC,CAAC,CAAC,CAAGpB,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEoB,WAAW,CACrG,GAAI,CAACC,eAAe,CAAE,CACpBN,QAAQ,CAAC,+BAA+B,CAAC,CACzC,OACF,CAEAN,cAAc,CAAC,IAAI,CAAC,CACpBM,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CACF,KAAM,CAAAqB,QAAQ,CAAG,KAAM,CAAA3C,SAAS,CAAC4C,IAAI,CAAC,wBAAwB,CAAE,CAC9DF,UAAU,CAAEd,eAAe,CAC3BjB,UAAU,CAAEyC,IAAI,CAACC,IAAI,CAAC,CACxB,CAAC,CAAC,CAEF,GAAIV,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAE,CACzBjC,gBAAgB,CAAC6B,QAAQ,CAACG,IAAI,CAACE,OAAO,EAAI,EAAE,CAAC,CAC7C9B,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,IAAM,CACLI,QAAQ,CAACqB,QAAQ,CAACG,IAAI,CAACzB,KAAK,EAAI,eAAe,CAAC,CAChDP,gBAAgB,CAAC,EAAE,CAAC,CACtB,CACF,CAAE,MAAOO,KAAK,CAAE,KAAAiC,eAAA,CAAAC,oBAAA,CACdL,OAAO,CAAC7B,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDC,QAAQ,CAAC,EAAAgC,eAAA,CAAAjC,KAAK,CAACsB,QAAQ,UAAAW,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBR,IAAI,UAAAS,oBAAA,iBAApBA,oBAAA,CAAsBlC,KAAK,GAAI,0BAA0B,CAAC,CACnEP,gBAAgB,CAAC,EAAE,CAAC,CACtB,CAAC,OAAS,CACRE,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAwC,kBAAkB,CAAIC,CAAC,EAAK,CAChC,KAAM,CAAAL,IAAI,CAAGK,CAAC,CAACpB,MAAM,CAAC7B,KAAK,CAC3BI,aAAa,CAACwC,IAAI,CAAC,CACnBhC,iBAAiB,CAAC,IAAI,CAAC,CACvBF,eAAe,CAAC,KAAK,CAAC,CACtBI,QAAQ,CAAC,IAAI,CAAC,CAEd;AACA,GAAIG,gBAAgB,CAACU,OAAO,CAAE,CAC5BuB,YAAY,CAACjC,gBAAgB,CAACU,OAAO,CAAC,CACxC,CAEA;AACA,GAAIiB,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC3B,MAAM,EAAI,CAAC,CAAE,CAC3BD,gBAAgB,CAACU,OAAO,CAAGwB,UAAU,CAAC,IAAM,CAC1CR,aAAa,CAACC,IAAI,CAAC,CACrB,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,IAAM,CACLtC,gBAAgB,CAAC,EAAE,CAAC,CACpB;AACA,GAAI,CAACsC,IAAI,CAAE,CACT3C,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CACF,CAAC,CAED,KAAM,CAAAmD,kBAAkB,CAAIC,MAAM,EAAK,CACrCzC,iBAAiB,CAACyC,MAAM,CAAC,CACzBjD,aAAa,CAACiD,MAAM,CAACZ,IAAI,EAAIY,MAAM,CAAC7B,EAAE,CAAC,CACvCd,eAAe,CAAC,KAAK,CAAC,CACtBT,QAAQ,CAACoD,MAAM,CAAC7B,EAAE,CAAC,CAAE;AACvB,CAAC,CAED,KAAM,CAAA8B,WAAW,CAAGA,CAAA,GAAM,CACxBlD,aAAa,CAAC,EAAE,CAAC,CACjBQ,iBAAiB,CAAC,IAAI,CAAC,CACvBN,gBAAgB,CAAC,EAAE,CAAC,CACpBI,eAAe,CAAC,KAAK,CAAC,CACtBT,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAED,mBACEL,KAAA,QAAK2D,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,eAClD9D,KAAA,QAAK2D,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAF,QAAA,eAC1EhE,IAAA,UACEmE,GAAG,CAAE7C,QAAS,CACd8C,IAAI,CAAC,MAAM,CACX9D,KAAK,CAAEG,UAAW,CAClBF,QAAQ,CAAE+C,kBAAmB,CAC7Be,OAAO,CAAEA,CAAA,GAAM,CACb,GAAI1D,aAAa,CAACa,MAAM,CAAG,CAAC,CAAE,CAC5BR,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,IAAM,IAAIP,UAAU,CAAC0C,IAAI,CAAC,CAAC,CAAC3B,MAAM,EAAI,CAAC,CAAE,CACxCyB,aAAa,CAACxC,UAAU,CAAC,CAC3B,CACF,CAAE,CACFD,WAAW,CAAEA,WAAY,CACzB8D,SAAS,CAAC,oBAAoB,CAC9BT,KAAK,CAAE,CAAEU,YAAY,CAAEtD,cAAc,CAAG,MAAM,CAAG,MAAO,CAAE,CAC3D,CAAC,cACFjB,IAAA,QAAK6D,KAAK,CAAE,CACVC,QAAQ,CAAE,UAAU,CACpBU,KAAK,CAAEvD,cAAc,CAAG,MAAM,CAAG,KAAK,CACtCgD,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBO,aAAa,CAAE,MACjB,CAAE,CAAAT,QAAA,CACCnD,WAAW,cACVb,IAAA,QAAKsE,SAAS,CAAC,SAAS,CAACT,KAAK,CAAE,CAAEE,KAAK,CAAE,MAAM,CAAEW,MAAM,CAAE,MAAM,CAAEC,WAAW,CAAE,KAAM,CAAE,CAAE,CAAC,cAEzF3E,IAAA,CAACJ,MAAM,EAACgF,IAAI,CAAE,EAAG,CAACC,KAAK,CAAC,MAAM,CAAE,CACjC,CACE,CAAC,CACL5D,cAAc,eACbjB,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACbU,OAAO,CAAElB,WAAY,CACrBC,KAAK,CAAE,CACLC,QAAQ,CAAE,UAAU,CACpBU,KAAK,CAAE,KAAK,CACZO,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,MAAM,CACdC,MAAM,CAAE,SAAS,CACjBC,OAAO,CAAE,KAAK,CACdjB,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QACd,CAAE,CACFiB,KAAK,CAAC,iBAAiB,CAAAnB,QAAA,cAEvBhE,IAAA,CAACH,CAAC,EAAC+E,IAAI,CAAE,EAAG,CAACC,KAAK,CAAC,MAAM,CAAE,CAAC,CACtB,CACT,EACE,CAAC,CAEL1D,KAAK,eACJnB,IAAA,QAAK6D,KAAK,CAAE,CACVuB,QAAQ,CAAE,MAAM,CAChBP,KAAK,CAAE,SAAS,CAChBQ,SAAS,CAAE,KAAK,CAChBH,OAAO,CAAE,SAAS,CAClBH,UAAU,CAAE,SAAS,CACrBO,YAAY,CAAE,KAChB,CAAE,CAAAtB,QAAA,CACC7C,KAAK,CACH,CACN,CAEAJ,YAAY,EAAIJ,aAAa,CAACa,MAAM,CAAG,CAAC,eACvCxB,IAAA,QACEmE,GAAG,CAAE9C,WAAY,CACjBwC,KAAK,CAAE,CACLC,QAAQ,CAAE,UAAU,CACpByB,GAAG,CAAE,MAAM,CACXC,IAAI,CAAE,CAAC,CACPhB,KAAK,CAAE,CAAC,CACRO,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,mBAAmB,CAC3BM,YAAY,CAAE,KAAK,CACnBG,SAAS,CAAE,6BAA6B,CACxCC,MAAM,CAAE,KAAK,CACbC,SAAS,CAAE,OAAO,CAClBC,SAAS,CAAE,MAAM,CACjBP,SAAS,CAAE,KACb,CAAE,CAAArB,QAAA,CAEDrD,aAAa,CAACkF,GAAG,CAAElC,MAAM,eACxBzD,KAAA,QAEE4E,OAAO,CAAEA,CAAA,GAAMpB,kBAAkB,CAACC,MAAM,CAAE,CAC1CE,KAAK,CAAE,CACLqB,OAAO,CAAE,UAAU,CACnBD,MAAM,CAAE,SAAS,CACjBa,YAAY,CAAE,mBAAmB,CACjCV,QAAQ,CAAE,MACZ,CAAE,CACFW,YAAY,CAAGxC,CAAC,EAAK,CACnBA,CAAC,CAACpB,MAAM,CAAC0B,KAAK,CAACkB,UAAU,CAAG,SAAS,CACvC,CAAE,CACFiB,YAAY,CAAGzC,CAAC,EAAK,CACnBA,CAAC,CAACpB,MAAM,CAAC0B,KAAK,CAACkB,UAAU,CAAG,MAAM,CACpC,CAAE,CAAAf,QAAA,eAEFhE,IAAA,QAAK6D,KAAK,CAAE,CAAEoC,UAAU,CAAE,KAAK,CAAEpB,KAAK,CAAE,SAAU,CAAE,CAAAb,QAAA,CACjDL,MAAM,CAACZ,IAAI,EAAIY,MAAM,CAAC7B,EAAE,CACtB,CAAC,CACL6B,MAAM,CAAC7B,EAAE,EAAI6B,MAAM,CAAC7B,EAAE,GAAK6B,MAAM,CAACZ,IAAI,eACrC/C,IAAA,QAAK6D,KAAK,CAAE,CAAEuB,QAAQ,CAAE,MAAM,CAAEP,KAAK,CAAE,MAAM,CAAEQ,SAAS,CAAE,KAAM,CAAE,CAAArB,QAAA,CAC/DL,MAAM,CAAC7B,EAAE,CACP,CACN,GAtBI6B,MAAM,CAAC7B,EAuBT,CACN,CAAC,CACC,CACN,CAEAf,YAAY,EAAIJ,aAAa,CAACa,MAAM,GAAK,CAAC,EAAIf,UAAU,CAAC0C,IAAI,CAAC,CAAC,CAAC3B,MAAM,EAAI,CAAC,EAAI,CAACX,WAAW,eAC1Fb,IAAA,QACE6D,KAAK,CAAE,CACLC,QAAQ,CAAE,UAAU,CACpByB,GAAG,CAAE,MAAM,CACXC,IAAI,CAAE,CAAC,CACPhB,KAAK,CAAE,CAAC,CACRO,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,mBAAmB,CAC3BM,YAAY,CAAE,KAAK,CACnBG,SAAS,CAAE,6BAA6B,CACxCC,MAAM,CAAE,KAAK,CACbR,OAAO,CAAE,MAAM,CACfE,QAAQ,CAAE,MAAM,CAChBP,KAAK,CAAE,MAAM,CACbQ,SAAS,CAAE,KACb,CAAE,CAAArB,QAAA,CACH,kBAED,CAAK,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7D,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}