{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Cursor/ProjectSetup/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/Sidebar';import ClientToolAccountValidationWarning from'../components/ClientToolAccountValidationWarning';import ClientToolAccountAnalytics from'../components/ClientToolAccountAnalytics';import{Menu,LogOut,Plus,Search,Check,X,RefreshCw,Wrench,Link as LinkIcon,Send,Edit,Loader,Download,Upload,FileText,AlertTriangle,BarChart3}from'lucide-react';import apiClient from'../config/api';import axios from'axios';import toast from'react-hot-toast';import*as XLSX from'xlsx';import BookmarkButton from'../components/BookmarkButton';import{detectDuplicateMappings,detectExistingMapping,getAllConflicts}from'../utils/clientToolAccountConflictDetection';import{checkAccountAvailability}from'../utils/clientToolAccountAvailability';import{checkAccountStatus}from'../utils/clientToolAccountStatusCheck';import{validateBulkAssignment}from'../utils/clientToolAccountValidation';import'../styles/ClientToolAccount.css';import'../styles/Sidebar.css';import'../styles/GlobalHeader.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ClientToolAccount=()=>{const{user,logout}=useAuth();const[sidebarOpen,setSidebarOpen]=useState(true);const[loading,setLoading]=useState(true);const[contributorProjects,setContributorProjects]=useState([]);const[filteredContributorProjects,setFilteredContributorProjects]=useState([]);const[contributorProjectsSearchTerm,setContributorProjectsSearchTerm]=useState('');const[hasMoreProjects,setHasMoreProjects]=useState(false);const[loadingMore,setLoadingMore]=useState(false);const infiniteScrollRef=useRef(null);// Ref for infinite scroll trigger\nconst tableContainerRef=useRef(null);// Ref for table container\nconst contributorProjectsRef=useRef([]);// Ref to track current projects for offset calculation\nconst hasMoreProjectsRef=useRef(false);// Ref to track hasMoreProjects state\nconst loadingMoreRef=useRef(false);// Ref to track loadingMore state\nconst contributorProjectsSearchTermRef=useRef('');// Ref to track search term\nconst[showCreateForm,setShowCreateForm]=useState(false);const[isUpdateMode,setIsUpdateMode]=useState(false);const[selectedAccountId,setSelectedAccountId]=useState(null);const[accountSearchResultsForUpdate,setAccountSearchResultsForUpdate]=useState([]);const[searchingAccountForUpdate,setSearchingAccountForUpdate]=useState(false);const[selectedAccounts,setSelectedAccounts]=useState({});// { projectId: accountId }\nconst[bulkSelectedProjects,setBulkSelectedProjects]=useState([]);const[clientToolNamePicklist,setClientToolNamePicklist]=useState([]);const[searchResultsPerProject,setSearchResultsPerProject]=useState({});// { projectId: [results] }\nconst[searchTermsPerProject,setSearchTermsPerProject]=useState({});// { projectId: searchTerm }\nconst[searchingPerProject,setSearchingPerProject]=useState({});// { projectId: boolean }\nconst[creating,setCreating]=useState(false);const[updating,setUpdating]=useState(false);const[importing,setImporting]=useState(false);const fileInputRef=useRef(null);const[activeTab,setActiveTab]=useState('management');// 'management', 'analytics'\n// Validation states\nconst[validationWarnings,setValidationWarnings]=useState({});// { projectId: [warnings] }\nconst[validationConflicts,setValidationConflicts]=useState({});// { projectId: [conflicts] }\nconst[accountStatusChecks,setAccountStatusChecks]=useState({});// { accountId: status }\nconst[formData,setFormData]=useState({clientToolAccountName:'',contributor:'',contributorId:'',contributorName:'',clientToolUserId:'',account:'',accountId:'',accountName:'',otpLimitExceeded:false,deactivated:false,lastChangedDate:'',lastChangedTime:'',clientToolName:'',clientToolEmail:'',verified:false});// Search states for Contributor and Account\nconst[contributorSearchTerm,setContributorSearchTerm]=useState('');const[contributorSearchResults,setContributorSearchResults]=useState([]);const[contributorSearching,setContributorSearching]=useState(false);const[accountSearchTerm,setAccountSearchTerm]=useState('');const[accountSearchResults,setAccountSearchResults]=useState([]);const[accountSearching,setAccountSearching]=useState(false);useEffect(()=>{fetchContributorProjects();fetchClientToolNamePicklist();},[]);// Filter is now done server-side, so we just use the projects as-is\n// But we still need to update when search term changes to trigger a new fetch\nuseEffect(()=>{// When search term changes, reset and fetch with new search (don't append)\nif(!loading){setContributorProjects([]);// Clear existing projects\nfetchContributorProjects(false);// Fetch from beginning\n}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[contributorProjectsSearchTerm]);// Update filtered list when projects change (no client-side filtering needed)\nuseEffect(()=>{setFilteredContributorProjects(contributorProjects);contributorProjectsRef.current=contributorProjects;// Keep ref in sync\n},[contributorProjects]);// Keep refs in sync with state\nuseEffect(()=>{hasMoreProjectsRef.current=hasMoreProjects;},[hasMoreProjects]);useEffect(()=>{loadingMoreRef.current=loadingMore;},[loadingMore]);useEffect(()=>{contributorProjectsSearchTermRef.current=contributorProjectsSearchTerm;},[contributorProjectsSearchTerm]);const fetchContributorProjects=useCallback(async function(){let append=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(append){setLoadingMore(true);}else{setLoading(true);// Reset state when refreshing\nsetHasMoreProjects(false);}try{// Use ref to get current length when appending (avoids stale closure)\nconst offset=append?contributorProjectsRef.current.length:0;// Build query parameters with search filter\nconst params=new URLSearchParams({limit:'1000',offset:offset.toString()});// Add search term if provided\nif(contributorProjectsSearchTerm&&contributorProjectsSearchTerm.trim()!==''){params.append('searchTerm',contributorProjectsSearchTerm.trim());}const response=await apiClient.get(\"/client-tool-account/contributor-projects?\".concat(params.toString()));if(response.data.success){if(append){// Append new records to existing ones\nsetContributorProjects(prev=>{const newProjects=[...prev,...(response.data.projects||[])];return newProjects;});}else{// Replace existing records\nsetContributorProjects(response.data.projects||[]);}setHasMoreProjects(response.data.hasMore||false);}}catch(error){toast.error('Failed to fetch contributor projects');}finally{if(append){setLoadingMore(false);}else{setLoading(false);}}},[contributorProjectsSearchTerm]);// Refresh handler that ensures proper reset\nconst handleRefresh=useCallback(e=>{e.preventDefault();e.stopPropagation();// Clear existing projects\nsetContributorProjects([]);// Reset refs\ncontributorProjectsRef.current=[];hasMoreProjectsRef.current=false;setHasMoreProjects(false);// Fetch fresh data\nfetchContributorProjects(false);},[fetchContributorProjects]);// Function to load more projects (extracted for reuse)\nconst loadMoreProjects=useCallback(()=>{// Use refs to check current state (avoid stale closures)\nconst currentHasMore=hasMoreProjectsRef.current;const currentLoading=loadingMoreRef.current;if(currentLoading||!currentHasMore){return;}const currentOffset=contributorProjectsRef.current.length;// Prevent multiple simultaneous loads\nif(loadingMoreRef.current){return;}// Call fetch directly to avoid callback dependency issues\nloadingMoreRef.current=true;setLoadingMore(true);const params=new URLSearchParams({limit:'1000',offset:currentOffset.toString()});// Get current search term from ref\nconst currentSearchTerm=contributorProjectsSearchTermRef.current;if(currentSearchTerm&&currentSearchTerm.trim()!==''){params.append('searchTerm',currentSearchTerm.trim());}apiClient.get(\"/client-tool-account/contributor-projects?\".concat(params.toString())).then(response=>{if(response.data.success){setContributorProjects(prev=>{const newProjects=[...prev,...(response.data.projects||[])];return newProjects;});setHasMoreProjects(response.data.hasMore||false);hasMoreProjectsRef.current=response.data.hasMore||false;}}).catch(error=>{toast.error('Failed to fetch more contributor projects');}).finally(()=>{loadingMoreRef.current=false;setLoadingMore(false);});},[]);// Set up IntersectionObserver for infinite scroll\nuseEffect(()=>{// Wait for element to be available in DOM\nconst setupObserver=()=>{const element=infiniteScrollRef.current;const tableContainer=tableContainerRef.current;if(!element||!hasMoreProjects||loadingMore){return null;}// If table container is not available yet, return null to retry\nif(!tableContainer){return null;}let loadTriggered=false;// Prevent multiple loads\nconst handleIntersection=entries=>{const entry=entries[0];if(entry.isIntersecting&&!loadTriggered){loadTriggered=true;loadMoreProjects();// Reset flag after a delay to allow next load\nsetTimeout(()=>{loadTriggered=false;},2000);}};// Also listen to scroll events as a fallback\nconst handleScroll=()=>{if(loadTriggered||loadingMoreRef.current||!hasMoreProjectsRef.current){return;}if(!element)return;if(tableContainer){const containerRect=tableContainer.getBoundingClientRect();const elementRect=element.getBoundingClientRect();const isVisible=elementRect.top<=containerRect.bottom+200;if(isVisible){loadTriggered=true;loadMoreProjects();setTimeout(()=>{loadTriggered=false;},2000);}}else{// Fallback to window scroll\nconst rect=element.getBoundingClientRect();const isVisible=rect.top<=window.innerHeight+200;if(isVisible){loadTriggered=true;loadMoreProjects();setTimeout(()=>{loadTriggered=false;},2000);}}};const rootElement=tableContainer||null;const observer=new IntersectionObserver(handleIntersection,{root:rootElement,rootMargin:'200px',threshold:[0,0.1,0.5,1.0]// Multiple thresholds for better detection\n});observer.observe(element);// Add scroll listener as fallback - use table container if available, otherwise window\nconst scrollTarget=tableContainer||window;scrollTarget.addEventListener('scroll',handleScroll,{passive:true});// Check if element is already visible (might trigger immediately)\nconst checkVisibility=()=>{if(!element)return;if(tableContainer){const containerRect=tableContainer.getBoundingClientRect();const elementRect=element.getBoundingClientRect();const isVisible=elementRect.top<containerRect.bottom+200;if(isVisible&&hasMoreProjectsRef.current&&!loadingMoreRef.current&&!loadTriggered){loadTriggered=true;loadMoreProjects();setTimeout(()=>{loadTriggered=false;},2000);}}else{// Fallback to window\nconst rect=element.getBoundingClientRect();const isVisible=rect.top<window.innerHeight+200;if(isVisible&&hasMoreProjectsRef.current&&!loadingMoreRef.current&&!loadTriggered){loadTriggered=true;loadMoreProjects();setTimeout(()=>{loadTriggered=false;},2000);}}};// Check visibility after a short delay to ensure DOM is ready\nconst visibilityTimeout=setTimeout(checkVisibility,300);return()=>{observer.disconnect();const scrollTarget=tableContainer||window;scrollTarget.removeEventListener('scroll',handleScroll);clearTimeout(visibilityTimeout);};};// Try to set up immediately\nlet cleanup=setupObserver();// If element not available, retry after a short delay\nif(!cleanup){const retryTimeout=setTimeout(()=>{cleanup=setupObserver();},500);return()=>{clearTimeout(retryTimeout);if(cleanup)cleanup();};}return cleanup;},[hasMoreProjects,loadingMore,loadMoreProjects,filteredContributorProjects.length]);const fetchClientToolNamePicklist=async()=>{try{const response=await apiClient.get('/client-tool-account/picklist-values');if(response.data.success){setClientToolNamePicklist(response.data.values||[]);}}catch(error){// Silently fail - picklist values are optional\n}};const searchClientToolAccounts=async function(searchTerm){let projectId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!searchTerm||searchTerm.trim().length<2){if(projectId){setSearchResultsPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:[]}));}return;}if(projectId){setSearchingPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:true}));}try{const response=await apiClient.get(\"/client-tool-account/search?term=\".concat(encodeURIComponent(searchTerm)));if(response.data.success){if(projectId){setSearchResultsPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:response.data.accounts||[]}));}}}catch(error){toast.error('Failed to search client tool accounts');}finally{if(projectId){setSearchingPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:false}));}}};// Debounce timer refs\nconst projectSearchDebounceTimerRef=useRef({});const handleProjectSearchChange=(projectId,value)=>{setSearchTermsPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:value}));// Clear existing timer for this project\nif(projectSearchDebounceTimerRef.current[projectId]){clearTimeout(projectSearchDebounceTimerRef.current[projectId]);}// Set new timer to search after user stops typing (500ms delay)\nif(value.trim().length>=2){projectSearchDebounceTimerRef.current[projectId]=setTimeout(()=>{searchClientToolAccounts(value,projectId);},500);}else{setSearchResultsPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:[]}));}};// Cleanup timers on unmount\nuseEffect(()=>{return()=>{Object.values(projectSearchDebounceTimerRef.current).forEach(timer=>{if(timer)clearTimeout(timer);});};},[]);// Search for existing client tool accounts when in update mode\nconst searchClientToolAccountsForUpdate=async searchTerm=>{if(!searchTerm||searchTerm.trim().length<2){setAccountSearchResultsForUpdate([]);return;}setSearchingAccountForUpdate(true);try{const response=await apiClient.get(\"/client-tool-account/search?term=\".concat(encodeURIComponent(searchTerm)));if(response.data.success){setAccountSearchResultsForUpdate(response.data.accounts||[]);}}catch(error){setAccountSearchResultsForUpdate([]);}finally{setSearchingAccountForUpdate(false);}};// Fetch account details and populate form\nconst fetchAccountDetails=async accountId=>{try{const response=await apiClient.get(\"/client-tool-account/\".concat(accountId));if(response.data.success&&response.data.account){const account=response.data.account;// Parse Last_Changed_At__c if it exists\nlet lastChangedDate='';let lastChangedTime='';if(account.lastChangedAt){const dateObj=new Date(account.lastChangedAt);lastChangedDate=dateObj.toISOString().split('T')[0];const timeStr=dateObj.toTimeString().split(' ')[0];lastChangedTime=timeStr.substring(0,5);// HH:MM format\n}setFormData({clientToolAccountName:account.name||account.accountName||'',contributor:account.contributor||account.contributorId||'',contributorId:account.contributorId||account.contributor||'',contributorName:account.contributorName||'',clientToolUserId:account.clientToolUserId||'',account:account.account||account.accountId||'',accountId:account.accountId||account.account||'',accountName:account.accountName||account.name||'',otpLimitExceeded:account.otpLimitExceeded||false,deactivated:account.deactivated||false,lastChangedDate:lastChangedDate,lastChangedTime:lastChangedTime,clientToolName:account.clientToolName||'',clientToolEmail:account.clientToolEmail||'',verified:account.verified||false});// Set search terms for display\nif(account.contributorName){setContributorSearchTerm(account.contributorName);}if(account.accountName||account.name){setAccountSearchTerm(account.accountName||account.name);}}}catch(error){toast.error('Failed to fetch account details');}};// Handle Client Tool Account Name change in update mode - trigger search\nconst handleClientToolAccountNameChangeInUpdateMode=value=>{setFormData(_objectSpread(_objectSpread({},formData),{},{clientToolAccountName:value}));// If in update mode and no account selected yet, search for accounts by name\nif(isUpdateMode&&!selectedAccountId&&value&&value.trim().length>=2){// Debounce the search\nif(updateAccountSearchDebounceRef.current){clearTimeout(updateAccountSearchDebounceRef.current);}updateAccountSearchDebounceRef.current=setTimeout(()=>{searchClientToolAccountsForUpdate(value);},500);}else if(isUpdateMode&&!selectedAccountId&&(!value||value.trim().length<2)){// Clear search results if value is too short\nsetAccountSearchResultsForUpdate([]);}};const handleCreateClientToolAccount=async e=>{e.preventDefault();e.stopPropagation();if(isUpdateMode){// Handle update\nif(!selectedAccountId){toast.error('Please select a Client Tool Account to update');return;}setUpdating(true);try{const submitData={clientToolAccountName:formData.clientToolAccountName,contributor:formData.contributorId||formData.contributor,clientToolUserId:formData.clientToolUserId,account:formData.accountId||formData.account,accountName:formData.accountName||formData.clientToolAccountName,otpLimitExceeded:formData.otpLimitExceeded,deactivated:formData.deactivated,lastChangedDate:formData.lastChangedDate,lastChangedTime:formData.lastChangedTime,clientToolName:formData.clientToolName,clientToolEmail:formData.clientToolEmail,verified:formData.verified};const response=await apiClient.put(\"/client-tool-account/\".concat(selectedAccountId),submitData);if(response.data.success){toast.success('Client Tool Account updated successfully');setShowCreateForm(false);setIsUpdateMode(false);setSelectedAccountId(null);resetForm();fetchContributorProjects();}}catch(error){var _error$response,_error$response$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to update client tool account';toast.error(errorMessage);}finally{setUpdating(false);}}else{// Handle create\nsetCreating(true);try{const submitData={clientToolAccountName:formData.clientToolAccountName,contributor:formData.contributorId||formData.contributor,clientToolUserId:formData.clientToolUserId,account:formData.accountId||formData.account,accountName:formData.accountName||formData.clientToolAccountName,otpLimitExceeded:formData.otpLimitExceeded,deactivated:formData.deactivated,lastChangedDate:formData.lastChangedDate,lastChangedTime:formData.lastChangedTime,clientToolName:formData.clientToolName,clientToolEmail:formData.clientToolEmail,verified:formData.verified};const response=await apiClient.post('/client-tool-account/create',submitData);if(response.data.success){toast.success('Client Tool Account created successfully');setShowCreateForm(false);resetForm();fetchContributorProjects();}}catch(error){var _error$response2,_error$response2$data;const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to create client tool account';toast.error(errorMessage);}finally{setCreating(false);}}};const handleUpdateMapping=async(projectId,accountId)=>{setUpdating(true);try{const response=await apiClient.post('/client-tool-account/update-mapping',{projectId,accountId});if(response.data.success){toast.success('Client Tool Account mapping updated successfully');fetchContributorProjects();setSelectedAccounts(prev=>{const updated=_objectSpread({},prev);delete updated[projectId];return updated;});// Clear search results for this project\nsetSearchResultsPerProject(prev=>{const updated=_objectSpread({},prev);delete updated[projectId];return updated;});setSearchTermsPerProject(prev=>{const updated=_objectSpread({},prev);delete updated[projectId];return updated;});}}catch(error){var _error$response3,_error$response3$data;const errorMessage=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to update mapping';toast.error(errorMessage);}finally{setUpdating(false);}};const handleExportToExcel=()=>{if(filteredContributorProjects.length===0){toast.error('No data to export');return;}try{// Prepare data for export - must include required columns for import\nconst exportData=filteredContributorProjects.map(project=>({'Contributor Project Name':project.contributorProjectName||'N/A','Client Tool Account Name':project.clientToolAccountUsedName||project.clientToolAccountUsed||'Not Set','Project':project.project||'N/A'}));// Create workbook and worksheet\nconst ws=XLSX.utils.json_to_sheet(exportData);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,'Client Tool Accounts');// Generate filename with timestamp\nconst filename=\"Client_Tool_Accounts_\".concat(new Date().toISOString().split('T')[0],\".xlsx\");// Write and download\nXLSX.writeFile(wb,filename);toast.success(\"Exported \".concat(exportData.length,\" records to Excel\"));}catch(error){console.error('Error exporting to Excel:',error);toast.error('Failed to export to Excel');}};const handleDownloadTemplate=()=>{try{// Create template with headers and example row\nconst templateData=[{'Contributor Project Name':'Example Contributor Project','Project':'Example Project','Client Tool Account Name':'Example Client Tool Account','Client Tool Name':'Tool Name','Client Tool Email':'email@example.com','Client Tool User ID':'user123','Contributor':'Contributor Name','Account':'Account Name','OTP Limit Exceeded':false,'Deactivated':false,'Verified':false}];const ws=XLSX.utils.json_to_sheet(templateData);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,'Template');// Generate filename\nconst filename=\"Client_Tool_Account_Import_Template.xlsx\";// Write and download\nXLSX.writeFile(wb,filename);toast.success('Template downloaded successfully');}catch(error){console.error('Error downloading template:',error);toast.error('Failed to download template');}};const handleImportFile=async event=>{const file=event.target.files[0];if(!file)return;// Validate file type\nconst validExtensions=['.xlsx','.xls','.csv'];const fileExtension='.'+file.name.split('.').pop().toLowerCase();if(!validExtensions.includes(fileExtension)){toast.error('Please upload a valid Excel file (.xlsx, .xls) or CSV file');return;}setImporting(true);// Helper function to handle file processing errors\nconst handleFileProcessingError=error=>{console.error('Error processing file:',error);let errorMessage='Error processing file. Please check the file format.';// Provide more specific error messages\nif(error.message){if(error.message.includes('Cannot read')||error.message.includes('Unexpected')){errorMessage='The file format is invalid or corrupted. Please ensure it is a valid Excel (.xlsx, .xls) or CSV file.';}else if(error.message.includes('timeout')){errorMessage='File processing timed out. The file may be too large.';}else{errorMessage=\"Error processing file: \".concat(error.message);}}toast.error(errorMessage);setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}};// Helper function to process import data\nconst processImportData=async jsonData=>{if(jsonData.length===0){toast.error('The file is empty or has no data rows');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}// Validate that we have valid data structure\nif(!Array.isArray(jsonData)||jsonData.length===0){toast.error('The file does not contain valid data. Please check the file format.');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}// Validate required columns - match server-side logic\nconst requiredColumns=[{variants:['Contributor Project Name','ContributorProjectName','Contributor Project'],label:'Contributor Project Name'},{variants:['Client Tool Account Name','ClientToolAccountName','Account Name'],label:'Client Tool Account Name'}];const firstRow=jsonData[0];// Check if first row is valid\nif(!firstRow||typeof firstRow!=='object'){toast.error('The file format is invalid. Please ensure the first row contains column headers.');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}const fileKeys=Object.keys(firstRow);if(fileKeys.length===0){toast.error('The file does not contain any columns. Please check the file format.');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}// Helper function to normalize column names (same as server-side)\nconst normalizeColumnName=name=>{if(typeof name!=='string')return'';return name.toLowerCase().replace(/\\s+/g,'').trim();};// Check which columns are missing\nconst missingColumns=[];requiredColumns.forEach(column=>{const found=fileKeys.some(fileKey=>{const normalizedFileKey=normalizeColumnName(fileKey);return column.variants.some(variant=>normalizedFileKey===normalizeColumnName(variant));});if(!found){missingColumns.push(column.label);}});if(missingColumns.length>0){toast.error(\"File must contain \\\"\".concat(missingColumns.join('\" and \"'),\"\\\" columns. Found columns: \").concat(fileKeys.join(', ')));setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}// Process import - REWRITTEN FOR PERFORMANCE\ntry{console.log(\"[Import] Starting import of \".concat(jsonData.length,\" records\"));// Create axios instance with extended timeout\nconst bulkImportClient=axios.create({baseURL:apiClient.defaults.baseURL,headers:_objectSpread({'Content-Type':'application/json'},localStorage.getItem('token')?{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}:{}),timeout:600000// 10 minutes\n});// Send all records at once - server will process in batches\nconst response=await bulkImportClient.post('/client-tool-account/bulk-import',{records:jsonData,batchSize:50// Process 50 records per batch on server\n});if(response.data&&response.data.success){const importedCount=response.data.importedCount||0;const errorCount=response.data.errorCount||0;if(importedCount>0){toast.success(\"Successfully imported \".concat(importedCount,\" record(s)\"));}if(errorCount>0){toast.error(\"\".concat(errorCount,\" record(s) failed to import\"));if(response.data.errors&&response.data.errors.length>0){console.error('Import errors:',response.data.errors);}}// Refresh the table\nfetchContributorProjects();}else{var _response$data;toast.error(((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.error)||'Failed to import records');}}catch(apiError){console.error('Error calling bulk-import API:',apiError);let errorMessage='Failed to import records. Please try again.';if(apiError.response){var _apiError$response$da,_apiError$response$da2;errorMessage=((_apiError$response$da=apiError.response.data)===null||_apiError$response$da===void 0?void 0:_apiError$response$da.error)||((_apiError$response$da2=apiError.response.data)===null||_apiError$response$da2===void 0?void 0:_apiError$response$da2.message)||errorMessage;}else if(apiError.message){if(apiError.message.includes('timeout')||apiError.message.includes('504')){errorMessage='Import timed out. The file may be too large. Please try with fewer records or contact support.';}else{errorMessage=apiError.message;}}toast.error(errorMessage);}finally{setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}}};try{const reader=new FileReader();// Use appropriate read method based on file type\nif(fileExtension==='.csv'){// For CSV files, read as text\nreader.onload=async e=>{try{const text=e.target.result;if(!text||text.trim().length===0){toast.error('The CSV file is empty');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}// Use XLSX to parse CSV\nconst workbook=XLSX.read(text,{type:'string',sheetStubs:true});if(!workbook.SheetNames||workbook.SheetNames.length===0){toast.error('The CSV file appears to be empty or invalid');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}const worksheet=workbook.Sheets[workbook.SheetNames[0]];if(!worksheet){toast.error('The CSV file does not contain valid data');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}const jsonData=XLSX.utils.sheet_to_json(worksheet,{defval:''});await processImportData(jsonData);}catch(error){handleFileProcessingError(error);}};reader.readAsText(file);}else{// For Excel files, read as array buffer\nreader.onload=async e=>{try{const data=new Uint8Array(e.target.result);const workbook=XLSX.read(data,{type:'array',sheetStubs:true});if(!workbook.SheetNames||workbook.SheetNames.length===0){toast.error('The Excel file appears to be empty or invalid');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}const firstSheetName=workbook.SheetNames[0];const worksheet=workbook.Sheets[firstSheetName];if(!worksheet){toast.error('The Excel file does not contain valid data');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}return;}const jsonData=XLSX.utils.sheet_to_json(worksheet,{defval:''});await processImportData(jsonData);}catch(error){handleFileProcessingError(error);}};reader.readAsArrayBuffer(file);}}catch(error){console.error('Error reading file:',error);toast.error('Failed to read file');setImporting(false);if(fileInputRef.current){fileInputRef.current.value='';}}};const handlePublishSelected=async()=>{if(bulkSelectedProjects.length===0){toast.error('Please select at least one project');return;}// Check if all selected projects have a CTA selected in their Actions column\nconst projectsWithoutCTA=bulkSelectedProjects.filter(projectId=>!selectedAccounts[projectId]);if(projectsWithoutCTA.length>0){toast.error(\"Please select a Client Tool Account for all selected projects\");return;}// Validate bulk assignment\nconst assignments=bulkSelectedProjects.map(projectId=>({projectId,accountId:selectedAccounts[projectId]}));const validation=validateBulkAssignment(assignments);if(!validation.isValid){toast.error(\"Validation failed: \".concat(validation.errors.join(', ')));return;}// Check for conflicts\nconst conflicts=getAllConflicts(contributorProjects,selectedAccounts);const relevantConflicts=conflicts.filter(c=>bulkSelectedProjects.some(pid=>{var _c$projectIds;return((_c$projectIds=c.projectIds)===null||_c$projectIds===void 0?void 0:_c$projectIds.includes(pid))||c.currentProjectId===pid;}));if(relevantConflicts.length>0){const conflictMessages=relevantConflicts.map(c=>c.message).join('; ');const proceed=window.confirm(\"Warning: Conflicts detected:\\n\\n\".concat(conflictMessages,\"\\n\\nDo you want to proceed anyway?\"));if(!proceed){return;}}// Check for inactive/deactivated accounts\nconst inactiveAccounts=[];bulkSelectedProjects.forEach(projectId=>{const accountId=selectedAccounts[projectId];const status=accountStatusChecks[accountId];if(status&&!status.isActive){const project=contributorProjects.find(p=>p.id===projectId);inactiveAccounts.push({projectName:(project===null||project===void 0?void 0:project.name)||projectId,status:status.status,warnings:status.warnings});}});if(inactiveAccounts.length>0){const inactiveMessage=inactiveAccounts.map(ia=>\"\".concat(ia.projectName,\": \").concat(ia.status,\" (\").concat(ia.warnings.join(', '),\")\")).join('\\n');const proceed=window.confirm(\"Warning: Some accounts are inactive or deactivated:\\n\\n\".concat(inactiveMessage,\"\\n\\nDo you want to proceed anyway?\"));if(!proceed){return;}}setUpdating(true);try{// Update each selected project with its respective CTA from the Actions column\nconst updatePromises=bulkSelectedProjects.map(projectId=>{const accountId=selectedAccounts[projectId];return apiClient.post('/client-tool-account/update-mapping',{projectId,accountId});});const results=await Promise.all(updatePromises);const successCount=results.filter(r=>r.data.success).length;if(successCount===bulkSelectedProjects.length){toast.success(\"Successfully published \".concat(successCount,\" project(s) to Salesforce\"));setBulkSelectedProjects([]);// Clear selected accounts for published projects\nsetSelectedAccounts(prev=>{const updated=_objectSpread({},prev);bulkSelectedProjects.forEach(projectId=>{delete updated[projectId];});return updated;});// Clear search terms and results for published projects\nsetSearchTermsPerProject(prev=>{const updated=_objectSpread({},prev);bulkSelectedProjects.forEach(projectId=>{delete updated[projectId];});return updated;});setSearchResultsPerProject(prev=>{const updated=_objectSpread({},prev);bulkSelectedProjects.forEach(projectId=>{delete updated[projectId];});return updated;});fetchContributorProjects();}else{toast.error(\"Failed to publish some projects. \".concat(successCount,\" of \").concat(bulkSelectedProjects.length,\" succeeded.\"));}}catch(error){var _error$response4,_error$response4$data;const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Failed to publish projects';toast.error(errorMessage);}finally{setUpdating(false);}};const resetForm=()=>{setFormData({clientToolAccountName:'',contributor:'',contributorId:'',contributorName:'',clientToolUserId:'',account:'',accountId:'',accountName:'',otpLimitExceeded:false,deactivated:false,lastChangedDate:'',lastChangedTime:'',clientToolName:'',clientToolEmail:'',verified:false});setContributorSearchTerm('');setContributorSearchResults([]);setAccountSearchTerm('');setAccountSearchResults([]);};// Search Contributors\nconst searchContributors=async searchTerm=>{if(!searchTerm||searchTerm.trim().length<2){setContributorSearchResults([]);return;}setContributorSearching(true);try{const response=await apiClient.get(\"/salesforce/search-people?search=\".concat(encodeURIComponent(searchTerm),\"&recordType=\"));if(response.data.success){// Filter to only return Contacts (Contributor__c typically expects Contact IDs, not User IDs)\n// Contact IDs start with '003', User IDs start with '005'\nconst contactsOnly=(response.data.people||[]).filter(person=>person.id&&person.id.startsWith('003'));setContributorSearchResults(contactsOnly);}}catch(error){setContributorSearchResults([]);}finally{setContributorSearching(false);}};// Search Accounts\nconst searchAccounts=async searchTerm=>{if(!searchTerm||searchTerm.trim().length<2){setAccountSearchResults([]);return;}setAccountSearching(true);try{const response=await apiClient.get(\"/salesforce/accounts\");if(response.data.success){const accounts=response.data.accounts||[];const filtered=accounts.filter(acc=>acc.name.toLowerCase().includes(searchTerm.toLowerCase()));setAccountSearchResults(filtered);}}catch(error){setAccountSearchResults([]);}finally{setAccountSearching(false);}};// Debounced search handlers\nconst contributorSearchDebounceRef=useRef(null);const accountSearchDebounceRef=useRef(null);const updateAccountSearchDebounceRef=useRef(null);const handleContributorSearchChange=value=>{setContributorSearchTerm(value);if(contributorSearchDebounceRef.current){clearTimeout(contributorSearchDebounceRef.current);}if(value.trim().length>=2){contributorSearchDebounceRef.current=setTimeout(()=>{searchContributors(value);},500);}else{setContributorSearchResults([]);}};const handleAccountSearchChange=value=>{setAccountSearchTerm(value);if(accountSearchDebounceRef.current){clearTimeout(accountSearchDebounceRef.current);}if(value.trim().length>=2){accountSearchDebounceRef.current=setTimeout(()=>{searchAccounts(value);},500);}else{setAccountSearchResults([]);}};const toggleBulkSelection=projectId=>{setBulkSelectedProjects(prev=>{if(prev.includes(projectId)){return prev.filter(id=>id!==projectId);}else{return[...prev,projectId];}});};const selectAccountForProject=(projectId,accountId,accountName)=>{var _searchResultsPerProj;// Find the account object from search results\nconst account=(_searchResultsPerProj=searchResultsPerProject[projectId])===null||_searchResultsPerProj===void 0?void 0:_searchResultsPerProj.find(acc=>acc.id===accountId);// Validate account availability\nconst availability=checkAccountAvailability(account,projectId,contributorProjects);if(!availability.isAvailable){toast.error(availability.reason||'Account is not available for assignment');return;}// Check account status\nconst status=checkAccountStatus(account);const warnings=[];const conflicts=[];if(!status.isActive){warnings.push(\"Account is \".concat(status.status,\". \").concat(status.warnings.join(', ')));}else if(status.warnings.length>0){warnings.push(...status.warnings);}// Check for existing mapping\nconst existingMapping=detectExistingMapping(accountId,projectId,contributorProjects);if(existingMapping){conflicts.push(existingMapping.message);}// Check for duplicate mappings in current selection\nconst updatedSelectedAccounts=_objectSpread(_objectSpread({},selectedAccounts),{},{[projectId]:accountId});const duplicateConflicts=detectDuplicateMappings(contributorProjects,updatedSelectedAccounts);duplicateConflicts.forEach(conflict=>{if(conflict.accountId===accountId&&conflict.projectIds.includes(projectId)){conflicts.push(conflict.message);}});// Set validation warnings and conflicts\nsetValidationWarnings(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:warnings}));setValidationConflicts(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:conflicts}));setAccountStatusChecks(prev=>_objectSpread(_objectSpread({},prev),{},{[accountId]:status}));// Show warning toast if there are warnings but allow selection\nif(warnings.length>0){toast.warning(\"Warning: \".concat(warnings.join(', ')),{duration:5000});}// Show conflict warning but allow selection\nif(conflicts.length>0){toast.warning(\"Conflict detected: \".concat(conflicts.join(', ')),{duration:6000});}// Set the selected account\nsetSelectedAccounts(updatedSelectedAccounts);// Update the search input field with the selected account name\nsetSearchTermsPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:accountName||''}));// Clear the search results for this project to close the dropdown\nsetSearchResultsPerProject(prev=>_objectSpread(_objectSpread({},prev),{},{[projectId]:[]}));// Clear the searching state for this project\nsetSearchingPerProject(prev=>{const updated=_objectSpread({},prev);delete updated[projectId];return updated;});};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{className:\"client-tool-account\",style:{marginLeft:sidebarOpen?'320px':'80px',height:'100vh',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(Loader,{className:\"spinning\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{className:\"client-tool-account\",style:{marginLeft:sidebarOpen?'320px':'80px'},onClick:e=>{// Only close form if clicking outside the form itself\nif(e.target===e.currentTarget&&showCreateForm){// Don't close on outside click - let user explicitly close it\n}},children:/*#__PURE__*/_jsxs(\"div\",{className:\"client-tool-account-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"client-tool-account-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-menu-toggle\",onClick:()=>setSidebarOpen(!sidebarOpen),\"aria-label\":\"Toggle sidebar\",children:/*#__PURE__*/_jsx(Menu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Client Tool Account\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Manage Client Tool Account mappings for Contributor Projects\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-user-profile\",children:[/*#__PURE__*/_jsx(BookmarkButton,{pageName:\"Client Tool Account\",pageType:\"page\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:((user===null||user===void 0?void 0:user.email)||'U').charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{size:18})})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginBottom:'24px',borderBottom:'2px solid var(--border-color)'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('management'),style:{padding:'12px 20px',background:'none',border:'none',borderBottom:activeTab==='management'?'2px solid #0176d3':'2px solid transparent',color:activeTab==='management'?'#0176d3':'#666',fontWeight:activeTab==='management'?'600':'400',cursor:'pointer',fontSize:'14px',marginBottom:'-2px'},children:\"Management\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('analytics'),style:{padding:'12px 20px',background:'none',border:'none',borderBottom:activeTab==='analytics'?'2px solid #0176d3':'2px solid transparent',color:activeTab==='analytics'?'#0176d3':'#666',fontWeight:activeTab==='analytics'?'600':'400',cursor:'pointer',fontSize:'14px',marginBottom:'-2px',display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:16}),\"Analytics\"]})]}),activeTab==='analytics'&&/*#__PURE__*/_jsx(ClientToolAccountAnalytics,{}),activeTab==='management'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"client-tool-account-actions\",style:{display:'flex',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary create-client-tool-account-btn\",onClick:e=>{e.preventDefault();e.stopPropagation();setIsUpdateMode(false);setSelectedAccountId(null);setShowCreateForm(prev=>!prev);resetForm();setAccountSearchResultsForUpdate([]);},type:\"button\",children:[/*#__PURE__*/_jsx(Plus,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:\"Create Client Tool Account\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary\",onClick:e=>{e.preventDefault();e.stopPropagation();setIsUpdateMode(true);setSelectedAccountId(null);setShowCreateForm(true);resetForm();setAccountSearchResultsForUpdate([]);},type:\"button\",children:[/*#__PURE__*/_jsx(Edit,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:\"Update Client Tool Account\"})]})]}),showCreateForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"create-form-card neumorphic fade-in\",onClick:e=>{// Close search results when clicking outside\nsetContributorSearchResults([]);setAccountSearchResults([]);if(isUpdateMode&&!selectedAccountId){setAccountSearchResultsForUpdate([]);}e.stopPropagation();},onMouseDown:e=>e.stopPropagation(),style:{position:'relative',zIndex:100},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'16px',fontWeight:'600',margin:0},children:isUpdateMode?'Update Client Tool Account':'New Client Tool Account'}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'var(--text-secondary)'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"}),\" Required Information\"]})]}),isUpdateMode&&!selectedAccountId&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'12px',padding:'8px 12px',background:'var(--bg-secondary)',borderRadius:'6px',fontSize:'12px',color:'var(--text-secondary)'},children:\"Type in the \\\"Client Tool Account Name\\\" field to search for existing Client Tool Accounts. Select an account to load its data.\"}),isUpdateMode&&selectedAccountId&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'12px',padding:'8px 12px',background:'var(--success)',borderRadius:'6px',fontSize:'12px',color:'#fff'},children:\"Account selected. Edit the fields below and click Update to save changes.\"}),isUpdateMode&&accountSearchResultsForUpdate.length>0&&!selectedAccountId&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'12px',position:'relative',zIndex:1001},children:/*#__PURE__*/_jsx(\"div\",{className:\"search-results-dropdown\",style:{maxHeight:'200px',overflowY:'auto',fontSize:'12px',position:'absolute',width:'100%',background:'#fff',border:'1px solid var(--border-color)',borderRadius:'var(--radius-md)',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:accountSearchResultsForUpdate.map(account=>/*#__PURE__*/_jsxs(\"div\",{onClick:e=>{e.stopPropagation();setSelectedAccountId(account.id);setAccountSearchResultsForUpdate([]);fetchAccountDetails(account.id);},style:{padding:'10px 12px',cursor:'pointer',borderBottom:'1px solid var(--border-color)'},onMouseEnter:e=>e.currentTarget.style.background='var(--bg-secondary)',onMouseLeave:e=>e.currentTarget.style.background='transparent',children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'13px'},children:account.name||account.accountName}),account.contributorName&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:'2px'},children:[\"Contributor: \",account.contributorName]}),account.clientToolName&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:'2px'},children:[\"Tool: \",account.clientToolName]}),account.clientToolEmail&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[\"Email: \",account.clientToolEmail]})]},account.id))})}),isUpdateMode&&searchingAccountForUpdate&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'12px',padding:'8px 12px',textAlign:'center',fontSize:'12px',color:'var(--text-secondary)'},children:[/*#__PURE__*/_jsx(RefreshCw,{size:14,className:\"spinning\",style:{display:'inline-block',marginRight:'6px'}}),\"Searching...\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateClientToolAccount,onClick:e=>{// Close search results when clicking on form\nsetContributorSearchResults([]);setAccountSearchResults([]);if(isUpdateMode&&!selectedAccountId){setAccountSearchResultsForUpdate([]);}e.stopPropagation();},onMouseDown:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'13px',fontWeight:'600',marginBottom:'10px',paddingBottom:'6px',borderBottom:'1px solid var(--border-color)'},children:\"Information\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:'10px',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:[\"Client Tool Name \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:formData.clientToolName,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{clientToolName:e.target.value})),required:true,style:{fontSize:'12px',padding:'6px 8px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--None--\"}),clientToolNamePicklist.map((value,index)=>/*#__PURE__*/_jsx(\"option\",{value:value,children:value},index))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:[\"Contributor \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contributorSearchTerm||formData.contributorName||'',onChange:e=>{const value=e.target.value;setContributorSearchTerm(value);handleContributorSearchChange(value);if(!value){setFormData(_objectSpread(_objectSpread({},formData),{},{contributor:'',contributorId:'',contributorName:''}));setContributorSearchResults([]);}},required:true,placeholder:\"Search Contributors...\",style:{fontSize:'12px',padding:'6px 8px',width:'100%'}}),contributorSearching&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',right:'8px',top:'50%',transform:'translateY(-50%)',display:'flex',alignItems:'center',gap:'4px',color:'#666',fontSize:'10px',marginTop:'12px'},children:[/*#__PURE__*/_jsx(RefreshCw,{size:12,className:\"spinning\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Searching...\"})]}),contributorSearchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"search-results-dropdown\",style:{marginTop:'4px',maxHeight:'150px',overflowY:'auto',fontSize:'12px',position:'absolute',zIndex:1000,width:'100%',background:'#fff',border:'1px solid var(--border-color)',borderRadius:'var(--radius-md)',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:contributorSearchResults.map(person=>/*#__PURE__*/_jsxs(\"div\",{onClick:e=>{e.stopPropagation();setFormData(_objectSpread(_objectSpread({},formData),{},{contributor:person.id,contributorId:person.id,contributorName:person.name}));setContributorSearchTerm(person.name);setContributorSearchResults([]);},style:{padding:'8px 10px',cursor:'pointer',borderBottom:'1px solid var(--border-color)'},onMouseEnter:e=>e.currentTarget.style.background='var(--bg-secondary)',onMouseLeave:e=>e.currentTarget.style.background='transparent',children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'12px'},children:person.name}),person.email&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#666'},children:person.email})]},person.id))}),!formData.contributor&&contributorSearchTerm&&contributorSearchResults.length===0&&!contributorSearching&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:'11px',marginTop:'2px'},children:\"Complete this field.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:[\"Account \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:accountSearchTerm||formData.accountName||'',onChange:e=>{const value=e.target.value;setAccountSearchTerm(value);handleAccountSearchChange(value);if(!value){setFormData(_objectSpread(_objectSpread({},formData),{},{account:'',accountId:'',accountName:''}));setAccountSearchResults([]);}},required:true,placeholder:\"Search Accounts...\",style:{fontSize:'12px',padding:'6px 8px',width:'100%'}}),accountSearching&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',right:'8px',top:'50%',transform:'translateY(-50%)',display:'flex',alignItems:'center',gap:'4px',color:'#666',fontSize:'10px',marginTop:'12px'},children:[/*#__PURE__*/_jsx(RefreshCw,{size:12,className:\"spinning\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Searching...\"})]}),accountSearchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"search-results-dropdown\",style:{marginTop:'4px',maxHeight:'150px',overflowY:'auto',fontSize:'12px',position:'absolute',zIndex:1000,width:'100%',background:'#fff',border:'1px solid var(--border-color)',borderRadius:'var(--radius-md)',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:accountSearchResults.map(account=>/*#__PURE__*/_jsx(\"div\",{onClick:e=>{e.stopPropagation();setFormData(_objectSpread(_objectSpread({},formData),{},{account:account.id,accountId:account.id,accountName:account.name}));setAccountSearchTerm(account.name);setAccountSearchResults([]);},style:{padding:'8px 10px',cursor:'pointer',borderBottom:'1px solid var(--border-color)'},onMouseEnter:e=>e.currentTarget.style.background='var(--bg-secondary)',onMouseLeave:e=>e.currentTarget.style.background='transparent',children:/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'12px'},children:account.name})},account.id))}),!formData.account&&accountSearchTerm&&accountSearchResults.length===0&&!accountSearching&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:'11px',marginTop:'2px'},children:\"Complete this field.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:'10px',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:\"Client Tool Account Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.clientToolAccountName,onChange:e=>{const value=e.target.value;if(isUpdateMode&&!selectedAccountId){handleClientToolAccountNameChangeInUpdateMode(value);}else{setFormData(_objectSpread(_objectSpread({},formData),{},{clientToolAccountName:value}));}},placeholder:isUpdateMode&&!selectedAccountId?\"Search by Client Tool Account Name...\":\"Enter client tool account name\",style:{fontSize:'12px',padding:'6px 8px'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:\"Client Tool User ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.clientToolUserId,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{clientToolUserId:e.target.value})),placeholder:\"Enter client tool user ID\",style:{fontSize:'12px',padding:'6px 8px'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:[\"Client Tool Email \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:formData.clientToolEmail,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{clientToolEmail:e.target.value})),required:true,placeholder:\"Enter client tool email\",style:{fontSize:'12px',padding:'6px 8px'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:'10px',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'6px',cursor:'pointer',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.otpLimitExceeded,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{otpLimitExceeded:e.target.checked})),style:{width:'14px',height:'14px'}}),/*#__PURE__*/_jsx(\"span\",{children:\"OTP Limit Exceeded\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'6px',cursor:'pointer',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.deactivated,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{deactivated:e.target.checked})),style:{width:'14px',height:'14px'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Deactivated\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'6px',cursor:'pointer',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.verified,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{verified:e.target.checked})),style:{width:'14px',height:'14px'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Verified\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:\"Last Changed At\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.lastChangedDate,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{lastChangedDate:e.target.value})),style:{fontSize:'12px',padding:'6px 30px 6px 8px'}}),/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:'8px',top:'50%',transform:'translateY(-50%)',color:'#666',fontSize:'12px'},children:\"\\uD83D\\uDCC5\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:formData.lastChangedTime,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{lastChangedTime:e.target.value})),style:{fontSize:'12px',padding:'6px 30px 6px 8px'}}),/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:'8px',top:'50%',transform:'translateY(-50%)',color:'#666',fontSize:'12px'},children:\"\\uD83D\\uDD50\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px',paddingTop:'12px',borderTop:'1px solid var(--border-color)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'13px',fontWeight:'600',marginBottom:'10px'},children:\"System Information\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:\"Created By\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\",disabled:true,style:{fontSize:'12px',padding:'6px 8px',background:'var(--bg-secondary)',color:'var(--text-secondary)'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'12px',marginBottom:'4px'},children:\"Last Modified By\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\",disabled:true,style:{fontSize:'12px',padding:'6px 8px',background:'var(--bg-secondary)',color:'var(--text-secondary)'}})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",style:{paddingTop:'12px',borderTop:'1px solid var(--border-color)',marginTop:'12px'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary\",onClick:()=>{setShowCreateForm(false);setIsUpdateMode(false);setSelectedAccountId(null);resetForm();setAccountSearchResultsForUpdate([]);},style:{fontSize:'12px',padding:'8px 16px'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:creating||updating||isUpdateMode&&!selectedAccountId,style:{fontSize:'12px',padding:'8px 16px'},children:isUpdateMode?updating?'Updating...':'Update Account':creating?'Creating...':'Create Account'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contributor-projects-list\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'16px',flexWrap:'wrap',gap:'16px'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:'18px',fontWeight:'600',margin:0},children:[\"Contributor Projects Requiring Client Tool Account (\",filteredContributorProjects.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',alignItems:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',minWidth:'250px',maxWidth:'400px'},children:[/*#__PURE__*/_jsx(Search,{size:16,style:{position:'absolute',left:'12px',top:'50%',transform:'translateY(-50%)',color:'#666',zIndex:1,pointerEvents:'none'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search contributor projects...\",value:contributorProjectsSearchTerm,onChange:e=>setContributorProjectsSearchTerm(e.target.value),style:{paddingLeft:'36px',fontSize:'14px',padding:'10px 16px 10px 36px',width:'100%',border:'1px solid var(--border-color)',borderRadius:'var(--radius-md)',background:'var(--surface)',color:'var(--text-primary)',boxSizing:'border-box'}})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:handleRefresh,disabled:loading,style:{display:'flex',alignItems:'center',gap:'8px',whiteSpace:'nowrap'},title:\"Refresh table\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:16,className:loading?'spinning':''}),\"Refresh\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:handleDownloadTemplate,style:{display:'flex',alignItems:'center',gap:'8px',whiteSpace:'nowrap'},title:\"Download import template\",children:[/*#__PURE__*/_jsx(FileText,{size:16}),\"Download Template\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},disabled:importing,style:{display:'flex',alignItems:'center',gap:'8px',whiteSpace:'nowrap'},title:\"Import from Excel file\",children:[importing?/*#__PURE__*/_jsx(Loader,{size:16,className:\"spinning\"}):/*#__PURE__*/_jsx(Upload,{size:16}),importing?'Importing...':'Import']}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\".xlsx,.xls,.csv\",onChange:handleImportFile,style:{display:'none'}}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:handleExportToExcel,disabled:filteredContributorProjects.length===0,style:{display:'flex',alignItems:'center',gap:'8px',whiteSpace:'nowrap'},title:\"Export table data to Excel\",children:[/*#__PURE__*/_jsx(Download,{size:16}),\"Export to Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary\",onClick:handlePublishSelected,disabled:bulkSelectedProjects.length===0||updating,style:{display:'flex',alignItems:'center',gap:'8px',whiteSpace:'nowrap'},title:bulkSelectedProjects.length===0?'Please select at least one project':'Publish selected projects to Salesforce',children:[/*#__PURE__*/_jsx(Send,{size:16}),updating?'Publishing...':bulkSelectedProjects.length>0?\"Publish \".concat(bulkSelectedProjects.length,\" Selected\"):'Publish Selected']})]})]}),filteredContributorProjects.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-projects\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No contributor projects found that require client tool account mapping\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"projects-table\",ref:tableContainerRef,children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'40px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:bulkSelectedProjects.length===filteredContributorProjects.length&&filteredContributorProjects.length>0,onChange:e=>{if(e.target.checked){setBulkSelectedProjects(filteredContributorProjects.map(p=>p.id));}else{setBulkSelectedProjects([]);}}})}),/*#__PURE__*/_jsx(\"th\",{children:\"Contributor Project Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Project\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Client Tool Account Used\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredContributorProjects.map(project=>{var _validationWarnings$p,_validationConflicts$,_validationConflicts$2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:bulkSelectedProjects.includes(project.id),onChange:()=>toggleBulkSelection(project.id)})}),/*#__PURE__*/_jsx(\"td\",{children:project.contributorProjectName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:project.project||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:project.clientToolAccountUsed?/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--success)'},children:project.clientToolAccountUsedName||project.clientToolAccountUsed}):/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--error)'},children:\"Not Set\"})}),/*#__PURE__*/_jsx(\"td\",{onClick:e=>{// Close search results when clicking outside the search input\nif(!e.target.closest('.search-box')&&!e.target.closest('.search-results-dropdown')){setSearchResultsPerProject(prev=>{const updated=_objectSpread({},prev);delete updated[project.id];return updated;});}},children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center',position:'relative'},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',minWidth:'250px',flex:1},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(Search,{size:16,style:{position:'absolute',left:'12px',top:'50%',transform:'translateY(-50%)',color:'#666',zIndex:1,pointerEvents:'none'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search Client Tool Account...\",value:searchTermsPerProject[project.id]||'',onChange:e=>handleProjectSearchChange(project.id,e.target.value),onClick:e=>e.stopPropagation(),style:{paddingLeft:'36px',fontSize:'13px',padding:'6px 10px 6px 36px',width:'100%',paddingRight:searchingPerProject[project.id]?'90px':'10px',border:'1px solid var(--border-color)',borderRadius:'var(--radius-md)',background:'var(--surface)',color:'var(--text-primary)',boxSizing:'border-box'}}),searchingPerProject[project.id]&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',display:'flex',alignItems:'center',gap:'6px',color:'#666',fontSize:'11px',zIndex:1},children:[/*#__PURE__*/_jsx(RefreshCw,{size:14,className:\"spinning\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Searching...\"})]}),searchingPerProject[project.id]&&/*#__PURE__*/_jsx(\"div\",{className:\"search-results-dropdown\",style:{padding:'12px',textAlign:'center',color:'#666',fontSize:'12px'},onClick:e=>e.stopPropagation(),children:\"Searching...\"}),!searchingPerProject[project.id]&&searchResultsPerProject[project.id]&&searchResultsPerProject[project.id].length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"search-results-dropdown\",onClick:e=>e.stopPropagation(),children:searchResultsPerProject[project.id].map(account=>{const availability=checkAccountAvailability(account,project.id,contributorProjects);const status=checkAccountStatus(account);const isUnavailable=!availability.isAvailable;const isInactive=!status.isActive;const hasWarnings=status.warnings.length>0;return/*#__PURE__*/_jsx(\"div\",{onClick:e=>{if(!isUnavailable){e.stopPropagation();selectAccountForProject(project.id,account.id,account.name||account.accountName);}},style:{padding:'10px 12px',cursor:isUnavailable?'not-allowed':'pointer',borderBottom:'1px solid var(--border-color)',background:selectedAccounts[project.id]===account.id?'var(--bg-secondary)':'transparent',opacity:isUnavailable?0.5:1},onMouseEnter:e=>{if(!isUnavailable){e.currentTarget.style.background='var(--bg-secondary)';}},onMouseLeave:e=>{e.currentTarget.style.background=selectedAccounts[project.id]===account.id?'var(--bg-secondary)':'transparent';},children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',fontSize:'13px',display:'flex',alignItems:'center',gap:'6px'},children:[account.name||account.accountName,isInactive&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px',color:'#dc2626',fontWeight:'600'},children:\"(INACTIVE)\"}),hasWarnings&&!isInactive&&/*#__PURE__*/_jsx(AlertTriangle,{size:12,style:{color:'#f59e0b'}})]}),account.contributorName&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:'2px'},children:[\"Contributor: \",account.contributorName]}),account.clientToolName&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:'2px'},children:[\"Tool: \",account.clientToolName]}),account.clientToolEmail&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[\"Email: \",account.clientToolEmail]}),account.clientToolUserId&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[\"User ID: \",account.clientToolUserId]}),isUnavailable&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#dc2626',marginTop:'4px',fontWeight:'500'},children:availability.reason}),hasWarnings&&!isUnavailable&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#f59e0b',marginTop:'4px'},children:status.warnings.join(', ')})]})})},account.id);})}),(((_validationWarnings$p=validationWarnings[project.id])===null||_validationWarnings$p===void 0?void 0:_validationWarnings$p.length)>0||((_validationConflicts$=validationConflicts[project.id])===null||_validationConflicts$===void 0?void 0:_validationConflicts$.length)>0)&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px',position:'relative',zIndex:10},children:/*#__PURE__*/_jsx(ClientToolAccountValidationWarning,{warnings:validationWarnings[project.id]||[],conflicts:validationConflicts[project.id]||[],onDismiss:()=>{setValidationWarnings(prev=>{const updated=_objectSpread({},prev);delete updated[project.id];return updated;});setValidationConflicts(prev=>{const updated=_objectSpread({},prev);delete updated[project.id];return updated;});},type:((_validationConflicts$2=validationConflicts[project.id])===null||_validationConflicts$2===void 0?void 0:_validationConflicts$2.length)>0?'error':'warning'})})]})})})]},project.id);})})]}),hasMoreProjects&&/*#__PURE__*/_jsxs(_Fragment,{children:[!loadingMore&&/*#__PURE__*/_jsx(\"div\",{ref:infiniteScrollRef,style:{height:'50px',width:'100%',marginTop:'20px',display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'var(--text-secondary)',padding:'10px'},children:\"Scroll for more...\"})}),loadingMore&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',padding:'20px',gap:'12px'},children:[/*#__PURE__*/_jsx(Loader,{className:\"spinner\",size:20,style:{color:'#0176d3'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-primary)',fontSize:'14px'},children:\"Loading more contributor projects...\"})]})]})]})]})]})]})})]});};export default ClientToolAccount;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","Sidebar","ClientToolAccountValidationWarning","ClientToolAccountAnalytics","Menu","LogOut","Plus","Search","Check","X","RefreshCw","Wrench","Link","LinkIcon","Send","Edit","Loader","Download","Upload","FileText","AlertTriangle","BarChart3","apiClient","axios","toast","XLSX","BookmarkButton","detectDuplicateMappings","detectExistingMapping","getAllConflicts","checkAccountAvailability","checkAccountStatus","validateBulkAssignment","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ClientToolAccount","user","logout","sidebarOpen","setSidebarOpen","loading","setLoading","contributorProjects","setContributorProjects","filteredContributorProjects","setFilteredContributorProjects","contributorProjectsSearchTerm","setContributorProjectsSearchTerm","hasMoreProjects","setHasMoreProjects","loadingMore","setLoadingMore","infiniteScrollRef","tableContainerRef","contributorProjectsRef","hasMoreProjectsRef","loadingMoreRef","contributorProjectsSearchTermRef","showCreateForm","setShowCreateForm","isUpdateMode","setIsUpdateMode","selectedAccountId","setSelectedAccountId","accountSearchResultsForUpdate","setAccountSearchResultsForUpdate","searchingAccountForUpdate","setSearchingAccountForUpdate","selectedAccounts","setSelectedAccounts","bulkSelectedProjects","setBulkSelectedProjects","clientToolNamePicklist","setClientToolNamePicklist","searchResultsPerProject","setSearchResultsPerProject","searchTermsPerProject","setSearchTermsPerProject","searchingPerProject","setSearchingPerProject","creating","setCreating","updating","setUpdating","importing","setImporting","fileInputRef","activeTab","setActiveTab","validationWarnings","setValidationWarnings","validationConflicts","setValidationConflicts","accountStatusChecks","setAccountStatusChecks","formData","setFormData","clientToolAccountName","contributor","contributorId","contributorName","clientToolUserId","account","accountId","accountName","otpLimitExceeded","deactivated","lastChangedDate","lastChangedTime","clientToolName","clientToolEmail","verified","contributorSearchTerm","setContributorSearchTerm","contributorSearchResults","setContributorSearchResults","contributorSearching","setContributorSearching","accountSearchTerm","setAccountSearchTerm","accountSearchResults","setAccountSearchResults","accountSearching","setAccountSearching","fetchContributorProjects","fetchClientToolNamePicklist","current","append","arguments","length","undefined","offset","params","URLSearchParams","limit","toString","trim","response","get","concat","data","success","prev","newProjects","projects","hasMore","error","handleRefresh","e","preventDefault","stopPropagation","loadMoreProjects","currentHasMore","currentLoading","currentOffset","currentSearchTerm","then","catch","finally","setupObserver","element","tableContainer","loadTriggered","handleIntersection","entries","entry","isIntersecting","setTimeout","handleScroll","containerRect","getBoundingClientRect","elementRect","isVisible","top","bottom","rect","window","innerHeight","rootElement","observer","IntersectionObserver","root","rootMargin","threshold","observe","scrollTarget","addEventListener","passive","checkVisibility","visibilityTimeout","disconnect","removeEventListener","clearTimeout","cleanup","retryTimeout","values","searchClientToolAccounts","searchTerm","projectId","_objectSpread","encodeURIComponent","accounts","projectSearchDebounceTimerRef","handleProjectSearchChange","value","Object","forEach","timer","searchClientToolAccountsForUpdate","fetchAccountDetails","lastChangedAt","dateObj","Date","toISOString","split","timeStr","toTimeString","substring","name","handleClientToolAccountNameChangeInUpdateMode","updateAccountSearchDebounceRef","handleCreateClientToolAccount","submitData","put","resetForm","_error$response","_error$response$data","errorMessage","post","_error$response2","_error$response2$data","handleUpdateMapping","updated","_error$response3","_error$response3$data","handleExportToExcel","exportData","map","project","contributorProjectName","clientToolAccountUsedName","clientToolAccountUsed","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","filename","writeFile","console","handleDownloadTemplate","templateData","handleImportFile","event","file","target","files","validExtensions","fileExtension","pop","toLowerCase","includes","handleFileProcessingError","message","processImportData","jsonData","Array","isArray","requiredColumns","variants","label","firstRow","fileKeys","keys","normalizeColumnName","replace","missingColumns","column","found","some","fileKey","normalizedFileKey","variant","push","join","log","bulkImportClient","create","baseURL","defaults","headers","localStorage","getItem","Authorization","timeout","records","batchSize","importedCount","errorCount","errors","_response$data","apiError","_apiError$response$da","_apiError$response$da2","reader","FileReader","onload","text","result","workbook","read","type","sheetStubs","SheetNames","worksheet","Sheets","sheet_to_json","defval","readAsText","Uint8Array","firstSheetName","readAsArrayBuffer","handlePublishSelected","projectsWithoutCTA","filter","assignments","validation","isValid","conflicts","relevantConflicts","c","pid","_c$projectIds","projectIds","currentProjectId","conflictMessages","proceed","confirm","inactiveAccounts","status","isActive","find","p","id","projectName","warnings","inactiveMessage","ia","updatePromises","results","Promise","all","successCount","r","_error$response4","_error$response4$data","searchContributors","contactsOnly","people","person","startsWith","searchAccounts","filtered","acc","contributorSearchDebounceRef","accountSearchDebounceRef","handleContributorSearchChange","handleAccountSearchChange","toggleBulkSelection","selectAccountForProject","_searchResultsPerProj","availability","isAvailable","reason","existingMapping","updatedSelectedAccounts","duplicateConflicts","conflict","warning","duration","className","children","isOpen","toggleSidebar","style","marginLeft","height","display","alignItems","justifyContent","size","onClick","currentTarget","pageName","pageType","email","charAt","toUpperCase","title","gap","marginBottom","borderBottom","padding","background","border","color","fontWeight","cursor","fontSize","onMouseDown","position","zIndex","margin","borderRadius","maxHeight","overflowY","width","boxShadow","onMouseEnter","onMouseLeave","marginTop","textAlign","marginRight","onSubmit","paddingBottom","gridTemplateColumns","onChange","required","index","placeholder","right","transform","checked","paddingTop","borderTop","disabled","flexWrap","minWidth","maxWidth","left","pointerEvents","paddingLeft","boxSizing","whiteSpace","_fileInputRef$current","click","ref","accept","_validationWarnings$p","_validationConflicts$","_validationConflicts$2","closest","flex","paddingRight","isUnavailable","isInactive","hasWarnings","opacity","onDismiss"],"sources":["/Users/mmoola/Cursor/ProjectSetup/client/src/pages/ClientToolAccount.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport ClientToolAccountValidationWarning from '../components/ClientToolAccountValidationWarning';\nimport ClientToolAccountAnalytics from '../components/ClientToolAccountAnalytics';\nimport { Menu, LogOut, Plus, Search, Check, X, RefreshCw, Wrench, Link as LinkIcon, Send, Edit, Loader, Download, Upload, FileText, AlertTriangle, BarChart3 } from 'lucide-react';\nimport apiClient from '../config/api';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport * as XLSX from 'xlsx';\nimport BookmarkButton from '../components/BookmarkButton';\nimport { detectDuplicateMappings, detectExistingMapping, getAllConflicts } from '../utils/clientToolAccountConflictDetection';\nimport { checkAccountAvailability } from '../utils/clientToolAccountAvailability';\nimport { checkAccountStatus } from '../utils/clientToolAccountStatusCheck';\nimport { validateBulkAssignment } from '../utils/clientToolAccountValidation';\nimport '../styles/ClientToolAccount.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\nconst ClientToolAccount = () => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [contributorProjects, setContributorProjects] = useState([]);\n  const [filteredContributorProjects, setFilteredContributorProjects] = useState([]);\n  const [contributorProjectsSearchTerm, setContributorProjectsSearchTerm] = useState('');\n  const [hasMoreProjects, setHasMoreProjects] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const infiniteScrollRef = useRef(null); // Ref for infinite scroll trigger\n  const tableContainerRef = useRef(null); // Ref for table container\n  const contributorProjectsRef = useRef([]); // Ref to track current projects for offset calculation\n  const hasMoreProjectsRef = useRef(false); // Ref to track hasMoreProjects state\n  const loadingMoreRef = useRef(false); // Ref to track loadingMore state\n  const contributorProjectsSearchTermRef = useRef(''); // Ref to track search term\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [isUpdateMode, setIsUpdateMode] = useState(false);\n  const [selectedAccountId, setSelectedAccountId] = useState(null);\n  const [accountSearchResultsForUpdate, setAccountSearchResultsForUpdate] = useState([]);\n  const [searchingAccountForUpdate, setSearchingAccountForUpdate] = useState(false);\n  const [selectedAccounts, setSelectedAccounts] = useState({}); // { projectId: accountId }\n  const [bulkSelectedProjects, setBulkSelectedProjects] = useState([]);\n  const [clientToolNamePicklist, setClientToolNamePicklist] = useState([]);\n  const [searchResultsPerProject, setSearchResultsPerProject] = useState({}); // { projectId: [results] }\n  const [searchTermsPerProject, setSearchTermsPerProject] = useState({}); // { projectId: searchTerm }\n  const [searchingPerProject, setSearchingPerProject] = useState({}); // { projectId: boolean }\n  const [creating, setCreating] = useState(false);\n  const [updating, setUpdating] = useState(false);\n  const [importing, setImporting] = useState(false);\n  const fileInputRef = useRef(null);\n  const [activeTab, setActiveTab] = useState('management'); // 'management', 'analytics'\n  \n  // Validation states\n  const [validationWarnings, setValidationWarnings] = useState({}); // { projectId: [warnings] }\n  const [validationConflicts, setValidationConflicts] = useState({}); // { projectId: [conflicts] }\n  const [accountStatusChecks, setAccountStatusChecks] = useState({}); // { accountId: status }\n  \n  const [formData, setFormData] = useState({\n    clientToolAccountName: '',\n    contributor: '',\n    contributorId: '',\n    contributorName: '',\n    clientToolUserId: '',\n    account: '',\n    accountId: '',\n    accountName: '',\n    otpLimitExceeded: false,\n    deactivated: false,\n    lastChangedDate: '',\n    lastChangedTime: '',\n    clientToolName: '',\n    clientToolEmail: '',\n    verified: false\n  });\n  \n  // Search states for Contributor and Account\n  const [contributorSearchTerm, setContributorSearchTerm] = useState('');\n  const [contributorSearchResults, setContributorSearchResults] = useState([]);\n  const [contributorSearching, setContributorSearching] = useState(false);\n  const [accountSearchTerm, setAccountSearchTerm] = useState('');\n  const [accountSearchResults, setAccountSearchResults] = useState([]);\n  const [accountSearching, setAccountSearching] = useState(false);\n\n  useEffect(() => {\n    fetchContributorProjects();\n    fetchClientToolNamePicklist();\n  }, []);\n\n  // Filter is now done server-side, so we just use the projects as-is\n  // But we still need to update when search term changes to trigger a new fetch\n  useEffect(() => {\n    // When search term changes, reset and fetch with new search (don't append)\n    if (!loading) {\n      setContributorProjects([]); // Clear existing projects\n      fetchContributorProjects(false); // Fetch from beginning\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [contributorProjectsSearchTerm]);\n\n  // Update filtered list when projects change (no client-side filtering needed)\n  useEffect(() => {\n    setFilteredContributorProjects(contributorProjects);\n    contributorProjectsRef.current = contributorProjects; // Keep ref in sync\n  }, [contributorProjects]);\n\n  // Keep refs in sync with state\n  useEffect(() => {\n    hasMoreProjectsRef.current = hasMoreProjects;\n  }, [hasMoreProjects]);\n\n  useEffect(() => {\n    loadingMoreRef.current = loadingMore;\n  }, [loadingMore]);\n\n  useEffect(() => {\n    contributorProjectsSearchTermRef.current = contributorProjectsSearchTerm;\n  }, [contributorProjectsSearchTerm]);\n\n  const fetchContributorProjects = useCallback(async (append = false) => {\n    if (append) {\n      setLoadingMore(true);\n    } else {\n      setLoading(true);\n      // Reset state when refreshing\n      setHasMoreProjects(false);\n    }\n    try {\n      // Use ref to get current length when appending (avoids stale closure)\n      const offset = append ? contributorProjectsRef.current.length : 0;\n      \n      // Build query parameters with search filter\n      const params = new URLSearchParams({\n        limit: '1000',\n        offset: offset.toString()\n      });\n      \n      // Add search term if provided\n      if (contributorProjectsSearchTerm && contributorProjectsSearchTerm.trim() !== '') {\n        params.append('searchTerm', contributorProjectsSearchTerm.trim());\n      }\n      \n      const response = await apiClient.get(`/client-tool-account/contributor-projects?${params.toString()}`);\n      if (response.data.success) {\n        if (append) {\n          // Append new records to existing ones\n          setContributorProjects(prev => {\n            const newProjects = [...prev, ...(response.data.projects || [])];\n            return newProjects;\n          });\n        } else {\n          // Replace existing records\n          setContributorProjects(response.data.projects || []);\n        }\n        setHasMoreProjects(response.data.hasMore || false);\n      }\n    } catch (error) {\n      toast.error('Failed to fetch contributor projects');\n    } finally {\n      if (append) {\n        setLoadingMore(false);\n      } else {\n        setLoading(false);\n      }\n    }\n  }, [contributorProjectsSearchTerm]);\n\n  // Refresh handler that ensures proper reset\n  const handleRefresh = useCallback((e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // Clear existing projects\n    setContributorProjects([]);\n    // Reset refs\n    contributorProjectsRef.current = [];\n    hasMoreProjectsRef.current = false;\n    setHasMoreProjects(false);\n    // Fetch fresh data\n    fetchContributorProjects(false);\n  }, [fetchContributorProjects]);\n\n  // Function to load more projects (extracted for reuse)\n  const loadMoreProjects = useCallback(() => {\n    // Use refs to check current state (avoid stale closures)\n    const currentHasMore = hasMoreProjectsRef.current;\n    const currentLoading = loadingMoreRef.current;\n    \n    if (currentLoading || !currentHasMore) {\n      return;\n    }\n    \n    const currentOffset = contributorProjectsRef.current.length;\n    \n    // Prevent multiple simultaneous loads\n    if (loadingMoreRef.current) {\n      return;\n    }\n    \n    // Call fetch directly to avoid callback dependency issues\n    loadingMoreRef.current = true;\n    setLoadingMore(true);\n    \n    const params = new URLSearchParams({\n      limit: '1000',\n      offset: currentOffset.toString()\n    });\n    \n    // Get current search term from ref\n    const currentSearchTerm = contributorProjectsSearchTermRef.current;\n    \n    if (currentSearchTerm && currentSearchTerm.trim() !== '') {\n      params.append('searchTerm', currentSearchTerm.trim());\n    }\n    \n      apiClient.get(`/client-tool-account/contributor-projects?${params.toString()}`)\n      .then(response => {\n        if (response.data.success) {\n          setContributorProjects(prev => {\n            const newProjects = [...prev, ...(response.data.projects || [])];\n            return newProjects;\n          });\n          setHasMoreProjects(response.data.hasMore || false);\n          hasMoreProjectsRef.current = response.data.hasMore || false;\n        }\n      })\n      .catch(error => {\n        toast.error('Failed to fetch more contributor projects');\n      })\n      .finally(() => {\n        loadingMoreRef.current = false;\n        setLoadingMore(false);\n      });\n  }, []);\n\n  // Set up IntersectionObserver for infinite scroll\n  useEffect(() => {\n    // Wait for element to be available in DOM\n    const setupObserver = () => {\n      const element = infiniteScrollRef.current;\n      const tableContainer = tableContainerRef.current;\n      \n      if (!element || !hasMoreProjects || loadingMore) {\n        return null;\n      }\n      \n      // If table container is not available yet, return null to retry\n      if (!tableContainer) {\n        return null;\n      }\n\n      let loadTriggered = false; // Prevent multiple loads\n\n      const handleIntersection = (entries) => {\n        const entry = entries[0];\n        \n        if (entry.isIntersecting && !loadTriggered) {\n          loadTriggered = true;\n          loadMoreProjects();\n          \n          // Reset flag after a delay to allow next load\n          setTimeout(() => {\n            loadTriggered = false;\n          }, 2000);\n        }\n      };\n\n      // Also listen to scroll events as a fallback\n      const handleScroll = () => {\n        if (loadTriggered || loadingMoreRef.current || !hasMoreProjectsRef.current) {\n          return;\n        }\n        \n        if (!element) return;\n        \n        if (tableContainer) {\n          const containerRect = tableContainer.getBoundingClientRect();\n          const elementRect = element.getBoundingClientRect();\n          const isVisible = elementRect.top <= containerRect.bottom + 200;\n          \n          if (isVisible) {\n            loadTriggered = true;\n            loadMoreProjects();\n            \n            setTimeout(() => {\n              loadTriggered = false;\n            }, 2000);\n          }\n        } else {\n          // Fallback to window scroll\n          const rect = element.getBoundingClientRect();\n          const isVisible = rect.top <= window.innerHeight + 200;\n          \n          if (isVisible) {\n            loadTriggered = true;\n            loadMoreProjects();\n            \n            setTimeout(() => {\n              loadTriggered = false;\n            }, 2000);\n          }\n        }\n      };\n\n      const rootElement = tableContainer || null;\n\n      const observer = new IntersectionObserver(handleIntersection, {\n        root: rootElement,\n        rootMargin: '200px',\n        threshold: [0, 0.1, 0.5, 1.0] // Multiple thresholds for better detection\n      });\n\n      observer.observe(element);\n\n      // Add scroll listener as fallback - use table container if available, otherwise window\n      const scrollTarget = tableContainer || window;\n      scrollTarget.addEventListener('scroll', handleScroll, { passive: true });\n\n      // Check if element is already visible (might trigger immediately)\n      const checkVisibility = () => {\n        if (!element) return;\n        if (tableContainer) {\n          const containerRect = tableContainer.getBoundingClientRect();\n          const elementRect = element.getBoundingClientRect();\n          const isVisible = elementRect.top < containerRect.bottom + 200;\n          \n          if (isVisible && hasMoreProjectsRef.current && !loadingMoreRef.current && !loadTriggered) {\n            loadTriggered = true;\n            loadMoreProjects();\n            \n            setTimeout(() => {\n              loadTriggered = false;\n            }, 2000);\n          }\n        } else {\n          // Fallback to window\n          const rect = element.getBoundingClientRect();\n          const isVisible = rect.top < window.innerHeight + 200;\n          \n          if (isVisible && hasMoreProjectsRef.current && !loadingMoreRef.current && !loadTriggered) {\n            loadTriggered = true;\n            loadMoreProjects();\n            \n            setTimeout(() => {\n              loadTriggered = false;\n            }, 2000);\n          }\n        }\n      };\n\n      // Check visibility after a short delay to ensure DOM is ready\n      const visibilityTimeout = setTimeout(checkVisibility, 300);\n\n      return () => {\n        observer.disconnect();\n        const scrollTarget = tableContainer || window;\n        scrollTarget.removeEventListener('scroll', handleScroll);\n        clearTimeout(visibilityTimeout);\n      };\n    };\n\n    // Try to set up immediately\n    let cleanup = setupObserver();\n    \n    // If element not available, retry after a short delay\n    if (!cleanup) {\n      const retryTimeout = setTimeout(() => {\n        cleanup = setupObserver();\n      }, 500);\n      \n      return () => {\n        clearTimeout(retryTimeout);\n        if (cleanup) cleanup();\n      };\n    }\n    \n    return cleanup;\n  }, [hasMoreProjects, loadingMore, loadMoreProjects, filteredContributorProjects.length]);\n\n  const fetchClientToolNamePicklist = async () => {\n    try {\n      const response = await apiClient.get('/client-tool-account/picklist-values');\n      if (response.data.success) {\n        setClientToolNamePicklist(response.data.values || []);\n      }\n    } catch (error) {\n      // Silently fail - picklist values are optional\n    }\n  };\n\n  const searchClientToolAccounts = async (searchTerm, projectId = null) => {\n    if (!searchTerm || searchTerm.trim().length < 2) {\n      if (projectId) {\n        setSearchResultsPerProject(prev => ({ ...prev, [projectId]: [] }));\n      }\n      return;\n    }\n\n    if (projectId) {\n      setSearchingPerProject(prev => ({ ...prev, [projectId]: true }));\n    }\n\n    try {\n      const response = await apiClient.get(`/client-tool-account/search?term=${encodeURIComponent(searchTerm)}`);\n      if (response.data.success) {\n        if (projectId) {\n          setSearchResultsPerProject(prev => ({ ...prev, [projectId]: response.data.accounts || [] }));\n        }\n      }\n    } catch (error) {\n      toast.error('Failed to search client tool accounts');\n    } finally {\n      if (projectId) {\n        setSearchingPerProject(prev => ({ ...prev, [projectId]: false }));\n      }\n    }\n  };\n\n  // Debounce timer refs\n  const projectSearchDebounceTimerRef = useRef({});\n\n  const handleProjectSearchChange = (projectId, value) => {\n    setSearchTermsPerProject(prev => ({ ...prev, [projectId]: value }));\n    \n    // Clear existing timer for this project\n    if (projectSearchDebounceTimerRef.current[projectId]) {\n      clearTimeout(projectSearchDebounceTimerRef.current[projectId]);\n    }\n    \n    // Set new timer to search after user stops typing (500ms delay)\n    if (value.trim().length >= 2) {\n      projectSearchDebounceTimerRef.current[projectId] = setTimeout(() => {\n        searchClientToolAccounts(value, projectId);\n      }, 500);\n    } else {\n      setSearchResultsPerProject(prev => ({ ...prev, [projectId]: [] }));\n    }\n  };\n\n  // Cleanup timers on unmount\n  useEffect(() => {\n    return () => {\n      Object.values(projectSearchDebounceTimerRef.current).forEach(timer => {\n        if (timer) clearTimeout(timer);\n      });\n    };\n  }, []);\n\n  // Search for existing client tool accounts when in update mode\n  const searchClientToolAccountsForUpdate = async (searchTerm) => {\n    if (!searchTerm || searchTerm.trim().length < 2) {\n      setAccountSearchResultsForUpdate([]);\n      return;\n    }\n    setSearchingAccountForUpdate(true);\n    try {\n      const response = await apiClient.get(`/client-tool-account/search?term=${encodeURIComponent(searchTerm)}`);\n      if (response.data.success) {\n        setAccountSearchResultsForUpdate(response.data.accounts || []);\n      }\n    } catch (error) {\n      setAccountSearchResultsForUpdate([]);\n    } finally {\n      setSearchingAccountForUpdate(false);\n    }\n  };\n\n  // Fetch account details and populate form\n  const fetchAccountDetails = async (accountId) => {\n    try {\n      const response = await apiClient.get(`/client-tool-account/${accountId}`);\n      if (response.data.success && response.data.account) {\n        const account = response.data.account;\n        \n        // Parse Last_Changed_At__c if it exists\n        let lastChangedDate = '';\n        let lastChangedTime = '';\n        if (account.lastChangedAt) {\n          const dateObj = new Date(account.lastChangedAt);\n          lastChangedDate = dateObj.toISOString().split('T')[0];\n          const timeStr = dateObj.toTimeString().split(' ')[0];\n          lastChangedTime = timeStr.substring(0, 5); // HH:MM format\n        }\n\n        setFormData({\n          clientToolAccountName: account.name || account.accountName || '',\n          contributor: account.contributor || account.contributorId || '',\n          contributorId: account.contributorId || account.contributor || '',\n          contributorName: account.contributorName || '',\n          clientToolUserId: account.clientToolUserId || '',\n          account: account.account || account.accountId || '',\n          accountId: account.accountId || account.account || '',\n          accountName: account.accountName || account.name || '',\n          otpLimitExceeded: account.otpLimitExceeded || false,\n          deactivated: account.deactivated || false,\n          lastChangedDate: lastChangedDate,\n          lastChangedTime: lastChangedTime,\n          clientToolName: account.clientToolName || '',\n          clientToolEmail: account.clientToolEmail || '',\n          verified: account.verified || false\n        });\n\n        // Set search terms for display\n        if (account.contributorName) {\n          setContributorSearchTerm(account.contributorName);\n        }\n        if (account.accountName || account.name) {\n          setAccountSearchTerm(account.accountName || account.name);\n        }\n      }\n    } catch (error) {\n      toast.error('Failed to fetch account details');\n    }\n  };\n\n  // Handle Client Tool Account Name change in update mode - trigger search\n  const handleClientToolAccountNameChangeInUpdateMode = (value) => {\n    setFormData({ ...formData, clientToolAccountName: value });\n    \n    // If in update mode and no account selected yet, search for accounts by name\n    if (isUpdateMode && !selectedAccountId && value && value.trim().length >= 2) {\n      // Debounce the search\n      if (updateAccountSearchDebounceRef.current) {\n        clearTimeout(updateAccountSearchDebounceRef.current);\n      }\n      updateAccountSearchDebounceRef.current = setTimeout(() => {\n        searchClientToolAccountsForUpdate(value);\n      }, 500);\n    } else if (isUpdateMode && !selectedAccountId && (!value || value.trim().length < 2)) {\n      // Clear search results if value is too short\n      setAccountSearchResultsForUpdate([]);\n    }\n  };\n\n  const handleCreateClientToolAccount = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (isUpdateMode) {\n      // Handle update\n      if (!selectedAccountId) {\n        toast.error('Please select a Client Tool Account to update');\n        return;\n      }\n      setUpdating(true);\n      try {\n        const submitData = {\n          clientToolAccountName: formData.clientToolAccountName,\n          contributor: formData.contributorId || formData.contributor,\n          clientToolUserId: formData.clientToolUserId,\n          account: formData.accountId || formData.account,\n          accountName: formData.accountName || formData.clientToolAccountName,\n          otpLimitExceeded: formData.otpLimitExceeded,\n          deactivated: formData.deactivated,\n          lastChangedDate: formData.lastChangedDate,\n          lastChangedTime: formData.lastChangedTime,\n          clientToolName: formData.clientToolName,\n          clientToolEmail: formData.clientToolEmail,\n          verified: formData.verified\n        };\n        \n        const response = await apiClient.put(`/client-tool-account/${selectedAccountId}`, submitData);\n        if (response.data.success) {\n          toast.success('Client Tool Account updated successfully');\n          setShowCreateForm(false);\n          setIsUpdateMode(false);\n          setSelectedAccountId(null);\n          resetForm();\n          fetchContributorProjects();\n        }\n      } catch (error) {\n        const errorMessage = error.response?.data?.error || 'Failed to update client tool account';\n        toast.error(errorMessage);\n      } finally {\n        setUpdating(false);\n      }\n    } else {\n      // Handle create\n      setCreating(true);\n      try {\n        const submitData = {\n          clientToolAccountName: formData.clientToolAccountName,\n          contributor: formData.contributorId || formData.contributor,\n          clientToolUserId: formData.clientToolUserId,\n          account: formData.accountId || formData.account,\n          accountName: formData.accountName || formData.clientToolAccountName,\n          otpLimitExceeded: formData.otpLimitExceeded,\n          deactivated: formData.deactivated,\n          lastChangedDate: formData.lastChangedDate,\n          lastChangedTime: formData.lastChangedTime,\n          clientToolName: formData.clientToolName,\n          clientToolEmail: formData.clientToolEmail,\n          verified: formData.verified\n        };\n        \n        const response = await apiClient.post('/client-tool-account/create', submitData);\n        if (response.data.success) {\n          toast.success('Client Tool Account created successfully');\n          setShowCreateForm(false);\n          resetForm();\n          fetchContributorProjects();\n        }\n      } catch (error) {\n        const errorMessage = error.response?.data?.error || 'Failed to create client tool account';\n        toast.error(errorMessage);\n      } finally {\n        setCreating(false);\n      }\n    }\n  };\n\n  const handleUpdateMapping = async (projectId, accountId) => {\n    setUpdating(true);\n    try {\n      const response = await apiClient.post('/client-tool-account/update-mapping', {\n        projectId,\n        accountId\n      });\n      if (response.data.success) {\n        toast.success('Client Tool Account mapping updated successfully');\n        fetchContributorProjects();\n        setSelectedAccounts(prev => {\n          const updated = { ...prev };\n          delete updated[projectId];\n          return updated;\n        });\n        // Clear search results for this project\n        setSearchResultsPerProject(prev => {\n          const updated = { ...prev };\n          delete updated[projectId];\n          return updated;\n        });\n        setSearchTermsPerProject(prev => {\n          const updated = { ...prev };\n          delete updated[projectId];\n          return updated;\n        });\n      }\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || 'Failed to update mapping';\n      toast.error(errorMessage);\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  const handleExportToExcel = () => {\n    if (filteredContributorProjects.length === 0) {\n      toast.error('No data to export');\n      return;\n    }\n\n    try {\n      // Prepare data for export - must include required columns for import\n      const exportData = filteredContributorProjects.map(project => ({\n        'Contributor Project Name': project.contributorProjectName || 'N/A',\n        'Client Tool Account Name': project.clientToolAccountUsedName || project.clientToolAccountUsed || 'Not Set',\n        'Project': project.project || 'N/A'\n      }));\n\n      // Create workbook and worksheet\n      const ws = XLSX.utils.json_to_sheet(exportData);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'Client Tool Accounts');\n\n      // Generate filename with timestamp\n      const filename = `Client_Tool_Accounts_${new Date().toISOString().split('T')[0]}.xlsx`;\n\n      // Write and download\n      XLSX.writeFile(wb, filename);\n      toast.success(`Exported ${exportData.length} records to Excel`);\n    } catch (error) {\n      console.error('Error exporting to Excel:', error);\n      toast.error('Failed to export to Excel');\n    }\n  };\n\n  const handleDownloadTemplate = () => {\n    try {\n      // Create template with headers and example row\n      const templateData = [\n        {\n          'Contributor Project Name': 'Example Contributor Project',\n          'Project': 'Example Project',\n          'Client Tool Account Name': 'Example Client Tool Account',\n          'Client Tool Name': 'Tool Name',\n          'Client Tool Email': 'email@example.com',\n          'Client Tool User ID': 'user123',\n          'Contributor': 'Contributor Name',\n          'Account': 'Account Name',\n          'OTP Limit Exceeded': false,\n          'Deactivated': false,\n          'Verified': false\n        }\n      ];\n\n      const ws = XLSX.utils.json_to_sheet(templateData);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'Template');\n\n      // Generate filename\n      const filename = `Client_Tool_Account_Import_Template.xlsx`;\n\n      // Write and download\n      XLSX.writeFile(wb, filename);\n      toast.success('Template downloaded successfully');\n    } catch (error) {\n      console.error('Error downloading template:', error);\n      toast.error('Failed to download template');\n    }\n  };\n\n  const handleImportFile = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const validExtensions = ['.xlsx', '.xls', '.csv'];\n    const fileExtension = '.' + file.name.split('.').pop().toLowerCase();\n    if (!validExtensions.includes(fileExtension)) {\n      toast.error('Please upload a valid Excel file (.xlsx, .xls) or CSV file');\n      return;\n    }\n\n    setImporting(true);\n    \n    // Helper function to handle file processing errors\n    const handleFileProcessingError = (error) => {\n      console.error('Error processing file:', error);\n      let errorMessage = 'Error processing file. Please check the file format.';\n      \n      // Provide more specific error messages\n      if (error.message) {\n        if (error.message.includes('Cannot read') || error.message.includes('Unexpected')) {\n          errorMessage = 'The file format is invalid or corrupted. Please ensure it is a valid Excel (.xlsx, .xls) or CSV file.';\n        } else if (error.message.includes('timeout')) {\n          errorMessage = 'File processing timed out. The file may be too large.';\n        } else {\n          errorMessage = `Error processing file: ${error.message}`;\n        }\n      }\n      \n      toast.error(errorMessage);\n      setImporting(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    };\n    \n    // Helper function to process import data\n    const processImportData = async (jsonData) => {\n      if (jsonData.length === 0) {\n        toast.error('The file is empty or has no data rows');\n        setImporting(false);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n        return;\n      }\n\n      // Validate that we have valid data structure\n      if (!Array.isArray(jsonData) || jsonData.length === 0) {\n        toast.error('The file does not contain valid data. Please check the file format.');\n        setImporting(false);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n        return;\n      }\n      \n      // Validate required columns - match server-side logic\n      const requiredColumns = [\n        { variants: ['Contributor Project Name', 'ContributorProjectName', 'Contributor Project'], label: 'Contributor Project Name' },\n        { variants: ['Client Tool Account Name', 'ClientToolAccountName', 'Account Name'], label: 'Client Tool Account Name' }\n      ];\n      const firstRow = jsonData[0];\n      \n      // Check if first row is valid\n      if (!firstRow || typeof firstRow !== 'object') {\n        toast.error('The file format is invalid. Please ensure the first row contains column headers.');\n        setImporting(false);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n        return;\n      }\n      \n      const fileKeys = Object.keys(firstRow);\n      \n      if (fileKeys.length === 0) {\n        toast.error('The file does not contain any columns. Please check the file format.');\n        setImporting(false);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n        return;\n      }\n      \n      // Helper function to normalize column names (same as server-side)\n      const normalizeColumnName = (name) => {\n        if (typeof name !== 'string') return '';\n        return name.toLowerCase().replace(/\\s+/g, '').trim();\n      };\n      \n      // Check which columns are missing\n      const missingColumns = [];\n      requiredColumns.forEach(column => {\n        const found = fileKeys.some(fileKey => {\n          const normalizedFileKey = normalizeColumnName(fileKey);\n          return column.variants.some(variant => \n            normalizedFileKey === normalizeColumnName(variant)\n          );\n        });\n        if (!found) {\n          missingColumns.push(column.label);\n        }\n      });\n\n      if (missingColumns.length > 0) {\n        toast.error(`File must contain \"${missingColumns.join('\" and \"')}\" columns. Found columns: ${fileKeys.join(', ')}`);\n        setImporting(false);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n        return;\n      }\n\n      // Process import - REWRITTEN FOR PERFORMANCE\n      try {\n        console.log(`[Import] Starting import of ${jsonData.length} records`);\n        \n        // Create axios instance with extended timeout\n        const bulkImportClient = axios.create({\n          baseURL: apiClient.defaults.baseURL,\n          headers: {\n            'Content-Type': 'application/json',\n            ...(localStorage.getItem('token') ? { Authorization: `Bearer ${localStorage.getItem('token')}` } : {})\n          },\n          timeout: 600000, // 10 minutes\n        });\n        \n        // Send all records at once - server will process in batches\n        const response = await bulkImportClient.post('/client-tool-account/bulk-import', {\n          records: jsonData,\n          batchSize: 50 // Process 50 records per batch on server\n        });\n\n        if (response.data && response.data.success) {\n          const importedCount = response.data.importedCount || 0;\n          const errorCount = response.data.errorCount || 0;\n          \n          if (importedCount > 0) {\n            toast.success(`Successfully imported ${importedCount} record(s)`);\n          }\n          \n          if (errorCount > 0) {\n            toast.error(`${errorCount} record(s) failed to import`);\n            if (response.data.errors && response.data.errors.length > 0) {\n              console.error('Import errors:', response.data.errors);\n            }\n          }\n          \n          // Refresh the table\n          fetchContributorProjects();\n        } else {\n          toast.error(response.data?.error || 'Failed to import records');\n        }\n      } catch (apiError) {\n        console.error('Error calling bulk-import API:', apiError);\n        \n        let errorMessage = 'Failed to import records. Please try again.';\n        if (apiError.response) {\n          errorMessage = apiError.response.data?.error || apiError.response.data?.message || errorMessage;\n        } else if (apiError.message) {\n          if (apiError.message.includes('timeout') || apiError.message.includes('504')) {\n            errorMessage = 'Import timed out. The file may be too large. Please try with fewer records or contact support.';\n          } else {\n            errorMessage = apiError.message;\n          }\n        }\n        \n        toast.error(errorMessage);\n      } finally {\n        setImporting(false);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n      }\n    };\n    \n    try {\n      const reader = new FileReader();\n      \n      // Use appropriate read method based on file type\n      if (fileExtension === '.csv') {\n        // For CSV files, read as text\n        reader.onload = async (e) => {\n          try {\n            const text = e.target.result;\n            if (!text || text.trim().length === 0) {\n              toast.error('The CSV file is empty');\n              setImporting(false);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n              return;\n            }\n            \n            // Use XLSX to parse CSV\n            const workbook = XLSX.read(text, { type: 'string', sheetStubs: true });\n            if (!workbook.SheetNames || workbook.SheetNames.length === 0) {\n              toast.error('The CSV file appears to be empty or invalid');\n              setImporting(false);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n              return;\n            }\n            const worksheet = workbook.Sheets[workbook.SheetNames[0]];\n            if (!worksheet) {\n              toast.error('The CSV file does not contain valid data');\n              setImporting(false);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n              return;\n            }\n            const jsonData = XLSX.utils.sheet_to_json(worksheet, { defval: '' });\n            await processImportData(jsonData);\n          } catch (error) {\n            handleFileProcessingError(error);\n          }\n        };\n        reader.readAsText(file);\n      } else {\n        // For Excel files, read as array buffer\n        reader.onload = async (e) => {\n          try {\n            const data = new Uint8Array(e.target.result);\n            const workbook = XLSX.read(data, { type: 'array', sheetStubs: true });\n            if (!workbook.SheetNames || workbook.SheetNames.length === 0) {\n              toast.error('The Excel file appears to be empty or invalid');\n              setImporting(false);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n              return;\n            }\n            const firstSheetName = workbook.SheetNames[0];\n            const worksheet = workbook.Sheets[firstSheetName];\n            if (!worksheet) {\n              toast.error('The Excel file does not contain valid data');\n              setImporting(false);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n              return;\n            }\n            const jsonData = XLSX.utils.sheet_to_json(worksheet, { defval: '' });\n            await processImportData(jsonData);\n          } catch (error) {\n            handleFileProcessingError(error);\n          }\n        };\n        reader.readAsArrayBuffer(file);\n      }\n    } catch (error) {\n      console.error('Error reading file:', error);\n      toast.error('Failed to read file');\n      setImporting(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handlePublishSelected = async () => {\n    if (bulkSelectedProjects.length === 0) {\n      toast.error('Please select at least one project');\n      return;\n    }\n\n    // Check if all selected projects have a CTA selected in their Actions column\n    const projectsWithoutCTA = bulkSelectedProjects.filter(projectId => !selectedAccounts[projectId]);\n    if (projectsWithoutCTA.length > 0) {\n      toast.error(`Please select a Client Tool Account for all selected projects`);\n      return;\n    }\n    \n    // Validate bulk assignment\n    const assignments = bulkSelectedProjects.map(projectId => ({\n      projectId,\n      accountId: selectedAccounts[projectId]\n    }));\n    const validation = validateBulkAssignment(assignments);\n    if (!validation.isValid) {\n      toast.error(`Validation failed: ${validation.errors.join(', ')}`);\n      return;\n    }\n    \n    // Check for conflicts\n    const conflicts = getAllConflicts(contributorProjects, selectedAccounts);\n    const relevantConflicts = conflicts.filter(c => \n      bulkSelectedProjects.some(pid => \n        c.projectIds?.includes(pid) || c.currentProjectId === pid\n      )\n    );\n    \n    if (relevantConflicts.length > 0) {\n      const conflictMessages = relevantConflicts.map(c => c.message).join('; ');\n      const proceed = window.confirm(\n        `Warning: Conflicts detected:\\n\\n${conflictMessages}\\n\\nDo you want to proceed anyway?`\n      );\n      if (!proceed) {\n        return;\n      }\n    }\n    \n    // Check for inactive/deactivated accounts\n    const inactiveAccounts = [];\n    bulkSelectedProjects.forEach(projectId => {\n      const accountId = selectedAccounts[projectId];\n      const status = accountStatusChecks[accountId];\n      if (status && !status.isActive) {\n        const project = contributorProjects.find(p => p.id === projectId);\n        inactiveAccounts.push({\n          projectName: project?.name || projectId,\n          status: status.status,\n          warnings: status.warnings\n        });\n      }\n    });\n    \n    if (inactiveAccounts.length > 0) {\n      const inactiveMessage = inactiveAccounts\n        .map(ia => `${ia.projectName}: ${ia.status} (${ia.warnings.join(', ')})`)\n        .join('\\n');\n      const proceed = window.confirm(\n        `Warning: Some accounts are inactive or deactivated:\\n\\n${inactiveMessage}\\n\\nDo you want to proceed anyway?`\n      );\n      if (!proceed) {\n        return;\n      }\n    }\n\n    setUpdating(true);\n    try {\n      // Update each selected project with its respective CTA from the Actions column\n      const updatePromises = bulkSelectedProjects.map(projectId => {\n        const accountId = selectedAccounts[projectId];\n        return apiClient.post('/client-tool-account/update-mapping', {\n          projectId,\n          accountId\n        });\n      });\n\n      const results = await Promise.all(updatePromises);\n      const successCount = results.filter(r => r.data.success).length;\n      \n      if (successCount === bulkSelectedProjects.length) {\n        toast.success(`Successfully published ${successCount} project(s) to Salesforce`);\n        setBulkSelectedProjects([]);\n        // Clear selected accounts for published projects\n        setSelectedAccounts(prev => {\n          const updated = { ...prev };\n          bulkSelectedProjects.forEach(projectId => {\n            delete updated[projectId];\n          });\n          return updated;\n        });\n        // Clear search terms and results for published projects\n        setSearchTermsPerProject(prev => {\n          const updated = { ...prev };\n          bulkSelectedProjects.forEach(projectId => {\n            delete updated[projectId];\n          });\n          return updated;\n        });\n        setSearchResultsPerProject(prev => {\n          const updated = { ...prev };\n          bulkSelectedProjects.forEach(projectId => {\n            delete updated[projectId];\n          });\n          return updated;\n        });\n        fetchContributorProjects();\n      } else {\n        toast.error(`Failed to publish some projects. ${successCount} of ${bulkSelectedProjects.length} succeeded.`);\n      }\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || 'Failed to publish projects';\n      toast.error(errorMessage);\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      clientToolAccountName: '',\n      contributor: '',\n      contributorId: '',\n      contributorName: '',\n      clientToolUserId: '',\n      account: '',\n      accountId: '',\n      accountName: '',\n      otpLimitExceeded: false,\n      deactivated: false,\n      lastChangedDate: '',\n      lastChangedTime: '',\n      clientToolName: '',\n      clientToolEmail: '',\n      verified: false\n    });\n    setContributorSearchTerm('');\n    setContributorSearchResults([]);\n    setAccountSearchTerm('');\n    setAccountSearchResults([]);\n  };\n  \n  // Search Contributors\n  const searchContributors = async (searchTerm) => {\n    if (!searchTerm || searchTerm.trim().length < 2) {\n      setContributorSearchResults([]);\n      return;\n    }\n    setContributorSearching(true);\n    try {\n      const response = await apiClient.get(`/salesforce/search-people?search=${encodeURIComponent(searchTerm)}&recordType=`);\n      if (response.data.success) {\n        // Filter to only return Contacts (Contributor__c typically expects Contact IDs, not User IDs)\n        // Contact IDs start with '003', User IDs start with '005'\n        const contactsOnly = (response.data.people || []).filter(person => \n          person.id && person.id.startsWith('003')\n        );\n        setContributorSearchResults(contactsOnly);\n      }\n    } catch (error) {\n      setContributorSearchResults([]);\n    } finally {\n      setContributorSearching(false);\n    }\n  };\n  \n  // Search Accounts\n  const searchAccounts = async (searchTerm) => {\n    if (!searchTerm || searchTerm.trim().length < 2) {\n      setAccountSearchResults([]);\n      return;\n    }\n    setAccountSearching(true);\n    try {\n      const response = await apiClient.get(`/salesforce/accounts`);\n      if (response.data.success) {\n        const accounts = response.data.accounts || [];\n        const filtered = accounts.filter(acc => \n          acc.name.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n        setAccountSearchResults(filtered);\n      }\n    } catch (error) {\n      setAccountSearchResults([]);\n    } finally {\n      setAccountSearching(false);\n    }\n  };\n  \n  // Debounced search handlers\n  const contributorSearchDebounceRef = useRef(null);\n  const accountSearchDebounceRef = useRef(null);\n  const updateAccountSearchDebounceRef = useRef(null);\n  \n  const handleContributorSearchChange = (value) => {\n    setContributorSearchTerm(value);\n    if (contributorSearchDebounceRef.current) {\n      clearTimeout(contributorSearchDebounceRef.current);\n    }\n    if (value.trim().length >= 2) {\n      contributorSearchDebounceRef.current = setTimeout(() => {\n        searchContributors(value);\n      }, 500);\n    } else {\n      setContributorSearchResults([]);\n    }\n  };\n  \n  const handleAccountSearchChange = (value) => {\n    setAccountSearchTerm(value);\n    if (accountSearchDebounceRef.current) {\n      clearTimeout(accountSearchDebounceRef.current);\n    }\n    if (value.trim().length >= 2) {\n      accountSearchDebounceRef.current = setTimeout(() => {\n        searchAccounts(value);\n      }, 500);\n    } else {\n      setAccountSearchResults([]);\n    }\n  };\n\n  const toggleBulkSelection = (projectId) => {\n    setBulkSelectedProjects(prev => {\n      if (prev.includes(projectId)) {\n        return prev.filter(id => id !== projectId);\n      } else {\n        return [...prev, projectId];\n      }\n    });\n  };\n\n  const selectAccountForProject = (projectId, accountId, accountName) => {\n    // Find the account object from search results\n    const account = searchResultsPerProject[projectId]?.find(acc => acc.id === accountId);\n    \n    // Validate account availability\n    const availability = checkAccountAvailability(account, projectId, contributorProjects);\n    if (!availability.isAvailable) {\n      toast.error(availability.reason || 'Account is not available for assignment');\n      return;\n    }\n    \n    // Check account status\n    const status = checkAccountStatus(account);\n    const warnings = [];\n    const conflicts = [];\n    \n    if (!status.isActive) {\n      warnings.push(`Account is ${status.status}. ${status.warnings.join(', ')}`);\n    } else if (status.warnings.length > 0) {\n      warnings.push(...status.warnings);\n    }\n    \n    // Check for existing mapping\n    const existingMapping = detectExistingMapping(accountId, projectId, contributorProjects);\n    if (existingMapping) {\n      conflicts.push(existingMapping.message);\n    }\n    \n    // Check for duplicate mappings in current selection\n    const updatedSelectedAccounts = {\n      ...selectedAccounts,\n      [projectId]: accountId\n    };\n    const duplicateConflicts = detectDuplicateMappings(contributorProjects, updatedSelectedAccounts);\n    duplicateConflicts.forEach(conflict => {\n      if (conflict.accountId === accountId && conflict.projectIds.includes(projectId)) {\n        conflicts.push(conflict.message);\n      }\n    });\n    \n    // Set validation warnings and conflicts\n    setValidationWarnings(prev => ({\n      ...prev,\n      [projectId]: warnings\n    }));\n    setValidationConflicts(prev => ({\n      ...prev,\n      [projectId]: conflicts\n    }));\n    setAccountStatusChecks(prev => ({\n      ...prev,\n      [accountId]: status\n    }));\n    \n    // Show warning toast if there are warnings but allow selection\n    if (warnings.length > 0) {\n      toast.warning(`Warning: ${warnings.join(', ')}`, { duration: 5000 });\n    }\n    \n    // Show conflict warning but allow selection\n    if (conflicts.length > 0) {\n      toast.warning(`Conflict detected: ${conflicts.join(', ')}`, { duration: 6000 });\n    }\n    \n    // Set the selected account\n    setSelectedAccounts(updatedSelectedAccounts);\n    \n    // Update the search input field with the selected account name\n    setSearchTermsPerProject(prev => ({\n      ...prev,\n      [projectId]: accountName || ''\n    }));\n    \n    // Clear the search results for this project to close the dropdown\n    setSearchResultsPerProject(prev => ({\n      ...prev,\n      [projectId]: []\n    }));\n    \n    // Clear the searching state for this project\n    setSearchingPerProject(prev => {\n      const updated = { ...prev };\n      delete updated[projectId];\n      return updated;\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"dashboard-layout\">\n        <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n        <div className=\"client-tool-account\" style={{ marginLeft: sidebarOpen ? '320px' : '80px', height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n          <div className=\"loading-container\">\n            <Loader className=\"spinning\" size={24} />\n            <p>Loading...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      \n      <div className=\"client-tool-account\" style={{ marginLeft: sidebarOpen ? '320px' : '80px' }} onClick={(e) => {\n        // Only close form if clicking outside the form itself\n        if (e.target === e.currentTarget && showCreateForm) {\n          // Don't close on outside click - let user explicitly close it\n        }\n      }}>\n        <div className=\"client-tool-account-container\">\n          <div className=\"client-tool-account-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">Client Tool Account</h1>\n                  <p className=\"page-subtitle\">Manage Client Tool Account mappings for Contributor Projects</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <BookmarkButton pageName=\"Client Tool Account\" pageType=\"page\" />\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tab Navigation */}\n          <div style={{ display: 'flex', gap: '8px', marginBottom: '24px', borderBottom: '2px solid var(--border-color)' }}>\n            <button\n              onClick={() => setActiveTab('management')}\n              style={{\n                padding: '12px 20px',\n                background: 'none',\n                border: 'none',\n                borderBottom: activeTab === 'management' ? '2px solid #0176d3' : '2px solid transparent',\n                color: activeTab === 'management' ? '#0176d3' : '#666',\n                fontWeight: activeTab === 'management' ? '600' : '400',\n                cursor: 'pointer',\n                fontSize: '14px',\n                marginBottom: '-2px'\n              }}\n            >\n              Management\n            </button>\n            <button\n              onClick={() => setActiveTab('analytics')}\n              style={{\n                padding: '12px 20px',\n                background: 'none',\n                border: 'none',\n                borderBottom: activeTab === 'analytics' ? '2px solid #0176d3' : '2px solid transparent',\n                color: activeTab === 'analytics' ? '#0176d3' : '#666',\n                fontWeight: activeTab === 'analytics' ? '600' : '400',\n                cursor: 'pointer',\n                fontSize: '14px',\n                marginBottom: '-2px',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '6px'\n              }}\n            >\n              <BarChart3 size={16} />\n              Analytics\n            </button>\n          </div>\n\n          {/* Analytics Tab */}\n          {activeTab === 'analytics' && (\n            <ClientToolAccountAnalytics />\n          )}\n\n          {/* Management Tab */}\n          {activeTab === 'management' && (\n          <div>\n          <div className=\"client-tool-account-actions\" style={{ display: 'flex', gap: '12px' }}>\n            <button\n              className=\"btn-primary create-client-tool-account-btn\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                setIsUpdateMode(false);\n                setSelectedAccountId(null);\n                setShowCreateForm(prev => !prev);\n                resetForm();\n                setAccountSearchResultsForUpdate([]);\n              }}\n              type=\"button\"\n            >\n              <Plus size={18} />\n              <span>Create Client Tool Account</span>\n            </button>\n            <button\n              className=\"btn-primary\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                setIsUpdateMode(true);\n                setSelectedAccountId(null);\n                setShowCreateForm(true);\n                resetForm();\n                setAccountSearchResultsForUpdate([]);\n              }}\n              type=\"button\"\n            >\n              <Edit size={18} />\n              <span>Update Client Tool Account</span>\n            </button>\n          </div>\n\n          {showCreateForm && (\n            <div \n              className=\"create-form-card neumorphic fade-in\" \n              onClick={(e) => {\n                // Close search results when clicking outside\n                setContributorSearchResults([]);\n                setAccountSearchResults([]);\n                if (isUpdateMode && !selectedAccountId) {\n                  setAccountSearchResultsForUpdate([]);\n                }\n                e.stopPropagation();\n              }}\n              onMouseDown={(e) => e.stopPropagation()}\n              style={{ position: 'relative', zIndex: 100 }}\n            >\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\n                <h2 style={{ fontSize: '16px', fontWeight: '600', margin: 0 }}>\n                  {isUpdateMode ? 'Update Client Tool Account' : 'New Client Tool Account'}\n                </h2>\n                <div style={{ fontSize: '11px', color: 'var(--text-secondary)' }}>\n                  <span style={{ color: 'red' }}>*</span> Required Information\n                </div>\n              </div>\n              {isUpdateMode && !selectedAccountId && (\n                <div style={{ marginBottom: '12px', padding: '8px 12px', background: 'var(--bg-secondary)', borderRadius: '6px', fontSize: '12px', color: 'var(--text-secondary)' }}>\n                  Type in the \"Client Tool Account Name\" field to search for existing Client Tool Accounts. Select an account to load its data.\n                </div>\n              )}\n              {isUpdateMode && selectedAccountId && (\n                <div style={{ marginBottom: '12px', padding: '8px 12px', background: 'var(--success)', borderRadius: '6px', fontSize: '12px', color: '#fff' }}>\n                  Account selected. Edit the fields below and click Update to save changes.\n                </div>\n              )}\n              {isUpdateMode && accountSearchResultsForUpdate.length > 0 && !selectedAccountId && (\n                <div style={{ marginBottom: '12px', position: 'relative', zIndex: 1001 }}>\n                  <div className=\"search-results-dropdown\" style={{ maxHeight: '200px', overflowY: 'auto', fontSize: '12px', position: 'absolute', width: '100%', background: '#fff', border: '1px solid var(--border-color)', borderRadius: 'var(--radius-md)', boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n                    {accountSearchResultsForUpdate.map((account) => (\n                      <div\n                        key={account.id}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setSelectedAccountId(account.id);\n                          setAccountSearchResultsForUpdate([]);\n                          fetchAccountDetails(account.id);\n                        }}\n                        style={{ padding: '10px 12px', cursor: 'pointer', borderBottom: '1px solid var(--border-color)' }}\n                        onMouseEnter={(e) => e.currentTarget.style.background = 'var(--bg-secondary)'}\n                        onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n                      >\n                        <div style={{ fontWeight: '500', fontSize: '13px' }}>{account.name || account.accountName}</div>\n                        {account.contributorName && (\n                          <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>Contributor: {account.contributorName}</div>\n                        )}\n                        {account.clientToolName && (\n                          <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>Tool: {account.clientToolName}</div>\n                        )}\n                        {account.clientToolEmail && (\n                          <div style={{ fontSize: '11px', color: '#666' }}>Email: {account.clientToolEmail}</div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {isUpdateMode && searchingAccountForUpdate && (\n                <div style={{ marginBottom: '12px', padding: '8px 12px', textAlign: 'center', fontSize: '12px', color: 'var(--text-secondary)' }}>\n                  <RefreshCw size={14} className=\"spinning\" style={{ display: 'inline-block', marginRight: '6px' }} />\n                  Searching...\n                </div>\n              )}\n              <form \n                onSubmit={handleCreateClientToolAccount} \n                onClick={(e) => {\n                  // Close search results when clicking on form\n                  setContributorSearchResults([]);\n                  setAccountSearchResults([]);\n                  if (isUpdateMode && !selectedAccountId) {\n                    setAccountSearchResultsForUpdate([]);\n                  }\n                  e.stopPropagation();\n                }}\n                onMouseDown={(e) => e.stopPropagation()}\n              >\n                <div style={{ marginBottom: '16px' }}>\n                  <h3 style={{ fontSize: '13px', fontWeight: '600', marginBottom: '10px', paddingBottom: '6px', borderBottom: '1px solid var(--border-color)' }}>Information</h3>\n                  \n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '10px', marginBottom: '10px' }}>\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Client Tool Name <span style={{ color: 'red' }}>*</span></label>\n                      <select\n                        value={formData.clientToolName}\n                        onChange={(e) => setFormData({ ...formData, clientToolName: e.target.value })}\n                        required\n                        style={{ fontSize: '12px', padding: '6px 8px' }}\n                      >\n                        <option value=\"\">--None--</option>\n                        {clientToolNamePicklist.map((value, index) => (\n                          <option key={index} value={value}>{value}</option>\n                        ))}\n                      </select>\n                    </div>\n\n                    <div className=\"form-group\" style={{ position: 'relative', marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Contributor <span style={{ color: 'red' }}>*</span></label>\n                      <input\n                        type=\"text\"\n                        value={contributorSearchTerm || formData.contributorName || ''}\n                        onChange={(e) => {\n                          const value = e.target.value;\n                          setContributorSearchTerm(value);\n                          handleContributorSearchChange(value);\n                          if (!value) {\n                            setFormData({ ...formData, contributor: '', contributorId: '', contributorName: '' });\n                            setContributorSearchResults([]);\n                          }\n                        }}\n                        required\n                        placeholder=\"Search Contributors...\"\n                        style={{ fontSize: '12px', padding: '6px 8px', width: '100%' }}\n                      />\n                      {contributorSearching && (\n                        <div style={{ position: 'absolute', right: '8px', top: '50%', transform: 'translateY(-50%)', display: 'flex', alignItems: 'center', gap: '4px', color: '#666', fontSize: '10px', marginTop: '12px' }}>\n                          <RefreshCw size={12} className=\"spinning\" />\n                          <span>Searching...</span>\n                        </div>\n                      )}\n                      {contributorSearchResults.length > 0 && (\n                        <div className=\"search-results-dropdown\" style={{ marginTop: '4px', maxHeight: '150px', overflowY: 'auto', fontSize: '12px', position: 'absolute', zIndex: 1000, width: '100%', background: '#fff', border: '1px solid var(--border-color)', borderRadius: 'var(--radius-md)', boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n                          {contributorSearchResults.map((person) => (\n                            <div\n                              key={person.id}\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setFormData({ ...formData, contributor: person.id, contributorId: person.id, contributorName: person.name });\n                                setContributorSearchTerm(person.name);\n                                setContributorSearchResults([]);\n                              }}\n                              style={{ padding: '8px 10px', cursor: 'pointer', borderBottom: '1px solid var(--border-color)' }}\n                              onMouseEnter={(e) => e.currentTarget.style.background = 'var(--bg-secondary)'}\n                              onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n                            >\n                              <div style={{ fontWeight: '500', fontSize: '12px' }}>{person.name}</div>\n                              {person.email && <div style={{ fontSize: '11px', color: '#666' }}>{person.email}</div>}\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                      {!formData.contributor && contributorSearchTerm && contributorSearchResults.length === 0 && !contributorSearching && (\n                        <div style={{ color: 'red', fontSize: '11px', marginTop: '2px' }}>Complete this field.</div>\n                      )}\n                    </div>\n\n                    <div className=\"form-group\" style={{ position: 'relative', marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Account <span style={{ color: 'red' }}>*</span></label>\n                      <input\n                        type=\"text\"\n                        value={accountSearchTerm || formData.accountName || ''}\n                        onChange={(e) => {\n                          const value = e.target.value;\n                          setAccountSearchTerm(value);\n                          handleAccountSearchChange(value);\n                          if (!value) {\n                            setFormData({ ...formData, account: '', accountId: '', accountName: '' });\n                            setAccountSearchResults([]);\n                          }\n                        }}\n                        required\n                        placeholder=\"Search Accounts...\"\n                        style={{ fontSize: '12px', padding: '6px 8px', width: '100%' }}\n                      />\n                      {accountSearching && (\n                        <div style={{ position: 'absolute', right: '8px', top: '50%', transform: 'translateY(-50%)', display: 'flex', alignItems: 'center', gap: '4px', color: '#666', fontSize: '10px', marginTop: '12px' }}>\n                          <RefreshCw size={12} className=\"spinning\" />\n                          <span>Searching...</span>\n                        </div>\n                      )}\n                      {accountSearchResults.length > 0 && (\n                        <div className=\"search-results-dropdown\" style={{ marginTop: '4px', maxHeight: '150px', overflowY: 'auto', fontSize: '12px', position: 'absolute', zIndex: 1000, width: '100%', background: '#fff', border: '1px solid var(--border-color)', borderRadius: 'var(--radius-md)', boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n                          {accountSearchResults.map((account) => (\n                            <div\n                              key={account.id}\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setFormData({ ...formData, account: account.id, accountId: account.id, accountName: account.name });\n                                setAccountSearchTerm(account.name);\n                                setAccountSearchResults([]);\n                              }}\n                              style={{ padding: '8px 10px', cursor: 'pointer', borderBottom: '1px solid var(--border-color)' }}\n                              onMouseEnter={(e) => e.currentTarget.style.background = 'var(--bg-secondary)'}\n                              onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n                            >\n                              <div style={{ fontWeight: '500', fontSize: '12px' }}>{account.name}</div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                      {!formData.account && accountSearchTerm && accountSearchResults.length === 0 && !accountSearching && (\n                        <div style={{ color: 'red', fontSize: '11px', marginTop: '2px' }}>Complete this field.</div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '10px', marginBottom: '10px' }}>\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Client Tool Account Name</label>\n                      <input\n                        type=\"text\"\n                        value={formData.clientToolAccountName}\n                        onChange={(e) => {\n                          const value = e.target.value;\n                          if (isUpdateMode && !selectedAccountId) {\n                            handleClientToolAccountNameChangeInUpdateMode(value);\n                          } else {\n                            setFormData({ ...formData, clientToolAccountName: value });\n                          }\n                        }}\n                        placeholder={isUpdateMode && !selectedAccountId ? \"Search by Client Tool Account Name...\" : \"Enter client tool account name\"}\n                        style={{ fontSize: '12px', padding: '6px 8px' }}\n                      />\n                    </div>\n\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Client Tool User ID</label>\n                      <input\n                        type=\"text\"\n                        value={formData.clientToolUserId}\n                        onChange={(e) => setFormData({ ...formData, clientToolUserId: e.target.value })}\n                        placeholder=\"Enter client tool user ID\"\n                        style={{ fontSize: '12px', padding: '6px 8px' }}\n                      />\n                    </div>\n\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Client Tool Email <span style={{ color: 'red' }}>*</span></label>\n                      <input\n                        type=\"email\"\n                        value={formData.clientToolEmail}\n                        onChange={(e) => setFormData({ ...formData, clientToolEmail: e.target.value })}\n                        required\n                        placeholder=\"Enter client tool email\"\n                        style={{ fontSize: '12px', padding: '6px 8px' }}\n                      />\n                    </div>\n                  </div>\n\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '10px', marginBottom: '10px' }}>\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ display: 'flex', alignItems: 'center', gap: '6px', cursor: 'pointer', fontSize: '12px' }}>\n                        <input\n                          type=\"checkbox\"\n                          checked={formData.otpLimitExceeded}\n                          onChange={(e) => setFormData({ ...formData, otpLimitExceeded: e.target.checked })}\n                          style={{ width: '14px', height: '14px' }}\n                        />\n                        <span>OTP Limit Exceeded</span>\n                      </label>\n                    </div>\n\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ display: 'flex', alignItems: 'center', gap: '6px', cursor: 'pointer', fontSize: '12px' }}>\n                        <input\n                          type=\"checkbox\"\n                          checked={formData.deactivated}\n                          onChange={(e) => setFormData({ ...formData, deactivated: e.target.checked })}\n                          style={{ width: '14px', height: '14px' }}\n                        />\n                        <span>Deactivated</span>\n                      </label>\n                    </div>\n\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ display: 'flex', alignItems: 'center', gap: '6px', cursor: 'pointer', fontSize: '12px' }}>\n                        <input\n                          type=\"checkbox\"\n                          checked={formData.verified}\n                          onChange={(e) => setFormData({ ...formData, verified: e.target.checked })}\n                          style={{ width: '14px', height: '14px' }}\n                        />\n                        <span>Verified</span>\n                      </label>\n                    </div>\n                  </div>\n\n                  <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                    <label style={{ fontSize: '12px', marginBottom: '4px' }}>Last Changed At</label>\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '8px' }}>\n                      <div style={{ position: 'relative' }}>\n                        <input\n                          type=\"date\"\n                          value={formData.lastChangedDate}\n                          onChange={(e) => setFormData({ ...formData, lastChangedDate: e.target.value })}\n                          style={{ fontSize: '12px', padding: '6px 30px 6px 8px' }}\n                        />\n                        <span style={{ position: 'absolute', right: '8px', top: '50%', transform: 'translateY(-50%)', color: '#666', fontSize: '12px' }}></span>\n                      </div>\n                      <div style={{ position: 'relative' }}>\n                        <input\n                          type=\"time\"\n                          value={formData.lastChangedTime}\n                          onChange={(e) => setFormData({ ...formData, lastChangedTime: e.target.value })}\n                          style={{ fontSize: '12px', padding: '6px 30px 6px 8px' }}\n                        />\n                        <span style={{ position: 'absolute', right: '8px', top: '50%', transform: 'translateY(-50%)', color: '#666', fontSize: '12px' }}></span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div style={{ marginBottom: '16px', paddingTop: '12px', borderTop: '1px solid var(--border-color)' }}>\n                  <h3 style={{ fontSize: '13px', fontWeight: '600', marginBottom: '10px' }}>System Information</h3>\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Created By</label>\n                      <input type=\"text\" value=\"\" disabled style={{ fontSize: '12px', padding: '6px 8px', background: 'var(--bg-secondary)', color: 'var(--text-secondary)' }} />\n                    </div>\n                    <div className=\"form-group\" style={{ marginBottom: '10px' }}>\n                      <label style={{ fontSize: '12px', marginBottom: '4px' }}>Last Modified By</label>\n                      <input type=\"text\" value=\"\" disabled style={{ fontSize: '12px', padding: '6px 8px', background: 'var(--bg-secondary)', color: 'var(--text-secondary)' }} />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"form-actions\" style={{ paddingTop: '12px', borderTop: '1px solid var(--border-color)', marginTop: '12px' }}>\n                  <button type=\"button\" className=\"btn-primary\" onClick={() => { \n                    setShowCreateForm(false); \n                    setIsUpdateMode(false);\n                    setSelectedAccountId(null);\n                    resetForm(); \n                    setAccountSearchResultsForUpdate([]);\n                  }} style={{ fontSize: '12px', padding: '8px 16px' }}>\n                    Cancel\n                  </button>\n                  <button type=\"submit\" className=\"btn-primary\" disabled={creating || updating || (isUpdateMode && !selectedAccountId)} style={{ fontSize: '12px', padding: '8px 16px' }}>\n                    {isUpdateMode ? (updating ? 'Updating...' : 'Update Account') : (creating ? 'Creating...' : 'Create Account')}\n                  </button>\n                </div>\n              </form>\n            </div>\n          )}\n\n\n          <div className=\"contributor-projects-list\">\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px', flexWrap: 'wrap', gap: '16px' }}>\n              <h2 style={{ fontSize: '18px', fontWeight: '600', margin: 0 }}>\n                Contributor Projects Requiring Client Tool Account ({filteredContributorProjects.length})\n              </h2>\n              <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n                <div style={{ position: 'relative', minWidth: '250px', maxWidth: '400px' }}>\n                  <Search size={16} style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', color: '#666', zIndex: 1, pointerEvents: 'none' }} />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search contributor projects...\"\n                    value={contributorProjectsSearchTerm}\n                    onChange={(e) => setContributorProjectsSearchTerm(e.target.value)}\n                    style={{\n                      paddingLeft: '36px',\n                      fontSize: '14px',\n                      padding: '10px 16px 10px 36px',\n                      width: '100%',\n                      border: '1px solid var(--border-color)',\n                      borderRadius: 'var(--radius-md)',\n                      background: 'var(--surface)',\n                      color: 'var(--text-primary)',\n                      boxSizing: 'border-box'\n                    }}\n                  />\n                </div>\n                <button\n                  className=\"btn-secondary\"\n                  onClick={handleRefresh}\n                  disabled={loading}\n                  style={{ display: 'flex', alignItems: 'center', gap: '8px', whiteSpace: 'nowrap' }}\n                  title=\"Refresh table\"\n                >\n                  <RefreshCw size={16} className={loading ? 'spinning' : ''} />\n                  Refresh\n                </button>\n                <button\n                  className=\"btn-secondary\"\n                  onClick={handleDownloadTemplate}\n                  style={{ display: 'flex', alignItems: 'center', gap: '8px', whiteSpace: 'nowrap' }}\n                  title=\"Download import template\"\n                >\n                  <FileText size={16} />\n                  Download Template\n                </button>\n                <button\n                  className=\"btn-secondary\"\n                  onClick={() => fileInputRef.current?.click()}\n                  disabled={importing}\n                  style={{ display: 'flex', alignItems: 'center', gap: '8px', whiteSpace: 'nowrap' }}\n                  title=\"Import from Excel file\"\n                >\n                  {importing ? <Loader size={16} className=\"spinning\" /> : <Upload size={16} />}\n                  {importing ? 'Importing...' : 'Import'}\n                </button>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\".xlsx,.xls,.csv\"\n                  onChange={handleImportFile}\n                  style={{ display: 'none' }}\n                />\n                <button\n                  className=\"btn-secondary\"\n                  onClick={handleExportToExcel}\n                  disabled={filteredContributorProjects.length === 0}\n                  style={{ display: 'flex', alignItems: 'center', gap: '8px', whiteSpace: 'nowrap' }}\n                  title=\"Export table data to Excel\"\n                >\n                  <Download size={16} />\n                  Export to Excel\n                </button>\n                <button\n                  className=\"btn-primary\"\n                  onClick={handlePublishSelected}\n                  disabled={bulkSelectedProjects.length === 0 || updating}\n                  style={{ display: 'flex', alignItems: 'center', gap: '8px', whiteSpace: 'nowrap' }}\n                  title={bulkSelectedProjects.length === 0 ? 'Please select at least one project' : 'Publish selected projects to Salesforce'}\n                >\n                  <Send size={16} />\n                  {updating ? 'Publishing...' : bulkSelectedProjects.length > 0 ? `Publish ${bulkSelectedProjects.length} Selected` : 'Publish Selected'}\n                </button>\n              </div>\n            </div>\n            \n            {filteredContributorProjects.length === 0 ? (\n              <div className=\"no-projects\">\n                <p>No contributor projects found that require client tool account mapping</p>\n              </div>\n            ) : (\n              <div className=\"projects-table\" ref={tableContainerRef}>\n                <table>\n                  <thead>\n                    <tr>\n                      <th style={{ width: '40px' }}>\n                        <input\n                          type=\"checkbox\"\n                          checked={bulkSelectedProjects.length === filteredContributorProjects.length && filteredContributorProjects.length > 0}\n                          onChange={(e) => {\n                            if (e.target.checked) {\n                              setBulkSelectedProjects(filteredContributorProjects.map(p => p.id));\n                            } else {\n                              setBulkSelectedProjects([]);\n                            }\n                          }}\n                        />\n                      </th>\n                      <th>Contributor Project Name</th>\n                      <th>Project</th>\n                      <th>Client Tool Account Used</th>\n                      <th>Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {filteredContributorProjects.map((project) => (\n                      <tr key={project.id}>\n                        <td>\n                          <input\n                            type=\"checkbox\"\n                            checked={bulkSelectedProjects.includes(project.id)}\n                            onChange={() => toggleBulkSelection(project.id)}\n                          />\n                        </td>\n                        <td>{project.contributorProjectName || 'N/A'}</td>\n                        <td>{project.project || 'N/A'}</td>\n                        <td>\n                          {project.clientToolAccountUsed ? (\n                            <span style={{ color: 'var(--success)' }}>{project.clientToolAccountUsedName || project.clientToolAccountUsed}</span>\n                          ) : (\n                            <span style={{ color: 'var(--error)' }}>Not Set</span>\n                          )}\n                        </td>\n                        <td\n                          onClick={(e) => {\n                            // Close search results when clicking outside the search input\n                            if (!e.target.closest('.search-box') && !e.target.closest('.search-results-dropdown')) {\n                              setSearchResultsPerProject(prev => {\n                                const updated = { ...prev };\n                                delete updated[project.id];\n                                return updated;\n                              });\n                            }\n                          }}\n                        >\n                          <div style={{ display: 'flex', gap: '8px', alignItems: 'center', position: 'relative' }}>\n                            <div style={{ position: 'relative', minWidth: '250px', flex: 1 }} onClick={(e) => e.stopPropagation()}>\n                              <Search size={16} style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', color: '#666', zIndex: 1, pointerEvents: 'none' }} />\n                              <input\n                                type=\"text\"\n                                placeholder=\"Search Client Tool Account...\"\n                                value={searchTermsPerProject[project.id] || ''}\n                                onChange={(e) => handleProjectSearchChange(project.id, e.target.value)}\n                                onClick={(e) => e.stopPropagation()}\n                                style={{ \n                                  paddingLeft: '36px', \n                                  fontSize: '13px', \n                                  padding: '6px 10px 6px 36px', \n                                  width: '100%', \n                                  paddingRight: searchingPerProject[project.id] ? '90px' : '10px',\n                                  border: '1px solid var(--border-color)',\n                                  borderRadius: 'var(--radius-md)',\n                                  background: 'var(--surface)',\n                                  color: 'var(--text-primary)',\n                                  boxSizing: 'border-box'\n                                }}\n                              />\n                              {searchingPerProject[project.id] && (\n                                <div style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', display: 'flex', alignItems: 'center', gap: '6px', color: '#666', fontSize: '11px', zIndex: 1 }}>\n                                  <RefreshCw size={14} className=\"spinning\" />\n                                  <span>Searching...</span>\n                                </div>\n                              )}\n                              {searchingPerProject[project.id] && (\n                                <div className=\"search-results-dropdown\" style={{ padding: '12px', textAlign: 'center', color: '#666', fontSize: '12px' }} onClick={(e) => e.stopPropagation()}>\n                                  Searching...\n                                </div>\n                              )}\n                              {!searchingPerProject[project.id] && searchResultsPerProject[project.id] && searchResultsPerProject[project.id].length > 0 && (\n                                <div className=\"search-results-dropdown\" onClick={(e) => e.stopPropagation()}>\n                                  {searchResultsPerProject[project.id].map((account) => {\n                                    const availability = checkAccountAvailability(account, project.id, contributorProjects);\n                                    const status = checkAccountStatus(account);\n                                    const isUnavailable = !availability.isAvailable;\n                                    const isInactive = !status.isActive;\n                                    const hasWarnings = status.warnings.length > 0;\n                                    \n                                    return (\n                                      <div\n                                        key={account.id}\n                                        onClick={(e) => {\n                                          if (!isUnavailable) {\n                                            e.stopPropagation();\n                                            selectAccountForProject(project.id, account.id, account.name || account.accountName);\n                                          }\n                                        }}\n                                        style={{\n                                          padding: '10px 12px',\n                                          cursor: isUnavailable ? 'not-allowed' : 'pointer',\n                                          borderBottom: '1px solid var(--border-color)',\n                                          background: selectedAccounts[project.id] === account.id ? 'var(--bg-secondary)' : 'transparent',\n                                          opacity: isUnavailable ? 0.5 : 1\n                                        }}\n                                        onMouseEnter={(e) => {\n                                          if (!isUnavailable) {\n                                            e.currentTarget.style.background = 'var(--bg-secondary)';\n                                          }\n                                        }}\n                                        onMouseLeave={(e) => {\n                                          e.currentTarget.style.background = selectedAccounts[project.id] === account.id ? 'var(--bg-secondary)' : 'transparent';\n                                        }}\n                                      >\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                          <div style={{ flex: 1 }}>\n                                            <div style={{ fontWeight: '500', fontSize: '13px', display: 'flex', alignItems: 'center', gap: '6px' }}>\n                                              {account.name || account.accountName}\n                                              {isInactive && (\n                                                <span style={{ fontSize: '10px', color: '#dc2626', fontWeight: '600' }}>(INACTIVE)</span>\n                                              )}\n                                              {hasWarnings && !isInactive && (\n                                                <AlertTriangle size={12} style={{ color: '#f59e0b' }} />\n                                              )}\n                                            </div>\n                                            {account.contributorName && (\n                                              <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>Contributor: {account.contributorName}</div>\n                                            )}\n                                            {account.clientToolName && (\n                                              <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>Tool: {account.clientToolName}</div>\n                                            )}\n                                            {account.clientToolEmail && (\n                                              <div style={{ fontSize: '11px', color: '#666' }}>Email: {account.clientToolEmail}</div>\n                                            )}\n                                            {account.clientToolUserId && (\n                                              <div style={{ fontSize: '11px', color: '#666' }}>User ID: {account.clientToolUserId}</div>\n                                            )}\n                                            {isUnavailable && (\n                                              <div style={{ fontSize: '11px', color: '#dc2626', marginTop: '4px', fontWeight: '500' }}>\n                                                {availability.reason}\n                                              </div>\n                                            )}\n                                            {hasWarnings && !isUnavailable && (\n                                              <div style={{ fontSize: '11px', color: '#f59e0b', marginTop: '4px' }}>\n                                                {status.warnings.join(', ')}\n                                              </div>\n                                            )}\n                                          </div>\n                                        </div>\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              )}\n                              {/* Display validation warnings below search input */}\n                              {(validationWarnings[project.id]?.length > 0 || validationConflicts[project.id]?.length > 0) && (\n                                <div style={{ marginTop: '8px', position: 'relative', zIndex: 10 }}>\n                                  <ClientToolAccountValidationWarning\n                                    warnings={validationWarnings[project.id] || []}\n                                    conflicts={validationConflicts[project.id] || []}\n                                    onDismiss={() => {\n                                      setValidationWarnings(prev => {\n                                        const updated = { ...prev };\n                                        delete updated[project.id];\n                                        return updated;\n                                      });\n                                      setValidationConflicts(prev => {\n                                        const updated = { ...prev };\n                                        delete updated[project.id];\n                                        return updated;\n                                      });\n                                    }}\n                                    type={validationConflicts[project.id]?.length > 0 ? 'error' : 'warning'}\n                                  />\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n                {/* Infinite scroll trigger and loading indicator */}\n                {hasMoreProjects && (\n                  <>\n                    {!loadingMore && (\n                      <div\n                        ref={infiniteScrollRef}\n                        style={{ \n                          height: '50px', \n                          width: '100%', \n                          marginTop: '20px',\n                          display: 'flex',\n                          justifyContent: 'center',\n                          alignItems: 'center'\n                        }}\n                      >\n                        <div style={{ \n                          fontSize: '12px', \n                          color: 'var(--text-secondary)',\n                          padding: '10px'\n                        }}>\n                          Scroll for more...\n                        </div>\n                      </div>\n                    )}\n                    {loadingMore && (\n                      <div style={{ \n                        display: 'flex', \n                        justifyContent: 'center', \n                        alignItems: 'center', \n                        padding: '20px',\n                        gap: '12px'\n                      }}>\n                        <Loader className=\"spinner\" size={20} style={{ color: '#0176d3' }} />\n                        <span style={{ color: 'var(--text-primary)', fontSize: '14px' }}>Loading more contributor projects...</span>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            )}\n          </div>\n          </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ClientToolAccount;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}