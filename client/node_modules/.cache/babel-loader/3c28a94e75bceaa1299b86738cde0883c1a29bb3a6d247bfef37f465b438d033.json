{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// UpdateObjectFields component - Refactored to use extracted components, hooks, and services\nimport React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/Sidebar';import useSidebarWidth from'../hooks/useSidebarWidth';import{Menu,LogOut,Send,Loader,Eye,Undo,Redo}from'lucide-react';import toast from'react-hot-toast';import BookmarkButton from'../components/BookmarkButton';// Import extracted constants, utilities, services, and hooks\nimport{OBJECT_OPTIONS,UPDATE_MODE_TYPES,TRANSFORMATION_TYPES,DEFAULT_FIELD_MAPPING,DEFAULT_MULTIPLE_FIELD_UPDATE}from'./UpdateObjectFields/constants';import{createNewMapping,duplicateMapping}from'./UpdateObjectFields/utils/mappingUtils';import{useFieldMappings,useReferenceSearch,useTransformationHistory}from'./UpdateObjectFields/hooks';import{fetchFields,fetchPicklistValues,searchReference,getMatchingRecordsCount,previewUpdates,executeUpdates}from'./UpdateObjectFields/services/apiService';// Import all components\nimport{FilterSection,UpdateConfiguration,SingleFieldUpdate,MultipleFieldsUpdate,FieldMappingView,HybridView,CardView,MappingEditor,ConfirmModal,PreviewModal,TemplateModal,SaveSetModal,LoadSetModal,TransformationHelpModal,FieldMappingHelpModal}from'./UpdateObjectFields/components';// Import transformation components\nimport{FormulaField,ConditionalField,ConcatenateField,ValueMapField,DateFormatField,NumberFormatField,TextReplaceField,DefaultValueField,TypeConversionField,ValidateFormatField,RemoveSpecialCharsField,SwitchCaseField}from'./UpdateObjectFields/components/TransformationFields';// Import transformation templates\nimport{transformationTemplates,saveTransformationSet as saveSetToStorage,loadTransformationSet as loadSetFromStorage,getAllTransformationSets,deleteTransformationSet as deleteSetFromStorage}from'../utils/transformationTemplates';import'../styles/UpdateObjectFields.css';import'../styles/Sidebar.css';import'../styles/GlobalHeader.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UpdateObjectFields=()=>{const{user,logout}=useAuth();const[sidebarOpen,setSidebarOpen]=useState(true);const sidebarWidth=useSidebarWidth(sidebarOpen);const[selectedObject,setSelectedObject]=useState('');const[fields,setFields]=useState([]);const[selectedField,setSelectedField]=useState('');const[selectedFieldInfo,setSelectedFieldInfo]=useState(null);const[updateMode,setUpdateMode]=useState('all');const[currentValue,setCurrentValue]=useState('');const[newValue,setNewValue]=useState('');const[updateModeType,setUpdateModeType]=useState(UPDATE_MODE_TYPES.SINGLE);const[loadingFields,setLoadingFields]=useState(false);const[updating,setUpdating]=useState(false);const[picklistValues,setPicklistValues]=useState([]);const[loadingPreview,setLoadingPreview]=useState(false);const[previewData,setPreviewData]=useState(null);const[showConfirmModal,setShowConfirmModal]=useState(false);const[confirmModalData,setConfirmModalData]=useState({message:'',onConfirm:null,onCancel:null});const[showPreviewModal,setShowPreviewModal]=useState(false);const[showTemplateModal,setShowTemplateModal]=useState(false);const[showSaveSetModal,setShowSaveSetModal]=useState(false);const[showLoadSetModal,setShowLoadSetModal]=useState(false);const[showTransformationHelpModal,setShowTransformationHelpModal]=useState(false);const[showFieldMappingHelpModal,setShowFieldMappingHelpModal]=useState(false);const[savedSetName,setSavedSetName]=useState('');const[savedTransformationSets,setSavedTransformationSets]=useState([]);const[batchSize,setBatchSize]=useState(200);const[errorHandlingMode,setErrorHandlingMode]=useState('default');const[showMappingModeHelp,setShowMappingModeHelp]=useState(false);// Use custom hooks\nconst fieldMappingsHook=useFieldMappings(fields,[]);const referenceSearchHook=useReferenceSearch();const currentValueReferenceSearchHook=useReferenceSearch();const transformationHistoryHook=useTransformationHistory(fieldMappingsHook.fieldMappings);// Extract history functions\nconst{undo:undoTransformation,redo:redoTransformation,canUndo,canRedo}=transformationHistoryHook;// Extract hook values\nconst{fieldMappings,setFieldMappings,selectedMappingId,setSelectedMappingId,useHybridView,setUseHybridView,addMapping,removeMapping,updateMapping,getStatus,getSummary}=fieldMappingsHook;// Filter state - FilterSection manages its own filters via useFilters hook internally\n// We need to track filters and count for preview/execute operations\nconst[filters,setFilters]=useState({projectId:'',projectName:'',projectObjectiveId:'',projectObjectiveName:'',status:'',type:''});const[matchingRecordsCount,setMatchingRecordsCount]=useState(null);const{referenceSearchTerm,setReferenceSearchTerm,referenceSearchResults,searchingReference,showReferenceDropdown,setShowReferenceDropdown,handleSearch:handleReferenceSearch}=referenceSearchHook;const{referenceSearchTerm:currentValueReferenceSearchTerm,setReferenceSearchTerm:setCurrentValueReferenceSearchTerm,referenceSearchResults:currentValueReferenceSearchResults,searchingReference:searchingCurrentValueReference,showReferenceDropdown:showCurrentValueReferenceDropdown,setShowReferenceDropdown:setShowCurrentValueReferenceDropdown,handleSearch:handleCurrentValueReferenceSearch}=currentValueReferenceSearchHook;// State for multiple field updates\nconst[multipleFieldUpdates,setMultipleFieldUpdates]=useState([DEFAULT_MULTIPLE_FIELD_UPDATE]);const[sourceObject,setSourceObject]=useState('');const[sourceFields,setSourceFields]=useState([]);const[conditionPicklistValues,setConditionPicklistValues]=useState({});const[targetPicklistValues,setTargetPicklistValues]=useState({});// Fetch target picklist values\nconst fetchTargetPicklistValues=async(mappingId,fieldName)=>{if(!selectedObject||!fieldName)return;try{const values=await fetchPicklistValues(selectedObject,fieldName);setTargetPicklistValues(prev=>_objectSpread(_objectSpread({},prev),{},{[mappingId]:values}));}catch(error){console.error('Error fetching target picklist values:',error);}};// Fetch condition picklist values\nconst fetchConditionPicklistValues=async(mappingId,fieldName)=>{if(!sourceObject||!fieldName)return;try{const values=await fetchPicklistValues(sourceObject,fieldName);const key=\"\".concat(mappingId,\"-\").concat(fieldName);setConditionPicklistValues(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:values}));}catch(error){console.error('Error fetching condition picklist values:',error);}};// Fetch fields when object is selected\nuseEffect(()=>{if(selectedObject){setLoadingFields(true);fetchFields(selectedObject,false).then(fetchedFields=>{setFields(fetchedFields);setSourceFields(fetchedFields);setLoadingFields(false);}).catch(()=>{setLoadingFields(false);});}else{setFields([]);setSelectedField('');setSelectedFieldInfo(null);setPicklistValues([]);}},[selectedObject]);// Handle field selection\nuseEffect(()=>{if(selectedField&&selectedObject){const fieldInfo=fields.find(f=>f.name===selectedField);setSelectedFieldInfo(fieldInfo);if(fieldInfo&&(fieldInfo.type==='picklist'||fieldInfo.type==='multipicklist')){if(fieldInfo.picklistValues&&fieldInfo.picklistValues.length>0){setPicklistValues(fieldInfo.picklistValues);}else{fetchPicklistValues(selectedObject,selectedField).then(values=>{setPicklistValues(values);});}}else{setPicklistValues([]);}}else{setSelectedFieldInfo(null);setPicklistValues([]);}},[selectedField,selectedObject,fields]);// Handle reference search\nuseEffect(()=>{if(selectedFieldInfo&&selectedFieldInfo.type==='reference'&&selectedFieldInfo.referenceTo){if(referenceSearchTerm&&referenceSearchTerm.trim()!==''){handleReferenceSearch(selectedFieldInfo.referenceTo,referenceSearchTerm);}if(currentValueReferenceSearchTerm&&currentValueReferenceSearchTerm.trim()!==''){handleCurrentValueReferenceSearch(selectedFieldInfo.referenceTo,currentValueReferenceSearchTerm);}}},[referenceSearchTerm,currentValueReferenceSearchTerm,selectedFieldInfo,handleReferenceSearch,handleCurrentValueReferenceSearch]);// Transformation components mapping\nconst transformationComponents={[TRANSFORMATION_TYPES.FORMULA]:FormulaField,[TRANSFORMATION_TYPES.CONDITIONAL]:ConditionalField,[TRANSFORMATION_TYPES.CONCATENATE]:ConcatenateField,[TRANSFORMATION_TYPES.VALUE_MAP]:ValueMapField,[TRANSFORMATION_TYPES.DATE_FORMAT]:DateFormatField,[TRANSFORMATION_TYPES.NUMBER_FORMAT]:NumberFormatField,[TRANSFORMATION_TYPES.TEXT_REPLACE]:TextReplaceField,[TRANSFORMATION_TYPES.DEFAULT_VALUE]:DefaultValueField,[TRANSFORMATION_TYPES.TYPE_CONVERSION]:TypeConversionField,[TRANSFORMATION_TYPES.VALIDATE_FORMAT]:ValidateFormatField,[TRANSFORMATION_TYPES.REMOVE_SPECIAL_CHARS]:RemoveSpecialCharsField,[TRANSFORMATION_TYPES.SWITCH]:SwitchCaseField};// Handler functions\nconst handlePreview=async()=>{setLoadingPreview(true);try{const updateConfig={mode:updateModeType,fieldMappings:updateModeType===UPDATE_MODE_TYPES.MAPPING?fieldMappings:null,multipleFieldUpdates:updateModeType===UPDATE_MODE_TYPES.MULTIPLE?multipleFieldUpdates:null,singleFieldUpdate:updateModeType===UPDATE_MODE_TYPES.SINGLE?{field:selectedField,updateMode:updateMode,currentValue:currentValue,newValue:newValue}:null};// Pass sourceObject for field mapping mode\nconst data=await previewUpdates(selectedObject,updateConfig,filters,sourceObject);if(data){setPreviewData(data);setShowPreviewModal(true);}setLoadingPreview(false);}catch(error){console.error('Preview error:',error);setLoadingPreview(false);}};const handleExecute=async()=>{setShowConfirmModal(true);setConfirmModalData({message:\"Are you sure you want to update \".concat(matchingRecordsCount||0,\" record(s)? This action cannot be undone.\"),onConfirm:async()=>{setShowConfirmModal(false);setUpdating(true);try{const updateConfig={mode:updateModeType,fieldMappings:updateModeType===UPDATE_MODE_TYPES.MAPPING?fieldMappings:null,multipleFieldUpdates:updateModeType===UPDATE_MODE_TYPES.MULTIPLE?multipleFieldUpdates:null,singleFieldUpdate:updateModeType===UPDATE_MODE_TYPES.SINGLE?{field:selectedField,updateMode:updateMode,currentValue:currentValue,newValue:newValue}:null,batchSize:batchSize,errorHandlingMode:errorHandlingMode};await executeUpdates(selectedObject,updateConfig,filters,sourceObject);setUpdating(false);}catch(error){console.error('Execute error:',error);setUpdating(false);}},onCancel:()=>setShowConfirmModal(false)});};const handleTemplateApply=template=>{// Switch to Field Mapping mode to show the template fields in Update Configuration\nsetUpdateModeType(UPDATE_MODE_TYPES.MAPPING);let newMappings=[];// Check if template has mappings array (saved field mapping sets)\nif(template.mappings&&Array.isArray(template.mappings)&&template.mappings.length>0){// Create new mappings with unique IDs and ensure all required fields are present\nnewMappings=template.mappings.map((m,index)=>_objectSpread(_objectSpread(_objectSpread({},DEFAULT_FIELD_MAPPING),m),{},{id:Date.now()+index// Ensure unique IDs\n}));}// Check if template is a transformation template (has transformation and config)\nelse if(template.transformation&&template.config){// Convert transformation template to a field mapping\nconst newMapping=_objectSpread(_objectSpread({},DEFAULT_FIELD_MAPPING),{},{id:Date.now(),transformation:template.transformation,// Apply config properties to the mapping, preserving all values from config\nconcatenateFields:template.config.concatenateFields||[],separator:template.config.separator||' ',valueMappings:template.config.valueMappings||[{from:'',to:''}],conditions:template.config.conditions||[{id:Date.now(),field:'',operator:'equals',value:'',logicalOperator:'AND'}],findText:template.config.findText||'',replaceText:template.config.replaceText||'',defaultValue:template.config.defaultValue||'',dateFormat:template.config.dateFormat||'YYYY-MM-DD',numberFormat:template.config.numberFormat||'0.00',formula:template.config.formula||'',sourceField:template.config.sourceField||''},template.config);newMappings=[newMapping];}// Legacy support: check if template has a single mapping object\nelse if(template.mapping){const newMapping=_objectSpread(_objectSpread(_objectSpread({},DEFAULT_FIELD_MAPPING),template.mapping),{},{id:Date.now()});newMappings=[newMapping];}if(newMappings.length>0){// Add the new mappings to existing mappings (don't replace)\nsetFieldMappings(prev=>[...prev,...newMappings]);// If using hybrid view, select the first new mapping\nif(useHybridView&&newMappings.length>0){setSelectedMappingId(newMappings[0].id);}toast.success(\"Template \\\"\".concat(template.name,\"\\\" applied successfully\"));setShowTemplateModal(false);}else{toast.error('Template has no mappings to apply');}};const handleSaveSet=()=>{if(!savedSetName.trim()){toast.error('Please enter a name for the transformation set');return;}const setData={name:savedSetName,fieldMappings:fieldMappings,createdAt:new Date().toISOString()};saveSetToStorage(savedSetName,setData);setSavedTransformationSets(getAllTransformationSets());setSavedSetName('');setShowSaveSetModal(false);toast.success('Transformation set saved successfully');};const handleLoadSet=set=>{const loadedSet=loadSetFromStorage(set.name);if(loadedSet&&loadedSet.fieldMappings){setFieldMappings(loadedSet.fieldMappings.map(m=>_objectSpread(_objectSpread({},m),{},{id:Date.now()})));toast.success(\"Transformation set \\\"\".concat(set.name,\"\\\" loaded successfully\"));}};const handleDeleteSet=setId=>{const set=savedTransformationSets.find(s=>s.id===setId);if(set){deleteSetFromStorage(set.name);setSavedTransformationSets(getAllTransformationSets());toast.success('Transformation set deleted');}};// Load saved sets on mount\nuseEffect(()=>{setSavedTransformationSets(getAllTransformationSets());},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"update-object-fields-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{className:\"update-object-fields-content\",style:{marginLeft:\"\".concat(sidebarWidth,\"px\"),width:\"calc(100% - \".concat(sidebarWidth,\"px)\"),transition:'margin-left 0.2s ease, width 0.2s ease'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"update-object-fields-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"update-object-fields-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-menu-toggle\",onClick:()=>setSidebarOpen(!sidebarOpen),\"aria-label\":\"Toggle sidebar\",children:/*#__PURE__*/_jsx(Menu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Update Object Fields\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Bulk update fields for Project, Project Objective, or Contributor Project\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-user-profile\",children:[/*#__PURE__*/_jsx(BookmarkButton,{pageName:\"Update Object Fields\",pageType:\"page\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:((user===null||user===void 0?void 0:user.email)||'U').charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{size:18})})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"update-object-fields-main\",children:[/*#__PURE__*/_jsx(FilterSection,{selectedObject:selectedObject,setSelectedObject:setSelectedObject,objectOptions:OBJECT_OPTIONS,onFiltersChange:(newFilters,count)=>{// Update filters state for preview/execute operations\nsetFilters(newFilters);// Update matching count from FilterSection\nif(count!==undefined){setMatchingRecordsCount(count);}},setFields:setFields,setSelectedField:setSelectedField,setNewValue:setNewValue,setCurrentValue:setCurrentValue}),selectedObject&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(UpdateConfiguration,{updateModeType:updateModeType,setUpdateModeType:setUpdateModeType,setMultipleFieldUpdates:setMultipleFieldUpdates,setSelectedField:setSelectedField,setNewValue:setNewValue,setCurrentValue:setCurrentValue,setSourceObject:setSourceObject,setSourceFields:setSourceFields,setFieldMappings:setFieldMappings,children:[updateModeType===UPDATE_MODE_TYPES.SINGLE&&/*#__PURE__*/_jsx(SingleFieldUpdate,{selectedObject:selectedObject,fields:fields,loadingFields:loadingFields,selectedField:selectedField,setSelectedField:setSelectedField,updateMode:updateMode,setUpdateMode:setUpdateMode,currentValue:currentValue,setCurrentValue:setCurrentValue,newValue:newValue,setNewValue:setNewValue,selectedFieldInfo:selectedFieldInfo,picklistValues:picklistValues,referenceSearchTerm:referenceSearchTerm,setReferenceSearchTerm:setReferenceSearchTerm,referenceSearchResults:referenceSearchResults,searchingReference:searchingReference,showReferenceDropdown:showReferenceDropdown,setShowReferenceDropdown:setShowReferenceDropdown,currentValueReferenceSearchTerm:currentValueReferenceSearchTerm,setCurrentValueReferenceSearchTerm:setCurrentValueReferenceSearchTerm,currentValueReferenceSearchResults:currentValueReferenceSearchResults,searchingCurrentValueReference:searchingCurrentValueReference,showCurrentValueReferenceDropdown:showCurrentValueReferenceDropdown,setShowCurrentValueReferenceDropdown:setShowCurrentValueReferenceDropdown}),updateModeType===UPDATE_MODE_TYPES.MULTIPLE&&/*#__PURE__*/_jsx(MultipleFieldsUpdate,{selectedObject:selectedObject,fields:fields,loadingFields:loadingFields,multipleFieldUpdates:multipleFieldUpdates,setMultipleFieldUpdates:setMultipleFieldUpdates,fetchPicklistValues:async(objectType,fieldName)=>{return await fetchPicklistValues(objectType,fieldName);},searchReference:async(referenceObject,searchTerm)=>{return await searchReference(referenceObject,searchTerm);}}),updateModeType===UPDATE_MODE_TYPES.MAPPING&&/*#__PURE__*/_jsx(FieldMappingView,{selectedObject:selectedObject,sourceObject:sourceObject,setSourceObject:setSourceObject,sourceFields:sourceFields,setSourceFields:setSourceFields,fetchFields:async(obj,isSource)=>{setLoadingFields(true);const fetchedFields=await fetchFields(obj,isSource);if(isSource){setSourceFields(fetchedFields);}else{setFields(fetchedFields);}setLoadingFields(false);return fetchedFields;},objectOptions:OBJECT_OPTIONS,fieldMappings:fieldMappings,useHybridView:useHybridView,setUseHybridView:setUseHybridView,selectedMappingId:selectedMappingId,setSelectedMappingId:setSelectedMappingId,showMappingModeHelp:showMappingModeHelp,setShowMappingModeHelp:setShowMappingModeHelp,showFieldMappingHelpModal:showFieldMappingHelpModal,setShowFieldMappingHelpModal:setShowFieldMappingHelpModal,children:useHybridView?/*#__PURE__*/_jsx(HybridView,{fieldMappings:fieldMappings,fields:fields,sourceFields:sourceFields,selectedMappingId:selectedMappingId,setSelectedMappingId:setSelectedMappingId,addMapping:addMapping,removeMapping:removeMapping,duplicateMapping:id=>{const mapping=fieldMappings.find(m=>m.id===id);if(mapping){const duplicated=duplicateMapping(mapping);setFieldMappings([...fieldMappings,duplicated]);setSelectedMappingId(duplicated.id);}},getStatus:getStatus,getSummary:getSummary,onTemplateClick:()=>setShowTemplateModal(true),children:selectedMappingId&&fieldMappings.find(m=>m.id===selectedMappingId)&&/*#__PURE__*/_jsx(MappingEditor,{mapping:fieldMappings.find(m=>m.id===selectedMappingId),fields:fields,sourceFields:sourceFields,loadingFields:loadingFields,updateMapping:updateMapping,targetPicklistValues:targetPicklistValues,fetchTargetPicklistValues:fetchTargetPicklistValues,conditionPicklistValues:conditionPicklistValues,fetchConditionPicklistValues:fetchConditionPicklistValues,showTransformationHelpModal:showTransformationHelpModal,setShowTransformationHelpModal:setShowTransformationHelpModal,transformationComponents:transformationComponents})}):/*#__PURE__*/_jsx(CardView,{fieldMappings:fieldMappings,fields:fields,sourceFields:sourceFields,addMapping:addMapping,removeMapping:removeMapping,duplicateMapping:id=>{const mapping=fieldMappings.find(m=>m.id===id);if(mapping){const duplicated=duplicateMapping(mapping);setFieldMappings([...fieldMappings,duplicated]);setSelectedMappingId(duplicated.id);}},getStatus:getStatus,getSummary:getSummary,onTemplateClick:()=>setShowTemplateModal(true),children:/*#__PURE__*/_jsx(MappingEditor,{fields:fields,sourceFields:sourceFields,loadingFields:loadingFields,updateMapping:updateMapping,targetPicklistValues:targetPicklistValues,fetchTargetPicklistValues:fetchTargetPicklistValues,conditionPicklistValues:conditionPicklistValues,fetchConditionPicklistValues:fetchConditionPicklistValues,showTransformationHelpModal:showTransformationHelpModal,setShowTransformationHelpModal:setShowTransformationHelpModal,transformationComponents:transformationComponents})})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'16px',display:'flex',gap:'12px',justifyContent:'space-between',alignItems:'center'},children:[updateModeType===UPDATE_MODE_TYPES.MAPPING&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>undoTransformation(setFieldMappings),disabled:!canUndo||updating||loadingPreview,style:{padding:'8px 16px',fontSize:'13px',backgroundColor:canUndo?'#f9fafb':'#f3f4f6',color:canUndo?'#374151':'#9ca3af',border:'1px solid #e5e7eb',borderRadius:'6px',cursor:canUndo&&!updating&&!loadingPreview?'pointer':'not-allowed',display:'flex',alignItems:'center',gap:'6px'},title:\"Undo\",children:[/*#__PURE__*/_jsx(Undo,{size:16}),\"Undo\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>redoTransformation(setFieldMappings),disabled:!canRedo||updating||loadingPreview,style:{padding:'8px 16px',fontSize:'13px',backgroundColor:canRedo?'#f9fafb':'#f3f4f6',color:canRedo?'#374151':'#9ca3af',border:'1px solid #e5e7eb',borderRadius:'6px',cursor:canRedo&&!updating&&!loadingPreview?'pointer':'not-allowed',display:'flex',alignItems:'center',gap:'6px'},title:\"Redo\",children:[/*#__PURE__*/_jsx(Redo,{size:16}),\"Redo\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',marginLeft:'auto'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handlePreview,disabled:loadingPreview||updating,style:{padding:'10px 20px',fontSize:'13px',backgroundColor:'#f0f9ff',color:'#0284c7',border:'1px solid #bae6fd',borderRadius:'6px',cursor:loadingPreview||updating?'not-allowed':'pointer',display:'flex',alignItems:'center',gap:'6px'},children:[loadingPreview?/*#__PURE__*/_jsx(Loader,{size:16,className:\"spinner\"}):/*#__PURE__*/_jsx(Eye,{size:16}),\"Preview\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExecute,disabled:updating||loadingPreview,style:{padding:'10px 20px',fontSize:'13px',backgroundColor:'#08979C',color:'#fff',border:'none',borderRadius:'6px',cursor:updating||loadingPreview?'not-allowed':'pointer',display:'flex',alignItems:'center',gap:'6px'},children:[updating?/*#__PURE__*/_jsx(Loader,{size:16,className:\"spinner\"}):/*#__PURE__*/_jsx(Send,{size:16}),updating?'Updating...':'Execute Updates']})]})]})]})]})]})}),/*#__PURE__*/_jsx(ConfirmModal,{show:showConfirmModal,message:confirmModalData.message,onConfirm:confirmModalData.onConfirm,onCancel:confirmModalData.onCancel}),/*#__PURE__*/_jsx(PreviewModal,{show:showPreviewModal,previewData:previewData,loadingPreview:loadingPreview,onClose:()=>setShowPreviewModal(false)}),/*#__PURE__*/_jsx(TemplateModal,{show:showTemplateModal,templates:transformationTemplates,onApply:handleTemplateApply,onClose:()=>setShowTemplateModal(false)}),/*#__PURE__*/_jsx(SaveSetModal,{show:showSaveSetModal,setName:savedSetName,setNameValue:setSavedSetName,onSave:handleSaveSet,onClose:()=>setShowSaveSetModal(false)}),/*#__PURE__*/_jsx(LoadSetModal,{show:showLoadSetModal,savedSets:savedTransformationSets,onLoad:handleLoadSet,onDelete:handleDeleteSet,onClose:()=>setShowLoadSetModal(false)}),/*#__PURE__*/_jsx(TransformationHelpModal,{show:showTransformationHelpModal,onClose:()=>setShowTransformationHelpModal(false)}),/*#__PURE__*/_jsx(FieldMappingHelpModal,{show:showFieldMappingHelpModal,onClose:()=>setShowFieldMappingHelpModal(false)})]});};export default UpdateObjectFields;","map":{"version":3,"names":["React","useState","useEffect","useAuth","Sidebar","useSidebarWidth","Menu","LogOut","Send","Loader","Eye","Undo","Redo","toast","BookmarkButton","OBJECT_OPTIONS","UPDATE_MODE_TYPES","TRANSFORMATION_TYPES","DEFAULT_FIELD_MAPPING","DEFAULT_MULTIPLE_FIELD_UPDATE","createNewMapping","duplicateMapping","useFieldMappings","useReferenceSearch","useTransformationHistory","fetchFields","fetchPicklistValues","searchReference","getMatchingRecordsCount","previewUpdates","executeUpdates","FilterSection","UpdateConfiguration","SingleFieldUpdate","MultipleFieldsUpdate","FieldMappingView","HybridView","CardView","MappingEditor","ConfirmModal","PreviewModal","TemplateModal","SaveSetModal","LoadSetModal","TransformationHelpModal","FieldMappingHelpModal","FormulaField","ConditionalField","ConcatenateField","ValueMapField","DateFormatField","NumberFormatField","TextReplaceField","DefaultValueField","TypeConversionField","ValidateFormatField","RemoveSpecialCharsField","SwitchCaseField","transformationTemplates","saveTransformationSet","saveSetToStorage","loadTransformationSet","loadSetFromStorage","getAllTransformationSets","deleteTransformationSet","deleteSetFromStorage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateObjectFields","user","logout","sidebarOpen","setSidebarOpen","sidebarWidth","selectedObject","setSelectedObject","fields","setFields","selectedField","setSelectedField","selectedFieldInfo","setSelectedFieldInfo","updateMode","setUpdateMode","currentValue","setCurrentValue","newValue","setNewValue","updateModeType","setUpdateModeType","SINGLE","loadingFields","setLoadingFields","updating","setUpdating","picklistValues","setPicklistValues","loadingPreview","setLoadingPreview","previewData","setPreviewData","showConfirmModal","setShowConfirmModal","confirmModalData","setConfirmModalData","message","onConfirm","onCancel","showPreviewModal","setShowPreviewModal","showTemplateModal","setShowTemplateModal","showSaveSetModal","setShowSaveSetModal","showLoadSetModal","setShowLoadSetModal","showTransformationHelpModal","setShowTransformationHelpModal","showFieldMappingHelpModal","setShowFieldMappingHelpModal","savedSetName","setSavedSetName","savedTransformationSets","setSavedTransformationSets","batchSize","setBatchSize","errorHandlingMode","setErrorHandlingMode","showMappingModeHelp","setShowMappingModeHelp","fieldMappingsHook","referenceSearchHook","currentValueReferenceSearchHook","transformationHistoryHook","fieldMappings","undo","undoTransformation","redo","redoTransformation","canUndo","canRedo","setFieldMappings","selectedMappingId","setSelectedMappingId","useHybridView","setUseHybridView","addMapping","removeMapping","updateMapping","getStatus","getSummary","filters","setFilters","projectId","projectName","projectObjectiveId","projectObjectiveName","status","type","matchingRecordsCount","setMatchingRecordsCount","referenceSearchTerm","setReferenceSearchTerm","referenceSearchResults","searchingReference","showReferenceDropdown","setShowReferenceDropdown","handleSearch","handleReferenceSearch","currentValueReferenceSearchTerm","setCurrentValueReferenceSearchTerm","currentValueReferenceSearchResults","searchingCurrentValueReference","showCurrentValueReferenceDropdown","setShowCurrentValueReferenceDropdown","handleCurrentValueReferenceSearch","multipleFieldUpdates","setMultipleFieldUpdates","sourceObject","setSourceObject","sourceFields","setSourceFields","conditionPicklistValues","setConditionPicklistValues","targetPicklistValues","setTargetPicklistValues","fetchTargetPicklistValues","mappingId","fieldName","values","prev","_objectSpread","error","console","fetchConditionPicklistValues","key","concat","then","fetchedFields","catch","fieldInfo","find","f","name","length","referenceTo","trim","transformationComponents","FORMULA","CONDITIONAL","CONCATENATE","VALUE_MAP","DATE_FORMAT","NUMBER_FORMAT","TEXT_REPLACE","DEFAULT_VALUE","TYPE_CONVERSION","VALIDATE_FORMAT","REMOVE_SPECIAL_CHARS","SWITCH","handlePreview","updateConfig","mode","MAPPING","MULTIPLE","singleFieldUpdate","field","data","handleExecute","handleTemplateApply","template","newMappings","mappings","Array","isArray","map","m","index","id","Date","now","transformation","config","newMapping","concatenateFields","separator","valueMappings","from","to","conditions","operator","value","logicalOperator","findText","replaceText","defaultValue","dateFormat","numberFormat","formula","sourceField","mapping","success","handleSaveSet","setData","createdAt","toISOString","handleLoadSet","set","loadedSet","handleDeleteSet","setId","s","className","children","isOpen","toggleSidebar","style","marginLeft","width","transition","onClick","size","pageName","pageType","email","charAt","toUpperCase","title","objectOptions","onFiltersChange","newFilters","count","undefined","objectType","referenceObject","searchTerm","obj","isSource","duplicated","onTemplateClick","marginTop","display","gap","justifyContent","alignItems","disabled","padding","fontSize","backgroundColor","color","border","borderRadius","cursor","show","onClose","templates","onApply","setName","setNameValue","onSave","savedSets","onLoad","onDelete"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/UpdateObjectFields.js"],"sourcesContent":["// UpdateObjectFields component - Refactored to use extracted components, hooks, and services\n\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport useSidebarWidth from '../hooks/useSidebarWidth';\nimport { Menu, LogOut, Send, Loader, Eye, Undo, Redo } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport BookmarkButton from '../components/BookmarkButton';\n\n// Import extracted constants, utilities, services, and hooks\nimport {\n  OBJECT_OPTIONS,\n  UPDATE_MODE_TYPES,\n  TRANSFORMATION_TYPES,\n  DEFAULT_FIELD_MAPPING,\n  DEFAULT_MULTIPLE_FIELD_UPDATE\n} from './UpdateObjectFields/constants';\nimport {\n  createNewMapping,\n  duplicateMapping\n} from './UpdateObjectFields/utils/mappingUtils';\nimport {\n  useFieldMappings,\n  useReferenceSearch,\n  useTransformationHistory\n} from './UpdateObjectFields/hooks';\nimport {\n  fetchFields,\n  fetchPicklistValues,\n  searchReference,\n  getMatchingRecordsCount,\n  previewUpdates,\n  executeUpdates\n} from './UpdateObjectFields/services/apiService';\n\n// Import all components\nimport {\n  FilterSection,\n  UpdateConfiguration,\n  SingleFieldUpdate,\n  MultipleFieldsUpdate,\n  FieldMappingView,\n  HybridView,\n  CardView,\n  MappingEditor,\n  ConfirmModal,\n  PreviewModal,\n  TemplateModal,\n  SaveSetModal,\n  LoadSetModal,\n  TransformationHelpModal,\n  FieldMappingHelpModal\n} from './UpdateObjectFields/components';\n\n// Import transformation components\nimport {\n  FormulaField,\n  ConditionalField,\n  ConcatenateField,\n  ValueMapField,\n  DateFormatField,\n  NumberFormatField,\n  TextReplaceField,\n  DefaultValueField,\n  TypeConversionField,\n  ValidateFormatField,\n  RemoveSpecialCharsField,\n  SwitchCaseField\n} from './UpdateObjectFields/components/TransformationFields';\n\n// Import transformation templates\nimport { transformationTemplates, saveTransformationSet as saveSetToStorage, loadTransformationSet as loadSetFromStorage, getAllTransformationSets, deleteTransformationSet as deleteSetFromStorage } from '../utils/transformationTemplates';\nimport '../styles/UpdateObjectFields.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\nconst UpdateObjectFields = () => {\n  const { user, logout } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const sidebarWidth = useSidebarWidth(sidebarOpen);\n  const [selectedObject, setSelectedObject] = useState('');\n  const [fields, setFields] = useState([]);\n  const [selectedField, setSelectedField] = useState('');\n  const [selectedFieldInfo, setSelectedFieldInfo] = useState(null);\n  const [updateMode, setUpdateMode] = useState('all');\n  const [currentValue, setCurrentValue] = useState('');\n  const [newValue, setNewValue] = useState('');\n  const [updateModeType, setUpdateModeType] = useState(UPDATE_MODE_TYPES.SINGLE);\n  const [loadingFields, setLoadingFields] = useState(false);\n  const [updating, setUpdating] = useState(false);\n  const [picklistValues, setPicklistValues] = useState([]);\n  const [loadingPreview, setLoadingPreview] = useState(false);\n  const [previewData, setPreviewData] = useState(null);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const [confirmModalData, setConfirmModalData] = useState({ message: '', onConfirm: null, onCancel: null });\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [showSaveSetModal, setShowSaveSetModal] = useState(false);\n  const [showLoadSetModal, setShowLoadSetModal] = useState(false);\n  const [showTransformationHelpModal, setShowTransformationHelpModal] = useState(false);\n  const [showFieldMappingHelpModal, setShowFieldMappingHelpModal] = useState(false);\n  const [savedSetName, setSavedSetName] = useState('');\n  const [savedTransformationSets, setSavedTransformationSets] = useState([]);\n  const [batchSize, setBatchSize] = useState(200);\n  const [errorHandlingMode, setErrorHandlingMode] = useState('default');\n  const [showMappingModeHelp, setShowMappingModeHelp] = useState(false);\n\n  // Use custom hooks\n  const fieldMappingsHook = useFieldMappings(fields, []);\n  const referenceSearchHook = useReferenceSearch();\n  const currentValueReferenceSearchHook = useReferenceSearch();\n  const transformationHistoryHook = useTransformationHistory(fieldMappingsHook.fieldMappings);\n\n  // Extract history functions\n  const { undo: undoTransformation, redo: redoTransformation, canUndo, canRedo } = transformationHistoryHook;\n\n  // Extract hook values\n  const {\n    fieldMappings,\n    setFieldMappings,\n    selectedMappingId,\n    setSelectedMappingId,\n    useHybridView,\n    setUseHybridView,\n    addMapping,\n    removeMapping,\n    updateMapping,\n    getStatus,\n    getSummary\n  } = fieldMappingsHook;\n\n  // Filter state - FilterSection manages its own filters via useFilters hook internally\n  // We need to track filters and count for preview/execute operations\n  const [filters, setFilters] = useState({\n    projectId: '',\n    projectName: '',\n    projectObjectiveId: '',\n    projectObjectiveName: '',\n    status: '',\n    type: ''\n  });\n  const [matchingRecordsCount, setMatchingRecordsCount] = useState(null);\n\n  const {\n    referenceSearchTerm,\n    setReferenceSearchTerm,\n    referenceSearchResults,\n    searchingReference,\n    showReferenceDropdown,\n    setShowReferenceDropdown,\n    handleSearch: handleReferenceSearch\n  } = referenceSearchHook;\n\n  const {\n    referenceSearchTerm: currentValueReferenceSearchTerm,\n    setReferenceSearchTerm: setCurrentValueReferenceSearchTerm,\n    referenceSearchResults: currentValueReferenceSearchResults,\n    searchingReference: searchingCurrentValueReference,\n    showReferenceDropdown: showCurrentValueReferenceDropdown,\n    setShowReferenceDropdown: setShowCurrentValueReferenceDropdown,\n    handleSearch: handleCurrentValueReferenceSearch\n  } = currentValueReferenceSearchHook;\n\n  // State for multiple field updates\n  const [multipleFieldUpdates, setMultipleFieldUpdates] = useState([DEFAULT_MULTIPLE_FIELD_UPDATE]);\n  const [sourceObject, setSourceObject] = useState('');\n  const [sourceFields, setSourceFields] = useState([]);\n  const [conditionPicklistValues, setConditionPicklistValues] = useState({});\n  const [targetPicklistValues, setTargetPicklistValues] = useState({});\n\n  // Fetch target picklist values\n  const fetchTargetPicklistValues = async (mappingId, fieldName) => {\n    if (!selectedObject || !fieldName) return;\n    try {\n      const values = await fetchPicklistValues(selectedObject, fieldName);\n      setTargetPicklistValues(prev => ({\n        ...prev,\n        [mappingId]: values\n      }));\n    } catch (error) {\n      console.error('Error fetching target picklist values:', error);\n    }\n  };\n\n  // Fetch condition picklist values\n  const fetchConditionPicklistValues = async (mappingId, fieldName) => {\n    if (!sourceObject || !fieldName) return;\n    try {\n      const values = await fetchPicklistValues(sourceObject, fieldName);\n      const key = `${mappingId}-${fieldName}`;\n      setConditionPicklistValues(prev => ({\n        ...prev,\n        [key]: values\n      }));\n    } catch (error) {\n      console.error('Error fetching condition picklist values:', error);\n    }\n  };\n\n  // Fetch fields when object is selected\n  useEffect(() => {\n    if (selectedObject) {\n      setLoadingFields(true);\n      fetchFields(selectedObject, false).then(fetchedFields => {\n        setFields(fetchedFields);\n        setSourceFields(fetchedFields);\n        setLoadingFields(false);\n      }).catch(() => {\n        setLoadingFields(false);\n      });\n    } else {\n      setFields([]);\n      setSelectedField('');\n      setSelectedFieldInfo(null);\n      setPicklistValues([]);\n    }\n  }, [selectedObject]);\n\n  // Handle field selection\n  useEffect(() => {\n    if (selectedField && selectedObject) {\n      const fieldInfo = fields.find(f => f.name === selectedField);\n      setSelectedFieldInfo(fieldInfo);\n      \n      if (fieldInfo && (fieldInfo.type === 'picklist' || fieldInfo.type === 'multipicklist')) {\n        if (fieldInfo.picklistValues && fieldInfo.picklistValues.length > 0) {\n          setPicklistValues(fieldInfo.picklistValues);\n        } else {\n          fetchPicklistValues(selectedObject, selectedField).then(values => {\n            setPicklistValues(values);\n          });\n        }\n      } else {\n        setPicklistValues([]);\n      }\n    } else {\n      setSelectedFieldInfo(null);\n      setPicklistValues([]);\n    }\n  }, [selectedField, selectedObject, fields]);\n\n  // Handle reference search\n  useEffect(() => {\n    if (selectedFieldInfo && selectedFieldInfo.type === 'reference' && selectedFieldInfo.referenceTo) {\n      if (referenceSearchTerm && referenceSearchTerm.trim() !== '') {\n        handleReferenceSearch(selectedFieldInfo.referenceTo, referenceSearchTerm);\n      }\n      if (currentValueReferenceSearchTerm && currentValueReferenceSearchTerm.trim() !== '') {\n        handleCurrentValueReferenceSearch(selectedFieldInfo.referenceTo, currentValueReferenceSearchTerm);\n      }\n    }\n  }, [referenceSearchTerm, currentValueReferenceSearchTerm, selectedFieldInfo, handleReferenceSearch, handleCurrentValueReferenceSearch]);\n\n  // Transformation components mapping\n  const transformationComponents = {\n    [TRANSFORMATION_TYPES.FORMULA]: FormulaField,\n    [TRANSFORMATION_TYPES.CONDITIONAL]: ConditionalField,\n    [TRANSFORMATION_TYPES.CONCATENATE]: ConcatenateField,\n    [TRANSFORMATION_TYPES.VALUE_MAP]: ValueMapField,\n    [TRANSFORMATION_TYPES.DATE_FORMAT]: DateFormatField,\n    [TRANSFORMATION_TYPES.NUMBER_FORMAT]: NumberFormatField,\n    [TRANSFORMATION_TYPES.TEXT_REPLACE]: TextReplaceField,\n    [TRANSFORMATION_TYPES.DEFAULT_VALUE]: DefaultValueField,\n    [TRANSFORMATION_TYPES.TYPE_CONVERSION]: TypeConversionField,\n    [TRANSFORMATION_TYPES.VALIDATE_FORMAT]: ValidateFormatField,\n    [TRANSFORMATION_TYPES.REMOVE_SPECIAL_CHARS]: RemoveSpecialCharsField,\n    [TRANSFORMATION_TYPES.SWITCH]: SwitchCaseField\n  };\n\n  // Handler functions\n  const handlePreview = async () => {\n    setLoadingPreview(true);\n    try {\n      const updateConfig = {\n        mode: updateModeType,\n        fieldMappings: updateModeType === UPDATE_MODE_TYPES.MAPPING ? fieldMappings : null,\n        multipleFieldUpdates: updateModeType === UPDATE_MODE_TYPES.MULTIPLE ? multipleFieldUpdates : null,\n        singleFieldUpdate: updateModeType === UPDATE_MODE_TYPES.SINGLE ? {\n          field: selectedField,\n          updateMode: updateMode,\n          currentValue: currentValue,\n          newValue: newValue\n        } : null\n      };\n      // Pass sourceObject for field mapping mode\n      const data = await previewUpdates(selectedObject, updateConfig, filters, sourceObject);\n      if (data) {\n        setPreviewData(data);\n        setShowPreviewModal(true);\n      }\n      setLoadingPreview(false);\n    } catch (error) {\n      console.error('Preview error:', error);\n      setLoadingPreview(false);\n    }\n  };\n\n  const handleExecute = async () => {\n    setShowConfirmModal(true);\n    setConfirmModalData({\n      message: `Are you sure you want to update ${matchingRecordsCount || 0} record(s)? This action cannot be undone.`,\n      onConfirm: async () => {\n        setShowConfirmModal(false);\n        setUpdating(true);\n        try {\n          const updateConfig = {\n            mode: updateModeType,\n            fieldMappings: updateModeType === UPDATE_MODE_TYPES.MAPPING ? fieldMappings : null,\n            multipleFieldUpdates: updateModeType === UPDATE_MODE_TYPES.MULTIPLE ? multipleFieldUpdates : null,\n            singleFieldUpdate: updateModeType === UPDATE_MODE_TYPES.SINGLE ? {\n              field: selectedField,\n              updateMode: updateMode,\n              currentValue: currentValue,\n              newValue: newValue\n            } : null,\n            batchSize: batchSize,\n            errorHandlingMode: errorHandlingMode\n          };\n          await executeUpdates(selectedObject, updateConfig, filters, sourceObject);\n          setUpdating(false);\n        } catch (error) {\n          console.error('Execute error:', error);\n          setUpdating(false);\n        }\n      },\n      onCancel: () => setShowConfirmModal(false)\n    });\n  };\n\n  const handleTemplateApply = (template) => {\n    // Switch to Field Mapping mode to show the template fields in Update Configuration\n    setUpdateModeType(UPDATE_MODE_TYPES.MAPPING);\n    \n    let newMappings = [];\n    \n    // Check if template has mappings array (saved field mapping sets)\n    if (template.mappings && Array.isArray(template.mappings) && template.mappings.length > 0) {\n      // Create new mappings with unique IDs and ensure all required fields are present\n      newMappings = template.mappings.map((m, index) => ({\n        ...DEFAULT_FIELD_MAPPING,\n        ...m,\n        id: Date.now() + index // Ensure unique IDs\n      }));\n    } \n    // Check if template is a transformation template (has transformation and config)\n    else if (template.transformation && template.config) {\n      // Convert transformation template to a field mapping\n      const newMapping = {\n        ...DEFAULT_FIELD_MAPPING,\n        id: Date.now(),\n        transformation: template.transformation,\n        // Apply config properties to the mapping, preserving all values from config\n        concatenateFields: template.config.concatenateFields || [],\n        separator: template.config.separator || ' ',\n        valueMappings: template.config.valueMappings || [{ from: '', to: '' }],\n        conditions: template.config.conditions || [{ id: Date.now(), field: '', operator: 'equals', value: '', logicalOperator: 'AND' }],\n        findText: template.config.findText || '',\n        replaceText: template.config.replaceText || '',\n        defaultValue: template.config.defaultValue || '',\n        dateFormat: template.config.dateFormat || 'YYYY-MM-DD',\n        numberFormat: template.config.numberFormat || '0.00',\n        formula: template.config.formula || '',\n        sourceField: template.config.sourceField || '',\n        ...template.config // Spread all other config properties\n      };\n      newMappings = [newMapping];\n    } \n    // Legacy support: check if template has a single mapping object\n    else if (template.mapping) {\n      const newMapping = {\n        ...DEFAULT_FIELD_MAPPING,\n        ...template.mapping,\n        id: Date.now()\n      };\n      newMappings = [newMapping];\n    }\n    \n    if (newMappings.length > 0) {\n      // Add the new mappings to existing mappings (don't replace)\n      setFieldMappings(prev => [...prev, ...newMappings]);\n      \n      // If using hybrid view, select the first new mapping\n      if (useHybridView && newMappings.length > 0) {\n        setSelectedMappingId(newMappings[0].id);\n      }\n      \n      toast.success(`Template \"${template.name}\" applied successfully`);\n      setShowTemplateModal(false);\n    } else {\n      toast.error('Template has no mappings to apply');\n    }\n  };\n\n  const handleSaveSet = () => {\n    if (!savedSetName.trim()) {\n      toast.error('Please enter a name for the transformation set');\n      return;\n    }\n    const setData = {\n      name: savedSetName,\n      fieldMappings: fieldMappings,\n      createdAt: new Date().toISOString()\n    };\n    saveSetToStorage(savedSetName, setData);\n    setSavedTransformationSets(getAllTransformationSets());\n    setSavedSetName('');\n    setShowSaveSetModal(false);\n    toast.success('Transformation set saved successfully');\n  };\n\n  const handleLoadSet = (set) => {\n    const loadedSet = loadSetFromStorage(set.name);\n    if (loadedSet && loadedSet.fieldMappings) {\n      setFieldMappings(loadedSet.fieldMappings.map(m => ({ ...m, id: Date.now() })));\n      toast.success(`Transformation set \"${set.name}\" loaded successfully`);\n    }\n  };\n\n  const handleDeleteSet = (setId) => {\n    const set = savedTransformationSets.find(s => s.id === setId);\n    if (set) {\n      deleteSetFromStorage(set.name);\n      setSavedTransformationSets(getAllTransformationSets());\n      toast.success('Transformation set deleted');\n    }\n  };\n\n  // Load saved sets on mount\n  useEffect(() => {\n    setSavedTransformationSets(getAllTransformationSets());\n  }, []);\n\n  return (\n    <div className=\"update-object-fields-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      <div className=\"update-object-fields-content\" style={{ marginLeft: `${sidebarWidth}px`, width: `calc(100% - ${sidebarWidth}px)`, transition: 'margin-left 0.2s ease, width 0.2s ease' }}>\n        <div className=\"update-object-fields-container\">\n          {/* Header */}\n          <div className=\"update-object-fields-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">Update Object Fields</h1>\n                  <p className=\"page-subtitle\">Bulk update fields for Project, Project Objective, or Contributor Project</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <BookmarkButton pageName=\"Update Object Fields\" pageType=\"page\" />\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"update-object-fields-main\">\n            {/* Filter Section - Using extracted component */}\n            <FilterSection\n              selectedObject={selectedObject}\n              setSelectedObject={setSelectedObject}\n              objectOptions={OBJECT_OPTIONS}\n              onFiltersChange={(newFilters, count) => {\n                // Update filters state for preview/execute operations\n                setFilters(newFilters);\n                // Update matching count from FilterSection\n                if (count !== undefined) {\n                  setMatchingRecordsCount(count);\n                }\n              }}\n              setFields={setFields}\n              setSelectedField={setSelectedField}\n              setNewValue={setNewValue}\n              setCurrentValue={setCurrentValue}\n            />\n\n            {selectedObject && (\n              <>\n                {/* Update Configuration - Using extracted component */}\n                <UpdateConfiguration\n                  updateModeType={updateModeType}\n                  setUpdateModeType={setUpdateModeType}\n                  setMultipleFieldUpdates={setMultipleFieldUpdates}\n                  setSelectedField={setSelectedField}\n                  setNewValue={setNewValue}\n                  setCurrentValue={setCurrentValue}\n                  setSourceObject={setSourceObject}\n                  setSourceFields={setSourceFields}\n                  setFieldMappings={setFieldMappings}\n                >\n                  {/* Single Field Update */}\n                  {updateModeType === UPDATE_MODE_TYPES.SINGLE && (\n                    <SingleFieldUpdate\n                      selectedObject={selectedObject}\n                      fields={fields}\n                      loadingFields={loadingFields}\n                      selectedField={selectedField}\n                      setSelectedField={setSelectedField}\n                      updateMode={updateMode}\n                      setUpdateMode={setUpdateMode}\n                      currentValue={currentValue}\n                      setCurrentValue={setCurrentValue}\n                      newValue={newValue}\n                      setNewValue={setNewValue}\n                      selectedFieldInfo={selectedFieldInfo}\n                      picklistValues={picklistValues}\n                      referenceSearchTerm={referenceSearchTerm}\n                      setReferenceSearchTerm={setReferenceSearchTerm}\n                      referenceSearchResults={referenceSearchResults}\n                      searchingReference={searchingReference}\n                      showReferenceDropdown={showReferenceDropdown}\n                      setShowReferenceDropdown={setShowReferenceDropdown}\n                      currentValueReferenceSearchTerm={currentValueReferenceSearchTerm}\n                      setCurrentValueReferenceSearchTerm={setCurrentValueReferenceSearchTerm}\n                      currentValueReferenceSearchResults={currentValueReferenceSearchResults}\n                      searchingCurrentValueReference={searchingCurrentValueReference}\n                      showCurrentValueReferenceDropdown={showCurrentValueReferenceDropdown}\n                      setShowCurrentValueReferenceDropdown={setShowCurrentValueReferenceDropdown}\n                    />\n                  )}\n\n                  {/* Multiple Fields Update */}\n                  {updateModeType === UPDATE_MODE_TYPES.MULTIPLE && (\n                    <MultipleFieldsUpdate\n                      selectedObject={selectedObject}\n                      fields={fields}\n                      loadingFields={loadingFields}\n                      multipleFieldUpdates={multipleFieldUpdates}\n                      setMultipleFieldUpdates={setMultipleFieldUpdates}\n                      fetchPicklistValues={async (objectType, fieldName) => {\n                        return await fetchPicklistValues(objectType, fieldName);\n                      }}\n                      searchReference={async (referenceObject, searchTerm) => {\n                        return await searchReference(referenceObject, searchTerm);\n                      }}\n                    />\n                  )}\n\n                  {/* Field Mapping View */}\n                  {updateModeType === UPDATE_MODE_TYPES.MAPPING && (\n                    <FieldMappingView\n                      selectedObject={selectedObject}\n                      sourceObject={sourceObject}\n                      setSourceObject={setSourceObject}\n                      sourceFields={sourceFields}\n                      setSourceFields={setSourceFields}\n                      fetchFields={async (obj, isSource) => {\n                        setLoadingFields(true);\n                        const fetchedFields = await fetchFields(obj, isSource);\n                        if (isSource) {\n                          setSourceFields(fetchedFields);\n                        } else {\n                          setFields(fetchedFields);\n                        }\n                        setLoadingFields(false);\n                        return fetchedFields;\n                      }}\n                      objectOptions={OBJECT_OPTIONS}\n                      fieldMappings={fieldMappings}\n                      useHybridView={useHybridView}\n                      setUseHybridView={setUseHybridView}\n                      selectedMappingId={selectedMappingId}\n                      setSelectedMappingId={setSelectedMappingId}\n                      showMappingModeHelp={showMappingModeHelp}\n                      setShowMappingModeHelp={setShowMappingModeHelp}\n                      showFieldMappingHelpModal={showFieldMappingHelpModal}\n                      setShowFieldMappingHelpModal={setShowFieldMappingHelpModal}\n                    >\n                      {useHybridView ? (\n                        <HybridView\n                          fieldMappings={fieldMappings}\n                          fields={fields}\n                          sourceFields={sourceFields}\n                          selectedMappingId={selectedMappingId}\n                          setSelectedMappingId={setSelectedMappingId}\n                          addMapping={addMapping}\n                          removeMapping={removeMapping}\n                          duplicateMapping={(id) => {\n                            const mapping = fieldMappings.find(m => m.id === id);\n                            if (mapping) {\n                              const duplicated = duplicateMapping(mapping);\n                              setFieldMappings([...fieldMappings, duplicated]);\n                              setSelectedMappingId(duplicated.id);\n                            }\n                          }}\n                          getStatus={getStatus}\n                          getSummary={getSummary}\n                          onTemplateClick={() => setShowTemplateModal(true)}\n                        >\n                          {selectedMappingId && fieldMappings.find(m => m.id === selectedMappingId) && (\n                            <MappingEditor\n                              mapping={fieldMappings.find(m => m.id === selectedMappingId)}\n                              fields={fields}\n                              sourceFields={sourceFields}\n                              loadingFields={loadingFields}\n                              updateMapping={updateMapping}\n                              targetPicklistValues={targetPicklistValues}\n                              fetchTargetPicklistValues={fetchTargetPicklistValues}\n                              conditionPicklistValues={conditionPicklistValues}\n                              fetchConditionPicklistValues={fetchConditionPicklistValues}\n                              showTransformationHelpModal={showTransformationHelpModal}\n                              setShowTransformationHelpModal={setShowTransformationHelpModal}\n                              transformationComponents={transformationComponents}\n                            />\n                          )}\n                        </HybridView>\n                      ) : (\n                        <CardView\n                          fieldMappings={fieldMappings}\n                          fields={fields}\n                          sourceFields={sourceFields}\n                          addMapping={addMapping}\n                          removeMapping={removeMapping}\n                          duplicateMapping={(id) => {\n                            const mapping = fieldMappings.find(m => m.id === id);\n                            if (mapping) {\n                              const duplicated = duplicateMapping(mapping);\n                              setFieldMappings([...fieldMappings, duplicated]);\n                              setSelectedMappingId(duplicated.id);\n                            }\n                          }}\n                          getStatus={getStatus}\n                          getSummary={getSummary}\n                          onTemplateClick={() => setShowTemplateModal(true)}\n                        >\n                          <MappingEditor\n                            fields={fields}\n                            sourceFields={sourceFields}\n                            loadingFields={loadingFields}\n                            updateMapping={updateMapping}\n                            targetPicklistValues={targetPicklistValues}\n                            fetchTargetPicklistValues={fetchTargetPicklistValues}\n                            conditionPicklistValues={conditionPicklistValues}\n                            fetchConditionPicklistValues={fetchConditionPicklistValues}\n                            showTransformationHelpModal={showTransformationHelpModal}\n                            setShowTransformationHelpModal={setShowTransformationHelpModal}\n                            transformationComponents={transformationComponents}\n                          />\n                        </CardView>\n                      )}\n                    </FieldMappingView>\n                  )}\n                </UpdateConfiguration>\n\n                {/* Action Buttons */}\n                <div style={{ marginTop: '16px', display: 'flex', gap: '12px', justifyContent: 'space-between', alignItems: 'center' }}>\n                  {/* Undo/Redo buttons (only show in mapping mode) */}\n                  {updateModeType === UPDATE_MODE_TYPES.MAPPING && (\n                    <div style={{ display: 'flex', gap: '8px' }}>\n                      <button\n                        onClick={() => undoTransformation(setFieldMappings)}\n                        disabled={!canUndo || updating || loadingPreview}\n                        style={{\n                          padding: '8px 16px',\n                          fontSize: '13px',\n                          backgroundColor: canUndo ? '#f9fafb' : '#f3f4f6',\n                          color: canUndo ? '#374151' : '#9ca3af',\n                          border: '1px solid #e5e7eb',\n                          borderRadius: '6px',\n                          cursor: canUndo && !updating && !loadingPreview ? 'pointer' : 'not-allowed',\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '6px'\n                        }}\n                        title=\"Undo\"\n                      >\n                        <Undo size={16} />\n                        Undo\n                      </button>\n                      <button\n                        onClick={() => redoTransformation(setFieldMappings)}\n                        disabled={!canRedo || updating || loadingPreview}\n                        style={{\n                          padding: '8px 16px',\n                          fontSize: '13px',\n                          backgroundColor: canRedo ? '#f9fafb' : '#f3f4f6',\n                          color: canRedo ? '#374151' : '#9ca3af',\n                          border: '1px solid #e5e7eb',\n                          borderRadius: '6px',\n                          cursor: canRedo && !updating && !loadingPreview ? 'pointer' : 'not-allowed',\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '6px'\n                        }}\n                        title=\"Redo\"\n                      >\n                        <Redo size={16} />\n                        Redo\n                      </button>\n                    </div>\n                  )}\n                  \n                  {/* Preview and Execute buttons */}\n                  <div style={{ display: 'flex', gap: '12px', marginLeft: 'auto' }}>\n                    <button\n                      onClick={handlePreview}\n                      disabled={loadingPreview || updating}\n                      style={{\n                        padding: '10px 20px',\n                        fontSize: '13px',\n                        backgroundColor: '#f0f9ff',\n                        color: '#0284c7',\n                        border: '1px solid #bae6fd',\n                        borderRadius: '6px',\n                        cursor: loadingPreview || updating ? 'not-allowed' : 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '6px'\n                      }}\n                    >\n                      {loadingPreview ? <Loader size={16} className=\"spinner\" /> : <Eye size={16} />}\n                      Preview\n                    </button>\n                    <button\n                      onClick={handleExecute}\n                      disabled={updating || loadingPreview}\n                      style={{\n                        padding: '10px 20px',\n                        fontSize: '13px',\n                        backgroundColor: '#08979C',\n                        color: '#fff',\n                        border: 'none',\n                        borderRadius: '6px',\n                        cursor: updating || loadingPreview ? 'not-allowed' : 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '6px'\n                      }}\n                    >\n                      {updating ? <Loader size={16} className=\"spinner\" /> : <Send size={16} />}\n                      {updating ? 'Updating...' : 'Execute Updates'}\n                    </button>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Modals - Using extracted components */}\n      <ConfirmModal\n        show={showConfirmModal}\n        message={confirmModalData.message}\n        onConfirm={confirmModalData.onConfirm}\n        onCancel={confirmModalData.onCancel}\n      />\n      <PreviewModal\n        show={showPreviewModal}\n        previewData={previewData}\n        loadingPreview={loadingPreview}\n        onClose={() => setShowPreviewModal(false)}\n      />\n      <TemplateModal\n        show={showTemplateModal}\n        templates={transformationTemplates}\n        onApply={handleTemplateApply}\n        onClose={() => setShowTemplateModal(false)}\n      />\n      <SaveSetModal\n        show={showSaveSetModal}\n        setName={savedSetName}\n        setNameValue={setSavedSetName}\n        onSave={handleSaveSet}\n        onClose={() => setShowSaveSetModal(false)}\n      />\n      <LoadSetModal\n        show={showLoadSetModal}\n        savedSets={savedTransformationSets}\n        onLoad={handleLoadSet}\n        onDelete={handleDeleteSet}\n        onClose={() => setShowLoadSetModal(false)}\n      />\n      <TransformationHelpModal\n        show={showTransformationHelpModal}\n        onClose={() => setShowTransformationHelpModal(false)}\n      />\n      <FieldMappingHelpModal\n        show={showFieldMappingHelpModal}\n        onClose={() => setShowFieldMappingHelpModal(false)}\n      />\n    </div>\n  );\n};\n\nexport default UpdateObjectFields;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}