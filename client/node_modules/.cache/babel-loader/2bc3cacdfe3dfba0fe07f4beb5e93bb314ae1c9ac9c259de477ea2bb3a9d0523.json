{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import apiClient from'../config/api';import toast from'react-hot-toast';import{saveDraftProjectPage,loadDraftProjectPage,deleteDraftProjectPage}from'../utils/draftStorage';import{getErrorMessage,handleError}from'../utils/errorHandler';import{sanitizeObject}from'../utils/security';import{Search,Info,Menu,Send,Save,X,Plus,LogOut,CheckCircle,XCircle}from'lucide-react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/Sidebar';import useSidebarWidth from'../hooks/useSidebarWidth';import'../styles/ProjectSetup.css';import'../styles/Sidebar.css';import'../styles/GlobalHeader.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectPageSetup=()=>{const navigate=useNavigate();const{user,hasPermission,logout}=useAuth();const{register,handleSubmit,setValue,watch,formState:{errors},trigger,setError,clearErrors,reset}=useForm();const[loading,setLoading]=useState(false);const[fieldErrors,setFieldErrors]=useState({});const[submitting,setSubmitting]=useState(false);const[saving,setSaving]=useState(false);const[showPublishResultsModal,setShowPublishResultsModal]=useState(false);const[publishResults,setPublishResults]=useState(null);const[pages,setPages]=useState([{id:1,data:{}}]);const[projects,setProjects]=useState({});const[loadingProjects,setLoadingProjects]=useState({});const[projectSearchTerms,setProjectSearchTerms]=useState({1:''});const[projectObjectives,setProjectObjectives]=useState({});const[loadingProjectObjectives,setLoadingProjectObjectives]=useState({});const[projectObjectiveSearchTerms,setProjectObjectiveSearchTerms]=useState({1:''});const[qualificationSteps,setQualificationSteps]=useState({});const[loadingQualificationSteps,setLoadingQualificationSteps]=useState({});const[qualificationStepSearchTerms,setQualificationStepSearchTerms]=useState({1:''});const[selectedProjects,setSelectedProjects]=useState({});const[selectedProjectObjectives,setSelectedProjectObjectives]=useState({});const[selectedQualificationSteps,setSelectedQualificationSteps]=useState({});const[showProjectDropdowns,setShowProjectDropdowns]=useState({});const[showProjectObjectiveDropdowns,setShowProjectObjectiveDropdowns]=useState({});const[showQualificationStepDropdowns,setShowQualificationStepDropdowns]=useState({});// Qualification field for Default Qualification Page (retrieves from Qualification_Step__c)\nconst[projectQualifications,setProjectQualifications]=useState({});const[loadingProjectQualifications,setLoadingProjectQualifications]=useState({});const[projectQualificationSearchTerms,setProjectQualificationSearchTerms]=useState({1:''});const[selectedProjectQualifications,setSelectedProjectQualifications]=useState({});const[showProjectQualificationDropdowns,setShowProjectQualificationDropdowns]=useState({});const[sidebarOpen,setSidebarOpen]=useState(true);const sidebarWidth=useSidebarWidth(sidebarOpen);const dataLoadedRef=useRef(false);useEffect(()=>{// Load existing project page data from server storage (for editing)\nconst loadExistingData=async()=>{// Prevent duplicate loading in React StrictMode\nif(dataLoadedRef.current)return;try{const data=await loadDraftProjectPage();if(data&&data.pages&&data.pages.length>0){dataLoadedRef.current=true;setPages(data.pages.map((page,index)=>({id:index+1,data:page})));// Populate search terms and selected projects\nconst newProjectSearchTerms={};const newProjectObjectiveSearchTerms={};const newQualificationStepSearchTerms={};const newProjectQualificationSearchTerms={};const newSelectedProjects={};const newSelectedProjectObjectives={};const newSelectedQualificationSteps={};const newSelectedProjectQualifications={};data.pages.forEach((page,index)=>{if(page.project){newProjectSearchTerms[index+1]=page.project;newSelectedProjects[index+1]=page.project;}if(page.projectObjective){newProjectObjectiveSearchTerms[index+1]=page.projectObjective;newSelectedProjectObjectives[index+1]=page.projectObjective;}if(page.projectQualificationStep){newQualificationStepSearchTerms[index+1]=page.projectQualificationStep;newSelectedQualificationSteps[index+1]=page.projectQualificationStep;}if(page.projectQualification){newProjectQualificationSearchTerms[index+1]=page.projectQualification;newSelectedProjectQualifications[index+1]=page.projectQualification;}});setProjectSearchTerms(newProjectSearchTerms);setProjectObjectiveSearchTerms(newProjectObjectiveSearchTerms);setQualificationStepSearchTerms(newQualificationStepSearchTerms);setProjectQualificationSearchTerms(newProjectQualificationSearchTerms);setSelectedProjects(newSelectedProjects);setSelectedProjectObjectives(newSelectedProjectObjectives);setSelectedQualificationSteps(newSelectedQualificationSteps);setSelectedProjectQualifications(newSelectedProjectQualifications);// Populate form with existing data\ndata.pages.forEach((page,pageIndex)=>{Object.keys(page).forEach(key=>{if(page[key]!==null&&page[key]!==undefined){setValue(\"page_\".concat(pageIndex+1,\"_\").concat(key),page[key]);}});});toast.success('Project page data loaded for editing');}else{// Clear form and set default values for new project page\nreset();setDefaultValues();}}catch(error){const errorMessage=handleError(error,'ProjectPageSetup - loadProjectPageData');toast.error(errorMessage);// Reset form to defaults\nreset();setDefaultValues();}};loadExistingData();},[setValue,reset]);// Search projects in Salesforce when search term changes\nuseEffect(()=>{const searchTimeouts={};Object.keys(projectSearchTerms).forEach(pageId=>{const searchTerm=projectSearchTerms[pageId];const selectedProject=selectedProjects[pageId];// Don't search if the search term matches the selected project (user has already selected)\nif(selectedProject&&searchTerm===selectedProject){setProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}if(searchTimeouts[pageId]){clearTimeout(searchTimeouts[pageId]);}searchTimeouts[pageId]=setTimeout(async()=>{if(!searchTerm||searchTerm.trim()===''){setProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}// Don't search if the search term matches the selected project\nif(selectedProject&&searchTerm===selectedProject){setProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}setLoadingProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));try{const response=await apiClient.get(\"/salesforce/search-projects?search=\".concat(encodeURIComponent(searchTerm)));if(response.data.success){setProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:response.data.projects||[]}));setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));}}catch(error){handleError(error,\"ProjectPageSetup - searchProjects(\".concat(pageId,\")\"));setProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));}finally{setLoadingProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));}},300);});return()=>{Object.values(searchTimeouts).forEach(timeout=>clearTimeout(timeout));};},[projectSearchTerms,selectedProjects]);// Search project objectives when project is selected\nuseEffect(()=>{Object.keys(selectedProjects).forEach(pageId=>{const project=selectedProjects[pageId];if(project&&project.trim()!==''){// Clear selected objective when project changes\nsetSelectedProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:null}));// Fetch project objectives immediately when project is selected\nfetchProjectObjectives(pageId,project);}});},[selectedProjects]);// Search project objectives in Salesforce when search term changes\nuseEffect(()=>{const searchTimeouts={};Object.keys(projectObjectiveSearchTerms).forEach(pageId=>{const searchTerm=projectObjectiveSearchTerms[pageId];const project=selectedProjects[pageId];const selectedObjective=selectedProjectObjectives[pageId];if(!project||project.trim()===''){return;}// Don't search if the search term matches the selected objective (user has already selected)\nif(selectedObjective&&searchTerm===selectedObjective){setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}if(searchTimeouts[pageId]){clearTimeout(searchTimeouts[pageId]);}searchTimeouts[pageId]=setTimeout(async()=>{if(!searchTerm||searchTerm.trim()===''){// If search term is empty but we have a project, load all objectives for that project\nif(project&&project.trim()!==''){fetchProjectObjectives(pageId,project);}else{setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));}return;}// Don't search if the search term matches the selected objective\nif(selectedObjective&&searchTerm===selectedObjective){setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}setLoadingProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));try{// Search project objectives by name\nconst response=await apiClient.get(\"/salesforce/search-project-objectives?search=\".concat(encodeURIComponent(searchTerm)).concat(project?\"&project=\".concat(encodeURIComponent(project)):''));if(response.data.success){setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:response.data.projectObjectives||[]}));// Only show dropdown if search term doesn't match selected objective\nif(!selectedObjective||searchTerm!==selectedObjective){setShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));}}}catch(error){handleError(error,\"ProjectPageSetup - searchProjectObjectives(\".concat(pageId,\")\"));setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));}finally{setLoadingProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));}},300);});return()=>{Object.values(searchTimeouts).forEach(timeout=>clearTimeout(timeout));};},[projectObjectiveSearchTerms,selectedProjects,selectedProjectObjectives]);// Search qualification steps in Salesforce when search term changes - filter by selected project\nuseEffect(()=>{const searchTimeouts={};Object.keys(qualificationStepSearchTerms).forEach(pageId=>{const searchTerm=qualificationStepSearchTerms[pageId];const selectedQualificationStep=selectedQualificationSteps[pageId];const selectedProject=selectedProjects[pageId];// Get the current project value from form (reactive)\nconst formProjectValue=watch(\"page_\".concat(pageId,\"_project\"));// Don't search if the search term matches the selected qualification step\nif(selectedQualificationStep&&searchTerm===selectedQualificationStep){setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}// Don't search if search term is empty\nif(!searchTerm||searchTerm.trim()===''){setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}// Get the selected project name for filtering - check all sources\nconst selectedProjectName=selectedProject||projectSearchTerms[pageId]||formProjectValue;// Don't search if no project is selected (qualification steps must be filtered by project)\nif(!selectedProjectName||selectedProjectName.trim()===''){setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}if(searchTimeouts[pageId]){clearTimeout(searchTimeouts[pageId]);}searchTimeouts[pageId]=setTimeout(async()=>{// Double-check conditions inside timeout\nif(!searchTerm||searchTerm.trim()===''){setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}// Don't search if the search term matches the selected qualification step\nif(selectedQualificationStep&&searchTerm===selectedQualificationStep){setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}// Get the selected project name for filtering (re-check inside timeout)\n// Re-check all sources to get the most current value\nconst currentSelectedProject=selectedProjects[pageId]||projectSearchTerms[pageId]||watch(\"page_\".concat(pageId,\"_project\"));// Don't search if no project is selected\nif(!currentSelectedProject||currentSelectedProject.trim()===''){setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}setLoadingQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));try{// Build query parameters with project filter - ALWAYS include project\nconst params=new URLSearchParams();params.append('search',searchTerm);// Always include project parameter when we have a project\nparams.append('project',currentSelectedProject);const response=await apiClient.get(\"/salesforce/qualification-steps?\".concat(params.toString()));if(response.data.success){const steps=response.data.qualificationSteps||[];// Additional client-side filtering to ensure only steps from the selected project are shown\n// Filter out steps that don't have a projectId or have a different projectId\nconst filteredSteps=steps.filter(step=>{// If step doesn't have a projectId, exclude it when filtering by project\nif(!step.projectId){return false;}// The backend should have already filtered, but we keep this for safety\n// Note: We can't compare project IDs here because we only have the project name, not the ID\n// The backend filtering should be sufficient\nreturn true;});setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:filteredSteps}));if(!selectedQualificationStep||searchTerm!==selectedQualificationStep){setShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));}}else{setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));}}catch(error){handleError(error,\"ProjectPageSetup - searchQualificationSteps(\".concat(pageId,\")\"));setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));}finally{setLoadingQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));}},300);});return()=>{Object.values(searchTimeouts).forEach(timeout=>clearTimeout(timeout));};},[qualificationStepSearchTerms,selectedQualificationSteps,selectedProjects,projectSearchTerms,pages,watch]);// Search qualifications in Salesforce when search term changes - filter by selected project\n// This is for the \"Qualification\" field in \"Default Qualification Page\"\n// Only shows qualifications from Qualification_Step__c (not Project_Qualification_Step__c)\nuseEffect(()=>{const searchTimeouts={};Object.keys(projectQualificationSearchTerms).forEach(pageId=>{const searchTerm=projectQualificationSearchTerms[pageId];const selectedProjectQualification=selectedProjectQualifications[pageId];const selectedProject=selectedProjects[pageId];// Get the current project value from form (reactive)\nconst formProjectValue=watch(\"page_\".concat(pageId,\"_project\"));// Don't search if the search term matches the selected project qualification\nif(selectedProjectQualification&&searchTerm===selectedProjectQualification){setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}// Don't search if search term is empty\nif(!searchTerm||searchTerm.trim()===''){setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}// Get the selected project name for filtering - check all sources\nconst selectedProjectName=selectedProject||projectSearchTerms[pageId]||formProjectValue;// Don't search if no project is selected (project qualifications must be filtered by project)\nif(!selectedProjectName||selectedProjectName.trim()===''){setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}if(searchTimeouts[pageId]){clearTimeout(searchTimeouts[pageId]);}searchTimeouts[pageId]=setTimeout(async()=>{// Double-check conditions inside timeout\nif(!searchTerm||searchTerm.trim()===''){setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}// Don't search if the search term matches the selected project qualification\nif(selectedProjectQualification&&searchTerm===selectedProjectQualification){setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));return;}// Get the selected project name for filtering (re-check inside timeout)\n// Re-check all sources to get the most current value\nconst currentSelectedProject=selectedProjects[pageId]||projectSearchTerms[pageId]||watch(\"page_\".concat(pageId,\"_project\"));// Don't search if no project is selected\nif(!currentSelectedProject||currentSelectedProject.trim()===''){setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}setLoadingProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));try{// Build query parameters with project filter - ALWAYS include project\nconst params=new URLSearchParams();params.append('search',searchTerm);// Always include project parameter when we have a project\nparams.append('project',currentSelectedProject);const response=await apiClient.get(\"/salesforce/qualification-steps?\".concat(params.toString()));if(response.data.success){const qualifications=response.data.qualificationSteps||[];// Additional client-side filtering to ensure only qualifications from the selected project are shown\n// For \"Default Qualification Page\", we only want qualifications from Qualification_Step__c (not Project_Qualification_Step__c)\n// Filter out qualifications that don't have a projectId, have a different projectId, or are from the wrong object type\nconst filteredQualifications=qualifications.filter(qualification=>{// For \"Default Qualification Page\", only include qualifications from Qualification_Step__c\nif(qualification.objectType&&qualification.objectType!=='Qualification_Step__c'){return false;}// If qualification doesn't have a projectId, check if it's from Qualification_Step__c\n// Qualification_Step__c might not have a project field, so include it if it's from that object\nif(!qualification.projectId){if(qualification.objectType==='Qualification_Step__c'){// Include qualifications from Qualification_Step__c even if they don't have a projectId\n// (they might not be project-specific)\nreturn true;}// For other object types, exclude if no projectId\nreturn false;}// If qualification has a projectId, check if it matches the selected project\n// The backend should have already filtered, but we keep this for safety\nreturn true;});setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:filteredQualifications}));if(!selectedProjectQualification||searchTerm!==selectedProjectQualification){setShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));}}else{setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));}}catch(error){handleError(error,\"ProjectPageSetup - searchProjectQualifications(\".concat(pageId,\")\"));setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));}finally{setLoadingProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));}},300);});return()=>{Object.values(searchTimeouts).forEach(timeout=>clearTimeout(timeout));};},[projectQualificationSearchTerms,selectedProjectQualifications,selectedProjects,projectSearchTerms,pages,watch]);const fetchProjectObjectives=async(pageId,project)=>{if(!project||project.trim()===''){setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));return;}setLoadingProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:true}));try{const response=await apiClient.get(\"/salesforce/project-objectives?project=\".concat(encodeURIComponent(project)));if(response.data.success){setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:response.data.projectObjectives||[]}));}}catch(error){handleError(error,\"ProjectPageSetup - fetchProjectObjectives(\".concat(pageId,\")\"));setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));}finally{setLoadingProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));}};const handleProjectSelect=(pageId,projectName)=>{setSelectedProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:projectName}));setValue(\"page_\".concat(pageId,\"_project\"),projectName);setProjectSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:projectName}));// Hide dropdown immediately\nsetShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));// Clear projects list to stop showing search results\nsetProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));// Clear project objective when project changes\nsetValue(\"page_\".concat(pageId,\"_projectObjective\"),'');setProjectObjectiveSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:''}));setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setSelectedProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:null}));// Clear qualification step when project changes (since it should be filtered by project)\nsetValue(\"page_\".concat(pageId,\"_projectQualificationStep\"),'');setQualificationStepSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:''}));setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setSelectedQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:null}));// Clear project qualification when project changes (since it should be filtered by project)\nsetValue(\"page_\".concat(pageId,\"_projectQualification\"),'');setProjectQualificationSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:''}));setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));setSelectedProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:null}));// Fetch project objectives for the selected project immediately\nif(projectName&&projectName.trim()!==''){fetchProjectObjectives(pageId,projectName);}};const handleProjectObjectiveSelect=(pageId,objectiveName)=>{setValue(\"page_\".concat(pageId,\"_projectObjective\"),objectiveName);setProjectObjectiveSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:objectiveName}));setSelectedProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:objectiveName}));// Hide dropdown immediately and clear objectives list to prevent infinite loop\nsetShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));};const handleQualificationStepSelect=(pageId,stepName)=>{setValue(\"page_\".concat(pageId,\"_projectQualificationStep\"),stepName);setQualificationStepSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:stepName}));setSelectedQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:stepName}));// Hide dropdown immediately and clear steps list to prevent infinite loop\nsetShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));};const handleProjectQualificationSelect=(pageId,qualificationName)=>{setValue(\"page_\".concat(pageId,\"_projectQualification\"),qualificationName);setProjectQualificationSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:qualificationName}));setSelectedProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:qualificationName}));// Hide dropdown immediately and clear qualifications list to prevent infinite loop\nsetShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:false}));setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[pageId]:[]}));};const setDefaultValues=()=>{// Set default values for the first page\nsetValue('page_1_projectPageType','');setValue('page_1_project','');setValue('page_1_projectObjective','');};const addNewPage=()=>{const newPageId=pages.length+1;setPages(prev=>[...prev,{id:newPageId,data:{}}]);setProjectSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:''}));setProjectObjectiveSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:''}));setQualificationStepSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:''}));setProjectQualificationSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:''}));setSelectedProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:null}));setSelectedProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:null}));setSelectedQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:null}));setSelectedProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[newPageId]:null}));};const removePage=pageId=>{if(pages.length===1){toast.error('At least one page is required');return;}setPages(prev=>prev.filter(page=>page.id!==pageId));// Clean up state for removed page\nconst newProjectSearchTerms=_objectSpread({},projectSearchTerms);delete newProjectSearchTerms[pageId];setProjectSearchTerms(newProjectSearchTerms);const newProjectObjectiveSearchTerms=_objectSpread({},projectObjectiveSearchTerms);delete newProjectObjectiveSearchTerms[pageId];setProjectObjectiveSearchTerms(newProjectObjectiveSearchTerms);const newQualificationStepSearchTerms=_objectSpread({},qualificationStepSearchTerms);delete newQualificationStepSearchTerms[pageId];setQualificationStepSearchTerms(newQualificationStepSearchTerms);const newProjectQualificationSearchTerms=_objectSpread({},projectQualificationSearchTerms);delete newProjectQualificationSearchTerms[pageId];setProjectQualificationSearchTerms(newProjectQualificationSearchTerms);const newSelectedProjects=_objectSpread({},selectedProjects);delete newSelectedProjects[pageId];setSelectedProjects(newSelectedProjects);const newProjectObjectives=_objectSpread({},projectObjectives);delete newProjectObjectives[pageId];setProjectObjectives(newProjectObjectives);const newQualificationSteps=_objectSpread({},qualificationSteps);delete newQualificationSteps[pageId];setQualificationSteps(newQualificationSteps);const newProjectQualifications=_objectSpread({},projectQualifications);delete newProjectQualifications[pageId];setProjectQualifications(newProjectQualifications);const newSelectedProjectObjectives=_objectSpread({},selectedProjectObjectives);delete newSelectedProjectObjectives[pageId];setSelectedProjectObjectives(newSelectedProjectObjectives);const newSelectedQualificationSteps=_objectSpread({},selectedQualificationSteps);delete newSelectedQualificationSteps[pageId];setSelectedQualificationSteps(newSelectedQualificationSteps);const newSelectedProjectQualifications=_objectSpread({},selectedProjectQualifications);delete newSelectedProjectQualifications[pageId];setSelectedProjectQualifications(newSelectedProjectQualifications);};const handleSave=async()=>{if(!hasPermission('create_project')){toast.error('You do not have permission to save project pages');return;}setSaving(true);try{const allFormData=watch();const pagesData=pages.map(page=>{const pageData={};Object.keys(allFormData).forEach(key=>{if(key.startsWith(\"page_\".concat(page.id,\"_\"))){const fieldName=key.replace(\"page_\".concat(page.id,\"_\"),'');pageData[fieldName]=allFormData[key];}});return pageData;});const draftData={pages:pagesData};await saveDraftProjectPage(draftData);// Also save to the main projects endpoint\nconst response=await apiClient.post('/project-pages',draftData);if(response.data.success){toast.success('Project pages saved successfully!');}else{toast.error('Failed to save project pages: '+getErrorMessage(response.data));}}catch(error){const errorMessage=handleError(error,'ProjectPageSetup - saveProjectPages');toast.error(errorMessage);}finally{setSaving(false);}};const handleCancel=()=>{if(window.confirm('Are you sure you want to cancel? All unsaved changes will be lost.')){reset();setPages([{id:1,data:{}}]);setProjectSearchTerms({});setProjectObjectiveSearchTerms({});setSelectedProjects({});setProjectObjectives({});setDefaultValues();navigate('/dashboard');}};const handlePublish=async()=>{if(!hasPermission('create_project')){toast.error('You do not have permission to publish project pages');return;}setSubmitting(true);try{const allFormData=watch();// Validate that Project Qualification Step is provided when Project Page Type is \"Project Qualifying Page\"\n// Validate that Project Qualification is provided when Project Page Type is \"Default Qualification Page\"\nconst validationErrors=[];pages.forEach(page=>{const pageType=allFormData[\"page_\".concat(page.id,\"_projectPageType\")];const qualificationStep=allFormData[\"page_\".concat(page.id,\"_projectQualificationStep\")];const projectQualification=allFormData[\"page_\".concat(page.id,\"_projectQualification\")];if(pageType==='Project Qualifying Page'&&(!qualificationStep||qualificationStep.trim()==='')){validationErrors.push(\"Page \".concat(page.id,\": Project Qualification Step is required when Project Page Type is \\\"Project Qualifying Page\\\"\"));setError(\"page_\".concat(page.id,\"_projectQualificationStep\"),{type:'required',message:'Project Qualification Step is required'});}if(pageType==='Default Qualification Page'&&(!projectQualification||projectQualification.trim()==='')){validationErrors.push(\"Page \".concat(page.id,\": Qualification is required when Project Page Type is \\\"Default Qualification Page\\\"\"));setError(\"page_\".concat(page.id,\"_projectQualification\"),{type:'required',message:'Qualification is required'});}});if(validationErrors.length>0){toast.error(validationErrors[0]);setSubmitting(false);return;}const pagesData=pages.map(page=>{const pageData={};Object.keys(allFormData).forEach(key=>{if(key.startsWith(\"page_\".concat(page.id,\"_\"))){const fieldName=key.replace(\"page_\".concat(page.id,\"_\"),'');const value=allFormData[key];// Include all values except undefined\nif(value!==undefined){if(typeof value==='string'){pageData[fieldName]=value.trim();}else if(typeof value==='boolean'){pageData[fieldName]=value;}else{pageData[fieldName]=value;}}}});// Ensure all fields are explicitly included\nif(allFormData[\"page_\".concat(page.id,\"_projectPageType\")]!==undefined){pageData.projectPageType=allFormData[\"page_\".concat(page.id,\"_projectPageType\")];}if(allFormData[\"page_\".concat(page.id,\"_project\")]!==undefined){pageData.project=allFormData[\"page_\".concat(page.id,\"_project\")];}if(allFormData[\"page_\".concat(page.id,\"_projectObjective\")]!==undefined){pageData.projectObjective=allFormData[\"page_\".concat(page.id,\"_projectObjective\")];}if(allFormData[\"page_\".concat(page.id,\"_projectPageDescription\")]!==undefined){pageData.projectPageDescription=allFormData[\"page_\".concat(page.id,\"_projectPageDescription\")];}// Always include projectQualificationStep if Project Page Type is \"Project Qualifying Page\"\n// Always include projectQualification if Project Page Type is \"Default Qualification Page\"\nconst pageType=allFormData[\"page_\".concat(page.id,\"_projectPageType\")];if(pageType==='Project Qualifying Page'){// If Project Page Type is \"Project Qualifying Page\", qualification step is required\nif(allFormData[\"page_\".concat(page.id,\"_projectQualificationStep\")]!==undefined){pageData.projectQualificationStep=allFormData[\"page_\".concat(page.id,\"_projectQualificationStep\")];}else{// If not provided, set to empty string so server validation can catch it\npageData.projectQualificationStep='';}}else if(pageType==='Default Qualification Page'){// If Project Page Type is \"Default Qualification Page\", project qualification is required\nif(allFormData[\"page_\".concat(page.id,\"_projectQualification\")]!==undefined){pageData.projectQualification=allFormData[\"page_\".concat(page.id,\"_projectQualification\")];}else{// If not provided, set to empty string so server validation can catch it\npageData.projectQualification='';}}else if(allFormData[\"page_\".concat(page.id,\"_projectQualificationStep\")]!==undefined){// Include it if provided for other page types\npageData.projectQualificationStep=allFormData[\"page_\".concat(page.id,\"_projectQualificationStep\")];}if(allFormData[\"page_\".concat(page.id,\"_active\")]!==undefined){pageData.active=allFormData[\"page_\".concat(page.id,\"_active\")]||false;}else{pageData.active=false;}return pageData;});// Sanitize all page data before sending\nconst sanitizedPagesData=pagesData.map(pageData=>sanitizeObject(pageData));// Publish all pages in parallel\nconst publishPromises=sanitizedPagesData.map((pageData,index)=>apiClient.post('/salesforce/create-project-page',pageData,{timeout:300000}).then(response=>({success:true,pageIndex:index+1,data:response.data})).catch(error=>{const errorMessage=handleError(error,\"ProjectPageSetup - publishPage(\".concat(index+1,\")\"));let displayMessage=errorMessage;if(error.response){// Server responded with error status\nif(error.response.status===404){displayMessage=\"Route not found (404). The server may need to be restarted to load the new route.\";}else{// Get error message from response\nconst errorData=error.response.data;displayMessage=getErrorMessage(error);// If there are details, append them\nif(errorData!==null&&errorData!==void 0&&errorData.details&&Array.isArray(errorData.details)&&errorData.details.length>0){const detailMessages=errorData.details.map(d=>d.message||d.statusCode||JSON.stringify(d)).join('; ');displayMessage+=\" (Details: \".concat(detailMessages,\")\");}else if(errorData!==null&&errorData!==void 0&&errorData.details&&typeof errorData.details==='string'){displayMessage+=\" (Details: \".concat(errorData.details,\")\");}}}else if(error.request){var _error$message;// Request was made but no response received\nif(error.code==='ECONNREFUSED'||error.code==='ERR_NETWORK'){displayMessage='Cannot connect to server. Please ensure the server is running on port 5000.';}else if(error.code==='ETIMEDOUT'||(_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes('timeout')){displayMessage='Request timed out. The server may be slow or unresponsive.';}else{displayMessage=\"No response from server: \".concat(error.message||error.code||'Unknown network error');}}else{// Error setting up the request\ndisplayMessage=error.message||'Unknown error';}return{success:false,pageIndex:index+1,error:displayMessage};}));const results=await Promise.all(publishPromises);const successful=results.filter(r=>r.success);const failed=results.filter(r=>!r.success);// Consolidate all results into modal\nconst publishedObjects=successful.map(result=>{var _result$data,_result$data2;return{type:'Project Page',name:((_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.objectName)||\"Page \".concat(result.pageIndex),id:(_result$data2=result.data)===null||_result$data2===void 0?void 0:_result$data2.salesforceId,pageIndex:result.pageIndex};});const failedObjects=failed.map(result=>({type:'Project Page',name:\"Page \".concat(result.pageIndex),error:result.error,pageIndex:result.pageIndex}));if(publishedObjects.length>0||failedObjects.length>0){setPublishResults({published:publishedObjects,failed:failedObjects});setShowPublishResultsModal(true);}if(successful.length===pagesData.length){await deleteDraftProjectPage();}}catch(error){const errorMessage=handleError(error,'ProjectPageSetup - publishProjectPages');toast.error(errorMessage);}finally{setSubmitting(false);}};if(!user){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,toggleSidebar:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(\"div\",{className:\"project-setup\",style:{marginLeft:\"\".concat(sidebarWidth,\"px\"),width:\"calc(100% - \".concat(sidebarWidth,\"px)\"),transition:'margin-left 0.2s ease, width 0.2s ease'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"setup-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"setup-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-menu-toggle\",onClick:()=>setSidebarOpen(!sidebarOpen),\"aria-label\":\"Toggle sidebar\",children:/*#__PURE__*/_jsx(Menu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Create Project Page\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Create a new project page by entering information in the form below\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-user-profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:((user===null||user===void 0?void 0:user.email)||'U').charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{size:18})})]})})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handlePublish),children:[pages.map((page,pageIndex)=>{var _projectSearchTerms$p,_projects$page$id2,_projects$page$id3,_projectObjectives$pa,_projectObjectiveSear,_projectObjectives$pa3,_projectObjectives$pa4,_projectObjectiveSear2,_projectObjectiveSear3,_qualificationStepSea,_qualificationSteps$p2,_qualificationSteps$p3,_projectQualification,_projectQualification3,_projectQualification4;return/*#__PURE__*/_jsxs(\"div\",{className:\"section-content\",style:{marginTop:pageIndex>0?'32px':'0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'16px'},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Page \",page.id]}),pages.length>1&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>removePage(page.id),className:\"btn-danger\",style:{padding:'4px 8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(X,{size:14,style:{marginRight:'4px'}}),\"Remove Page\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid compact-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"* Project Page Type\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"page_\".concat(page.id,\"_projectPageType\"),{required:true})),{},{className:fieldErrors[\"page_\".concat(page.id,\"_projectPageType\")]?'error-field':'',style:{fontSize:'12px',padding:'6px 10px',height:'32px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--None--\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Project Splash Page (Preapply)\",children:\"Project Splash Page (Preapply)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Project Pre-Qualification\",children:\"Project Pre-Qualification\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Project Qualifying Page\",children:\"Project Qualifying Page\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Project Active Page\",children:\"Project Active Page\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Default Qualification Page\",children:\"Default Qualification Page\"})]})),errors[\"page_\".concat(page.id,\"_projectPageType\")]&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"* Project\",/*#__PURE__*/_jsx(Info,{size:14,className:\"info-icon\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register(\"page_\".concat(page.id,\"_project\"),{required:true})),{},{className:fieldErrors[\"page_\".concat(page.id,\"_project\")]?'error-field':'',placeholder:\"Search or enter project name...\",style:{fontSize:'12px',padding:'6px 10px',paddingRight:'36px',width:'100%',height:'32px'},value:(_projectSearchTerms$p=projectSearchTerms[page.id])!==null&&_projectSearchTerms$p!==void 0?_projectSearchTerms$p:'',onChange:e=>{const newValue=e.target.value;setProjectSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:newValue}));setValue(\"page_\".concat(page.id,\"_project\"),newValue);// If the value matches the selected project, don't show dropdown\nif(selectedProjects[page.id]&&newValue===selectedProjects[page.id]){setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false}));setProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:[]}));}else if(newValue.trim()!==''){// Only show dropdown if there's a search term and it doesn't match selected project\nsetShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}else{setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false}));setProjects(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:[]}));}},onFocus:()=>{var _projects$page$id;// Only show dropdown if there's a search term, results exist, and it doesn't match selected project\nconst searchTerm=projectSearchTerms[page.id];const selectedProject=selectedProjects[page.id];if(searchTerm&&searchTerm!==selectedProject&&((_projects$page$id=projects[page.id])===null||_projects$page$id===void 0?void 0:_projects$page$id.length)>0){setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}},onBlur:()=>{setTimeout(()=>setShowProjectDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false})),200);}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666',pointerEvents:'none'}}),showProjectDropdowns[page.id]&&((_projects$page$id2=projects[page.id])===null||_projects$page$id2===void 0?void 0:_projects$page$id2.length)>0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,backgroundColor:'white',border:'1px solid #ddd',borderRadius:'4px',maxHeight:'200px',overflowY:'auto',zIndex:1000,boxShadow:'0 2px 8px rgba(0,0,0,0.1)',marginTop:'4px'},children:loadingProjects[page.id]?/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px',fontSize:'12px',color:'#666',textAlign:'center'},children:\"Searching...\"}):(_projects$page$id3=projects[page.id])===null||_projects$page$id3===void 0?void 0:_projects$page$id3.map(project=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleProjectSelect(page.id,project.name),style:{padding:'6px 10px',cursor:'pointer',fontSize:'12px',borderBottom:'1px solid #f0f0f0'},onMouseEnter:e=>e.target.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.target.style.backgroundColor='white',children:[project.name,\" \",project.status&&\"(\".concat(project.status,\")\")]},project.id))})]}),errors[\"page_\".concat(page.id,\"_project\")]&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"* Project Objective\"}),loadingProjectObjectives[page.id]?/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px',fontSize:'12px',color:'#666'},children:\"Loading project objectives...\"}):((_projectObjectives$pa=projectObjectives[page.id])===null||_projectObjectives$pa===void 0?void 0:_projectObjectives$pa.length)>0?/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register(\"page_\".concat(page.id,\"_projectObjective\"),{required:true})),{},{className:fieldErrors[\"page_\".concat(page.id,\"_projectObjective\")]?'error-field':'',placeholder:\"Search or enter project objective name...\",style:{fontSize:'12px',padding:'6px 10px',paddingRight:'36px',width:'100%',height:'32px'},value:(_projectObjectiveSear=projectObjectiveSearchTerms[page.id])!==null&&_projectObjectiveSear!==void 0?_projectObjectiveSear:'',onChange:e=>{const newValue=e.target.value;setProjectObjectiveSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:newValue}));setValue(\"page_\".concat(page.id,\"_projectObjective\"),newValue);// Clear selected objective if user is typing something different\nconst selectedObjective=selectedProjectObjectives[page.id];if(selectedObjective&&newValue!==selectedObjective){setSelectedProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:null}));}// Only show dropdown if the value doesn't match selected objective\nif(!selectedObjective||newValue!==selectedObjective){setShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}else{setShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false}));setProjectObjectives(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:[]}));}},onFocus:()=>{var _projectObjectives$pa2;const selectedObjective=selectedProjectObjectives[page.id];const searchTerm=projectObjectiveSearchTerms[page.id];// Only show dropdown if there's a search term, results exist, and it doesn't match selected objective\nif(searchTerm&&(!selectedObjective||searchTerm!==selectedObjective)&&((_projectObjectives$pa2=projectObjectives[page.id])===null||_projectObjectives$pa2===void 0?void 0:_projectObjectives$pa2.length)>0){setShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}},onBlur:()=>{setTimeout(()=>setShowProjectObjectiveDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false})),200);}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666',pointerEvents:'none'}}),showProjectObjectiveDropdowns[page.id]&&((_projectObjectives$pa3=projectObjectives[page.id])===null||_projectObjectives$pa3===void 0?void 0:_projectObjectives$pa3.length)>0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,backgroundColor:'white',border:'1px solid #ddd',borderRadius:'4px',maxHeight:'200px',overflowY:'auto',zIndex:1000,boxShadow:'0 2px 8px rgba(0,0,0,0.1)',marginTop:'4px'},children:(_projectObjectives$pa4=projectObjectives[page.id])===null||_projectObjectives$pa4===void 0?void 0:_projectObjectives$pa4.map(objective=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleProjectObjectiveSelect(page.id,objective.contributorFacingProjectName||objective.name),style:{padding:'6px 10px',cursor:'pointer',fontSize:'12px',borderBottom:'1px solid #f0f0f0'},onMouseEnter:e=>e.target.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.target.style.backgroundColor='white',children:objective.contributorFacingProjectName||objective.name},objective.id))})]}):selectedProjects[page.id]?/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register(\"page_\".concat(page.id,\"_projectObjective\"),{required:true})),{},{placeholder:\"No project objectives found. Enter manually...\",style:{paddingRight:'36px',fontSize:'12px',padding:'6px 10px',height:'32px'},value:(_projectObjectiveSear2=projectObjectiveSearchTerms[page.id])!==null&&_projectObjectiveSear2!==void 0?_projectObjectiveSear2:'',onChange:e=>{const newValue=e.target.value;setProjectObjectiveSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:newValue}));setValue(\"page_\".concat(page.id,\"_projectObjective\"),newValue);}})),/*#__PURE__*/_jsx(Search,{size:16,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666'}})]}):/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register(\"page_\".concat(page.id,\"_projectObjective\"),{required:true})),{},{placeholder:\"Select a project first...\",disabled:true,style:{paddingRight:'40px',fontSize:'13px',padding:'8px',opacity:0.5},value:(_projectObjectiveSear3=projectObjectiveSearchTerms[page.id])!==null&&_projectObjectiveSear3!==void 0?_projectObjectiveSear3:''})),/*#__PURE__*/_jsx(Search,{size:16,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666'}})]}),errors[\"page_\".concat(page.id,\"_projectObjective\")]&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),watch(\"page_\".concat(page.id,\"_projectPageType\"))==='Project Qualifying Page'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"* Project Qualification Step\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register(\"page_\".concat(page.id,\"_projectQualificationStep\"),{validate:value=>{const pageType=watch(\"page_\".concat(page.id,\"_projectPageType\"));if(pageType==='Project Qualifying Page'&&(!value||value.trim()==='')){return'Project Qualification Step is required when Project Page Type is \"Project Qualifying Page\"';}return true;}})),{},{className:fieldErrors[\"page_\".concat(page.id,\"_projectQualificationStep\")]?'error-field':'',placeholder:\"Search or enter qualification step name...\",style:{fontSize:'12px',padding:'6px 10px',paddingRight:'36px',width:'100%',height:'32px'},value:(_qualificationStepSea=qualificationStepSearchTerms[page.id])!==null&&_qualificationStepSea!==void 0?_qualificationStepSea:'',onChange:e=>{const newValue=e.target.value;setQualificationStepSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:newValue}));setValue(\"page_\".concat(page.id,\"_projectQualificationStep\"),newValue);// Clear selected step if user is typing something different\nconst selectedStep=selectedQualificationSteps[page.id];if(selectedStep&&newValue!==selectedStep){setSelectedQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:null}));}// Only show dropdown if the value doesn't match selected step\nif(!selectedStep||newValue!==selectedStep){setShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}else{setShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false}));setQualificationSteps(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:[]}));}},onFocus:()=>{var _qualificationSteps$p;const selectedStep=selectedQualificationSteps[page.id];const searchTerm=qualificationStepSearchTerms[page.id];// Only show dropdown if there's a search term, results exist, and it doesn't match selected step\nif(searchTerm&&(!selectedStep||searchTerm!==selectedStep)&&((_qualificationSteps$p=qualificationSteps[page.id])===null||_qualificationSteps$p===void 0?void 0:_qualificationSteps$p.length)>0){setShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}},onBlur:()=>{setTimeout(()=>setShowQualificationStepDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false})),200);}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666',pointerEvents:'none'}}),showQualificationStepDropdowns[page.id]&&((_qualificationSteps$p2=qualificationSteps[page.id])===null||_qualificationSteps$p2===void 0?void 0:_qualificationSteps$p2.length)>0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,backgroundColor:'white',border:'1px solid #ddd',borderRadius:'4px',maxHeight:'200px',overflowY:'auto',zIndex:1000,boxShadow:'0 2px 8px rgba(0,0,0,0.1)',marginTop:'4px'},children:loadingQualificationSteps[page.id]?/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px',fontSize:'12px',color:'#666',textAlign:'center'},children:\"Searching...\"}):(_qualificationSteps$p3=qualificationSteps[page.id])===null||_qualificationSteps$p3===void 0?void 0:_qualificationSteps$p3.map(step=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleQualificationStepSelect(page.id,step.name),style:{padding:'8px 12px',cursor:'pointer',fontSize:'13px',borderBottom:'1px solid #f0f0f0'},onMouseEnter:e=>e.target.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.target.style.backgroundColor='white',children:step.name},step.id))})]}),errors[\"page_\".concat(page.id,\"_projectQualificationStep\")]&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),watch(\"page_\".concat(page.id,\"_projectPageType\"))==='Default Qualification Page'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"* Qualification\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register(\"page_\".concat(page.id,\"_projectQualification\"),{validate:value=>{const pageType=watch(\"page_\".concat(page.id,\"_projectPageType\"));if(pageType==='Default Qualification Page'&&(!value||value.trim()==='')){return'Qualification is required when Project Page Type is \"Default Qualification Page\"';}return true;}})),{},{className:fieldErrors[\"page_\".concat(page.id,\"_projectQualification\")]?'error-field':'',placeholder:\"Search or enter qualification name...\",style:{fontSize:'12px',padding:'6px 10px',paddingRight:'36px',width:'100%',height:'32px'},value:(_projectQualification=projectQualificationSearchTerms[page.id])!==null&&_projectQualification!==void 0?_projectQualification:'',onChange:e=>{const newValue=e.target.value;setProjectQualificationSearchTerms(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:newValue}));setValue(\"page_\".concat(page.id,\"_projectQualification\"),newValue);// Clear selected qualification if user is typing something different\nconst selectedQualification=selectedProjectQualifications[page.id];if(selectedQualification&&newValue!==selectedQualification){setSelectedProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:null}));}// Only show dropdown if the value doesn't match selected qualification\nif(!selectedQualification||newValue!==selectedQualification){setShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}else{setShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false}));setProjectQualifications(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:[]}));}},onFocus:()=>{var _projectQualification2;const selectedQualification=selectedProjectQualifications[page.id];const searchTerm=projectQualificationSearchTerms[page.id];// Only show dropdown if there's a search term, results exist, and it doesn't match selected qualification\nif(searchTerm&&(!selectedQualification||searchTerm!==selectedQualification)&&((_projectQualification2=projectQualifications[page.id])===null||_projectQualification2===void 0?void 0:_projectQualification2.length)>0){setShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:true}));}},onBlur:()=>{setTimeout(()=>setShowProjectQualificationDropdowns(prev=>_objectSpread(_objectSpread({},prev),{},{[page.id]:false})),200);}})),/*#__PURE__*/_jsx(Search,{size:14,style:{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',color:'#666',pointerEvents:'none'}}),showProjectQualificationDropdowns[page.id]&&((_projectQualification3=projectQualifications[page.id])===null||_projectQualification3===void 0?void 0:_projectQualification3.length)>0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,backgroundColor:'#ffffff',color:'#000000',border:'1px solid #ddd',borderRadius:'4px',maxHeight:'200px',overflowY:'auto',zIndex:1000,boxShadow:'0 2px 8px rgba(0,0,0,0.1)',marginTop:'4px'},children:loadingProjectQualifications[page.id]?/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px',fontSize:'13px',color:'#000000',textAlign:'center',backgroundColor:'#ffffff'},children:\"Searching...\"}):(_projectQualification4=projectQualifications[page.id])===null||_projectQualification4===void 0?void 0:_projectQualification4.map(qualification=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleProjectQualificationSelect(page.id,qualification.name),style:{padding:'8px 12px',cursor:'pointer',fontSize:'13px',borderBottom:'1px solid #f0f0f0',backgroundColor:'#ffffff',color:'#000000'},onMouseEnter:e=>e.target.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.target.style.backgroundColor='#ffffff',children:qualification.name},qualification.id))})]}),errors[\"page_\".concat(page.id,\"_projectQualification\")]&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group full-width\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Project Page Description\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register(\"page_\".concat(page.id,\"_projectPageDescription\"))),{},{rows:\"3\",placeholder:\"Enter project page description...\",style:{fontSize:'12px',padding:'6px 10px',width:'100%',minHeight:'32px',resize:'vertical'}}))]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'8px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"checkbox\"},register(\"page_\".concat(page.id,\"_active\"))),{},{style:{width:'18px',height:'18px',cursor:'pointer'}})),\"Active\"]})})]})]},page.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",style:{marginTop:'32px',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:addNewPage,className:\"btn-secondary\",style:{marginRight:'8px'},children:[/*#__PURE__*/_jsx(Plus,{size:16,style:{marginRight:'4px'}}),\"Add New Page\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleCancel,className:\"btn-secondary\",children:[/*#__PURE__*/_jsx(X,{size:16,style:{marginRight:'4px'}}),\"Cancel\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSave,className:\"btn-secondary\",disabled:saving,children:[/*#__PURE__*/_jsx(Save,{size:16,style:{marginRight:'4px'}}),saving?'Saving...':'Save']}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:submitting,children:[/*#__PURE__*/_jsx(Send,{size:16,style:{marginRight:'4px'}}),submitting?'Publishing...':'Publish']})]})]})]})]})}),showPublishResultsModal&&publishResults&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000,padding:'12px',boxSizing:'border-box'},onClick:()=>setShowPublishResultsModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#ffffff',borderRadius:'8px',width:'90%',maxWidth:'700px',maxHeight:'90vh',display:'flex',flexDirection:'column',boxShadow:'0 4px 20px rgba(0, 0, 0, 0.15)',boxSizing:'border-box',color:'#002329',fontFamily:'Poppins',fontSize:'14px'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'12px 24px',borderBottom:'1px solid #e2e8f0',flexShrink:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[publishResults.failed.length>0?/*#__PURE__*/_jsx(XCircle,{size:24,color:\"#ef4444\"}):/*#__PURE__*/_jsx(CheckCircle,{size:24,color:\"#10b981\"}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'20px',fontWeight:600,color:'#002329',fontFamily:'Poppins'},children:\"Publish Results\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPublishResultsModal(false),style:{background:'none',border:'none',cursor:'pointer',padding:'4px',display:'flex',alignItems:'center',justifyContent:'center',borderRadius:'4px',transition:'background-color 0.2s'},onMouseEnter:e=>e.target.style.backgroundColor='#f1f5f9',onMouseLeave:e=>e.target.style.backgroundColor='transparent',children:/*#__PURE__*/_jsx(X,{size:20,color:\"#64748b\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',overflowY:'auto',flex:1},children:[publishResults.published.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 16px 0',fontSize:'14px',fontWeight:600,color:'#10b981',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(CheckCircle,{size:18}),\"Published Successfully (\",publishResults.published.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'12px'},children:publishResults.published.map((obj,index)=>/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px',backgroundColor:'#f0fdf4',border:'1px solid #bbf7d0',borderRadius:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#002329',marginBottom:'8px'},children:[obj.type,\": \\\"\",obj.name,\"\\\"\"]})},index))})]}),publishResults.failed.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 16px 0',fontSize:'14px',fontWeight:600,color:'#ef4444',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(XCircle,{size:18}),\"Failed to Publish (\",publishResults.failed.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'12px'},children:publishResults.failed.map((obj,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px',backgroundColor:'#fef2f2',border:'1px solid #fecaca',borderRadius:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,color:'#002329',marginBottom:'8px'},children:[obj.type,\": \\\"\",obj.name,\"\\\"\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#ef4444',marginTop:'8px'},children:[\"Error: \",obj.error]})]},index))})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px 24px',borderTop:'1px solid #e2e8f0',display:'flex',justifyContent:'flex-end',gap:'12px',flexShrink:0},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPublishResultsModal(false);if(publishResults.failed.length===0){setTimeout(()=>{navigate('/dashboard');},500);}},style:{padding:'6px 12px',backgroundColor:'#08979C',color:'#ffffff',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:600,cursor:'pointer',fontFamily:'Poppins',transition:'background-color 0.2s'},onMouseEnter:e=>e.target.style.backgroundColor='#067a7f',onMouseLeave:e=>e.target.style.backgroundColor='#08979C',children:publishResults.failed.length===0?'Continue':'Close'})})]})})]});};export default ProjectPageSetup;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useForm","apiClient","toast","saveDraftProjectPage","loadDraftProjectPage","deleteDraftProjectPage","getErrorMessage","handleError","sanitizeObject","Search","Info","Menu","Send","Save","X","Plus","LogOut","CheckCircle","XCircle","useAuth","Sidebar","useSidebarWidth","jsx","_jsx","jsxs","_jsxs","ProjectPageSetup","navigate","user","hasPermission","logout","register","handleSubmit","setValue","watch","formState","errors","trigger","setError","clearErrors","reset","loading","setLoading","fieldErrors","setFieldErrors","submitting","setSubmitting","saving","setSaving","showPublishResultsModal","setShowPublishResultsModal","publishResults","setPublishResults","pages","setPages","id","data","projects","setProjects","loadingProjects","setLoadingProjects","projectSearchTerms","setProjectSearchTerms","projectObjectives","setProjectObjectives","loadingProjectObjectives","setLoadingProjectObjectives","projectObjectiveSearchTerms","setProjectObjectiveSearchTerms","qualificationSteps","setQualificationSteps","loadingQualificationSteps","setLoadingQualificationSteps","qualificationStepSearchTerms","setQualificationStepSearchTerms","selectedProjects","setSelectedProjects","selectedProjectObjectives","setSelectedProjectObjectives","selectedQualificationSteps","setSelectedQualificationSteps","showProjectDropdowns","setShowProjectDropdowns","showProjectObjectiveDropdowns","setShowProjectObjectiveDropdowns","showQualificationStepDropdowns","setShowQualificationStepDropdowns","projectQualifications","setProjectQualifications","loadingProjectQualifications","setLoadingProjectQualifications","projectQualificationSearchTerms","setProjectQualificationSearchTerms","selectedProjectQualifications","setSelectedProjectQualifications","showProjectQualificationDropdowns","setShowProjectQualificationDropdowns","sidebarOpen","setSidebarOpen","sidebarWidth","dataLoadedRef","loadExistingData","current","length","map","page","index","newProjectSearchTerms","newProjectObjectiveSearchTerms","newQualificationStepSearchTerms","newProjectQualificationSearchTerms","newSelectedProjects","newSelectedProjectObjectives","newSelectedQualificationSteps","newSelectedProjectQualifications","forEach","project","projectObjective","projectQualificationStep","projectQualification","pageIndex","Object","keys","key","undefined","concat","success","setDefaultValues","error","errorMessage","searchTimeouts","pageId","searchTerm","selectedProject","prev","_objectSpread","clearTimeout","setTimeout","trim","response","get","encodeURIComponent","values","timeout","fetchProjectObjectives","selectedObjective","selectedQualificationStep","formProjectValue","selectedProjectName","currentSelectedProject","params","URLSearchParams","append","toString","steps","filteredSteps","filter","step","projectId","selectedProjectQualification","qualifications","filteredQualifications","qualification","objectType","handleProjectSelect","projectName","handleProjectObjectiveSelect","objectiveName","handleQualificationStepSelect","stepName","handleProjectQualificationSelect","qualificationName","addNewPage","newPageId","removePage","newProjectObjectives","newQualificationSteps","newProjectQualifications","handleSave","allFormData","pagesData","pageData","startsWith","fieldName","replace","draftData","post","handleCancel","window","confirm","handlePublish","validationErrors","pageType","qualificationStep","push","type","message","value","projectPageType","projectPageDescription","active","sanitizedPagesData","publishPromises","then","catch","displayMessage","status","errorData","details","Array","isArray","detailMessages","d","statusCode","JSON","stringify","join","request","_error$message","code","includes","results","Promise","all","successful","r","failed","publishedObjects","result","_result$data","_result$data2","name","objectName","salesforceId","failedObjects","published","className","children","isOpen","toggleSidebar","style","marginLeft","width","transition","onClick","size","email","charAt","toUpperCase","title","onSubmit","_projectSearchTerms$p","_projects$page$id2","_projects$page$id3","_projectObjectives$pa","_projectObjectiveSear","_projectObjectives$pa3","_projectObjectives$pa4","_projectObjectiveSear2","_projectObjectiveSear3","_qualificationStepSea","_qualificationSteps$p2","_qualificationSteps$p3","_projectQualification","_projectQualification3","_projectQualification4","marginTop","display","justifyContent","alignItems","marginBottom","padding","fontSize","marginRight","required","height","position","placeholder","paddingRight","onChange","e","newValue","target","onFocus","_projects$page$id","onBlur","right","top","transform","color","pointerEvents","left","backgroundColor","border","borderRadius","maxHeight","overflowY","zIndex","boxShadow","textAlign","cursor","borderBottom","onMouseEnter","onMouseLeave","_projectObjectives$pa2","objective","contributorFacingProjectName","disabled","opacity","validate","selectedStep","_qualificationSteps$p","selectedQualification","_projectQualification2","rows","minHeight","resize","gap","bottom","boxSizing","maxWidth","flexDirection","fontFamily","stopPropagation","flexShrink","margin","fontWeight","background","flex","obj","borderTop"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/ProjectPageSetup.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport apiClient from '../config/api';\nimport toast from 'react-hot-toast';\nimport { saveDraftProjectPage, loadDraftProjectPage, deleteDraftProjectPage } from '../utils/draftStorage';\nimport { getErrorMessage, handleError } from '../utils/errorHandler';\nimport { sanitizeObject } from '../utils/security';\nimport { Search, Info, Menu, Send, Save, X, Plus, LogOut, CheckCircle, XCircle } from 'lucide-react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/Sidebar';\nimport useSidebarWidth from '../hooks/useSidebarWidth';\nimport '../styles/ProjectSetup.css';\nimport '../styles/Sidebar.css';\nimport '../styles/GlobalHeader.css';\n\nconst ProjectPageSetup = () => {\n  const navigate = useNavigate();\n  const { user, hasPermission, logout } = useAuth();\n  const { register, handleSubmit, setValue, watch, formState: { errors }, trigger, setError, clearErrors, reset } = useForm();\n  const [loading, setLoading] = useState(false);\n  const [fieldErrors, setFieldErrors] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showPublishResultsModal, setShowPublishResultsModal] = useState(false);\n  const [publishResults, setPublishResults] = useState(null);\n  const [pages, setPages] = useState([{ id: 1, data: {} }]);\n  const [projects, setProjects] = useState({});\n  const [loadingProjects, setLoadingProjects] = useState({});\n  const [projectSearchTerms, setProjectSearchTerms] = useState({ 1: '' });\n  const [projectObjectives, setProjectObjectives] = useState({});\n  const [loadingProjectObjectives, setLoadingProjectObjectives] = useState({});\n  const [projectObjectiveSearchTerms, setProjectObjectiveSearchTerms] = useState({ 1: '' });\n  const [qualificationSteps, setQualificationSteps] = useState({});\n  const [loadingQualificationSteps, setLoadingQualificationSteps] = useState({});\n  const [qualificationStepSearchTerms, setQualificationStepSearchTerms] = useState({ 1: '' });\n  const [selectedProjects, setSelectedProjects] = useState({});\n  const [selectedProjectObjectives, setSelectedProjectObjectives] = useState({});\n  const [selectedQualificationSteps, setSelectedQualificationSteps] = useState({});\n  const [showProjectDropdowns, setShowProjectDropdowns] = useState({});\n  const [showProjectObjectiveDropdowns, setShowProjectObjectiveDropdowns] = useState({});\n  const [showQualificationStepDropdowns, setShowQualificationStepDropdowns] = useState({});\n  // Qualification field for Default Qualification Page (retrieves from Qualification_Step__c)\n  const [projectQualifications, setProjectQualifications] = useState({});\n  const [loadingProjectQualifications, setLoadingProjectQualifications] = useState({});\n  const [projectQualificationSearchTerms, setProjectQualificationSearchTerms] = useState({ 1: '' });\n  const [selectedProjectQualifications, setSelectedProjectQualifications] = useState({});\n  const [showProjectQualificationDropdowns, setShowProjectQualificationDropdowns] = useState({});\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const sidebarWidth = useSidebarWidth(sidebarOpen);\n  const dataLoadedRef = useRef(false);\n\n  useEffect(() => {\n    // Load existing project page data from server storage (for editing)\n    const loadExistingData = async () => {\n      // Prevent duplicate loading in React StrictMode\n      if (dataLoadedRef.current) return;\n      \n      try {\n        const data = await loadDraftProjectPage();\n        if (data && data.pages && data.pages.length > 0) {\n          dataLoadedRef.current = true;\n          setPages(data.pages.map((page, index) => ({ id: index + 1, data: page })));\n          // Populate search terms and selected projects\n          const newProjectSearchTerms = {};\n          const newProjectObjectiveSearchTerms = {};\n          const newQualificationStepSearchTerms = {};\n          const newProjectQualificationSearchTerms = {};\n          const newSelectedProjects = {};\n          const newSelectedProjectObjectives = {};\n          const newSelectedQualificationSteps = {};\n          const newSelectedProjectQualifications = {};\n          data.pages.forEach((page, index) => {\n            if (page.project) {\n              newProjectSearchTerms[index + 1] = page.project;\n              newSelectedProjects[index + 1] = page.project;\n            }\n            if (page.projectObjective) {\n              newProjectObjectiveSearchTerms[index + 1] = page.projectObjective;\n              newSelectedProjectObjectives[index + 1] = page.projectObjective;\n            }\n            if (page.projectQualificationStep) {\n              newQualificationStepSearchTerms[index + 1] = page.projectQualificationStep;\n              newSelectedQualificationSteps[index + 1] = page.projectQualificationStep;\n            }\n            if (page.projectQualification) {\n              newProjectQualificationSearchTerms[index + 1] = page.projectQualification;\n              newSelectedProjectQualifications[index + 1] = page.projectQualification;\n            }\n          });\n          setProjectSearchTerms(newProjectSearchTerms);\n          setProjectObjectiveSearchTerms(newProjectObjectiveSearchTerms);\n          setQualificationStepSearchTerms(newQualificationStepSearchTerms);\n          setProjectQualificationSearchTerms(newProjectQualificationSearchTerms);\n          setSelectedProjects(newSelectedProjects);\n          setSelectedProjectObjectives(newSelectedProjectObjectives);\n          setSelectedQualificationSteps(newSelectedQualificationSteps);\n          setSelectedProjectQualifications(newSelectedProjectQualifications);\n          // Populate form with existing data\n          data.pages.forEach((page, pageIndex) => {\n            Object.keys(page).forEach(key => {\n              if (page[key] !== null && page[key] !== undefined) {\n                setValue(`page_${pageIndex + 1}_${key}`, page[key]);\n              }\n            });\n          });\n          toast.success('Project page data loaded for editing');\n        } else {\n          // Clear form and set default values for new project page\n          reset();\n          setDefaultValues();\n        }\n      } catch (error) {\n        const errorMessage = handleError(error, 'ProjectPageSetup - loadProjectPageData');\n        toast.error(errorMessage);\n        // Reset form to defaults\n        reset();\n        setDefaultValues();\n      }\n    };\n    \n    loadExistingData();\n  }, [setValue, reset]);\n\n  // Search projects in Salesforce when search term changes\n  useEffect(() => {\n    const searchTimeouts = {};\n    \n    Object.keys(projectSearchTerms).forEach(pageId => {\n      const searchTerm = projectSearchTerms[pageId];\n      const selectedProject = selectedProjects[pageId];\n      \n      // Don't search if the search term matches the selected project (user has already selected)\n      if (selectedProject && searchTerm === selectedProject) {\n        setProjects(prev => ({ ...prev, [pageId]: [] }));\n        setShowProjectDropdowns(prev => ({ ...prev, [pageId]: false }));\n        return;\n      }\n      \n      if (searchTimeouts[pageId]) {\n        clearTimeout(searchTimeouts[pageId]);\n      }\n      \n      searchTimeouts[pageId] = setTimeout(async () => {\n        if (!searchTerm || searchTerm.trim() === '') {\n          setProjects(prev => ({ ...prev, [pageId]: [] }));\n          setShowProjectDropdowns(prev => ({ ...prev, [pageId]: false }));\n          return;\n        }\n\n        // Don't search if the search term matches the selected project\n        if (selectedProject && searchTerm === selectedProject) {\n          setProjects(prev => ({ ...prev, [pageId]: [] }));\n          setShowProjectDropdowns(prev => ({ ...prev, [pageId]: false }));\n          return;\n        }\n\n        setLoadingProjects(prev => ({ ...prev, [pageId]: true }));\n        try {\n          const response = await apiClient.get(`/salesforce/search-projects?search=${encodeURIComponent(searchTerm)}`);\n          if (response.data.success) {\n            setProjects(prev => ({ ...prev, [pageId]: response.data.projects || [] }));\n            setShowProjectDropdowns(prev => ({ ...prev, [pageId]: true }));\n          }\n        } catch (error) {\n          handleError(error, `ProjectPageSetup - searchProjects(${pageId})`);\n          setProjects(prev => ({ ...prev, [pageId]: [] }));\n          setShowProjectDropdowns(prev => ({ ...prev, [pageId]: false }));\n        } finally {\n          setLoadingProjects(prev => ({ ...prev, [pageId]: false }));\n        }\n      }, 300);\n    });\n\n    return () => {\n      Object.values(searchTimeouts).forEach(timeout => clearTimeout(timeout));\n    };\n  }, [projectSearchTerms, selectedProjects]);\n\n  // Search project objectives when project is selected\n  useEffect(() => {\n    Object.keys(selectedProjects).forEach(pageId => {\n      const project = selectedProjects[pageId];\n      if (project && project.trim() !== '') {\n        // Clear selected objective when project changes\n        setSelectedProjectObjectives(prev => ({ ...prev, [pageId]: null }));\n        // Fetch project objectives immediately when project is selected\n        fetchProjectObjectives(pageId, project);\n      }\n    });\n  }, [selectedProjects]);\n\n  // Search project objectives in Salesforce when search term changes\n  useEffect(() => {\n    const searchTimeouts = {};\n    \n    Object.keys(projectObjectiveSearchTerms).forEach(pageId => {\n      const searchTerm = projectObjectiveSearchTerms[pageId];\n      const project = selectedProjects[pageId];\n      const selectedObjective = selectedProjectObjectives[pageId];\n      \n      if (!project || project.trim() === '') {\n        return;\n      }\n      \n      // Don't search if the search term matches the selected objective (user has already selected)\n      if (selectedObjective && searchTerm === selectedObjective) {\n        setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n        setShowProjectObjectiveDropdowns(prev => ({ ...prev, [pageId]: false }));\n        return;\n      }\n      \n      if (searchTimeouts[pageId]) {\n        clearTimeout(searchTimeouts[pageId]);\n      }\n      \n      searchTimeouts[pageId] = setTimeout(async () => {\n        if (!searchTerm || searchTerm.trim() === '') {\n          // If search term is empty but we have a project, load all objectives for that project\n          if (project && project.trim() !== '') {\n            fetchProjectObjectives(pageId, project);\n          } else {\n            setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n          }\n          return;\n        }\n\n        // Don't search if the search term matches the selected objective\n        if (selectedObjective && searchTerm === selectedObjective) {\n          setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n          setShowProjectObjectiveDropdowns(prev => ({ ...prev, [pageId]: false }));\n          return;\n        }\n\n        setLoadingProjectObjectives(prev => ({ ...prev, [pageId]: true }));\n        try {\n          // Search project objectives by name\n          const response = await apiClient.get(`/salesforce/search-project-objectives?search=${encodeURIComponent(searchTerm)}${project ? `&project=${encodeURIComponent(project)}` : ''}`);\n          if (response.data.success) {\n            setProjectObjectives(prev => ({ ...prev, [pageId]: response.data.projectObjectives || [] }));\n            // Only show dropdown if search term doesn't match selected objective\n            if (!selectedObjective || searchTerm !== selectedObjective) {\n              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [pageId]: true }));\n            }\n          }\n        } catch (error) {\n          handleError(error, `ProjectPageSetup - searchProjectObjectives(${pageId})`);\n          setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n        } finally {\n          setLoadingProjectObjectives(prev => ({ ...prev, [pageId]: false }));\n        }\n      }, 300);\n    });\n\n    return () => {\n      Object.values(searchTimeouts).forEach(timeout => clearTimeout(timeout));\n    };\n  }, [projectObjectiveSearchTerms, selectedProjects, selectedProjectObjectives]);\n\n  // Search qualification steps in Salesforce when search term changes - filter by selected project\n  useEffect(() => {\n    const searchTimeouts = {};\n    \n    Object.keys(qualificationStepSearchTerms).forEach(pageId => {\n      const searchTerm = qualificationStepSearchTerms[pageId];\n      const selectedQualificationStep = selectedQualificationSteps[pageId];\n      const selectedProject = selectedProjects[pageId];\n      \n      // Get the current project value from form (reactive)\n      const formProjectValue = watch(`page_${pageId}_project`);\n      \n      // Don't search if the search term matches the selected qualification step\n      if (selectedQualificationStep && searchTerm === selectedQualificationStep) {\n        setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n        setShowQualificationStepDropdowns(prev => ({ ...prev, [pageId]: false }));\n        return;\n      }\n      \n      // Don't search if search term is empty\n      if (!searchTerm || searchTerm.trim() === '') {\n        setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n        return;\n      }\n      \n      // Get the selected project name for filtering - check all sources\n      const selectedProjectName = selectedProject || projectSearchTerms[pageId] || formProjectValue;\n      \n      // Don't search if no project is selected (qualification steps must be filtered by project)\n      if (!selectedProjectName || selectedProjectName.trim() === '') {\n        setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n        return;\n      }\n      \n      if (searchTimeouts[pageId]) {\n        clearTimeout(searchTimeouts[pageId]);\n      }\n      \n      searchTimeouts[pageId] = setTimeout(async () => {\n        // Double-check conditions inside timeout\n        if (!searchTerm || searchTerm.trim() === '') {\n          setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n          return;\n        }\n\n        // Don't search if the search term matches the selected qualification step\n        if (selectedQualificationStep && searchTerm === selectedQualificationStep) {\n          setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n          setShowQualificationStepDropdowns(prev => ({ ...prev, [pageId]: false }));\n          return;\n        }\n\n        // Get the selected project name for filtering (re-check inside timeout)\n        // Re-check all sources to get the most current value\n        const currentSelectedProject = selectedProjects[pageId] || projectSearchTerms[pageId] || watch(`page_${pageId}_project`);\n        \n        // Don't search if no project is selected\n        if (!currentSelectedProject || currentSelectedProject.trim() === '') {\n          setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n          return;\n        }\n\n        setLoadingQualificationSteps(prev => ({ ...prev, [pageId]: true }));\n        try {\n          // Build query parameters with project filter - ALWAYS include project\n          const params = new URLSearchParams();\n          params.append('search', searchTerm);\n          // Always include project parameter when we have a project\n          params.append('project', currentSelectedProject);\n          \n          const response = await apiClient.get(`/salesforce/qualification-steps?${params.toString()}`);\n          if (response.data.success) {\n            const steps = response.data.qualificationSteps || [];\n            \n            // Additional client-side filtering to ensure only steps from the selected project are shown\n            // Filter out steps that don't have a projectId or have a different projectId\n            const filteredSteps = steps.filter(step => {\n              // If step doesn't have a projectId, exclude it when filtering by project\n              if (!step.projectId) {\n                return false;\n              }\n              // The backend should have already filtered, but we keep this for safety\n              // Note: We can't compare project IDs here because we only have the project name, not the ID\n              // The backend filtering should be sufficient\n              return true;\n            });\n            \n            setQualificationSteps(prev => ({ ...prev, [pageId]: filteredSteps }));\n            if (!selectedQualificationStep || searchTerm !== selectedQualificationStep) {\n              setShowQualificationStepDropdowns(prev => ({ ...prev, [pageId]: true }));\n            }\n          } else {\n            setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n          }\n        } catch (error) {\n          handleError(error, `ProjectPageSetup - searchQualificationSteps(${pageId})`);\n          setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n        } finally {\n          setLoadingQualificationSteps(prev => ({ ...prev, [pageId]: false }));\n        }\n      }, 300);\n    });\n\n    return () => {\n      Object.values(searchTimeouts).forEach(timeout => clearTimeout(timeout));\n    };\n  }, [qualificationStepSearchTerms, selectedQualificationSteps, selectedProjects, projectSearchTerms, pages, watch]);\n\n  // Search qualifications in Salesforce when search term changes - filter by selected project\n  // This is for the \"Qualification\" field in \"Default Qualification Page\"\n  // Only shows qualifications from Qualification_Step__c (not Project_Qualification_Step__c)\n  useEffect(() => {\n    const searchTimeouts = {};\n    \n    Object.keys(projectQualificationSearchTerms).forEach(pageId => {\n      const searchTerm = projectQualificationSearchTerms[pageId];\n      const selectedProjectQualification = selectedProjectQualifications[pageId];\n      const selectedProject = selectedProjects[pageId];\n      \n      // Get the current project value from form (reactive)\n      const formProjectValue = watch(`page_${pageId}_project`);\n      \n      // Don't search if the search term matches the selected project qualification\n      if (selectedProjectQualification && searchTerm === selectedProjectQualification) {\n        setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n        setShowProjectQualificationDropdowns(prev => ({ ...prev, [pageId]: false }));\n        return;\n      }\n      \n      // Don't search if search term is empty\n      if (!searchTerm || searchTerm.trim() === '') {\n        setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n        return;\n      }\n      \n      // Get the selected project name for filtering - check all sources\n      const selectedProjectName = selectedProject || projectSearchTerms[pageId] || formProjectValue;\n      \n      // Don't search if no project is selected (project qualifications must be filtered by project)\n      if (!selectedProjectName || selectedProjectName.trim() === '') {\n        setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n        return;\n      }\n      \n      if (searchTimeouts[pageId]) {\n        clearTimeout(searchTimeouts[pageId]);\n      }\n      \n      searchTimeouts[pageId] = setTimeout(async () => {\n        // Double-check conditions inside timeout\n        if (!searchTerm || searchTerm.trim() === '') {\n          setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n          return;\n        }\n\n        // Don't search if the search term matches the selected project qualification\n        if (selectedProjectQualification && searchTerm === selectedProjectQualification) {\n          setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n          setShowProjectQualificationDropdowns(prev => ({ ...prev, [pageId]: false }));\n          return;\n        }\n\n        // Get the selected project name for filtering (re-check inside timeout)\n        // Re-check all sources to get the most current value\n        const currentSelectedProject = selectedProjects[pageId] || projectSearchTerms[pageId] || watch(`page_${pageId}_project`);\n        \n        // Don't search if no project is selected\n        if (!currentSelectedProject || currentSelectedProject.trim() === '') {\n          setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n          return;\n        }\n\n        setLoadingProjectQualifications(prev => ({ ...prev, [pageId]: true }));\n        try {\n          // Build query parameters with project filter - ALWAYS include project\n          const params = new URLSearchParams();\n          params.append('search', searchTerm);\n          // Always include project parameter when we have a project\n          params.append('project', currentSelectedProject);\n          \n          const response = await apiClient.get(`/salesforce/qualification-steps?${params.toString()}`);\n          if (response.data.success) {\n            const qualifications = response.data.qualificationSteps || [];\n            \n            // Additional client-side filtering to ensure only qualifications from the selected project are shown\n            // For \"Default Qualification Page\", we only want qualifications from Qualification_Step__c (not Project_Qualification_Step__c)\n            // Filter out qualifications that don't have a projectId, have a different projectId, or are from the wrong object type\n            const filteredQualifications = qualifications.filter(qualification => {\n              // For \"Default Qualification Page\", only include qualifications from Qualification_Step__c\n              if (qualification.objectType && qualification.objectType !== 'Qualification_Step__c') {\n                return false;\n              }\n              // If qualification doesn't have a projectId, check if it's from Qualification_Step__c\n              // Qualification_Step__c might not have a project field, so include it if it's from that object\n              if (!qualification.projectId) {\n                if (qualification.objectType === 'Qualification_Step__c') {\n                  // Include qualifications from Qualification_Step__c even if they don't have a projectId\n                  // (they might not be project-specific)\n                  return true;\n                }\n                // For other object types, exclude if no projectId\n                return false;\n              }\n              // If qualification has a projectId, check if it matches the selected project\n              // The backend should have already filtered, but we keep this for safety\n              return true;\n            });\n            \n            setProjectQualifications(prev => ({ ...prev, [pageId]: filteredQualifications }));\n            if (!selectedProjectQualification || searchTerm !== selectedProjectQualification) {\n              setShowProjectQualificationDropdowns(prev => ({ ...prev, [pageId]: true }));\n            }\n          } else {\n            setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n          }\n        } catch (error) {\n          handleError(error, `ProjectPageSetup - searchProjectQualifications(${pageId})`);\n          setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n        } finally {\n          setLoadingProjectQualifications(prev => ({ ...prev, [pageId]: false }));\n        }\n      }, 300);\n    });\n\n    return () => {\n      Object.values(searchTimeouts).forEach(timeout => clearTimeout(timeout));\n    };\n  }, [projectQualificationSearchTerms, selectedProjectQualifications, selectedProjects, projectSearchTerms, pages, watch]);\n\n  const fetchProjectObjectives = async (pageId, project) => {\n    if (!project || project.trim() === '') {\n      setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n      return;\n    }\n\n    setLoadingProjectObjectives(prev => ({ ...prev, [pageId]: true }));\n    try {\n      const response = await apiClient.get(`/salesforce/project-objectives?project=${encodeURIComponent(project)}`);\n      if (response.data.success) {\n        setProjectObjectives(prev => ({ ...prev, [pageId]: response.data.projectObjectives || [] }));\n      }\n    } catch (error) {\n      handleError(error, `ProjectPageSetup - fetchProjectObjectives(${pageId})`);\n      setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n    } finally {\n      setLoadingProjectObjectives(prev => ({ ...prev, [pageId]: false }));\n    }\n  };\n\n  const handleProjectSelect = (pageId, projectName) => {\n    setSelectedProjects(prev => ({ ...prev, [pageId]: projectName }));\n    setValue(`page_${pageId}_project`, projectName);\n    setProjectSearchTerms(prev => ({ ...prev, [pageId]: projectName }));\n    // Hide dropdown immediately\n    setShowProjectDropdowns(prev => ({ ...prev, [pageId]: false }));\n    // Clear projects list to stop showing search results\n    setProjects(prev => ({ ...prev, [pageId]: [] }));\n    // Clear project objective when project changes\n    setValue(`page_${pageId}_projectObjective`, '');\n    setProjectObjectiveSearchTerms(prev => ({ ...prev, [pageId]: '' }));\n    setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n    setSelectedProjectObjectives(prev => ({ ...prev, [pageId]: null }));\n    // Clear qualification step when project changes (since it should be filtered by project)\n    setValue(`page_${pageId}_projectQualificationStep`, '');\n    setQualificationStepSearchTerms(prev => ({ ...prev, [pageId]: '' }));\n    setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n    setSelectedQualificationSteps(prev => ({ ...prev, [pageId]: null }));\n    // Clear project qualification when project changes (since it should be filtered by project)\n    setValue(`page_${pageId}_projectQualification`, '');\n    setProjectQualificationSearchTerms(prev => ({ ...prev, [pageId]: '' }));\n    setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n    setSelectedProjectQualifications(prev => ({ ...prev, [pageId]: null }));\n    // Fetch project objectives for the selected project immediately\n    if (projectName && projectName.trim() !== '') {\n      fetchProjectObjectives(pageId, projectName);\n    }\n  };\n\n  const handleProjectObjectiveSelect = (pageId, objectiveName) => {\n    setValue(`page_${pageId}_projectObjective`, objectiveName);\n    setProjectObjectiveSearchTerms(prev => ({ ...prev, [pageId]: objectiveName }));\n    setSelectedProjectObjectives(prev => ({ ...prev, [pageId]: objectiveName }));\n    // Hide dropdown immediately and clear objectives list to prevent infinite loop\n    setShowProjectObjectiveDropdowns(prev => ({ ...prev, [pageId]: false }));\n    setProjectObjectives(prev => ({ ...prev, [pageId]: [] }));\n  };\n\n  const handleQualificationStepSelect = (pageId, stepName) => {\n    setValue(`page_${pageId}_projectQualificationStep`, stepName);\n    setQualificationStepSearchTerms(prev => ({ ...prev, [pageId]: stepName }));\n    setSelectedQualificationSteps(prev => ({ ...prev, [pageId]: stepName }));\n    // Hide dropdown immediately and clear steps list to prevent infinite loop\n    setShowQualificationStepDropdowns(prev => ({ ...prev, [pageId]: false }));\n    setQualificationSteps(prev => ({ ...prev, [pageId]: [] }));\n  };\n\n  const handleProjectQualificationSelect = (pageId, qualificationName) => {\n    setValue(`page_${pageId}_projectQualification`, qualificationName);\n    setProjectQualificationSearchTerms(prev => ({ ...prev, [pageId]: qualificationName }));\n    setSelectedProjectQualifications(prev => ({ ...prev, [pageId]: qualificationName }));\n    // Hide dropdown immediately and clear qualifications list to prevent infinite loop\n    setShowProjectQualificationDropdowns(prev => ({ ...prev, [pageId]: false }));\n    setProjectQualifications(prev => ({ ...prev, [pageId]: [] }));\n  };\n\n  const setDefaultValues = () => {\n    // Set default values for the first page\n    setValue('page_1_projectPageType', '');\n    setValue('page_1_project', '');\n    setValue('page_1_projectObjective', '');\n  };\n\n  const addNewPage = () => {\n    const newPageId = pages.length + 1;\n    setPages(prev => [...prev, { id: newPageId, data: {} }]);\n    setProjectSearchTerms(prev => ({ ...prev, [newPageId]: '' }));\n    setProjectObjectiveSearchTerms(prev => ({ ...prev, [newPageId]: '' }));\n    setQualificationStepSearchTerms(prev => ({ ...prev, [newPageId]: '' }));\n    setProjectQualificationSearchTerms(prev => ({ ...prev, [newPageId]: '' }));\n    setSelectedProjects(prev => ({ ...prev, [newPageId]: null }));\n    setSelectedProjectObjectives(prev => ({ ...prev, [newPageId]: null }));\n    setSelectedQualificationSteps(prev => ({ ...prev, [newPageId]: null }));\n    setSelectedProjectQualifications(prev => ({ ...prev, [newPageId]: null }));\n  };\n\n  const removePage = (pageId) => {\n    if (pages.length === 1) {\n      toast.error('At least one page is required');\n      return;\n    }\n    setPages(prev => prev.filter(page => page.id !== pageId));\n    // Clean up state for removed page\n    const newProjectSearchTerms = { ...projectSearchTerms };\n    delete newProjectSearchTerms[pageId];\n    setProjectSearchTerms(newProjectSearchTerms);\n    \n    const newProjectObjectiveSearchTerms = { ...projectObjectiveSearchTerms };\n    delete newProjectObjectiveSearchTerms[pageId];\n    setProjectObjectiveSearchTerms(newProjectObjectiveSearchTerms);\n    \n    const newQualificationStepSearchTerms = { ...qualificationStepSearchTerms };\n    delete newQualificationStepSearchTerms[pageId];\n    setQualificationStepSearchTerms(newQualificationStepSearchTerms);\n    \n    const newProjectQualificationSearchTerms = { ...projectQualificationSearchTerms };\n    delete newProjectQualificationSearchTerms[pageId];\n    setProjectQualificationSearchTerms(newProjectQualificationSearchTerms);\n    \n    const newSelectedProjects = { ...selectedProjects };\n    delete newSelectedProjects[pageId];\n    setSelectedProjects(newSelectedProjects);\n    \n    const newProjectObjectives = { ...projectObjectives };\n    delete newProjectObjectives[pageId];\n    setProjectObjectives(newProjectObjectives);\n    \n    const newQualificationSteps = { ...qualificationSteps };\n    delete newQualificationSteps[pageId];\n    setQualificationSteps(newQualificationSteps);\n    \n    const newProjectQualifications = { ...projectQualifications };\n    delete newProjectQualifications[pageId];\n    setProjectQualifications(newProjectQualifications);\n    \n    const newSelectedProjectObjectives = { ...selectedProjectObjectives };\n    delete newSelectedProjectObjectives[pageId];\n    setSelectedProjectObjectives(newSelectedProjectObjectives);\n    \n    const newSelectedQualificationSteps = { ...selectedQualificationSteps };\n    delete newSelectedQualificationSteps[pageId];\n    setSelectedQualificationSteps(newSelectedQualificationSteps);\n    \n    const newSelectedProjectQualifications = { ...selectedProjectQualifications };\n    delete newSelectedProjectQualifications[pageId];\n    setSelectedProjectQualifications(newSelectedProjectQualifications);\n  };\n\n  const handleSave = async () => {\n    if (!hasPermission('create_project')) {\n      toast.error('You do not have permission to save project pages');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const allFormData = watch();\n      const pagesData = pages.map(page => {\n        const pageData = {};\n        Object.keys(allFormData).forEach(key => {\n          if (key.startsWith(`page_${page.id}_`)) {\n            const fieldName = key.replace(`page_${page.id}_`, '');\n            pageData[fieldName] = allFormData[key];\n          }\n        });\n        return pageData;\n      });\n\n      const draftData = { pages: pagesData };\n      await saveDraftProjectPage(draftData);\n      \n      // Also save to the main projects endpoint\n      const response = await apiClient.post('/project-pages', draftData);\n      \n      if (response.data.success) {\n        toast.success('Project pages saved successfully!');\n      } else {\n        toast.error('Failed to save project pages: ' + getErrorMessage(response.data));\n      }\n    } catch (error) {\n      const errorMessage = handleError(error, 'ProjectPageSetup - saveProjectPages');\n      toast.error(errorMessage);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    if (window.confirm('Are you sure you want to cancel? All unsaved changes will be lost.')) {\n      reset();\n      setPages([{ id: 1, data: {} }]);\n      setProjectSearchTerms({});\n      setProjectObjectiveSearchTerms({});\n      setSelectedProjects({});\n      setProjectObjectives({});\n      setDefaultValues();\n      navigate('/dashboard');\n    }\n  };\n\n  const handlePublish = async () => {\n    if (!hasPermission('create_project')) {\n      toast.error('You do not have permission to publish project pages');\n      return;\n    }\n\n    setSubmitting(true);\n    try {\n      const allFormData = watch();\n      \n      // Validate that Project Qualification Step is provided when Project Page Type is \"Project Qualifying Page\"\n      // Validate that Project Qualification is provided when Project Page Type is \"Default Qualification Page\"\n      const validationErrors = [];\n      pages.forEach(page => {\n        const pageType = allFormData[`page_${page.id}_projectPageType`];\n        const qualificationStep = allFormData[`page_${page.id}_projectQualificationStep`];\n        const projectQualification = allFormData[`page_${page.id}_projectQualification`];\n        if (pageType === 'Project Qualifying Page' && (!qualificationStep || qualificationStep.trim() === '')) {\n          validationErrors.push(`Page ${page.id}: Project Qualification Step is required when Project Page Type is \"Project Qualifying Page\"`);\n          setError(`page_${page.id}_projectQualificationStep`, {\n            type: 'required',\n            message: 'Project Qualification Step is required'\n          });\n        }\n        if (pageType === 'Default Qualification Page' && (!projectQualification || projectQualification.trim() === '')) {\n          validationErrors.push(`Page ${page.id}: Qualification is required when Project Page Type is \"Default Qualification Page\"`);\n          setError(`page_${page.id}_projectQualification`, {\n            type: 'required',\n            message: 'Qualification is required'\n          });\n        }\n      });\n      \n      if (validationErrors.length > 0) {\n        toast.error(validationErrors[0]);\n        setSubmitting(false);\n        return;\n      }\n      \n      const pagesData = pages.map(page => {\n        const pageData = {};\n        Object.keys(allFormData).forEach(key => {\n          if (key.startsWith(`page_${page.id}_`)) {\n            const fieldName = key.replace(`page_${page.id}_`, '');\n            const value = allFormData[key];\n            // Include all values except undefined\n            if (value !== undefined) {\n              if (typeof value === 'string') {\n                pageData[fieldName] = value.trim();\n              } else if (typeof value === 'boolean') {\n                pageData[fieldName] = value;\n              } else {\n                pageData[fieldName] = value;\n              }\n            }\n          }\n        });\n        // Ensure all fields are explicitly included\n        if (allFormData[`page_${page.id}_projectPageType`] !== undefined) {\n          pageData.projectPageType = allFormData[`page_${page.id}_projectPageType`];\n        }\n        if (allFormData[`page_${page.id}_project`] !== undefined) {\n          pageData.project = allFormData[`page_${page.id}_project`];\n        }\n        if (allFormData[`page_${page.id}_projectObjective`] !== undefined) {\n          pageData.projectObjective = allFormData[`page_${page.id}_projectObjective`];\n        }\n        if (allFormData[`page_${page.id}_projectPageDescription`] !== undefined) {\n          pageData.projectPageDescription = allFormData[`page_${page.id}_projectPageDescription`];\n        }\n        // Always include projectQualificationStep if Project Page Type is \"Project Qualifying Page\"\n        // Always include projectQualification if Project Page Type is \"Default Qualification Page\"\n        const pageType = allFormData[`page_${page.id}_projectPageType`];\n        if (pageType === 'Project Qualifying Page') {\n          // If Project Page Type is \"Project Qualifying Page\", qualification step is required\n          if (allFormData[`page_${page.id}_projectQualificationStep`] !== undefined) {\n            pageData.projectQualificationStep = allFormData[`page_${page.id}_projectQualificationStep`];\n          } else {\n            // If not provided, set to empty string so server validation can catch it\n            pageData.projectQualificationStep = '';\n          }\n        } else if (pageType === 'Default Qualification Page') {\n          // If Project Page Type is \"Default Qualification Page\", project qualification is required\n          if (allFormData[`page_${page.id}_projectQualification`] !== undefined) {\n            pageData.projectQualification = allFormData[`page_${page.id}_projectQualification`];\n          } else {\n            // If not provided, set to empty string so server validation can catch it\n            pageData.projectQualification = '';\n          }\n        } else if (allFormData[`page_${page.id}_projectQualificationStep`] !== undefined) {\n          // Include it if provided for other page types\n          pageData.projectQualificationStep = allFormData[`page_${page.id}_projectQualificationStep`];\n        }\n        if (allFormData[`page_${page.id}_active`] !== undefined) {\n          pageData.active = allFormData[`page_${page.id}_active`] || false;\n        } else {\n          pageData.active = false;\n        }\n        return pageData;\n      });\n\n      // Sanitize all page data before sending\n      const sanitizedPagesData = pagesData.map(pageData => sanitizeObject(pageData));\n      \n      // Publish all pages in parallel\n      const publishPromises = sanitizedPagesData.map((pageData, index) => \n        apiClient.post('/salesforce/create-project-page', pageData, {\n          timeout: 300000\n        }).then(response => ({ success: true, pageIndex: index + 1, data: response.data }))\n          .catch(error => {\n            const errorMessage = handleError(error, `ProjectPageSetup - publishPage(${index + 1})`);\n            let displayMessage = errorMessage;\n            if (error.response) {\n              // Server responded with error status\n              if (error.response.status === 404) {\n                displayMessage = `Route not found (404). The server may need to be restarted to load the new route.`;\n              } else {\n                // Get error message from response\n                const errorData = error.response.data;\n                displayMessage = getErrorMessage(error);\n                \n                // If there are details, append them\n                if (errorData?.details && Array.isArray(errorData.details) && errorData.details.length > 0) {\n                  const detailMessages = errorData.details.map(d => d.message || d.statusCode || JSON.stringify(d)).join('; ');\n                  displayMessage += ` (Details: ${detailMessages})`;\n                } else if (errorData?.details && typeof errorData.details === 'string') {\n                  displayMessage += ` (Details: ${errorData.details})`;\n                }\n              }\n            } else if (error.request) {\n              // Request was made but no response received\n              if (error.code === 'ECONNREFUSED' || error.code === 'ERR_NETWORK') {\n                displayMessage = 'Cannot connect to server. Please ensure the server is running on port 5000.';\n              } else if (error.code === 'ETIMEDOUT' || error.message?.includes('timeout')) {\n                displayMessage = 'Request timed out. The server may be slow or unresponsive.';\n              } else {\n                displayMessage = `No response from server: ${error.message || error.code || 'Unknown network error'}`;\n              }\n            } else {\n              // Error setting up the request\n              displayMessage = error.message || 'Unknown error';\n            }\n            return { \n              success: false, \n              pageIndex: index + 1, \n              error: displayMessage \n            };\n          })\n      );\n\n      const results = await Promise.all(publishPromises);\n      \n      const successful = results.filter(r => r.success);\n      const failed = results.filter(r => !r.success);\n\n      // Consolidate all results into modal\n      const publishedObjects = successful.map(result => ({\n        type: 'Project Page',\n        name: result.data?.objectName || `Page ${result.pageIndex}`,\n        id: result.data?.salesforceId,\n        pageIndex: result.pageIndex\n      }));\n\n      const failedObjects = failed.map(result => ({\n        type: 'Project Page',\n        name: `Page ${result.pageIndex}`,\n        error: result.error,\n        pageIndex: result.pageIndex\n      }));\n\n      if (publishedObjects.length > 0 || failedObjects.length > 0) {\n        setPublishResults({\n          published: publishedObjects,\n          failed: failedObjects\n        });\n        setShowPublishResultsModal(true);\n      }\n\n      if (successful.length === pagesData.length) {\n        await deleteDraftProjectPage();\n      }\n    } catch (error) {\n      const errorMessage = handleError(error, 'ProjectPageSetup - publishProjectPages');\n      toast.error(errorMessage);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar isOpen={sidebarOpen} toggleSidebar={() => setSidebarOpen(!sidebarOpen)} />\n      <div className=\"project-setup\" style={{ marginLeft: `${sidebarWidth}px`, width: `calc(100% - ${sidebarWidth}px)`, transition: 'margin-left 0.2s ease, width 0.2s ease' }}>\n        <div className=\"setup-container\">\n          <div className=\"setup-header\">\n            <div className=\"header-content\">\n              <div className=\"header-left\">\n                <button \n                  className=\"header-menu-toggle\"\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  aria-label=\"Toggle sidebar\"\n                >\n                  <Menu size={20} />\n                </button>\n                <div>\n                  <h1 className=\"page-title\">Create Project Page</h1>\n                  <p className=\"page-subtitle\">Create a new project page by entering information in the form below</p>\n                </div>\n              </div>\n              <div className=\"header-user-profile\">\n                <div className=\"user-profile\">\n                  <div className=\"user-avatar\">\n                    {(user?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"user-name\">{user?.email || 'User'}</span>\n                  <button className=\"logout-btn\" onClick={logout} title=\"Logout\">\n                    <LogOut size={18} />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit(handlePublish)}>\n            {pages.map((page, pageIndex) => (\n              <div key={page.id} className=\"section-content\" style={{ marginTop: pageIndex > 0 ? '32px' : '0' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n                  <h2>Page {page.id}</h2>\n                  {pages.length > 1 && (\n                    <button\n                      type=\"button\"\n                      onClick={() => removePage(page.id)}\n                      className=\"btn-danger\"\n                      style={{ padding: '4px 8px', fontSize: '12px' }}\n                    >\n                      <X size={14} style={{ marginRight: '4px' }} />\n                      Remove Page\n                    </button>\n                  )}\n                </div>\n                <div className=\"form-grid compact-grid\">\n                  <div className=\"form-group\">\n                    <label>\n                      * Project Page Type\n                    </label>\n                    <select \n                      {...register(`page_${page.id}_projectPageType`, { required: true })} \n                      className={fieldErrors[`page_${page.id}_projectPageType`] ? 'error-field' : ''}\n                      style={{ fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                    >\n                      <option value=\"\">--None--</option>\n                      <option value=\"Project Splash Page (Preapply)\">Project Splash Page (Preapply)</option>\n                      <option value=\"Project Pre-Qualification\">Project Pre-Qualification</option>\n                      <option value=\"Project Qualifying Page\">Project Qualifying Page</option>\n                      <option value=\"Project Active Page\">Project Active Page</option>\n                      <option value=\"Default Qualification Page\">Default Qualification Page</option>\n                    </select>\n                    {errors[`page_${page.id}_projectPageType`] && <span className=\"error\">Required</span>}\n                  </div>\n                  <div className=\"form-group\" style={{ position: 'relative' }}>\n                    <label>\n                      * Project\n                      <Info size={14} className=\"info-icon\" />\n                    </label>\n                    <div style={{ position: 'relative' }}>\n                      <input \n                        type=\"text\" \n                        {...register(`page_${page.id}_project`, { required: true })} \n                        className={fieldErrors[`page_${page.id}_project`] ? 'error-field' : ''} \n                        placeholder=\"Search or enter project name...\"\n                        style={{ fontSize: '12px', padding: '6px 10px', paddingRight: '36px', width: '100%', height: '32px' }}\n                        value={projectSearchTerms[page.id] ?? ''}\n                        onChange={(e) => {\n                          const newValue = e.target.value;\n                          setProjectSearchTerms(prev => ({ ...prev, [page.id]: newValue }));\n                          setValue(`page_${page.id}_project`, newValue);\n                          // If the value matches the selected project, don't show dropdown\n                          if (selectedProjects[page.id] && newValue === selectedProjects[page.id]) {\n                            setShowProjectDropdowns(prev => ({ ...prev, [page.id]: false }));\n                            setProjects(prev => ({ ...prev, [page.id]: [] }));\n                          } else if (newValue.trim() !== '') {\n                            // Only show dropdown if there's a search term and it doesn't match selected project\n                            setShowProjectDropdowns(prev => ({ ...prev, [page.id]: true }));\n                          } else {\n                            setShowProjectDropdowns(prev => ({ ...prev, [page.id]: false }));\n                            setProjects(prev => ({ ...prev, [page.id]: [] }));\n                          }\n                        }}\n                        onFocus={() => {\n                          // Only show dropdown if there's a search term, results exist, and it doesn't match selected project\n                          const searchTerm = projectSearchTerms[page.id];\n                          const selectedProject = selectedProjects[page.id];\n                          if (searchTerm && searchTerm !== selectedProject && projects[page.id]?.length > 0) {\n                            setShowProjectDropdowns(prev => ({ ...prev, [page.id]: true }));\n                          }\n                        }}\n                        onBlur={() => {\n                          setTimeout(() => setShowProjectDropdowns(prev => ({ ...prev, [page.id]: false })), 200);\n                        }}\n                      />\n                      <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666', pointerEvents: 'none' }} />\n                      {showProjectDropdowns[page.id] && projects[page.id]?.length > 0 && (\n                        <div style={{\n                          position: 'absolute',\n                          top: '100%',\n                          left: 0,\n                          right: 0,\n                          backgroundColor: 'white',\n                          border: '1px solid #ddd',\n                          borderRadius: '4px',\n                          maxHeight: '200px',\n                          overflowY: 'auto',\n                          zIndex: 1000,\n                          boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                          marginTop: '4px'\n                        }}>\n                          {loadingProjects[page.id] ? (\n                            <div style={{ padding: '6px', fontSize: '12px', color: '#666', textAlign: 'center' }}>Searching...</div>\n                          ) : (\n                            projects[page.id]?.map(project => (\n                              <div\n                                key={project.id}\n                                onClick={() => handleProjectSelect(page.id, project.name)}\n                                style={{\n                                  padding: '6px 10px',\n                                  cursor: 'pointer',\n                                  fontSize: '12px',\n                                  borderBottom: '1px solid #f0f0f0'\n                                }}\n                                onMouseEnter={(e) => e.target.style.backgroundColor = '#f5f5f5'}\n                                onMouseLeave={(e) => e.target.style.backgroundColor = 'white'}\n                              >\n                                {project.name} {project.status && `(${project.status})`}\n                              </div>\n                            ))\n                          )}\n                        </div>\n                      )}\n                    </div>\n                    {errors[`page_${page.id}_project`] && <span className=\"error\">Required</span>}\n                  </div>\n                  <div className=\"form-group\" style={{ position: 'relative' }}>\n                    <label>\n                      * Project Objective\n                    </label>\n                    {loadingProjectObjectives[page.id] ? (\n                      <div style={{ padding: '6px', fontSize: '12px', color: '#666' }}>Loading project objectives...</div>\n                    ) : projectObjectives[page.id]?.length > 0 ? (\n                      <div style={{ position: 'relative' }}>\n                        <input \n                          type=\"text\" \n                          {...register(`page_${page.id}_projectObjective`, { required: true })} \n                          className={fieldErrors[`page_${page.id}_projectObjective`] ? 'error-field' : ''} \n                          placeholder=\"Search or enter project objective name...\"\n                          style={{ fontSize: '12px', padding: '6px 10px', paddingRight: '36px', width: '100%', height: '32px' }}\n                          value={projectObjectiveSearchTerms[page.id] ?? ''}\n                          onChange={(e) => {\n                            const newValue = e.target.value;\n                            setProjectObjectiveSearchTerms(prev => ({ ...prev, [page.id]: newValue }));\n                            setValue(`page_${page.id}_projectObjective`, newValue);\n                            // Clear selected objective if user is typing something different\n                            const selectedObjective = selectedProjectObjectives[page.id];\n                            if (selectedObjective && newValue !== selectedObjective) {\n                              setSelectedProjectObjectives(prev => ({ ...prev, [page.id]: null }));\n                            }\n                            // Only show dropdown if the value doesn't match selected objective\n                            if (!selectedObjective || newValue !== selectedObjective) {\n                              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [page.id]: true }));\n                            } else {\n                              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [page.id]: false }));\n                              setProjectObjectives(prev => ({ ...prev, [page.id]: [] }));\n                            }\n                          }}\n                          onFocus={() => {\n                            const selectedObjective = selectedProjectObjectives[page.id];\n                            const searchTerm = projectObjectiveSearchTerms[page.id];\n                            // Only show dropdown if there's a search term, results exist, and it doesn't match selected objective\n                            if (searchTerm && (!selectedObjective || searchTerm !== selectedObjective) && projectObjectives[page.id]?.length > 0) {\n                              setShowProjectObjectiveDropdowns(prev => ({ ...prev, [page.id]: true }));\n                            }\n                          }}\n                          onBlur={() => {\n                            setTimeout(() => setShowProjectObjectiveDropdowns(prev => ({ ...prev, [page.id]: false })), 200);\n                          }}\n                        />\n                        <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666', pointerEvents: 'none' }} />\n                        {showProjectObjectiveDropdowns[page.id] && projectObjectives[page.id]?.length > 0 && (\n                          <div style={{\n                            position: 'absolute',\n                            top: '100%',\n                            left: 0,\n                            right: 0,\n                            backgroundColor: 'white',\n                            border: '1px solid #ddd',\n                            borderRadius: '4px',\n                            maxHeight: '200px',\n                            overflowY: 'auto',\n                            zIndex: 1000,\n                            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                            marginTop: '4px'\n                          }}>\n                            {projectObjectives[page.id]?.map(objective => (\n                              <div\n                                key={objective.id}\n                                onClick={() => handleProjectObjectiveSelect(page.id, objective.contributorFacingProjectName || objective.name)}\n                                style={{\n                                  padding: '6px 10px',\n                                  cursor: 'pointer',\n                                  fontSize: '12px',\n                                  borderBottom: '1px solid #f0f0f0'\n                                }}\n                                onMouseEnter={(e) => e.target.style.backgroundColor = '#f5f5f5'}\n                                onMouseLeave={(e) => e.target.style.backgroundColor = 'white'}\n                              >\n                                {objective.contributorFacingProjectName || objective.name}\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    ) : selectedProjects[page.id] ? (\n                      <div style={{ position: 'relative' }}>\n                        <input \n                          type=\"text\" \n                          {...register(`page_${page.id}_projectObjective`, { required: true })} \n                          placeholder=\"No project objectives found. Enter manually...\"\n                          style={{ paddingRight: '36px', fontSize: '12px', padding: '6px 10px', height: '32px' }}\n                          value={projectObjectiveSearchTerms[page.id] ?? ''}\n                          onChange={(e) => {\n                            const newValue = e.target.value;\n                            setProjectObjectiveSearchTerms(prev => ({ ...prev, [page.id]: newValue }));\n                            setValue(`page_${page.id}_projectObjective`, newValue);\n                          }}\n                        />\n                        <Search size={16} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666' }} />\n                      </div>\n                    ) : (\n                      <div style={{ position: 'relative' }}>\n                        <input \n                          type=\"text\" \n                          {...register(`page_${page.id}_projectObjective`, { required: true })} \n                          placeholder=\"Select a project first...\"\n                          disabled\n                          style={{ paddingRight: '40px', fontSize: '13px', padding: '8px', opacity: 0.5 }}\n                          value={projectObjectiveSearchTerms[page.id] ?? ''}\n                        />\n                        <Search size={16} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666' }} />\n                      </div>\n                    )}\n                    {errors[`page_${page.id}_projectObjective`] && <span className=\"error\">Required</span>}\n                  </div>\n                  {watch(`page_${page.id}_projectPageType`) === 'Project Qualifying Page' && (\n                    <div className=\"form-group\" style={{ position: 'relative' }}>\n                      <label>\n                        * Project Qualification Step\n                      </label>\n                      <div style={{ position: 'relative' }}>\n                        <input \n                          type=\"text\" \n                          {...register(`page_${page.id}_projectQualificationStep`, { \n                            validate: (value) => {\n                              const pageType = watch(`page_${page.id}_projectPageType`);\n                              if (pageType === 'Project Qualifying Page' && (!value || value.trim() === '')) {\n                                return 'Project Qualification Step is required when Project Page Type is \"Project Qualifying Page\"';\n                              }\n                              return true;\n                            }\n                          })} \n                          className={fieldErrors[`page_${page.id}_projectQualificationStep`] ? 'error-field' : ''} \n                          placeholder=\"Search or enter qualification step name...\"\n                          style={{ fontSize: '12px', padding: '6px 10px', paddingRight: '36px', width: '100%', height: '32px' }}\n                          value={qualificationStepSearchTerms[page.id] ?? ''}\n                          onChange={(e) => {\n                            const newValue = e.target.value;\n                            setQualificationStepSearchTerms(prev => ({ ...prev, [page.id]: newValue }));\n                            setValue(`page_${page.id}_projectQualificationStep`, newValue);\n                            // Clear selected step if user is typing something different\n                            const selectedStep = selectedQualificationSteps[page.id];\n                            if (selectedStep && newValue !== selectedStep) {\n                              setSelectedQualificationSteps(prev => ({ ...prev, [page.id]: null }));\n                            }\n                            // Only show dropdown if the value doesn't match selected step\n                            if (!selectedStep || newValue !== selectedStep) {\n                              setShowQualificationStepDropdowns(prev => ({ ...prev, [page.id]: true }));\n                            } else {\n                              setShowQualificationStepDropdowns(prev => ({ ...prev, [page.id]: false }));\n                              setQualificationSteps(prev => ({ ...prev, [page.id]: [] }));\n                            }\n                          }}\n                          onFocus={() => {\n                            const selectedStep = selectedQualificationSteps[page.id];\n                            const searchTerm = qualificationStepSearchTerms[page.id];\n                            // Only show dropdown if there's a search term, results exist, and it doesn't match selected step\n                            if (searchTerm && (!selectedStep || searchTerm !== selectedStep) && qualificationSteps[page.id]?.length > 0) {\n                              setShowQualificationStepDropdowns(prev => ({ ...prev, [page.id]: true }));\n                            }\n                          }}\n                          onBlur={() => {\n                            setTimeout(() => setShowQualificationStepDropdowns(prev => ({ ...prev, [page.id]: false })), 200);\n                          }}\n                        />\n                        <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666', pointerEvents: 'none' }} />\n                        {showQualificationStepDropdowns[page.id] && qualificationSteps[page.id]?.length > 0 && (\n                          <div style={{\n                            position: 'absolute',\n                            top: '100%',\n                            left: 0,\n                            right: 0,\n                            backgroundColor: 'white',\n                            border: '1px solid #ddd',\n                            borderRadius: '4px',\n                            maxHeight: '200px',\n                            overflowY: 'auto',\n                            zIndex: 1000,\n                            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                            marginTop: '4px'\n                          }}>\n                            {loadingQualificationSteps[page.id] ? (\n                              <div style={{ padding: '6px', fontSize: '12px', color: '#666', textAlign: 'center' }}>Searching...</div>\n                            ) : (\n                              qualificationSteps[page.id]?.map(step => (\n                                <div\n                                  key={step.id}\n                                  onClick={() => handleQualificationStepSelect(page.id, step.name)}\n                                  style={{\n                                    padding: '8px 12px',\n                                    cursor: 'pointer',\n                                    fontSize: '13px',\n                                    borderBottom: '1px solid #f0f0f0'\n                                  }}\n                                  onMouseEnter={(e) => e.target.style.backgroundColor = '#f5f5f5'}\n                                  onMouseLeave={(e) => e.target.style.backgroundColor = 'white'}\n                                >\n                                  {step.name}\n                                </div>\n                              ))\n                            )}\n                          </div>\n                        )}\n                      </div>\n                      {errors[`page_${page.id}_projectQualificationStep`] && <span className=\"error\">Required</span>}\n                    </div>\n                  )}\n                  {watch(`page_${page.id}_projectPageType`) === 'Default Qualification Page' && (\n                    <div className=\"form-group\" style={{ position: 'relative' }}>\n                      <label>\n                        * Qualification\n                      </label>\n                      <div style={{ position: 'relative' }}>\n                        <input \n                          type=\"text\" \n                          {...register(`page_${page.id}_projectQualification`, { \n                            validate: (value) => {\n                              const pageType = watch(`page_${page.id}_projectPageType`);\n                              if (pageType === 'Default Qualification Page' && (!value || value.trim() === '')) {\n                                return 'Qualification is required when Project Page Type is \"Default Qualification Page\"';\n                              }\n                              return true;\n                            }\n                          })} \n                          className={fieldErrors[`page_${page.id}_projectQualification`] ? 'error-field' : ''} \n                          placeholder=\"Search or enter qualification name...\"\n                          style={{ fontSize: '12px', padding: '6px 10px', paddingRight: '36px', width: '100%', height: '32px' }}\n                          value={projectQualificationSearchTerms[page.id] ?? ''}\n                          onChange={(e) => {\n                            const newValue = e.target.value;\n                            setProjectQualificationSearchTerms(prev => ({ ...prev, [page.id]: newValue }));\n                            setValue(`page_${page.id}_projectQualification`, newValue);\n                            // Clear selected qualification if user is typing something different\n                            const selectedQualification = selectedProjectQualifications[page.id];\n                            if (selectedQualification && newValue !== selectedQualification) {\n                              setSelectedProjectQualifications(prev => ({ ...prev, [page.id]: null }));\n                            }\n                            // Only show dropdown if the value doesn't match selected qualification\n                            if (!selectedQualification || newValue !== selectedQualification) {\n                              setShowProjectQualificationDropdowns(prev => ({ ...prev, [page.id]: true }));\n                            } else {\n                              setShowProjectQualificationDropdowns(prev => ({ ...prev, [page.id]: false }));\n                              setProjectQualifications(prev => ({ ...prev, [page.id]: [] }));\n                            }\n                          }}\n                          onFocus={() => {\n                            const selectedQualification = selectedProjectQualifications[page.id];\n                            const searchTerm = projectQualificationSearchTerms[page.id];\n                            // Only show dropdown if there's a search term, results exist, and it doesn't match selected qualification\n                            if (searchTerm && (!selectedQualification || searchTerm !== selectedQualification) && projectQualifications[page.id]?.length > 0) {\n                              setShowProjectQualificationDropdowns(prev => ({ ...prev, [page.id]: true }));\n                            }\n                          }}\n                          onBlur={() => {\n                            setTimeout(() => setShowProjectQualificationDropdowns(prev => ({ ...prev, [page.id]: false })), 200);\n                          }}\n                        />\n                        <Search size={14} style={{ position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666', pointerEvents: 'none' }} />\n                        {showProjectQualificationDropdowns[page.id] && projectQualifications[page.id]?.length > 0 && (\n                          <div style={{\n                            position: 'absolute',\n                            top: '100%',\n                            left: 0,\n                            right: 0,\n                            backgroundColor: '#ffffff',\n                            color: '#000000',\n                            border: '1px solid #ddd',\n                            borderRadius: '4px',\n                            maxHeight: '200px',\n                            overflowY: 'auto',\n                            zIndex: 1000,\n                            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                            marginTop: '4px'\n                          }}>\n                            {loadingProjectQualifications[page.id] ? (\n                              <div style={{ padding: '8px', fontSize: '13px', color: '#000000', textAlign: 'center', backgroundColor: '#ffffff' }}>Searching...</div>\n                            ) : (\n                              projectQualifications[page.id]?.map(qualification => (\n                                <div\n                                  key={qualification.id}\n                                  onClick={() => handleProjectQualificationSelect(page.id, qualification.name)}\n                                  style={{\n                                    padding: '8px 12px',\n                                    cursor: 'pointer',\n                                    fontSize: '13px',\n                                    borderBottom: '1px solid #f0f0f0',\n                                    backgroundColor: '#ffffff',\n                                    color: '#000000'\n                                  }}\n                                  onMouseEnter={(e) => e.target.style.backgroundColor = '#f5f5f5'}\n                                  onMouseLeave={(e) => e.target.style.backgroundColor = '#ffffff'}\n                                >\n                                  {qualification.name}\n                                </div>\n                              ))\n                            )}\n                          </div>\n                        )}\n                      </div>\n                      {errors[`page_${page.id}_projectQualification`] && <span className=\"error\">Required</span>}\n                    </div>\n                  )}\n                  <div className=\"form-group full-width\">\n                    <label>\n                      Project Page Description\n                    </label>\n                    <textarea \n                      {...register(`page_${page.id}_projectPageDescription`)} \n                      rows=\"3\"\n                      placeholder=\"Enter project page description...\"\n                      style={{ fontSize: '12px', padding: '6px 10px', width: '100%', minHeight: '32px', resize: 'vertical' }}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\n                      <input \n                        type=\"checkbox\" \n                        {...register(`page_${page.id}_active`)} \n                        style={{ width: '18px', height: '18px', cursor: 'pointer' }}\n                      />\n                      Active\n                    </label>\n                  </div>\n                </div>\n              </div>\n            ))}\n\n            <div className=\"form-actions\" style={{ marginTop: '32px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <div>\n                <button\n                  type=\"button\"\n                  onClick={addNewPage}\n                  className=\"btn-secondary\"\n                  style={{ marginRight: '8px' }}\n                >\n                  <Plus size={16} style={{ marginRight: '4px' }} />\n                  Add New Page\n                </button>\n              </div>\n              <div style={{ display: 'flex', gap: '8px' }}>\n                <button\n                  type=\"button\"\n                  onClick={handleCancel}\n                  className=\"btn-secondary\"\n                >\n                  <X size={16} style={{ marginRight: '4px' }} />\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleSave}\n                  className=\"btn-secondary\"\n                  disabled={saving}\n                >\n                  <Save size={16} style={{ marginRight: '4px' }} />\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"btn-primary\"\n                  disabled={submitting}\n                >\n                  <Send size={16} style={{ marginRight: '4px' }} />\n                  {submitting ? 'Publishing...' : 'Publish'}\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      {/* Publish Results Modal */}\n      {showPublishResultsModal && publishResults && (\n        <div \n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1000,\n            padding: '12px',\n            boxSizing: 'border-box'\n          }}\n          onClick={() => setShowPublishResultsModal(false)}\n        >\n          <div \n            style={{\n              backgroundColor: '#ffffff',\n              borderRadius: '8px',\n              width: '90%',\n              maxWidth: '700px',\n              maxHeight: '90vh',\n              display: 'flex',\n              flexDirection: 'column',\n              boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)',\n              boxSizing: 'border-box',\n              color: '#002329',\n              fontFamily: 'Poppins',\n              fontSize: '14px'\n            }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Modal Header */}\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              padding: '12px 24px',\n              borderBottom: '1px solid #e2e8f0',\n              flexShrink: 0\n            }}>\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '12px'\n              }}>\n                {publishResults.failed.length > 0 ? (\n                  <XCircle size={24} color=\"#ef4444\" />\n                ) : (\n                  <CheckCircle size={24} color=\"#10b981\" />\n                )}\n                <h2 style={{\n                  margin: 0,\n                  fontSize: '20px',\n                  fontWeight: 600,\n                  color: '#002329',\n                  fontFamily: 'Poppins'\n                }}>\n                  Publish Results\n                </h2>\n              </div>\n              <button\n                onClick={() => setShowPublishResultsModal(false)}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  padding: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  borderRadius: '4px',\n                  transition: 'background-color 0.2s'\n                }}\n                onMouseEnter={(e) => e.target.style.backgroundColor = '#f1f5f9'}\n                onMouseLeave={(e) => e.target.style.backgroundColor = 'transparent'}\n              >\n                <X size={20} color=\"#64748b\" />\n              </button>\n            </div>\n\n            {/* Modal Content */}\n            <div style={{\n              padding: '24px',\n              overflowY: 'auto',\n              flex: 1\n            }}>\n              {/* Published Objects */}\n              {publishResults.published.length > 0 && (\n                <div style={{ marginBottom: '24px' }}>\n                  <h3 style={{\n                    margin: '0 0 16px 0',\n                    fontSize: '14px',\n                    fontWeight: 600,\n                    color: '#10b981',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px'\n                  }}>\n                    <CheckCircle size={18} />\n                    Published Successfully ({publishResults.published.length})\n                  </h3>\n                  <div style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: '12px'\n                  }}>\n                    {publishResults.published.map((obj, index) => (\n                      <div key={index} style={{\n                        padding: '16px',\n                        backgroundColor: '#f0fdf4',\n                        border: '1px solid #bbf7d0',\n                        borderRadius: '8px'\n                      }}>\n                        <div style={{\n                          fontWeight: 600,\n                          color: '#002329',\n                          marginBottom: '8px'\n                        }}>\n                          {obj.type}: \"{obj.name}\"\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Failed Objects */}\n              {publishResults.failed.length > 0 && (\n                <div>\n                  <h3 style={{\n                    margin: '0 0 16px 0',\n                    fontSize: '14px',\n                    fontWeight: 600,\n                    color: '#ef4444',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px'\n                  }}>\n                    <XCircle size={18} />\n                    Failed to Publish ({publishResults.failed.length})\n                  </h3>\n                  <div style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: '12px'\n                  }}>\n                    {publishResults.failed.map((obj, index) => (\n                      <div key={index} style={{\n                        padding: '16px',\n                        backgroundColor: '#fef2f2',\n                        border: '1px solid #fecaca',\n                        borderRadius: '8px'\n                      }}>\n                        <div style={{\n                          fontWeight: 600,\n                          color: '#002329',\n                          marginBottom: '8px'\n                        }}>\n                          {obj.type}: \"{obj.name}\"\n                        </div>\n                        <div style={{\n                          fontSize: '13px',\n                          color: '#ef4444',\n                          marginTop: '8px'\n                        }}>\n                          Error: {obj.error}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Modal Footer */}\n            <div style={{\n              padding: '16px 24px',\n              borderTop: '1px solid #e2e8f0',\n              display: 'flex',\n              justifyContent: 'flex-end',\n              gap: '12px',\n              flexShrink: 0\n            }}>\n              <button\n                onClick={() => {\n                  setShowPublishResultsModal(false);\n                  if (publishResults.failed.length === 0) {\n                    setTimeout(() => {\n                      navigate('/dashboard');\n                    }, 500);\n                  }\n                }}\n                style={{\n                  padding: '6px 12px',\n                  backgroundColor: '#08979C',\n                  color: '#ffffff',\n                  border: 'none',\n                  borderRadius: '6px',\n                  fontSize: '14px',\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  fontFamily: 'Poppins',\n                  transition: 'background-color 0.2s'\n                }}\n                onMouseEnter={(e) => e.target.style.backgroundColor = '#067a7f'}\n                onMouseLeave={(e) => e.target.style.backgroundColor = '#08979C'}\n              >\n                {publishResults.failed.length === 0 ? 'Continue' : 'Close'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProjectPageSetup;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}