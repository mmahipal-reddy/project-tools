{"ast":null,"code":"import _objectSpread from\"/Users/mmoola/Documents/GitHub/project-tools/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Custom hook for field mappings state management\nimport{useState,useEffect,useCallback}from'react';import{DEFAULT_FIELD_MAPPING}from'../constants';import{getMappingStatus,getMappingSummary,createNewMapping}from'../utils/mappingUtils';export const useFieldMappings=(fields,sourceFields)=>{const[fieldMappings,setFieldMappings]=useState([createNewMapping()]);const[selectedMappingId,setSelectedMappingId]=useState(null);const[useHybridView,setUseHybridView]=useState(false);// Initialize selected mapping when mappings change\nuseEffect(()=>{if(fieldMappings.length>0&&useHybridView){if(!selectedMappingId||!fieldMappings.find(m=>m.id===selectedMappingId)){setSelectedMappingId(fieldMappings[0].id);}}},[fieldMappings,useHybridView,selectedMappingId]);// Add new mapping\nconst addMapping=useCallback(()=>{const newMapping=createNewMapping();setFieldMappings(prev=>[...prev,newMapping]);if(useHybridView){setSelectedMappingId(newMapping.id);}},[useHybridView]);// Remove mapping\nconst removeMapping=useCallback(mappingId=>{setFieldMappings(prev=>{const filtered=prev.filter(m=>m.id!==mappingId);if(filtered.length===0){return[createNewMapping()];}return filtered;});if(selectedMappingId===mappingId){const remaining=fieldMappings.filter(m=>m.id!==mappingId);setSelectedMappingId(remaining.length>0?remaining[0].id:null);}},[selectedMappingId,fieldMappings]);// Update mapping\nconst updateMapping=useCallback((mappingId,updates)=>{setFieldMappings(prev=>prev.map(m=>m.id===mappingId?_objectSpread(_objectSpread({},m),updates):m));},[]);// Get mapping status\nconst getStatus=useCallback(mapping=>{return getMappingStatus(mapping);},[]);// Get mapping summary\nconst getSummary=useCallback(mapping=>{return getMappingSummary(mapping,fields,sourceFields);},[fields,sourceFields]);return{fieldMappings,setFieldMappings,selectedMappingId,setSelectedMappingId,useHybridView,setUseHybridView,addMapping,removeMapping,updateMapping,getStatus,getSummary};};","map":{"version":3,"names":["useState","useEffect","useCallback","DEFAULT_FIELD_MAPPING","getMappingStatus","getMappingSummary","createNewMapping","useFieldMappings","fields","sourceFields","fieldMappings","setFieldMappings","selectedMappingId","setSelectedMappingId","useHybridView","setUseHybridView","length","find","m","id","addMapping","newMapping","prev","removeMapping","mappingId","filtered","filter","remaining","updateMapping","updates","map","_objectSpread","getStatus","mapping","getSummary"],"sources":["/Users/mmoola/Documents/GitHub/project-tools/client/src/pages/UpdateObjectFields/hooks/useFieldMappings.js"],"sourcesContent":["// Custom hook for field mappings state management\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { DEFAULT_FIELD_MAPPING } from '../constants';\nimport { getMappingStatus, getMappingSummary, createNewMapping } from '../utils/mappingUtils';\n\nexport const useFieldMappings = (fields, sourceFields) => {\n  const [fieldMappings, setFieldMappings] = useState([createNewMapping()]);\n  const [selectedMappingId, setSelectedMappingId] = useState(null);\n  const [useHybridView, setUseHybridView] = useState(false);\n\n  // Initialize selected mapping when mappings change\n  useEffect(() => {\n    if (fieldMappings.length > 0 && useHybridView) {\n      if (!selectedMappingId || !fieldMappings.find(m => m.id === selectedMappingId)) {\n        setSelectedMappingId(fieldMappings[0].id);\n      }\n    }\n  }, [fieldMappings, useHybridView, selectedMappingId]);\n\n  // Add new mapping\n  const addMapping = useCallback(() => {\n    const newMapping = createNewMapping();\n    setFieldMappings(prev => [...prev, newMapping]);\n    if (useHybridView) {\n      setSelectedMappingId(newMapping.id);\n    }\n  }, [useHybridView]);\n\n  // Remove mapping\n  const removeMapping = useCallback((mappingId) => {\n    setFieldMappings(prev => {\n      const filtered = prev.filter(m => m.id !== mappingId);\n      if (filtered.length === 0) {\n        return [createNewMapping()];\n      }\n      return filtered;\n    });\n    if (selectedMappingId === mappingId) {\n      const remaining = fieldMappings.filter(m => m.id !== mappingId);\n      setSelectedMappingId(remaining.length > 0 ? remaining[0].id : null);\n    }\n  }, [selectedMappingId, fieldMappings]);\n\n  // Update mapping\n  const updateMapping = useCallback((mappingId, updates) => {\n    setFieldMappings(prev => prev.map(m => \n      m.id === mappingId ? { ...m, ...updates } : m\n    ));\n  }, []);\n\n  // Get mapping status\n  const getStatus = useCallback((mapping) => {\n    return getMappingStatus(mapping);\n  }, []);\n\n  // Get mapping summary\n  const getSummary = useCallback((mapping) => {\n    return getMappingSummary(mapping, fields, sourceFields);\n  }, [fields, sourceFields]);\n\n  return {\n    fieldMappings,\n    setFieldMappings,\n    selectedMappingId,\n    setSelectedMappingId,\n    useHybridView,\n    setUseHybridView,\n    addMapping,\n    removeMapping,\n    updateMapping,\n    getStatus,\n    getSummary\n  };\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}